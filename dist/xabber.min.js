/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.5 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */

/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */

//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

//! moment.js
//! version : 2.18.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
    This program is distributed under the terms of the MIT license.
    Please see the LICENSE file for details.

    Copyright 2006-2008, OGG, LLC
*/

/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS PUB 180-1
 * Version 2.1a Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

/*
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */

/*
  Copyright 2010, François de Metz <francois@2metz.fr>
*/

/*
* Based on Ping Strophejs plugins (https://github.com/metajack/strophejs-plugins/tree/master/ping)
* This plugin is distributed under the terms of the MIT licence.
* Please see the LICENCE file for details.
*
* Copyright (c) Markus Kohlhase, 2010
* Refactored by Pavel Lang, 2011
* AMD Support added by Thierry
*/

/*!
 * Materialize v0.97.6 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */

/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */

/*! Note that this has been modified by Materialize to confirm that Velocity is not already being imported. */

/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */

/**
 * Extend jquery with a scrollspy plugin.
 * This watches the window scroll and fires events when elements are scrolled into viewport.
 *
 * throttle() and getTime() taken from Underscore.js
 * https://github.com/jashkenas/underscore
 *
 * @author Copyright 2013 John Smart
 * @license https://raw.github.com/thesmart/jquery-scrollspy/master/LICENSE
 * @see https://github.com/thesmart
 * @version 0.1.2
 */

/**
	 * Get time in ms
   * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @type {function}
	 * @return {number}
	 */

/**
	 * Returns a function, that, when invoked, will only be triggered at most once
	 * during a given window of time. Normally, the throttled function will run
	 * as much as it can, without ever going more than once per `wait` duration;
	 * but if you'd like to disable the execution on the leading edge, pass
	 * `{leading: false}`. To disable execution on the trailing edge, ditto.
	 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @param {function} func
	 * @param {number} wait
	 * @param {Object=} options
	 * @returns {Function}
	 */

/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

var requirejs,require,define;!function(global,setTimeout){function commentReplace(t,e){return e||""}function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n>-1&&(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(t,e,n,i){return e&&eachProp(e,function(e,s){!n&&hasProp(t,s)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?t[s]=e:(t[s]||(t[s]={}),mixin(t[s],e,n,i)))}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,i){var s=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return s.requireType=t,s.requireModules=i,n&&(s.originalError=n),s}function newContext(t){function e(t){var e,n;for(e=0;e<t.length;e++)if("."===(n=t[e]))t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function n(t,n,i){var s,a,o,r,c,l,d,u,h,p,f,m=n&&n.split("/"),g=S.map,v=g&&g["*"];if(t&&(t=t.split("/"),l=t.length-1,S.nodeIdCompat&&jsSuffixRegExp.test(t[l])&&(t[l]=t[l].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&m&&(f=m.slice(0,m.length-1),t=f.concat(t)),e(t),t=t.join("/")),i&&g&&(m||v)){a=t.split("/");t:for(o=a.length;o>0;o-=1){if(c=a.slice(0,o).join("/"),m)for(r=m.length;r>0;r-=1)if((s=getOwn(g,m.slice(0,r).join("/")))&&(s=getOwn(s,c))){d=s,u=o;break t}!h&&v&&getOwn(v,c)&&(h=getOwn(v,c),p=o)}!d&&h&&(d=h,u=p),d&&(a.splice(0,u,d),t=a.join("/"))}return getOwn(S.pkgs,t)||t}function i(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===_.contextName)return e.parentNode.removeChild(e),!0})}function s(t){var e=getOwn(S.paths,t);if(e&&isArray(e)&&e.length>1)return e.shift(),_.require.undef(t),_.makeRequire(null,{skipMap:!0})([t]),!0}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function o(t,e,i,s){var o,r,c,l,d=null,u=e?e.name:null,h=t,p=!0,f="";return t||(p=!1,t="_@r"+(O+=1)),l=a(t),d=l[0],t=l[1],d&&(d=n(d,u,s),r=getOwn(E,d)),t&&(d?f=i?t:r&&r.normalize?r.normalize(t,function(t){return n(t,u,s)}):-1===t.indexOf("!")?n(t,u,s):t:(f=n(t,u,s),l=a(f),d=l[0],f=l[1],i=!0,o=_.nameToUrl(f))),c=!d||r||i?"":"_unnormalized"+(I+=1),{prefix:d,name:f,parentMap:e,unnormalized:!!c,url:o,originalName:h,isDefine:p,id:(d?d+"!"+f:f)+c}}function r(t){var e=t.id,n=getOwn(C,e);return n||(n=C[e]=new _.Module(t)),n}function c(t,e,n){var i=t.id,s=getOwn(C,i);!hasProp(E,i)||s&&!s.defineEmitComplete?(s=r(t),s.error&&"error"===e?n(s.error):s.on(e,n)):"defined"===e&&n(E[i])}function l(t,e){var n=t.requireModules,i=!1;e?e(t):(each(n,function(e){var n=getOwn(C,e);n&&(n.error=t,n.events.error&&(i=!0,n.emit("error",t)))}),i||req.onError(t))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(_.defQueueMap[e]=!0),A.push(t)}),globalDefQueue=[])}function u(t){delete C[t],delete k[t]}function h(t,e,n){var i=t.map.id;t.error?t.emit("error",t.error):(e[i]=!0,each(t.depMaps,function(i,s){var a=i.id,o=getOwn(C,a);!o||t.depMatched[s]||n[a]||(getOwn(e,a)?(t.defineDep(s,E[a]),t.check()):h(o,e,n))}),n[i]=!0)}function p(){var t,e,n=1e3*S.waitSeconds,a=n&&_.startTime+n<(new Date).getTime(),o=[],r=[],c=!1,d=!0;if(!b){if(b=!0,eachProp(k,function(t){var n=t.map,l=n.id;if(t.enabled&&(n.isDefine||r.push(t),!t.error))if(!t.inited&&a)s(l)?(e=!0,c=!0):(o.push(l),i(l));else if(!t.inited&&t.fetched&&n.isDefine&&(c=!0,!n.prefix))return d=!1}),a&&o.length)return t=makeError("timeout","Load timeout for modules: "+o,null,o),t.contextName=_.contextName,l(t);d&&each(r,function(t){h(t,{},{})}),a&&!e||!c||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),b=!1}}function f(t){hasProp(E,t[0])||r(o(t[0],null,!0)).init(t[1],t[2])}function m(t,e,n,i){t.detachEvent&&!isOpera?i&&t.detachEvent(i,e):t.removeEventListener(n,e,!1)}function g(t){var e=t.currentTarget||t.srcElement;return m(e,_.onScriptLoad,"load","onreadystatechange"),m(e,_.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function v(){var t;for(d();A.length;){if(t=A.shift(),null===t[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));f(t)}_.defQueueMap={}}var b,y,_,w,x,S={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},k={},T={},A=[],E={},M={},N={},O=1,I=1;return w={require:function(t){return t.require?t.require:t.require=_.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?E[t.map.id]=t.exports:t.exports=E[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(S.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},y=function(t){this.events=getOwn(T,t.id)||{},this.map=t,this.shim=getOwn(S.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(t,e,n,i){i=i||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();_.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;M[t]||(M[t]=!0,_.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,i=this.depExports,s=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=_.execCb(n,a,i,s)}catch(e){t=e}else s=_.execCb(n,a,i,s);if(this.map.isDefine&&void 0===s&&(e=this.module,e?s=e.exports:this.usingExports&&(s=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",l(this.error=t)}else s=a;if(this.exports=s,this.map.isDefine&&!this.ignore&&(E[n]=s,req.onResourceLoad)){var o=[];each(this.depMaps,function(t){o.push(t.normalizedMap||t)}),req.onResourceLoad(_,this.map,o)}u(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,i=o(t.prefix);this.depMaps.push(i),c(i,"defined",bind(this,function(i){var s,a,d,h=getOwn(N,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=_.makeRequire(t.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(t){return n(t,f,!0)})||""),a=o(t.prefix+"!"+p,this.map.parentMap,!0),c(a,"defined",bind(this,function(t){this.map.normalizedMap=a,this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),void((d=getOwn(C,a.id))&&(this.depMaps.push(a),this.events.error&&d.on("error",bind(this,function(t){this.emit("error",t)})),d.enable()))):h?(this.map.url=_.nameToUrl(h),void this.load()):(s=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),s.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(C,function(t){0===t.map.id.indexOf(e+"_unnormalized")&&u(t.map.id)}),l(t)}),s.fromText=bind(this,function(n,i){var a=t.name,c=o(a),d=useInteractive;i&&(n=i),d&&(useInteractive=!1),r(c),hasProp(S.config,e)&&(S.config[a]=S.config[e]);try{req.exec(n)}catch(t){return l(makeError("fromtexteval","fromText eval for "+e+" failed: "+t,t,[e]))}d&&(useInteractive=!0),this.depMaps.push(c),_.completeLoad(a),m([a],s)}),void i.load(t.name,m,s,S))})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,i,s;if("string"==typeof t){if(t=o(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,s=getOwn(w,t.id))return void(this.depExports[e]=s(this));this.depCount+=1,c(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?c(t,"error",bind(this,this.errback)):this.events.error&&c(t,"error",bind(this,function(t){this.emit("error",t)}))}n=t.id,i=C[n],hasProp(w,n)||!i||i.enabled||_.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(C,t.id);e&&!e.enabled&&_.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},_={config:S,contextName:t,registry:C,defined:E,urlFetched:M,defQueue:A,defQueueMap:{},Module:y,makeModuleMap:o,nextTick:req.nextTick,onError:l,configure:function(t){if(t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs){var e=t.urlArgs;t.urlArgs=function(t,n){return(-1===n.indexOf("?")?"?":"&")+e}}var n=S.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){i[e]?(S[e]||(S[e]={}),mixin(S[e],t,!0,!0)):S[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(N[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=_.makeShimExports(t)),n[e]=t}),S.shim=n),t.packages&&each(t.packages,function(t){var e,n;t="string"==typeof t?{name:t}:t,n=t.name,e=t.location,e&&(S.paths[n]=t.location),S.pkgs[n]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(t,e){t.inited||t.map.unnormalized||(t.map=o(e,null,!0))}),(t.deps||t.callback)&&_.require(t.deps||[],t.callback)},makeShimExports:function(t){function e(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}return e},makeRequire:function(e,s){function a(n,i,c){var d,u,h;return s.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?l(makeError("requireargs","Invalid require call"),c):e&&hasProp(w,n)?w[n](C[e.id]):req.get?req.get(_,n,e,a):(u=o(n,e,!1,!0),d=u.id,hasProp(E,d)?E[d]:l(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+t+(e?"":". Use require([])")))):(v(),_.nextTick(function(){v(),h=r(o(null,e)),h.skipMap=s.skipMap,h.init(n,i,c,{enabled:!0}),p()}),a)}return s=s||{},mixin(a,{isBrowser:isBrowser,toUrl:function(t){var i,s=t.lastIndexOf("."),a=t.split("/")[0],o="."===a||".."===a;return-1!==s&&(!o||s>1)&&(i=t.substring(s,t.length),t=t.substring(0,s)),_.nameToUrl(n(t,e&&e.id,!0),i,!0)},defined:function(t){return hasProp(E,o(t,e,!1,!0).id)},specified:function(t){return t=o(t,e,!1,!0).id,hasProp(E,t)||hasProp(C,t)}}),e||(a.undef=function(t){d();var n=o(t,e,!0),s=getOwn(C,t);s.undefed=!0,i(t),delete E[t],delete M[n.url],delete T[t],eachReverse(A,function(e,n){e[0]===t&&A.splice(n,1)}),delete _.defQueueMap[t],s&&(s.events.defined&&(T[t]=s.events),u(t))}),a},enable:function(t){getOwn(C,t.id)&&r(t).enable()},completeLoad:function(t){var e,n,i,a=getOwn(S.shim,t)||{},o=a.exports;for(d();A.length;){if(n=A.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);f(n)}if(_.defQueueMap={},i=getOwn(C,t),!e&&!hasProp(E,t)&&i&&!i.inited){if(!(!S.enforceDefine||o&&getGlobal(o)))return s(t)?void 0:l(makeError("nodefine","No define call for "+t,null,[t]));f([t,a.deps||[],a.exportsFn])}p()},nameToUrl:function(t,e,n){var i,s,a,o,r,c,l,d=getOwn(S.pkgs,t);if(d&&(t=d),l=getOwn(N,t))return _.nameToUrl(l,e,n);if(req.jsExtRegExp.test(t))r=t+(e||"");else{for(i=S.paths,s=t.split("/"),a=s.length;a>0;a-=1)if(o=s.slice(0,a).join("/"),c=getOwn(i,o)){isArray(c)&&(c=c[0]),s.splice(0,a,c);break}r=s.join("/"),r+=e||(/^data\:|^blob\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":S.baseUrl)+r}return S.urlArgs&&!/^blob\:/.test(r)?r+S.urlArgs(t,r):r},load:function(t,e){req.load(_,t,e)},execCb:function(t,e,n,i){return e.apply(i,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=g(t);_.completeLoad(e.id)}},onScriptError:function(t){var e=g(t);if(!s(e.id)){var n=[];return eachProp(C,function(t,i){0!==i.indexOf("_@r")&&each(t.depMaps,function(t){if(t.id===e.id)return n.push(i),!0})}),l(makeError("scripterror",'Script error for "'+e.id+(n.length?'", needed by: '+n.join(", "):'"'),t,[e.id]))}}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){if("interactive"===t.readyState)return interactiveScript=t}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,i){var s,a,o=defContextName;return isArray(t)||"string"==typeof t||(a=t,isArray(e)?(t=e,e=n,n=i):t=[]),a&&a.context&&(o=a.context),s=getOwn(contexts,o),s||(s=contexts[o]=req.s.newContext(o)),a&&s.configure(a),s.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick=void 0!==setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,n){var i=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=t.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(t,e,n){var i,s=t&&t.config||{};if(isBrowser)return i=req.createNode(s,e,n),i.setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",e),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=n,s.onNodeCreated&&s.onNodeCreated(i,s,e,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),t.completeLoad(e)}catch(i){t.onError(makeError("importscripts","importScripts failed for "+e+" at "+n,i,[e]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){if(head||(head=t.parentNode),dataMain=t.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(t,e,n){var i,s;"string"!=typeof t&&(n=e,e=t,t=null),isArray(e)||(n=e,e=null),!e&&isFunction(n)&&(e=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(t||(t=i.getAttribute("data-requiremodule")),s=contexts[i.getAttribute("data-requirecontext")]),s?(s.defQueue.push([t,e,n]),s.defQueueMap[t]=!0):globalDefQueue.push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("node_modules/requirejs/require.js",function(){}),function(){function t(t){function e(e,n,i,s,a,o){for(;a>=0&&a<o;a+=t){var r=s?s[a]:a;i=n(i,e[r],r,e)}return i}return function(n,i,s,a){i=y(i,a,4);var o=!T(n)&&b.keys(n),r=(o||n).length,c=t>0?0:r-1;return arguments.length<3&&(s=n[o?o[c]:c],c+=t),e(n,i,s,o,c,r)}}function e(t){return function(e,n,i){n=_(n,i);for(var s=k(e),a=t>0?0:s-1;a>=0&&a<s;a+=t)if(n(e[a],a,e))return a;return-1}}function n(t,e,n){return function(i,s,a){var o=0,r=k(i);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+r,o):r=a>=0?Math.min(a+1,r):a+r+1;else if(n&&a&&r)return a=n(i,s),i[a]===s?a:-1;if(s!==s)return a=e(d.call(i,o,r),b.isNaN),a>=0?a+o:-1;for(a=t>0?o:r-1;a>=0&&a<r;a+=t)if(i[a]===s)return a;return-1}}function i(t,e){var n=O.length,i=t.constructor,s=b.isFunction(i)&&i.prototype||r,a="constructor";for(b.has(t,a)&&!b.contains(e,a)&&e.push(a);n--;)(a=O[n])in t&&t[a]!==s[a]&&!b.contains(e,a)&&e.push(a)}var s=this,a=s._,o=Array.prototype,r=Object.prototype,c=Function.prototype,l=o.push,d=o.slice,u=r.toString,h=r.hasOwnProperty,p=Array.isArray,f=Object.keys,m=c.bind,g=Object.create,v=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):s._=b,b.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)};case 4:return function(n,i,s,a){return t.call(e,n,i,s,a)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?b.identity:b.isFunction(t)?y(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return _(t,e,1/0)};var w=function(t,e){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var s=1;s<i;s++)for(var a=arguments[s],o=t(a),r=o.length,c=0;c<r;c++){var l=o[c];e&&void 0!==n[l]||(n[l]=a[l])}return n}},x=function(t){if(!b.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,k=S("length"),T=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=C};b.each=b.forEach=function(t,e,n){e=y(e,n);var i,s;if(T(t))for(i=0,s=t.length;i<s;i++)e(t[i],i,t);else{var a=b.keys(t);for(i=0,s=a.length;i<s;i++)e(t[a[i]],a[i],t)}return t},b.map=b.collect=function(t,e,n){e=_(e,n);for(var i=!T(t)&&b.keys(t),s=(i||t).length,a=Array(s),o=0;o<s;o++){var r=i?i[o]:o;a[o]=e(t[r],r,t)}return a},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var i;if(void 0!==(i=T(t)?b.findIndex(t,e,n):b.findKey(t,e,n))&&-1!==i)return t[i]},b.filter=b.select=function(t,e,n){var i=[];return e=_(e,n),b.each(t,function(t,n,s){e(t,n,s)&&i.push(t)}),i},b.reject=function(t,e,n){return b.filter(t,b.negate(_(e)),n)},b.every=b.all=function(t,e,n){e=_(e,n);for(var i=!T(t)&&b.keys(t),s=(i||t).length,a=0;a<s;a++){var o=i?i[a]:a;if(!e(t[o],o,t))return!1}return!0},b.some=b.any=function(t,e,n){e=_(e,n);for(var i=!T(t)&&b.keys(t),s=(i||t).length,a=0;a<s;a++){var o=i?i[a]:a;if(e(t[o],o,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,i){return T(t)||(t=b.values(t)),("number"!=typeof n||i)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=d.call(arguments,2),i=b.isFunction(e);return b.map(t,function(t){var s=i?e:t[e];return null==s?s:s.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var i,s,a=-1/0,o=-1/0;if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var r=0,c=t.length;r<c;r++)(i=t[r])>a&&(a=i)}else e=_(e,n),b.each(t,function(t,n,i){((s=e(t,n,i))>o||s===-1/0&&a===-1/0)&&(a=t,o=s)});return a},b.min=function(t,e,n){var i,s,a=1/0,o=1/0;if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var r=0,c=t.length;r<c;r++)(i=t[r])<a&&(a=i)}else e=_(e,n),b.each(t,function(t,n,i){((s=e(t,n,i))<o||s===1/0&&a===1/0)&&(a=t,o=s)});return a},b.shuffle=function(t){for(var e,n=T(t)?t:b.values(t),i=n.length,s=Array(i),a=0;a<i;a++)e=b.random(0,a),e!==a&&(s[a]=s[e]),s[e]=n[a];return s},b.sample=function(t,e,n){return null==e||n?(T(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=_(e,n),b.pluck(b.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,i){var s={};return n=_(n,i),b.each(e,function(i,a){var o=n(i,a,e);t(s,i,o)}),s}};b.groupBy=A(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=A(function(t,e,n){t[n]=e}),b.countBy=A(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?d.call(t):T(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:T(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=_(e,n);var i=[],s=[];return b.each(t,function(t,n,a){(e(t,n,a)?i:s).push(t)}),[i,s]},b.first=b.head=b.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var E=function(t,e,n,i){for(var s=[],a=0,o=i||0,r=k(t);o<r;o++){var c=t[o];if(T(c)&&(b.isArray(c)||b.isArguments(c))){e||(c=E(c,e,n));var l=0,d=c.length;for(s.length+=d;l<d;)s[a++]=c[l++]}else n||(s[a++]=c)}return s};b.flatten=function(t,e){return E(t,e,!1)},b.without=function(t){return b.difference(t,d.call(arguments,1))},b.uniq=b.unique=function(t,e,n,i){b.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=_(n,i));for(var s=[],a=[],o=0,r=k(t);o<r;o++){var c=t[o],l=n?n(c,o,t):c;e?(o&&a===l||s.push(c),a=l):n?b.contains(a,l)||(a.push(l),s.push(c)):b.contains(s,c)||s.push(c)}return s},b.union=function(){return b.uniq(E(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,i=0,s=k(t);i<s;i++){var a=t[i];if(!b.contains(e,a)){for(var o=1;o<n&&b.contains(arguments[o],a);o++);o===n&&e.push(a)}}return e},b.difference=function(t){var e=E(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,k).length||0,n=Array(e),i=0;i<e;i++)n[i]=b.pluck(t,i);return n},b.object=function(t,e){for(var n={},i=0,s=k(t);i<s;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},b.findIndex=e(1),b.findLastIndex=e(-1),b.sortedIndex=function(t,e,n,i){n=_(n,i,1);for(var s=n(e),a=0,o=k(t);a<o;){var r=Math.floor((a+o)/2);n(t[r])<s?a=r+1:o=r}return a},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=Array(i),a=0;a<i;a++,t+=n)s[a]=t;return s};var M=function(t,e,n,i,s){if(!(i instanceof e))return t.apply(n,s);var a=x(t.prototype),o=t.apply(a,s);return b.isObject(o)?o:a};b.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,d.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return M(t,i,e,this,n.concat(d.call(arguments)))};return i},b.partial=function(t){var e=d.call(arguments,1),n=function(){for(var i=0,s=e.length,a=Array(s),o=0;o<s;o++)a[o]=e[o]===b?arguments[i++]:e[o];for(;i<arguments.length;)a.push(arguments[i++]);return M(t,n,this,this,a)};return n},b.bindAll=function(t){var e,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(e=1;e<i;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(i){var s=n.cache,a=""+(e?e.apply(this,arguments):i);return b.has(s,a)||(s[a]=t.apply(this,arguments)),s[a]};return n.cache={},n},b.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var i,s,a,o=null,r=0;n||(n={});var c=function(){r=!1===n.leading?0:b.now(),o=null,a=t.apply(i,s),o||(i=s=null)};return function(){var l=b.now();r||!1!==n.leading||(r=l);var d=e-(l-r);return i=this,s=arguments,d<=0||d>e?(o&&(clearTimeout(o),o=null),r=l,a=t.apply(i,s),o||(i=s=null)):o||!1===n.trailing||(o=setTimeout(c,d)),a}},b.debounce=function(t,e,n){var i,s,a,o,r,c=function(){var l=b.now()-o;l<e&&l>=0?i=setTimeout(c,e-l):(i=null,n||(r=t.apply(a,s),i||(a=s=null)))};return function(){a=this,s=arguments,o=b.now();var l=n&&!i;return i||(i=setTimeout(c,e)),l&&(r=t.apply(a,s),a=s=null),r}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},b.once=b.partial(b.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return N&&i(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&i(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=t[e[s]];return i},b.mapObject=function(t,e,n){e=_(e,n);for(var i,s=b.keys(t),a=s.length,o={},r=0;r<a;r++)i=s[r],o[i]=e(t[i],i,t);return o},b.pairs=function(t){for(var e=b.keys(t),n=e.length,i=Array(n),s=0;s<n;s++)i[s]=[e[s],t[e[s]]];return i},b.invert=function(t){for(var e={},n=b.keys(t),i=0,s=n.length;i<s;i++)e[t[n[i]]]=n[i];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=w(b.allKeys),b.extendOwn=b.assign=w(b.keys),b.findKey=function(t,e,n){e=_(e,n);for(var i,s=b.keys(t),a=0,o=s.length;a<o;a++)if(i=s[a],e(t[i],i,t))return i},b.pick=function(t,e,n){var i,s,a={},o=t;if(null==o)return a;b.isFunction(e)?(s=b.allKeys(o),i=y(e,n)):(s=E(arguments,!1,!1,1),i=function(t,e,n){return e in n},o=Object(o));for(var r=0,c=s.length;r<c;r++){var l=s[r],d=o[l];i(d,l,o)&&(a[l]=d)}return a},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var i=b.map(E(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(i,e)}}return b.pick(t,e,n)},b.defaults=w(b.allKeys,!0),b.create=function(t,e){var n=x(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),i=n.length;if(null==t)return!i;for(var s=Object(t),a=0;a<i;a++){var o=n[a];if(e[o]!==s[o]||!(o in s))return!1}return!0};var I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var s=u.call(t);if(s!==u.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,r=e.constructor;if(o!==r&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(r)&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!I(t[c],e[c],n,i))return!1}else{var l,d=b.keys(t);if(c=d.length,b.keys(e).length!==c)return!1;for(;c--;)if(l=d[c],!b.has(e,l)||!I(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(t,e){return I(t,e)},b.isEmpty=function(t){return null==t||(T(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=p||function(t){return"[object Array]"===u.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&h.call(t,e)},b.noConflict=function(){return s._=a,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=S,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var i=Array(Math.max(0,t));e=y(e,n,1);for(var s=0;s<t;s++)i[s]=e(s);return i},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=b.invert(D),L=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",i=RegExp(n),s=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(s,e):t}};b.escape=L(D),b.unescape=L(R),b.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),b.isFunction(i)?i.call(t):i};var P=0;b.uniqueId=function(t){var e=++P+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,j={"'":"'","\\":"\\",
"\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,q=function(t){return"\\"+j[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var i=RegExp([(e.escape||$).source,(e.interpolate||$).source,(e.evaluate||$).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(i,function(e,n,i,o,r){return a+=t.slice(s,r).replace(H,q),s=r+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var r=function(t){return o.call(this,t,b)};return r.source="function("+(e.variable||"obj")+"){\n"+a+"}",r},b.chain=function(t){var e=b(t);return e._chain=!0,e};var F=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),F(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],F(this,n)}}),b.each(["concat","join","slice"],function(t){var e=o[t];b.prototype[t]=function(){return F(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e,n){e=e||ot;var i,s=e.createElement("script");if(s.text=t,n)for(i in _t)n[i]&&(s[i]=n[i]);e.head.appendChild(s).parentNode.removeChild(s)}function i(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ht[pt.call(t)]||"object":typeof t}function s(t){var e=!!t&&"length"in t&&t.length,n=i(t);return!bt(t)&&!yt(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function o(t,e,n){return bt(e)?wt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?wt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?wt.grep(t,function(t){return ut.call(e,t)>-1!==n}):wt.filter(e,t,n)}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var e={};return wt.each(t.match(It)||[],function(t,n){e[n]=!0}),e}function l(t){return t}function d(t){throw t}function u(t,e,n,i){var s;try{t&&bt(s=t.promise)?s.call(t).done(e).fail(n):t&&bt(s=t.then)?s.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function h(){ot.removeEventListener("DOMContentLoaded",h),t.removeEventListener("load",h),wt.ready()}function p(t,e){return e.toUpperCase()}function f(t){return t.replace(Pt,"ms-").replace($t,p)}function m(){this.expando=wt.expando+m.uid++}function g(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Ft.test(t)?JSON.parse(t):t)}function v(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Bt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=g(n)}catch(t){}qt.set(t,e,n)}else n=void 0;return n}function b(t,e,n,i){var s,a,o=20,r=i?function(){return i.cur()}:function(){return wt.css(t,e,"")},c=r(),l=n&&n[3]||(wt.cssNumber[e]?"":"px"),d=(wt.cssNumber[e]||"px"!==l&&+c)&&zt.exec(wt.css(t,e));if(d&&d[3]!==l){for(c/=2,l=l||d[3],d=+c||1;o--;)wt.style(t,e,d+l),(1-a)*(1-(a=r()/c||.5))<=0&&(o=0),d/=a;d*=2,wt.style(t,e,d+l),n=n||[]}return n&&(d=+d||+c||0,s=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=d,i.end=s)),s}function y(t){var e,n=t.ownerDocument,i=t.nodeName,s=Xt[i];return s||(e=n.body.appendChild(n.createElement(i)),s=wt.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),Xt[i]=s,s)}function _(t,e){for(var n,i,s=[],a=0,o=t.length;a<o;a++)i=t[a],i.style&&(n=i.style.display,e?("none"===n&&(s[a]=Ht.get(i,"display")||null,s[a]||(i.style.display="")),""===i.style.display&&Yt(i)&&(s[a]=y(i))):"none"!==n&&(s[a]="none",Ht.set(i,"display",n)));for(a=0;a<o;a++)null!=s[a]&&(t[a].style.display=s[a]);return t}function w(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&a(t,e)?wt.merge([t],n):n}function x(t,e){for(var n=0,i=t.length;n<i;n++)Ht.set(t[n],"globalEval",!e||Ht.get(e[n],"globalEval"))}function S(t,e,n,s,a){for(var o,r,c,l,d,u,h=e.createDocumentFragment(),p=[],f=0,m=t.length;f<m;f++)if((o=t[f])||0===o)if("object"===i(o))wt.merge(p,o.nodeType?[o]:o);else if(Kt.test(o)){for(r=r||h.appendChild(e.createElement("div")),c=(Qt.exec(o)||["",""])[1].toLowerCase(),l=Zt[c]||Zt._default,r.innerHTML=l[1]+wt.htmlPrefilter(o)+l[2],u=l[0];u--;)r=r.lastChild;wt.merge(p,r.childNodes),r=h.firstChild,r.textContent=""}else p.push(e.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(s&&wt.inArray(o,s)>-1)a&&a.push(o);else if(d=wt.contains(o.ownerDocument,o),r=w(h.appendChild(o),"script"),d&&x(r),n)for(u=0;o=r[u++];)Jt.test(o.type||"")&&n.push(o);return h}function C(){return!0}function k(){return!1}function T(){try{return ot.activeElement}catch(t){}}function A(t,e,n,i,s,a){var o,r;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(r in e)A(t,r,n,i,e[r],a);return t}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),!1===s)s=k;else if(!s)return t;return 1===a&&(o=s,s=function(t){return wt().off(t),o.apply(this,arguments)},s.guid=o.guid||(o.guid=wt.guid++)),t.each(function(){wt.event.add(this,e,s,i,n)})}function E(t,e){return a(t,"table")&&a(11!==e.nodeType?e:e.firstChild,"tr")?wt(t).children("tbody")[0]||t:t}function M(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function N(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function O(t,e){var n,i,s,a,o,r,c,l;if(1===e.nodeType){if(Ht.hasData(t)&&(a=Ht.access(t),o=Ht.set(e,a),l=a.events)){delete o.handle,o.events={};for(s in l)for(n=0,i=l[s].length;n<i;n++)wt.event.add(e,s,l[s][n])}qt.hasData(t)&&(r=qt.access(t),c=wt.extend({},r),qt.set(e,c))}}function I(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function D(t,e,i,s){e=lt.apply([],e);var a,o,r,c,l,d,u=0,h=t.length,p=h-1,f=e[0],m=bt(f);if(m||h>1&&"string"==typeof f&&!vt.checkClone&&oe.test(f))return t.each(function(n){var a=t.eq(n);m&&(e[0]=f.call(this,n,a.html())),D(a,e,i,s)});if(h&&(a=S(e,t[0].ownerDocument,!1,t,s),o=a.firstChild,1===a.childNodes.length&&(a=o),o||s)){for(r=wt.map(w(a,"script"),M),c=r.length;u<h;u++)l=a,u!==p&&(l=wt.clone(l,!0,!0),c&&wt.merge(r,w(l,"script"))),i.call(t[u],l,u);if(c)for(d=r[r.length-1].ownerDocument,wt.map(r,N),u=0;u<c;u++)l=r[u],Jt.test(l.type||"")&&!Ht.access(l,"globalEval")&&wt.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?wt._evalUrl&&wt._evalUrl(l.src):n(l.textContent.replace(re,""),d,l))}return t}function R(t,e,n){for(var i,s=e?wt.filter(e,t):t,a=0;null!=(i=s[a]);a++)n||1!==i.nodeType||wt.cleanData(w(i)),i.parentNode&&(n&&wt.contains(i.ownerDocument,i)&&x(w(i,"script")),i.parentNode.removeChild(i));return t}function L(t,e,n){var i,s,a,o,r=t.style;return n=n||le(t),n&&(o=n.getPropertyValue(e)||n[e],""!==o||wt.contains(t.ownerDocument,t)||(o=wt.style(t,e)),!vt.pixelBoxStyles()&&ce.test(o)&&de.test(e)&&(i=r.width,s=r.minWidth,a=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=i,r.minWidth=s,r.maxWidth=a)),void 0!==o?o+"":o}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t){if(t in ge)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=me.length;n--;)if((t=me[n]+e)in ge)return t}function j(t){var e=wt.cssProps[t];return e||(e=wt.cssProps[t]=$(t)||t),e}function H(t,e,n){var i=zt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function q(t,e,n,i,s,a){var o="width"===e?1:0,r=0,c=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=wt.css(t,n+Wt[o],!0,s)),i?("content"===n&&(c-=wt.css(t,"padding"+Wt[o],!0,s)),"margin"!==n&&(c-=wt.css(t,"border"+Wt[o]+"Width",!0,s))):(c+=wt.css(t,"padding"+Wt[o],!0,s),"padding"!==n?c+=wt.css(t,"border"+Wt[o]+"Width",!0,s):r+=wt.css(t,"border"+Wt[o]+"Width",!0,s));return!i&&a>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-c-r-.5))),c}function F(t,e,n){var i=le(t),s=L(t,e,i),a="border-box"===wt.css(t,"boxSizing",!1,i),o=a;if(ce.test(s)){if(!n)return s;s="auto"}return o=o&&(vt.boxSizingReliable()||s===t.style[e]),("auto"===s||!parseFloat(s)&&"inline"===wt.css(t,"display",!1,i))&&(s=t["offset"+e[0].toUpperCase()+e.slice(1)],o=!0),(s=parseFloat(s)||0)+q(t,e,n||(a?"border":"content"),o,i,s)+"px"}function B(t,e,n,i,s){return new B.prototype.init(t,e,n,i,s)}function V(){be&&(!1===ot.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(V):t.setTimeout(V,wt.fx.interval),wt.fx.tick())}function z(){return t.setTimeout(function(){ve=void 0}),ve=Date.now()}function W(t,e){var n,i=0,s={height:t};for(e=e?1:0;i<4;i+=2-e)n=Wt[i],s["margin"+n]=s["padding"+n]=t;return e&&(s.opacity=s.width=t),s}function Y(t,e,n){for(var i,s=(G.tweeners[e]||[]).concat(G.tweeners["*"]),a=0,o=s.length;a<o;a++)if(i=s[a].call(n,e,t))return i}function U(t,e,n){var i,s,a,o,r,c,l,d,u="width"in e||"height"in e,h=this,p={},f=t.style,m=t.nodeType&&Yt(t),g=Ht.get(t,"fxshow");n.queue||(o=wt._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,wt.queue(t,"fx").length||o.empty.fire()})}));for(i in e)if(s=e[i],ye.test(s)){if(delete e[i],a=a||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||wt.style(t,i)}if((c=!wt.isEmptyObject(e))||!wt.isEmptyObject(p)){u&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=g&&g.display,null==l&&(l=Ht.get(t,"display")),d=wt.css(t,"display"),"none"===d&&(l?d=l:(_([t],!0),l=t.style.display||l,d=wt.css(t,"display"),_([t]))),("inline"===d||"inline-block"===d&&null!=l)&&"none"===wt.css(t,"float")&&(c||(h.done(function(){f.display=l}),null==l&&(d=f.display,l="none"===d?"":d)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),c=!1;for(i in p)c||(g?"hidden"in g&&(m=g.hidden):g=Ht.access(t,"fxshow",{display:l}),a&&(g.hidden=!m),m&&_([t],!0),h.done(function(){m||_([t]),Ht.remove(t,"fxshow");for(i in p)wt.style(t,i,p[i])})),c=Y(m?g[i]:0,i,h),i in g||(g[i]=c.start,m&&(c.end=c.start,c.start=0))}}function X(t,e){var n,i,s,a,o;for(n in t)if(i=f(n),s=e[i],a=t[n],Array.isArray(a)&&(s=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(o=wt.cssHooks[i])&&"expand"in o){a=o.expand(a),delete t[i];for(n in a)n in t||(t[n]=a[n],e[n]=s)}else e[i]=s}function G(t,e,n){var i,s,a=0,o=G.prefilters.length,r=wt.Deferred().always(function(){delete c.elem}),c=function(){if(s)return!1;for(var e=ve||z(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,a=1-i,o=0,c=l.tweens.length;o<c;o++)l.tweens[o].run(a);return r.notifyWith(t,[l,a,n]),a<1&&c?n:(c||r.notifyWith(t,[l,1,0]),r.resolveWith(t,[l]),!1)},l=r.promise({elem:t,props:wt.extend({},e),opts:wt.extend(!0,{specialEasing:{},easing:wt.easing._default},n),originalProperties:e,originalOptions:n,startTime:ve||z(),duration:n.duration,tweens:[],createTween:function(e,n){var i=wt.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)l.tweens[n].run(1);return e?(r.notifyWith(t,[l,1,0]),r.resolveWith(t,[l,e])):r.rejectWith(t,[l,e]),this}}),d=l.props;for(X(d,l.opts.specialEasing);a<o;a++)if(i=G.prefilters[a].call(l,t,d,l.opts))return bt(i.stop)&&(wt._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return wt.map(d,Y,l),bt(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),wt.fx.timer(wt.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}function Q(t){return(t.match(It)||[]).join(" ")}function J(t){return t.getAttribute&&t.getAttribute("class")||""}function Z(t){return Array.isArray(t)?t:"string"==typeof t?t.match(It)||[]:[]}function K(t,e,n,s){var a;if(Array.isArray(e))wt.each(e,function(e,i){n||Oe.test(t)?s(t,i):K(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,s)});else if(n||"object"!==i(e))s(t,e);else for(a in e)K(t+"["+a+"]",e[a],n,s)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,a=e.toLowerCase().match(It)||[];if(bt(n))for(;i=a[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function et(t,e,n,i){function s(r){var c;return a[r]=!0,wt.each(t[r]||[],function(t,r){var l=r(e,n,i);return"string"!=typeof l||o||a[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),s(l),!1)}),c}var a={},o=t===Ve;return s(e.dataTypes[0])||!a["*"]&&s("*")}function nt(t,e){var n,i,s=wt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&wt.extend(!0,t,i),t}function it(t,e,n){for(var i,s,a,o,r=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in r)if(r[s]&&r[s].test(i)){c.unshift(s);break}if(c[0]in n)a=c[0];else{for(s in n){if(!c[0]||t.converters[s+" "+c[0]]){a=s;break}o||(o=s)}a=a||o}if(a)return a!==c[0]&&c.unshift(a),n[a]}function st(t,e,n,i){var s,a,o,r,c,l={},d=t.dataTypes.slice();if(d[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(a=d.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=a,a=d.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(o=l[c+" "+a]||l["* "+a]))for(s in l)if(r=s.split(" "),r[1]===a&&(o=l[c+" "+r[0]]||l["* "+r[0]])){!0===o?o=l[s]:!0!==l[s]&&(a=r[0],d.unshift(r[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+a}}}return{state:"success",data:e}}var at=[],ot=t.document,rt=Object.getPrototypeOf,ct=at.slice,lt=at.concat,dt=at.push,ut=at.indexOf,ht={},pt=ht.toString,ft=ht.hasOwnProperty,mt=ft.toString,gt=mt.call(Object),vt={},bt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},yt=function(t){return null!=t&&t===t.window},_t={type:!0,src:!0,noModule:!0},wt=function(t,e){return new wt.fn.init(t,e)},xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;wt.fn=wt.prototype={jquery:"3.3.1",constructor:wt,length:0,toArray:function(){return ct.call(this)},get:function(t){return null==t?ct.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=wt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return wt.each(this,t)},map:function(t){return this.pushStack(wt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(ct.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:dt,sort:at.sort,splice:at.splice},wt.extend=wt.fn.extend=function(){var t,e,n,i,s,a,o=arguments[0]||{},r=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[r]||{},r++),"object"==typeof o||bt(o)||(o={}),r===c&&(o=this,r--);r<c;r++)if(null!=(t=arguments[r]))for(e in t)n=o[e],i=t[e],o!==i&&(l&&i&&(wt.isPlainObject(i)||(s=Array.isArray(i)))?(s?(s=!1,a=n&&Array.isArray(n)?n:[]):a=n&&wt.isPlainObject(n)?n:{},o[e]=wt.extend(l,a,i)):void 0!==i&&(o[e]=i));return o},wt.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=rt(t))||"function"==typeof(n=ft.call(e,"constructor")&&e.constructor)&&mt.call(n)===gt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){n(t)},each:function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(xt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?wt.merge(n,"string"==typeof t?[t]:t):dt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ut.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},grep:function(t,e,n){for(var i=[],s=0,a=t.length,o=!n;s<a;s++)!e(t[s],s)!==o&&i.push(t[s]);return i},map:function(t,e,n){var i,a,o=0,r=[];if(s(t))for(i=t.length;o<i;o++)null!=(a=e(t[o],o,n))&&r.push(a);else for(o in t)null!=(a=e(t[o],o,n))&&r.push(a);return lt.apply([],r)},guid:1,support:vt}),"function"==typeof Symbol&&(wt.fn[Symbol.iterator]=at[Symbol.iterator]),wt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ht["[object "+e+"]"]=e.toLowerCase()});var St=function(t){function e(t,e,n,i){var s,a,o,r,c,d,h,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!i&&((e?e.ownerDocument||e:H)!==O&&N(e),e=e||O,D)){if(11!==f&&(c=mt.exec(t)))if(s=c[1]){if(9===f){if(!(o=e.getElementById(s)))return n;if(o.id===s)return n.push(o),n}else if(p&&(o=p.getElementById(s))&&$(e,o)&&o.id===s)return n.push(o),n}else{if(c[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=c[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(_.qsa&&!z[t+" "]&&(!R||!R.test(t))){if(1!==f)p=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((r=e.getAttribute("id"))?r=r.replace(yt,_t):e.setAttribute("id",r=j),d=C(t),a=d.length;a--;)d[a]="#"+r+" "+u(d[a]);h=d.join(","),p=gt.test(t)&&l(e.parentNode)||e}if(h)try{return Q.apply(n,p.querySelectorAll(h)),n}catch(t){}finally{r===j&&e.removeAttribute("id")}}}return T(t.replace(at,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[j]=!0,t}function s(t){var e=O.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var n=t.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function r(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&xt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var s,a=t([],n.length,e),o=a.length;o--;)n[s=a[o]]&&(n[s]=!(i[s]=n[s]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function d(){}function u(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function h(t,e,n){var i=e.dir,s=e.next,a=s||i,o=n&&"parentNode"===a,r=F++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,s);return!1}:function(e,n,c){var l,d,u,h=[q,r];if(c){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[j]||(e[j]={}),d=u[e.uniqueID]||(u[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=d[a])&&l[0]===q&&l[1]===r)return h[2]=l[2];if(d[a]=h,h[2]=t(e,n,c))return!0}return!1}}function p(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function f(t,n,i){for(var s=0,a=n.length;s<a;s++)e(t,n[s],i);return i}function m(t,e,n,i,s){for(var a,o=[],r=0,c=t.length,l=null!=e;r<c;r++)(a=t[r])&&(n&&!n(a,i,s)||(o.push(a),l&&e.push(r)));return o}function g(t,e,n,s,a,o){return s&&!s[j]&&(s=g(s)),a&&!a[j]&&(a=g(a,o)),i(function(i,o,r,c){var l,d,u,h=[],p=[],g=o.length,v=i||f(e||"*",r.nodeType?[r]:r,[]),b=!t||!i&&e?v:m(v,h,t,r,c),y=n?a||(i?t:g||s)?[]:o:b;if(n&&n(b,y,r,c),s)for(l=m(y,p),s(l,[],r,c),d=l.length;d--;)(u=l[d])&&(y[p[d]]=!(b[p[d]]=u));if(i){if(a||t){if(a){for(l=[],d=y.length;d--;)(u=y[d])&&l.push(b[d]=u);a(null,y=[],l,c)}for(d=y.length;d--;)(u=y[d])&&(l=a?Z(i,u):h[d])>-1&&(i[l]=!(o[l]=u))}}else y=m(y===o?y.splice(g,y.length):y),a?a(null,o,y,c):Q.apply(o,y)})}function v(t){for(var e,n,i,s=t.length,a=w.relative[t[0].type],o=a||w.relative[" "],r=a?1:0,c=h(function(t){return t===e},o,!0),l=h(function(t){return Z(e,t)>-1},o,!0),d=[function(t,n,i){var s=!a&&(i||n!==A)||((e=n).nodeType?c(t,n,i):l(t,n,i));return e=null,s}];r<s;r++)if(n=w.relative[t[r].type])d=[h(p(d),n)];else{if(n=w.filter[t[r].type].apply(null,t[r].matches),n[j]){for(i=++r;i<s&&!w.relative[t[i].type];i++);return g(r>1&&p(d),r>1&&u(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(at,"$1"),n,r<i&&v(t.slice(r,i)),i<s&&v(t=t.slice(i)),i<s&&u(t))}d.push(n)}return p(d)}function b(t,n){var s=n.length>0,a=t.length>0,o=function(i,o,r,c,l){var d,u,h,p=0,f="0",g=i&&[],v=[],b=A,y=i||a&&w.find.TAG("*",l),_=q+=null==b?1:Math.random()||.1,x=y.length;for(l&&(A=o===O||o||l);f!==x&&null!=(d=y[f]);f++){if(a&&d){for(u=0,o||d.ownerDocument===O||(N(d),r=!D);h=t[u++];)if(h(d,o||O,r)){c.push(d);break}l&&(q=_)}s&&((d=!h&&d)&&p--,i&&g.push(d))}if(p+=f,s&&f!==p){for(u=0;h=n[u++];)h(g,v,o,r);if(i){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=X.call(c));v=m(v)}Q.apply(c,v),l&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(c)}return l&&(q=_,A=b),g};return s?i(o):o}var y,_,w,x,S,C,k,T,A,E,M,N,O,I,D,R,L,P,$,j="sizzle"+1*new Date,H=t.document,q=0,F=0,B=n(),V=n(),z=n(),W=function(t,e){return t===e&&(M=!0),0},Y={}.hasOwnProperty,U=[],X=U.pop,G=U.push,Q=U.push,J=U.slice,Z=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",st=new RegExp(tt+"+","g"),at=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),ot=new RegExp("^"+tt+"*,"+tt+"*"),rt=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ct=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),lt=new RegExp(it),dt=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},ht=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},yt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_t=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},wt=function(){N()},xt=h(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Q.apply(U=J.call(H.childNodes),H.childNodes),U[H.childNodes.length].nodeType}catch(t){Q={apply:U.length?function(t,e){G.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},N=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,I=O.documentElement,D=!S(O),H!==O&&(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",wt,!1):n.attachEvent&&n.attachEvent("onunload",wt)),_.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=s(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ft.test(O.getElementsByClassName),_.getById=s(function(t){return I.appendChild(t).id=j,!O.getElementsByName||!O.getElementsByName(j).length}),_.getById?(w.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){return t.getAttribute("id")===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n=e.getElementById(t);return n?[n]:[]}}):(w.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},w.find.ID=function(t,e){if(void 0!==e.getElementById&&D){var n,i,s,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(s=e.getElementsByName(t),i=0;a=s[i++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),w.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],s=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[s++];)1===n.nodeType&&i.push(n);return i}return a},w.find.CLASS=_.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&D)return e.getElementsByClassName(t)},L=[],R=[],(_.qsa=ft.test(O.querySelectorAll))&&(s(function(t){I.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+tt+"*(?:value|"+K+")"),t.querySelectorAll("[id~="+j+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||R.push(".#.+[+~]")}),s(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),I.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=ft.test(P=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&s(function(t){_.disconnectedMatch=P.call(t,"*"),P.call(t,"[s!='']:x"),L.push("!=",it)}),R=R.length&&new RegExp(R.join("|")),L=L.length&&new RegExp(L.join("|")),e=ft.test(I.compareDocumentPosition),$=e||ft.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return M=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===O||t.ownerDocument===H&&$(H,t)?-1:e===O||e.ownerDocument===H&&$(H,e)?1:E?Z(E,t)-Z(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return M=!0,0;var n,i=0,s=t.parentNode,a=e.parentNode,r=[t],c=[e];if(!s||!a)return t===O?-1:e===O?1:s?-1:a?1:E?Z(E,t)-Z(E,e):0;if(s===a)return o(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;r[i]===c[i];)i++;return i?o(r[i],c[i]):r[i]===H?-1:c[i]===H?1:0},O):O},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==O&&N(t),n=n.replace(ct,"='$1']"),_.matchesSelector&&D&&!z[n+" "]&&(!L||!L.test(n))&&(!R||!R.test(n)))try{var i=P.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&N(t),$(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&N(t);var n=w.attrHandle[e.toLowerCase()],i=n&&Y.call(w.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:_.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(yt,_t)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,s=0;if(M=!_.detectDuplicates,E=!_.sortStable&&t.slice(0),t.sort(W),M){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)t.splice(n[i],1)}return E=null,t},x=e.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=x(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=x(e);return n},w=e.selectors={cacheLength:50,createPseudo:i,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&lt.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(s){var a=e.attr(s,t);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(st," ")+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,s){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),r="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,c){var l,d,u,h,p,f,m=a!==o?"nextSibling":"previousSibling",g=e.parentNode,v=r&&e.nodeName.toLowerCase(),b=!c&&!r,y=!1;if(g){if(a){for(;m;){for(h=e;h=h[m];)if(r?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(h=g,u=h[j]||(h[j]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),l=d[t]||[],p=l[0]===q&&l[1],y=p&&l[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===e){d[t]=[q,p,y];break}}else if(b&&(h=e,u=h[j]||(h[j]={}),
d=u[h.uniqueID]||(u[h.uniqueID]={}),l=d[t]||[],p=l[0]===q&&l[1],y=p),!1===y)for(;(h=++p&&h&&h[m]||(y=p=0)||f.pop())&&((r?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&(u=h[j]||(h[j]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),d[t]=[q,y]),h!==e)););return(y-=s)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,n){var s,a=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[j]?a(n):a.length>1?(s=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,s=a(t,n),o=s.length;o--;)i=Z(t,s[o]),t[i]=!(e[i]=s[o])}):function(t){return a(t,0,s)}):a}},pseudos:{not:i(function(t){var e=[],n=[],s=k(t.replace(at,"$1"));return s[j]?i(function(t,e,n,i){for(var a,o=s(t,null,i,[]),r=t.length;r--;)(a=o[r])&&(t[r]=!(e[r]=a))}):function(t,i,a){return e[0]=t,s(e,null,a,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(vt,bt),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,bt).toLowerCase(),function(e){var n;do{if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:r(!1),disabled:r(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return ht.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},w.pseudos.nth=w.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[y]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(y);for(y in{submit:!0,reset:!0})w.pseudos[y]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(y);return d.prototype=w.filters=w.pseudos,w.setFilters=new d,C=e.tokenize=function(t,n){var i,s,a,o,r,c,l,d=V[t+" "];if(d)return n?0:d.slice(0);for(r=t,c=[],l=w.preFilter;r;){i&&!(s=ot.exec(r))||(s&&(r=r.slice(s[0].length)||r),c.push(a=[])),i=!1,(s=rt.exec(r))&&(i=s.shift(),a.push({value:i,type:s[0].replace(at," ")}),r=r.slice(i.length));for(o in w.filter)!(s=ut[o].exec(r))||l[o]&&!(s=l[o](s))||(i=s.shift(),a.push({value:i,type:o,matches:s}),r=r.slice(i.length));if(!i)break}return n?r.length:r?e.error(t):V(t,c).slice(0)},k=e.compile=function(t,e){var n,i=[],s=[],a=z[t+" "];if(!a){for(e||(e=C(t)),n=e.length;n--;)a=v(e[n]),a[j]?i.push(a):s.push(a);a=z(t,b(s,i)),a.selector=t}return a},T=e.select=function(t,e,n,i){var s,a,o,r,c,d="function"==typeof t&&t,h=!i&&C(t=d.selector||t);if(n=n||[],1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&9===e.nodeType&&D&&w.relative[a[1].type]){if(!(e=(w.find.ID(o.matches[0].replace(vt,bt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(s=ut.needsContext.test(t)?0:a.length;s--&&(o=a[s],!w.relative[r=o.type]);)if((c=w.find[r])&&(i=c(o.matches[0].replace(vt,bt),gt.test(a[0].type)&&l(e.parentNode)||e))){if(a.splice(s,1),!(t=i.length&&u(a)))return Q.apply(n,i),n;break}}return(d||k(t,h))(i,e,!D,n,!e||gt.test(t)&&l(e.parentNode)||e),n},_.sortStable=j.split("").sort(W).join("")===j,_.detectDuplicates=!!M,N(),_.sortDetached=s(function(t){return 1&t.compareDocumentPosition(O.createElement("fieldset"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||a(K,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);wt.find=St,wt.expr=St.selectors,wt.expr[":"]=wt.expr.pseudos,wt.uniqueSort=wt.unique=St.uniqueSort,wt.text=St.getText,wt.isXMLDoc=St.isXML,wt.contains=St.contains,wt.escapeSelector=St.escape;var Ct=function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&wt(t).is(n))break;i.push(t)}return i},kt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=wt.expr.match.needsContext,At=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;wt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?wt.find.matchesSelector(i,t)?[i]:[]:wt.find.matches(t,wt.grep(e,function(t){return 1===t.nodeType}))},wt.fn.extend({find:function(t){var e,n,i=this.length,s=this;if("string"!=typeof t)return this.pushStack(wt(t).filter(function(){for(e=0;e<i;e++)if(wt.contains(s[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)wt.find(t,s[e],n);return i>1?wt.uniqueSort(n):n},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&Tt.test(t)?wt(t):t||[],!1).length}});var Et,Mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(wt.fn.init=function(t,e,n){var i,s;if(!t)return this;if(n=n||Et,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Mt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof wt?e[0]:e,wt.merge(this,wt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ot,!0)),At.test(i[1])&&wt.isPlainObject(e))for(i in e)bt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return s=ot.getElementById(i[2]),s&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):bt(t)?void 0!==n.ready?n.ready(t):t(wt):wt.makeArray(t,this)}).prototype=wt.fn,Et=wt(ot);var Nt=/^(?:parents|prev(?:Until|All))/,Ot={children:!0,contents:!0,next:!0,prev:!0};wt.fn.extend({has:function(t){var e=wt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(wt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,s=this.length,a=[],o="string"!=typeof t&&wt(t);if(!Tt.test(t))for(;i<s;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&wt.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?wt.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?ut.call(wt(t),this[0]):ut.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(wt.uniqueSort(wt.merge(this.get(),wt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),wt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Ct(t,"parentNode")},parentsUntil:function(t,e,n){return Ct(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return Ct(t,"nextSibling")},prevAll:function(t){return Ct(t,"previousSibling")},nextUntil:function(t,e,n){return Ct(t,"nextSibling",n)},prevUntil:function(t,e,n){return Ct(t,"previousSibling",n)},siblings:function(t){return kt((t.parentNode||{}).firstChild,t)},children:function(t){return kt(t.firstChild)},contents:function(t){return a(t,"iframe")?t.contentDocument:(a(t,"template")&&(t=t.content||t),wt.merge([],t.childNodes))}},function(t,e){wt.fn[t]=function(n,i){var s=wt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=wt.filter(i,s)),this.length>1&&(Ot[t]||wt.uniqueSort(s),Nt.test(t)&&s.reverse()),this.pushStack(s)}});var It=/[^\x20\t\r\n\f]+/g;wt.Callbacks=function(t){t="string"==typeof t?c(t):wt.extend({},t);var e,n,s,a,o=[],r=[],l=-1,d=function(){for(a=a||t.once,s=e=!0;r.length;l=-1)for(n=r.shift();++l<o.length;)!1===o[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,a&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(l=o.length-1,r.push(n)),function e(n){wt.each(n,function(n,s){bt(s)?t.unique&&u.has(s)||o.push(s):s&&s.length&&"string"!==i(s)&&e(s)})}(arguments),n&&!e&&d()),this},remove:function(){return wt.each(arguments,function(t,e){for(var n;(n=wt.inArray(e,o,n))>-1;)o.splice(n,1),n<=l&&l--}),this},has:function(t){return t?wt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=r=[],n||e||(o=n=""),this},locked:function(){return!!a},fireWith:function(t,n){return a||(n=n||[],n=[t,n.slice?n.slice():n],r.push(n),e||d()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},wt.extend({Deferred:function(e){var n=[["notify","progress",wt.Callbacks("memory"),wt.Callbacks("memory"),2],["resolve","done",wt.Callbacks("once memory"),wt.Callbacks("once memory"),0,"resolved"],["reject","fail",wt.Callbacks("once memory"),wt.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return wt.Deferred(function(e){wt.each(n,function(n,i){var s=bt(t[i[4]])&&t[i[4]];a[i[1]](function(){var t=s&&s.apply(this,arguments);t&&bt(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,s?[t]:arguments)})}),t=null}).promise()},then:function(e,i,s){function a(e,n,i,s){return function(){var r=this,c=arguments,u=function(){var t,u;if(!(e<o)){if((t=i.apply(r,c))===n.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,bt(u)?s?u.call(t,a(o,n,l,s),a(o,n,d,s)):(o++,u.call(t,a(o,n,l,s),a(o,n,d,s),a(o,n,l,n.notifyWith))):(i!==l&&(r=void 0,c=[t]),(s||n.resolveWith)(r,c))}},h=s?u:function(){try{u()}catch(t){wt.Deferred.exceptionHook&&wt.Deferred.exceptionHook(t,h.stackTrace),e+1>=o&&(i!==d&&(r=void 0,c=[t]),n.rejectWith(r,c))}};e?h():(wt.Deferred.getStackHook&&(h.stackTrace=wt.Deferred.getStackHook()),t.setTimeout(h))}}var o=0;return wt.Deferred(function(t){n[0][3].add(a(0,t,bt(s)?s:l,t.notifyWith)),n[1][3].add(a(0,t,bt(e)?e:l)),n[2][3].add(a(0,t,bt(i)?i:d))}).promise()},promise:function(t){return null!=t?wt.extend(t,s):s}},a={};return wt.each(n,function(t,e){var o=e[2],r=e[5];s[e[1]]=o.add,r&&o.add(function(){i=r},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),o.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=o.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(t){var e=arguments.length,n=e,i=Array(n),s=ct.call(arguments),a=wt.Deferred(),o=function(t){return function(n){i[t]=this,s[t]=arguments.length>1?ct.call(arguments):n,--e||a.resolveWith(i,s)}};if(e<=1&&(u(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||bt(s[n]&&s[n].then)))return a.then();for(;n--;)u(s[n],o(n),a.reject);return a.promise()}});var Dt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;wt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Dt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},wt.readyException=function(e){t.setTimeout(function(){throw e})};var Rt=wt.Deferred();wt.fn.ready=function(t){return Rt.then(t).catch(function(t){wt.readyException(t)}),this},wt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--wt.readyWait:wt.isReady)||(wt.isReady=!0,!0!==t&&--wt.readyWait>0||Rt.resolveWith(ot,[wt]))}}),wt.ready.then=Rt.then,"complete"===ot.readyState||"loading"!==ot.readyState&&!ot.documentElement.doScroll?t.setTimeout(wt.ready):(ot.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h));var Lt=function(t,e,n,s,a,o,r){var c=0,l=t.length,d=null==n;if("object"===i(n)){a=!0;for(c in n)Lt(t,e,c,n[c],!0,o,r)}else if(void 0!==s&&(a=!0,bt(s)||(r=!0),d&&(r?(e.call(t,s),e=null):(d=e,e=function(t,e,n){return d.call(wt(t),n)})),e))for(;c<l;c++)e(t[c],n,r?s:s.call(t[c],c,e(t[c],n)));return a?t:d?e.call(t):l?e(t[0],n):o},Pt=/^-ms-/,$t=/-([a-z])/g,jt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};m.uid=1,m.prototype={cache:function(t){var e=t[this.expando];return e||(e={},jt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,s=this.cache(t);if("string"==typeof e)s[f(e)]=n;else for(i in e)s[f(i)]=e[i];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(f):(e=f(e),e=e in i?[e]:e.match(It)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||wt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!wt.isEmptyObject(e)}};var Ht=new m,qt=new m,Ft=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Bt=/[A-Z]/g;wt.extend({hasData:function(t){return qt.hasData(t)||Ht.hasData(t)},data:function(t,e,n){return qt.access(t,e,n)},removeData:function(t,e){qt.remove(t,e)},_data:function(t,e,n){return Ht.access(t,e,n)},_removeData:function(t,e){Ht.remove(t,e)}}),wt.fn.extend({data:function(t,e){var n,i,s,a=this[0],o=a&&a.attributes;if(void 0===t){if(this.length&&(s=qt.get(a),1===a.nodeType&&!Ht.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=f(i.slice(5)),v(a,i,s[i])));Ht.set(a,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){qt.set(this,t)}):Lt(this,function(e){var n;if(a&&void 0===e){if(void 0!==(n=qt.get(a,t)))return n;if(void 0!==(n=v(a,t)))return n}else this.each(function(){qt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){qt.remove(this,t)})}}),wt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Ht.get(t,e),n&&(!i||Array.isArray(n)?i=Ht.access(t,e,wt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=wt.queue(t,e),i=n.length,s=n.shift(),a=wt._queueHooks(t,e),o=function(){wt.dequeue(t,e)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete a.stop,s.call(t,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Ht.get(t,n)||Ht.access(t,n,{empty:wt.Callbacks("once memory").add(function(){Ht.remove(t,[e+"queue",n])})})}}),wt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?wt.queue(this[0],t):void 0===e?this:this.each(function(){var n=wt.queue(this,t,e);wt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&wt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){wt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,s=wt.Deferred(),a=this,o=this.length,r=function(){--i||s.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=Ht.get(a[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),s.promise(e)}});var Vt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Vt+")([a-z%]*)$","i"),Wt=["Top","Right","Bottom","Left"],Yt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&wt.contains(t.ownerDocument,t)&&"none"===wt.css(t,"display")},Ut=function(t,e,n,i){var s,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];s=n.apply(t,i||[]);for(a in e)t.style[a]=o[a];return s},Xt={};wt.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Yt(this)?wt(this).show():wt(this).hide()})}});var Gt=/^(?:checkbox|radio)$/i,Qt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Jt=/^$|^module$|\/(?:java|ecma)script/i,Zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td;var Kt=/<|&#?\w+;/;!function(){var t=ot.createDocumentFragment(),e=t.appendChild(ot.createElement("div")),n=ot.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),vt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var te=ot.documentElement,ee=/^key/,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;wt.event={global:{},add:function(t,e,n,i,s){var a,o,r,c,l,d,u,h,p,f,m,g=Ht.get(t);if(g)for(n.handler&&(a=n,n=a.handler,s=a.selector),s&&wt.find.matchesSelector(te,s),n.guid||(n.guid=wt.guid++),(c=g.events)||(c=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==wt&&wt.event.triggered!==e.type?wt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(It)||[""],l=e.length;l--;)r=ie.exec(e[l])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p&&(u=wt.event.special[p]||{},p=(s?u.delegateType:u.bindType)||p,u=wt.event.special[p]||{},d=wt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&wt.expr.match.needsContext.test(s),namespace:f.join(".")},a),(h=c[p])||(h=c[p]=[],h.delegateCount=0,u.setup&&!1!==u.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(p,o)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),s?h.splice(h.delegateCount++,0,d):h.push(d),wt.event.global[p]=!0)},remove:function(t,e,n,i,s){var a,o,r,c,l,d,u,h,p,f,m,g=Ht.hasData(t)&&Ht.get(t);if(g&&(c=g.events)){for(e=(e||"").match(It)||[""],l=e.length;l--;)if(r=ie.exec(e[l])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p){for(u=wt.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=c[p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)d=h[a],!s&&m!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(a,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(t,d));o&&!h.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||wt.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)wt.event.remove(t,p+e[l],n,i,!0);wt.isEmptyObject(c)&&Ht.remove(t,"handle events")}},dispatch:function(t){var e,n,i,s,a,o,r=wt.event.fix(t),c=new Array(arguments.length),l=(Ht.get(this,"events")||{})[r.type]||[],d=wt.event.special[r.type]||{};for(c[0]=r,e=1;e<arguments.length;e++)c[e]=arguments[e];if(r.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,r)){for(o=wt.event.handlers.call(this,r,l),e=0;(s=o[e++])&&!r.isPropagationStopped();)for(r.currentTarget=s.elem,n=0;(a=s.handlers[n++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!r.rnamespace.test(a.namespace)||(r.handleObj=a,r.data=a.data,void 0!==(i=((wt.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,c))&&!1===(r.result=i)&&(r.preventDefault(),r.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,r),r.result}},handlers:function(t,e){var n,i,s,a,o,r=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(a=[],o={},n=0;n<c;n++)i=e[n],s=i.selector+" ",void 0===o[s]&&(o[s]=i.needsContext?wt(s,this).index(l)>-1:wt.find(s,this,null,[l]).length),o[s]&&a.push(i);a.length&&r.push({elem:l,handlers:a})}return l=this,c<e.length&&r.push({elem:l,handlers:e.slice(c)}),r},addProp:function(t,e){Object.defineProperty(wt.Event.prototype,t,{enumerable:!0,configurable:!0,get:bt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[wt.expando]?t:new wt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&a(this,"input"))return this.click(),!1},_default:function(t){return a(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},wt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},wt.Event=function(t,e){if(!(this instanceof wt.Event))return new wt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?C:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&wt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[wt.expando]=!0},wt.Event.prototype={constructor:wt.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=C,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=C,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=C,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},wt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ee.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&ne.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},wt.event.addProp),wt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){wt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,a=t.handleObj;return s&&(s===i||wt.contains(i,s))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),wt.fn.extend({on:function(t,e,n,i){return A(this,t,e,n,i)},one:function(t,e,n,i){return A(this,t,e,n,i,1)},off:function(t,e,n){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,wt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=k),this.each(function(){wt.event.remove(this,t,n,e)})}});var se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ae=/<script|<style|<link/i,oe=/checked\s*(?:[^=]|=\s*.checked.)/i,re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;wt.extend({htmlPrefilter:function(t){return t.replace(se,"<$1></$2>")},clone:function(t,e,n){var i,s,a,o,r=t.cloneNode(!0),c=wt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||wt.isXMLDoc(t)))for(o=w(r),a=w(t),i=0,s=a.length;i<s;i++)I(a[i],o[i]);if(e)if(n)for(a=a||w(t),o=o||w(r),i=0,s=a.length;i<s;i++)O(a[i],o[i]);else O(t,r);return o=w(r,"script"),o.length>0&&x(o,!c&&w(t,"script")),r},cleanData:function(t){for(var e,n,i,s=wt.event.special,a=0;void 0!==(n=t[a]);a++)if(jt(n)){if(e=n[Ht.expando]){if(e.events)for(i in e.events)s[i]?wt.event.remove(n,i):wt.removeEvent(n,i,e.handle);n[Ht.expando]=void 0}n[qt.expando]&&(n[qt.expando]=void 0)}}}),wt.fn.extend({detach:function(t){return R(this,t,!0)},remove:function(t){return R(this,t)},text:function(t){return Lt(this,function(t){return void 0===t?wt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return D(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){E(this,t).appendChild(t)}})},prepend:function(){return D(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=E(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return D(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return D(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(wt.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return wt.clone(this,t,e)})},html:function(t){return Lt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ae.test(t)&&!Zt[(Qt.exec(t)||["",""])[1].toLowerCase()]){t=wt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(wt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return D(this,arguments,function(e){var n=this.parentNode;wt.inArray(this,t)<0&&(wt.cleanData(w(this)),n&&n.replaceChild(e,this))},t)}}),wt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){wt.fn[t]=function(t){for(var n,i=[],s=wt(t),a=s.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),wt(s[o])[e](n),dt.apply(i,n.get());return this.pushStack(i)}});var ce=new RegExp("^("+Vt+")(?!px)[a-z%]+$","i"),le=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},de=new RegExp(Wt.join("|"),"i");!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",te.appendChild(c).appendChild(l);var e=t.getComputedStyle(l);i="1%"!==e.top,r=12===n(e.marginLeft),l.style.right="60%",o=36===n(e.right),s=36===n(e.width),l.style.position="absolute",a=36===l.offsetWidth||"absolute",te.removeChild(c),l=null}}function n(t){return Math.round(parseFloat(t))}var i,s,a,o,r,c=ot.createElement("div"),l=ot.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===l.style.backgroundClip,wt.extend(vt,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),r},scrollboxSize:function(){return e(),a}}))}();var ue=/^(none|table(?!-c[ea]).+)/,he=/^--/,pe={position:"absolute",visibility:"hidden",display:"block"},fe={letterSpacing:"0",fontWeight:"400"},me=["Webkit","Moz","ms"],ge=ot.createElement("div").style;wt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=L(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,a,o,r=f(e),c=he.test(e),l=t.style;if(c||(e=j(r)),o=wt.cssHooks[e]||wt.cssHooks[r],void 0===n)return o&&"get"in o&&void 0!==(s=o.get(t,!1,i))?s:l[e];a=typeof n,"string"===a&&(s=zt.exec(n))&&s[1]&&(n=b(t,e,s),a="number"),null!=n&&n===n&&("number"===a&&(n+=s&&s[3]||(wt.cssNumber[r]?"":"px")),vt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var s,a,o,r=f(e);return he.test(e)||(e=j(r)),o=wt.cssHooks[e]||wt.cssHooks[r],o&&"get"in o&&(s=o.get(t,!0,n)),void 0===s&&(s=L(t,e,i)),"normal"===s&&e in fe&&(s=fe[e]),""===n||n?(a=parseFloat(s),!0===n||isFinite(a)?a||0:s):s}}),wt.each(["height","width"],function(t,e){wt.cssHooks[e]={get:function(t,n,i){if(n)return!ue.test(wt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?F(t,e,i):Ut(t,pe,function(){return F(t,e,i)})},set:function(t,n,i){var s,a=le(t),o="border-box"===wt.css(t,"boxSizing",!1,a),r=i&&q(t,e,i,o,a);return o&&vt.scrollboxSize()===a.position&&(r-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-q(t,e,"border",!1,a)-.5)),r&&(s=zt.exec(n))&&"px"!==(s[3]||"px")&&(t.style[e]=n,n=wt.css(t,e)),H(t,n,r)}}}),wt.cssHooks.marginLeft=P(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(L(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),wt.each({margin:"",padding:"",border:"Width"},function(t,e){wt.cssHooks[t+e]={expand:function(n){for(var i=0,s={},a="string"==typeof n?n.split(" "):[n];i<4;i++)s[t+Wt[i]+e]=a[i]||a[i-2]||a[0];return s}},"margin"!==t&&(wt.cssHooks[t+e].set=H)}),wt.fn.extend({css:function(t,e){return Lt(this,function(t,e,n){var i,s,a={},o=0;if(Array.isArray(e)){for(i=le(t),s=e.length;o<s;o++)a[e[o]]=wt.css(t,e[o],!1,i);return a}return void 0!==n?wt.style(t,e,n):wt.css(t,e)},t,e,arguments.length>1)}}),wt.Tween=B,B.prototype={constructor:B,init:function(t,e,n,i,s,a){this.elem=t,this.prop=n,this.easing=s||wt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(wt.cssNumber[n]?"":"px")},cur:function(){var t=B.propHooks[this.prop];return t&&t.get?t.get(this):B.propHooks._default.get(this)},run:function(t){var e,n=B.propHooks[this.prop];return this.options.duration?this.pos=e=wt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=wt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){wt.fx.step[t.prop]?wt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[wt.cssProps[t.prop]]&&!wt.cssHooks[t.prop]?t.elem[t.prop]=t.now:wt.style(t.elem,t.prop,t.now+t.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},wt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},
wt.fx=B.prototype.init,wt.fx.step={};var ve,be,ye=/^(?:toggle|show|hide)$/,_e=/queueHooks$/;wt.Animation=wt.extend(G,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return b(n.elem,t,zt.exec(e),n),n}]},tweener:function(t,e){bt(t)?(e=t,t=["*"]):t=t.match(It);for(var n,i=0,s=t.length;i<s;i++)n=t[i],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(e)},prefilters:[U],prefilter:function(t,e){e?G.prefilters.unshift(t):G.prefilters.push(t)}}),wt.speed=function(t,e,n){var i=t&&"object"==typeof t?wt.extend({},t):{complete:n||!n&&e||bt(t)&&t,duration:t,easing:n&&e||e&&!bt(e)&&e};return wt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in wt.fx.speeds?i.duration=wt.fx.speeds[i.duration]:i.duration=wt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){bt(i.old)&&i.old.call(this),i.queue&&wt.dequeue(this,i.queue)},i},wt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Yt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=wt.isEmptyObject(t),a=wt.speed(e,n,i),o=function(){var e=G(this,wt.extend({},t),a);(s||Ht.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",a=wt.timers,o=Ht.get(this);if(s)o[s]&&o[s].stop&&i(o[s]);else for(s in o)o[s]&&o[s].stop&&_e.test(s)&&i(o[s]);for(s=a.length;s--;)a[s].elem!==this||null!=t&&a[s].queue!==t||(a[s].anim.stop(n),e=!1,a.splice(s,1));!e&&n||wt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Ht.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],a=wt.timers,o=i?i.length:0;for(n.finish=!0,wt.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),wt.each(["toggle","show","hide"],function(t,e){var n=wt.fn[e];wt.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(W(e,!0),t,i,s)}}),wt.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){wt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),wt.timers=[],wt.fx.tick=function(){var t,e=0,n=wt.timers;for(ve=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||wt.fx.stop(),ve=void 0},wt.fx.timer=function(t){wt.timers.push(t),wt.fx.start()},wt.fx.interval=13,wt.fx.start=function(){be||(be=!0,V())},wt.fx.stop=function(){be=null},wt.fx.speeds={slow:600,fast:200,_default:400},wt.fn.delay=function(e,n){return e=wt.fx?wt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var s=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(s)}})},function(){var t=ot.createElement("input"),e=ot.createElement("select"),n=e.appendChild(ot.createElement("option"));t.type="checkbox",vt.checkOn=""!==t.value,vt.optSelected=n.selected,t=ot.createElement("input"),t.value="t",t.type="radio",vt.radioValue="t"===t.value}();var we,xe=wt.expr.attrHandle;wt.fn.extend({attr:function(t,e){return Lt(this,wt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){wt.removeAttr(this,t)})}}),wt.extend({attr:function(t,e,n){var i,s,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?wt.prop(t,e,n):(1===a&&wt.isXMLDoc(t)||(s=wt.attrHooks[e.toLowerCase()]||(wt.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void wt.removeAttr(t,e):s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:(t.setAttribute(e,n+""),n):s&&"get"in s&&null!==(i=s.get(t,e))?i:(i=wt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&a(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,s=e&&e.match(It);if(s&&1===t.nodeType)for(;n=s[i++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?wt.removeAttr(t,n):t.setAttribute(n,n),n}},wt.each(wt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=xe[e]||wt.find.attr;xe[e]=function(t,e,i){var s,a,o=e.toLowerCase();return i||(a=xe[o],xe[o]=s,s=null!=n(t,e,i)?o:null,xe[o]=a),s}});var Se=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;wt.fn.extend({prop:function(t,e){return Lt(this,wt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[wt.propFix[t]||t]})}}),wt.extend({prop:function(t,e,n){var i,s,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&wt.isXMLDoc(t)||(e=wt.propFix[e]||e,s=wt.propHooks[e]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:t[e]=n:s&&"get"in s&&null!==(i=s.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=wt.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),vt.optSelected||(wt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),wt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){wt.propFix[this.toLowerCase()]=this}),wt.fn.extend({addClass:function(t){var e,n,i,s,a,o,r,c=0;if(bt(t))return this.each(function(e){wt(this).addClass(t.call(this,e,J(this)))});if(e=Z(t),e.length)for(;n=this[c++];)if(s=J(n),i=1===n.nodeType&&" "+Q(s)+" "){for(o=0;a=e[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r=Q(i),s!==r&&n.setAttribute("class",r)}return this},removeClass:function(t){var e,n,i,s,a,o,r,c=0;if(bt(t))return this.each(function(e){wt(this).removeClass(t.call(this,e,J(this)))});if(!arguments.length)return this.attr("class","");if(e=Z(t),e.length)for(;n=this[c++];)if(s=J(n),i=1===n.nodeType&&" "+Q(s)+" "){for(o=0;a=e[o++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r=Q(i),s!==r&&n.setAttribute("class",r)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):bt(t)?this.each(function(n){wt(this).toggleClass(t.call(this,n,J(this),e),e)}):this.each(function(){var e,s,a,o;if(i)for(s=0,a=wt(this),o=Z(t);e=o[s++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||(e=J(this),e&&Ht.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Ht.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Q(J(n))+" ").indexOf(e)>-1)return!0;return!1}});var ke=/\r/g;wt.fn.extend({val:function(t){var e,n,i,s=this[0];{if(arguments.length)return i=bt(t),this.each(function(n){var s;1===this.nodeType&&(s=i?t.call(this,n,wt(this).val()):t,null==s?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=wt.map(s,function(t){return null==t?"":t+""})),(e=wt.valHooks[this.type]||wt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return(e=wt.valHooks[s.type]||wt.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(s,"value"))?n:(n=s.value,"string"==typeof n?n.replace(ke,""):null==n?"":n)}}}),wt.extend({valHooks:{option:{get:function(t){var e=wt.find.attr(t,"value");return null!=e?e:Q(wt.text(t))}},select:{get:function(t){var e,n,i,s=t.options,o=t.selectedIndex,r="select-one"===t.type,c=r?null:[],l=r?o+1:s.length;for(i=o<0?l:r?o:0;i<l;i++)if(n=s[i],(n.selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!a(n.parentNode,"optgroup"))){if(e=wt(n).val(),r)return e;c.push(e)}return c},set:function(t,e){for(var n,i,s=t.options,a=wt.makeArray(e),o=s.length;o--;)i=s[o],(i.selected=wt.inArray(wt.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),wt.each(["radio","checkbox"],function(){wt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=wt.inArray(wt(t).val(),e)>-1}},vt.checkOn||(wt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),vt.focusin="onfocusin"in t;var Te=/^(?:focusinfocus|focusoutblur)$/,Ae=function(t){t.stopPropagation()};wt.extend(wt.event,{trigger:function(e,n,i,s){var a,o,r,c,l,d,u,h,p=[i||ot],f=ft.call(e,"type")?e.type:e,m=ft.call(e,"namespace")?e.namespace.split("."):[];if(o=h=r=i=i||ot,3!==i.nodeType&&8!==i.nodeType&&!Te.test(f+wt.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[wt.expando]?e:new wt.Event(f,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:wt.makeArray(n,[e]),u=wt.event.special[f]||{},s||!u.trigger||!1!==u.trigger.apply(i,n))){if(!s&&!u.noBubble&&!yt(i)){for(c=u.delegateType||f,Te.test(c+f)||(o=o.parentNode);o;o=o.parentNode)p.push(o),r=o;r===(i.ownerDocument||ot)&&p.push(r.defaultView||r.parentWindow||t)}for(a=0;(o=p[a++])&&!e.isPropagationStopped();)h=o,e.type=a>1?c:u.bindType||f,d=(Ht.get(o,"events")||{})[e.type]&&Ht.get(o,"handle"),d&&d.apply(o,n),(d=l&&o[l])&&d.apply&&jt(o)&&(e.result=d.apply(o,n),!1===e.result&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),n)||!jt(i)||l&&bt(i[f])&&!yt(i)&&(r=i[l],r&&(i[l]=null),wt.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,Ae),i[f](),e.isPropagationStopped()&&h.removeEventListener(f,Ae),wt.event.triggered=void 0,r&&(i[l]=r)),e.result}},simulate:function(t,e,n){var i=wt.extend(new wt.Event,n,{type:t,isSimulated:!0});wt.event.trigger(i,null,e)}}),wt.fn.extend({trigger:function(t,e){return this.each(function(){wt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return wt.event.trigger(t,e,n,!0)}}),vt.focusin||wt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){wt.event.simulate(e,t.target,wt.event.fix(t))};wt.event.special[e]={setup:function(){var i=this.ownerDocument||this,s=Ht.access(i,e);s||i.addEventListener(t,n,!0),Ht.access(i,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=Ht.access(i,e)-1;s?Ht.access(i,e,s):(i.removeEventListener(t,n,!0),Ht.remove(i,e))}}});var Ee=t.location,Me=Date.now(),Ne=/\?/;wt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||wt.error("Invalid XML: "+e),n};var Oe=/\[\]$/,Ie=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;wt.param=function(t,e){var n,i=[],s=function(t,e){var n=bt(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!wt.isPlainObject(t))wt.each(t,function(){s(this.name,this.value)});else for(n in t)K(n,t[n],e,s);return i.join("&")},wt.fn.extend({serialize:function(){return wt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=wt.prop(this,"elements");return t?wt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!wt(this).is(":disabled")&&Re.test(this.nodeName)&&!De.test(t)&&(this.checked||!Gt.test(t))}).map(function(t,e){var n=wt(this).val();return null==n?null:Array.isArray(n)?wt.map(n,function(t){return{name:e.name,value:t.replace(Ie,"\r\n")}}):{name:e.name,value:n.replace(Ie,"\r\n")}}).get()}});var Le=/%20/g,Pe=/#.*$/,$e=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,He=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qe=/^(?:GET|HEAD)$/,Fe=/^\/\//,Be={},Ve={},ze="*/".concat("*"),We=ot.createElement("a");We.href=Ee.href,wt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:He.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ze,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":wt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,wt.ajaxSettings),e):nt(wt.ajaxSettings,t)},ajaxPrefilter:tt(Be),ajaxTransport:tt(Ve),ajax:function(e,n){function i(e,n,i,r){var l,h,p,_,w,x=n;d||(d=!0,c&&t.clearTimeout(c),s=void 0,o=r||"",S.readyState=e>0?4:0,l=e>=200&&e<300||304===e,i&&(_=it(f,S,i)),_=st(f,_,S,l),l?(f.ifModified&&(w=S.getResponseHeader("Last-Modified"),w&&(wt.lastModified[a]=w),(w=S.getResponseHeader("etag"))&&(wt.etag[a]=w)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=_.state,h=_.data,p=_.error,l=!p)):(p=x,!e&&x||(x="error",e<0&&(e=0))),S.status=e,S.statusText=(n||x)+"",l?v.resolveWith(m,[h,x,S]):v.rejectWith(m,[S,x,p]),S.statusCode(y),y=void 0,u&&g.trigger(l?"ajaxSuccess":"ajaxError",[S,f,l?h:p]),b.fireWith(m,[S,x]),u&&(g.trigger("ajaxComplete",[S,f]),--wt.active||wt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var s,a,o,r,c,l,d,u,h,p,f=wt.ajaxSetup({},n),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?wt(m):wt.event,v=wt.Deferred(),b=wt.Callbacks("once memory"),y=f.statusCode||{},_={},w={},x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(d){if(!r)for(r={};e=je.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return d?o:null},setRequestHeader:function(t,e){return null==d&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==d&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return s&&s.abort(e),i(0,e),this}};if(v.promise(S),f.url=((e||f.url||Ee.href)+"").replace(Fe,Ee.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(It)||[""],null==f.crossDomain){l=ot.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=We.protocol+"//"+We.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=wt.param(f.data,f.traditional)),et(Be,f,n,S),d)return S;u=wt.event&&f.global,u&&0==wt.active++&&wt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qe.test(f.type),a=f.url.replace(Pe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Le,"+")):(p=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(Ne.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace($e,"$1"),p=(Ne.test(a)?"&":"?")+"_="+Me+++p),f.url=a+p),f.ifModified&&(wt.lastModified[a]&&S.setRequestHeader("If-Modified-Since",wt.lastModified[a]),wt.etag[a]&&S.setRequestHeader("If-None-Match",wt.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+ze+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)S.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,S,f)||d))return S.abort();if(x="abort",b.add(f.complete),S.done(f.success),S.fail(f.error),s=et(Ve,f,n,S)){if(S.readyState=1,u&&g.trigger("ajaxSend",[S,f]),d)return S;f.async&&f.timeout>0&&(c=t.setTimeout(function(){S.abort("timeout")},f.timeout));try{d=!1,s.send(_,i)}catch(t){if(d)throw t;i(-1,t)}}else i(-1,"No Transport");return S},getJSON:function(t,e,n){return wt.get(t,e,n,"json")},getScript:function(t,e){return wt.get(t,void 0,e,"script")}}),wt.each(["get","post"],function(t,e){wt[e]=function(t,n,i,s){return bt(n)&&(s=s||i,i=n,n=void 0),wt.ajax(wt.extend({url:t,type:e,dataType:s,data:n,success:i},wt.isPlainObject(t)&&t))}}),wt._evalUrl=function(t){return wt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},wt.fn.extend({wrapAll:function(t){var e;return this[0]&&(bt(t)&&(t=t.call(this[0])),e=wt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return bt(t)?this.each(function(e){wt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=wt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=bt(t);return this.each(function(n){wt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){wt(this).replaceWith(this.childNodes)}),this}}),wt.expr.pseudos.hidden=function(t){return!wt.expr.pseudos.visible(t)},wt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},wt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Ue=wt.ajaxSettings.xhr();vt.cors=!!Ue&&"withCredentials"in Ue,vt.ajax=Ue=!!Ue,wt.ajaxTransport(function(e){var n,i;if(vt.cors||Ue&&!e.crossDomain)return{send:function(s,a){var o,r=e.xhr();if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(o in s)r.setRequestHeader(o,s[o]);n=function(t){return function(){n&&(n=i=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?a(0,"error"):a(r.status,r.statusText):a(Ye[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=n(),i=r.onerror=r.ontimeout=n("error"),void 0!==r.onabort?r.onabort=i:r.onreadystatechange=function(){4===r.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{r.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),wt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),wt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return wt.globalEval(t),t}}}),wt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),wt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,s){e=wt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),ot.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Xe=[],Ge=/(=)\?(?=&|$)|\?\?/;wt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||wt.expando+"_"+Me++;return this[t]=!0,t}}),wt.ajaxPrefilter("json jsonp",function(e,n,i){var s,a,o,r=!1!==e.jsonp&&(Ge.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=bt(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Ge,"$1"+s):!1!==e.jsonp&&(e.url+=(Ne.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||wt.error(s+" was not called"),o[0]},e.dataTypes[0]="json",a=t[s],t[s]=function(){o=arguments},i.always(function(){void 0===a?wt(t).removeProp(s):t[s]=a,e[s]&&(e.jsonpCallback=n.jsonpCallback,Xe.push(s)),o&&bt(a)&&a(o[0]),o=a=void 0}),"script"}),vt.createHTMLDocument=function(){var t=ot.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),wt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,s,a;return e||(vt.createHTMLDocument?(e=ot.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=ot.location.href,e.head.appendChild(i)):e=ot),s=At.exec(t),a=!n&&[],s?[e.createElement(s[1])]:(s=S([t],e,a),a&&a.length&&wt(a).remove(),wt.merge([],s.childNodes))},wt.fn.load=function(t,e,n){var i,s,a,o=this,r=t.indexOf(" ");return r>-1&&(i=Q(t.slice(r)),t=t.slice(0,r)),bt(e)?(n=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&wt.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){a=arguments,o.html(i?wt("<div>").append(wt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},wt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){wt.fn[e]=function(t){return this.on(e,t)}}),wt.expr.pseudos.animated=function(t){return wt.grep(wt.timers,function(e){return t===e.elem}).length},wt.offset={setOffset:function(t,e,n){var i,s,a,o,r,c,l,d=wt.css(t,"position"),u=wt(t),h={};"static"===d&&(t.style.position="relative"),r=u.offset(),a=wt.css(t,"top"),c=wt.css(t,"left"),l=("absolute"===d||"fixed"===d)&&(a+c).indexOf("auto")>-1,l?(i=u.position(),o=i.top,s=i.left):(o=parseFloat(a)||0,s=parseFloat(c)||0),bt(e)&&(e=e.call(t,n,wt.extend({},r))),null!=e.top&&(h.top=e.top-r.top+o),null!=e.left&&(h.left=e.left-r.left+s),"using"in e?e.using.call(t,h):u.css(h)}},wt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){wt.offset.setOffset(this,t,e)});var e,n,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n,i=this[0],s={top:0,left:0};if("fixed"===wt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===wt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(s=wt(t).offset(),s.top+=wt.css(t,"borderTopWidth",!0),s.left+=wt.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-wt.css(i,"marginTop",!0),left:e.left-s.left-wt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===wt.css(t,"position");)t=t.offsetParent;return t||te})}}),wt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;wt.fn[t]=function(i){return Lt(this,function(t,i,s){var a;if(yt(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===s)return a?a[e]:t[i];a?a.scrollTo(n?a.pageXOffset:s,n?s:a.pageYOffset):t[i]=s},t,i,arguments.length)}}),wt.each(["top","left"],function(t,e){wt.cssHooks[e]=P(vt.pixelPosition,function(t,n){if(n)return n=L(t,e),ce.test(n)?wt(t).position()[e]+"px":n})}),wt.each({Height:"height",Width:"width"},function(t,e){wt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){wt.fn[i]=function(s,a){var o=arguments.length&&(n||"boolean"!=typeof s),r=n||(!0===s||!0===a?"margin":"border");return Lt(this,function(e,n,s){var a;return yt(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===s?wt.css(e,n,r):wt.style(e,n,s,r)},e,o?s:void 0,o)}})}),wt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){wt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),wt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),wt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),wt.proxy=function(t,e){var n,i,s;if("string"==typeof e&&(n=t[e],e=t,t=n),bt(t))return i=ct.call(arguments,2),s=function(){return t.apply(e||this,i.concat(ct.call(arguments)))},s.guid=t.guid=t.guid||wt.guid++,s},wt.holdReady=function(t){t?wt.readyWait++:wt.ready(!0)},wt.isArray=Array.isArray,wt.parseJSON=JSON.parse,wt.nodeName=a,wt.isFunction=bt,wt.isWindow=yt,wt.camelCase=f,wt.type=i,wt.now=Date.now,wt.isNumeric=function(t){var e=wt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return wt});var Qe=t.jQuery,Je=t.$;return wt.noConflict=function(e){return t.$===wt&&(t.$=Je),e&&t.jQuery===wt&&(t.jQuery=Qe),wt},e||(t.jQuery=t.$=wt),wt}),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(t){}t(e,exports,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,i){var s=t.Backbone,a=Array.prototype.slice;e.VERSION="1.3.3",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,s){return n[e](this[i],c(t,this),s)};case 4:return function(t,s,a){return n[e](this[i],c(t,this),s,a)};default:return function(){var t=a.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},r=function(t,e,i){n.each(e,function(e,s){n[s]&&(t.prototype[s]=o(e,s,i))})},c=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},d=e.Events={},u=/\s+/,h=function(t,e,i,s,a){var o,r=0;if(i&&"object"==typeof i){void 0!==s&&"context"in a&&void 0===a.context&&(a.context=s);for(o=n.keys(i);r<o.length;r++)e=h(t,e,o[r],i[o[r]],a)}else if(i&&u.test(i))for(o=i.split(u);r<o.length;r++)e=t(e,o[r],s,a);else e=t(e,i,s,a);return e};d.on=function(t,e,n){return p(this,t,e,n)};var p=function(t,e,n,i,s){if(t._events=h(f,t._events||{},e,n,{context:i,ctx:t,listening:s}),s){(t._listeners||(t._listeners={}))[s.id]=s}return t};d.listenTo=function(t,e,i){if(!t)return this;var s=t._listenId||(t._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=a[s];if(!o){var r=this._listenId||(this._listenId=n.uniqueId("l"));o=a[s]={obj:t,objId:s,id:r,listeningTo:a,count:0}}return p(t,e,i,this,o),this};var f=function(t,e,n,i){if(n){var s=t[e]||(t[e]=[]),a=i.context,o=i.ctx,r=i.listening;r&&r.count++,s.push({callback:n,context:a,ctx:a||o,listening:r})}return t};d.off=function(t,e,n){return this._events?(this._events=h(m,this._events,t,e,{context:n,listeners:this._listeners}),this):this},d.stopListening=function(t,e,i){var s=this._listeningTo;if(!s)return this;for(var a=t?[t._listenId]:n.keys(s),o=0;o<a.length;o++){var r=s[a[o]];if(!r)break;r.obj.off(e,i,this)}return this};var m=function(t,e,i,s){if(t){var a,o=0,r=s.context,c=s.listeners;if(e||i||r){for(var l=e?[e]:n.keys(t);o<l.length;o++){e=l[o];var d=t[e];if(!d)break;for(var u=[],h=0;h<d.length;h++){var p=d[h];i&&i!==p.callback&&i!==p.callback._callback||r&&r!==p.context?u.push(p):(a=p.listening)&&0==--a.count&&(delete c[a.id],delete a.listeningTo[a.objId])}u.length?t[e]=u:delete t[e]}return t}for(var f=n.keys(c);o<f.length;o++)a=c[f[o]],delete c[a.id],delete a.listeningTo[a.objId]}};d.once=function(t,e,i){var s=h(g,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(s,e,i)},d.listenToOnce=function(t,e,i){var s=h(g,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,s)};var g=function(t,e,i,s){if(i){var a=t[e]=n.once(function(){s(e,a),i.apply(this,arguments)});a._callback=i}return t};d.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return h(v,this._events,t,void 0,n),this};var v=function(t,e,n,i){if(t){var s=t[e],a=t.all;s&&a&&(a=a.slice()),s&&b(s,i),a&&b(a,[e].concat(i))}return t},b=function(t,e){var n,i=-1,s=t.length,a=e[0],o=e[1],r=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a,o);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a,o,r);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}};d.bind=d.on,d.unbind=d.off,n.extend(e,d);var y=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var s=n.result(this,"defaults");i=n.defaults(n.extend({},s,i),s),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var s;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;var a=i.unset,o=i.silent,r=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,d=this.changed,u=this._previousAttributes;for(var h in s)e=s[h],n.isEqual(l[h],e)||r.push(h),n.isEqual(u[h],e)?delete d[h]:d[h]=e,a?delete l[h]:l[h]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!o){r.length&&(this._pending=i);for(var p=0;p<r.length;p++)this.trigger("change:"+r[p],this,l[r[p]],i)}if(c)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var s in t){var a=t[s];n.isEqual(e[s],a)||(i[s]=a)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var s=t.parse?e.parse(n,t):n;if(!e.set(s,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},H(this,t),this.sync("read",this,t)},save:function(t,e,i){var s;null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var a=i.wait;if(s&&!a){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;var o=this,r=i.success,c=this.attributes;i.success=function(t){o.attributes=c;var e=i.parse?o.parse(t,i):t;if(a&&(e=n.extend({},s,e)),e&&!o.set(e,i))return!1;r&&r.call(i.context,o,t,i),o.trigger("sync",o,t,i)},H(this,i),s&&a&&(this.attributes=n.extend({},c,s));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=s);var d=this.sync(l,this,i)
;return this.attributes=c,d},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=t.wait,a=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){s&&a(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var o=!1;return this.isNew()?n.defer(t.success):(H(this,t),o=this.sync("delete",this,t)),s||a(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),r(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var _=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},S=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,s=Array(t.length-n),a=e.length;for(i=0;i<s.length;i++)s[i]=t[i+n];for(i=0;i<a;i++)t[i+n]=e[i];for(i=0;i<s.length;i++)t[i+a+n]=s[i]};n.extend(_.prototype,d,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),i?s[0]:s},set:function(t,e){if(null!=t){e=n.extend({},w,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var a,o,r=[],c=[],l=[],d=[],u={},h=e.add,p=e.merge,f=e.remove,m=!1,g=this.comparator&&null==s&&!1!==e.sort,v=n.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){a=t[o];var b=this.get(a);if(b){if(p&&a!==b){var y=this._isModel(a)?a.attributes:a;e.parse&&(y=b.parse(y,e)),b.set(y,e),l.push(b),g&&!m&&(m=b.hasChanged(v))}u[b.cid]||(u[b.cid]=!0,r.push(b)),t[o]=b}else h&&(a=t[o]=this._prepareModel(a,e))&&(c.push(a),this._addReference(a,e),u[a.cid]=!0,r.push(a))}if(f){for(o=0;o<this.length;o++)a=this.models[o],u[a.cid]||d.push(a);d.length&&this._removeModels(d,e)}var _=!1,x=!g&&h&&f;if(r.length&&x?(_=this.length!==r.length||n.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,S(this.models,r,0),this.length=this.models.length):c.length&&(g&&(m=!0),S(this.models,c,null==s?this.length:s),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(o=0;o<c.length;o++)null!=s&&(e.index=s+o),a=c[o],a.trigger("add",a,this,e);(m||_)&&this.trigger("sort",this,e),(c.length||d.length||l.length)&&(e.changes={added:c,removed:d,merged:l},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var s=this,a=e.success;return e.success=function(t,e,n){i&&s.add(t,n),a&&a.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var s=this.get(t[i]);if(s){var a=this.indexOf(s);this.models.splice(a,1),this.length--,delete this._byId[s.cid];var o=this.modelId(s.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=a,s.trigger("remove",s,this,e)),n.push(s),this._removeReference(s,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var s=this.modelId(e.previousAttributes()),a=this.modelId(e.attributes);s!==a&&(null!=s&&delete this._byId[s],null!=a&&(this._byId[a]=e))}}this.trigger.apply(this,arguments)}}),r(_,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,d,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var s=e.match(k);this.delegate(s[1],s[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,s){var a=A[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:a,dataType:"json"};if(s.url||(o.url=n.result(i,"url")||j()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",s.emulateJSON&&(o.data._method=a);var r=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",a),r)return r.apply(this,arguments)}}"GET"===o.type||s.emulateJSON||(o.processData=!1);var c=s.error;s.error=function(t,e,n){s.textStatus=e,s.errorThrown=n,c&&c.call(s.context,t,e,n)};var l=s.xhr=e.ajax(n.extend(o,s));return i.trigger("request",i,l,s),l};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,O=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,d,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var a=this;return e.history.route(t,function(n){var o=a._extractParameters(t,n);!1!==a.execute(s,o,i)&&(a.trigger.apply(a,["route:"+i].concat(o)),a.trigger("route",i,o),e.history.trigger("route",a,i,o))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(M,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var D=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,P=/#.*$/;D.started=!1,n.extend(D.prototype,d,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(R,"")},start:function(t){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,s=i.insertBefore(this.iframe,i.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var a=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!D.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(P,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new D;var $=function(t,e){var i,s=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e),i.prototype=n.create(s.prototype,t),i.prototype.constructor=i,i.__super__=s.prototype,i};y.extend=_.extend=E.extend=C.extend=D.extend=$;var j=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return bi.apply(null,arguments)}function e(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t){var e;for(e in t)return!1;return!0}function s(t){return void 0===t}function a(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var n in e)c(e,n)&&(t[n]=e[n]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,i){return ve(t,e,n,i,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(t){return null==t._pf&&(t._pf=u()),t._pf}function p(t){if(null==t._isValid){var e=h(t),n=_i.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function f(t){var e=d(NaN);return null!=t?l(h(e),t):h(e).userInvalidated=!0,e}function m(t,e){var n,i,a;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=h(e)),s(e._locale)||(t._locale=e._locale),wi.length>0)for(n=0;n<wi.length;n++)i=wi[n],a=e[i],s(a)||(t[i]=a);return t}function g(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===xi&&(xi=!0,t.updateOffset(this),xi=!1)}function v(t){return t instanceof g||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function _(t,e,n){var i,s=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(i=0;i<s;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&o++;return o+a}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,n){var i=!0;return l(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),i){for(var s,a=[],o=0;o<arguments.length;o++){if(s="","object"==typeof arguments[o]){s+="\n["+o+"] ";for(var r in arguments[0])s+=r+": "+arguments[0][r]+", ";s=s.slice(0,-2)}else s=arguments[o];a.push(s)}w(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function S(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Si[e]||(w(n),Si[e]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t){var e,n;for(n in t)e=t[n],C(e)?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,s=l({},t);for(i in e)c(e,i)&&(n(t[i])&&n(e[i])?(s[i]={},l(s[i],t[i]),l(s[i],e[i])):null!=e[i]?s[i]=e[i]:delete s[i]);for(i in t)c(t,i)&&!c(e,i)&&n(t[i])&&(s[i]=l({},s[i]));return s}function A(t){null!=t&&this.set(t)}function E(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return C(i)?i.call(e,n):i}function M(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function N(){return this._invalidDate}function O(t){return this._ordinal.replace("%d",t)}function I(t,e,n,i){var s=this._relativeTime[n];return C(s)?s(t,e,n,i):s.replace(/%d/i,t)}function D(t,e){var n=this._relativeTime[t>0?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)}function R(t,e){var n=t.toLowerCase();Oi[n]=Oi[n+"s"]=Oi[e]=t}function L(t){return"string"==typeof t?Oi[t]||Oi[t.toLowerCase()]:void 0}function P(t){var e,n,i={};for(n in t)c(t,n)&&(e=L(n))&&(i[e]=t[n]);return i}function $(t,e){Ii[t]=e}function j(t){var e=[];for(var n in t)e.push({unit:n,priority:Ii[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function H(e,n){return function(i){return null!=i?(F(this,e,i),t.updateOffset(this,n),this):q(this,e)}}function q(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function F(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function B(t){return t=L(t),C(this[t])?this[t]():this}function V(t,e){if("object"==typeof t){t=P(t);for(var n=j(t),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit])}else if(t=L(t),C(this[t]))return this[t](e);return this}function z(t,e,n){var i=""+Math.abs(t),s=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}function W(t,e,n,i){var s=i;"string"==typeof i&&(s=function(){return this[i]()}),t&&(Pi[t]=s),e&&(Pi[e[0]]=function(){return z(s.apply(this,arguments),e[1],e[2])}),n&&(Pi[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function Y(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,n,i=t.match(Di);for(e=0,n=i.length;e<n;e++)Pi[i[e]]?i[e]=Pi[i[e]]:i[e]=Y(i[e]);return function(e){var s,a="";for(s=0;s<n;s++)a+=C(i[s])?i[s].call(e,t):i[s];return a}}function X(t,e){return t.isValid()?(e=G(e,t.localeData()),Li[e]=Li[e]||U(e),Li[e](t)):t.localeData().invalidDate()}function G(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Ri.lastIndex=0;i>=0&&Ri.test(t);)t=t.replace(Ri,n),Ri.lastIndex=0,i-=1;return t}function Q(t,e,n){ts[t]=C(e)?e:function(t,i){return t&&n?n:e}}function J(t,e){return c(ts,t)?ts[t](e._strict,e._locale):new RegExp(Z(t))}function Z(t){return K(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s}))}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),a(e)&&(i=function(t,n){n[e]=y(t)}),n=0;n<t.length;n++)es[t[n]]=i}function et(t,e){tt(t,function(t,n,i,s){i._w=i._w||{},e(t,i._w,i,s)})}function nt(t,e,n){null!=e&&c(es,t)&&es[t](e,n._a,n,t)}function it(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function st(t,n){return t?e(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||hs).test(n)?"format":"standalone"][t.month()]:e(this._months)?this._months:this._months.standalone}function at(t,n){return t?e(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[hs.test(n)?"format":"standalone"][t.month()]:e(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ot(t,e,n){var i,s,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=d([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?(s=us.call(this._shortMonthsParse,o),-1!==s?s:null):(s=us.call(this._longMonthsParse,o),-1!==s?s:null):"MMM"===e?-1!==(s=us.call(this._shortMonthsParse,o))?s:(s=us.call(this._longMonthsParse,o),-1!==s?s:null):-1!==(s=us.call(this._longMonthsParse,o))?s:(s=us.call(this._shortMonthsParse,o),-1!==s?s:null)}function rt(t,e,n){var i,s,a;if(this._monthsParseExact)return ot.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=d([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function ct(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=y(e);else if(e=t.localeData().monthsParse(e),!a(e))return t;return n=Math.min(t.date(),it(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function lt(e){return null!=e?(ct(this,e),t.updateOffset(this,!0),this):q(this,"Month")}function dt(){return it(this.year(),this.month())}function ut(t){return this._monthsParseExact?(c(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=ms),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ht(t){return this._monthsParseExact?(c(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=gs),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function pt(){function t(t,e){return e.length-t.length}var e,n,i=[],s=[],a=[];for(e=0;e<12;e++)n=d([2e3,e]),i.push(this.monthsShort(n,"")),s.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(t),s.sort(t),a.sort(t),e=0;e<12;e++)i[e]=K(i[e]),s[e]=K(s[e]);for(e=0;e<24;e++)a[e]=K(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ft(t){return mt(t)?366:365}function mt(t){return t%4==0&&t%100!=0||t%400==0}function gt(){return mt(this.year())}function vt(t,e,n,i,s,a,o){var r=new Date(t,e,n,i,s,a,o);return t<100&&t>=0&&isFinite(r.getFullYear())&&r.setFullYear(t),r}function bt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function yt(t,e,n){var i=7+e-n;return-(7+bt(t,0,i).getUTCDay()-e)%7+i-1}function _t(t,e,n,i,s){var a,o,r=(7+n-i)%7,c=yt(t,i,s),l=1+7*(e-1)+r+c;return l<=0?(a=t-1,o=ft(a)+l):l>ft(t)?(a=t+1,o=l-ft(t)):(a=t,o=l),{year:a,dayOfYear:o}}function wt(t,e,n){var i,s,a=yt(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?(s=t.year()-1,i=o+xt(s,e,n)):o>xt(t.year(),e,n)?(i=o-xt(t.year(),e,n),s=t.year()+1):(s=t.year(),i=o),{week:i,year:s}}function xt(t,e,n){var i=yt(t,e,n),s=yt(t+1,e,n);return(ft(t)-i+s)/7}function St(t){return wt(t,this._week.dow,this._week.doy).week}function Ct(){return this._week.dow}function kt(){return this._week.doy}function Tt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function At(t){var e=wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Et(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Mt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Nt(t,n){return t?e(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][t.day()]:e(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ot(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function It(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Dt(t,e,n){var i,s,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=d([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?(s=us.call(this._weekdaysParse,o),-1!==s?s:null):"ddd"===e?(s=us.call(this._shortWeekdaysParse,o),-1!==s?s:null):(s=us.call(this._minWeekdaysParse,o),-1!==s?s:null):"dddd"===e?-1!==(s=us.call(this._weekdaysParse,o))?s:-1!==(s=us.call(this._shortWeekdaysParse,o))?s:(s=us.call(this._minWeekdaysParse,o),-1!==s?s:null):"ddd"===e?-1!==(s=us.call(this._shortWeekdaysParse,o))?s:-1!==(s=us.call(this._weekdaysParse,o))?s:(s=us.call(this._minWeekdaysParse,o),-1!==s?s:null):-1!==(s=us.call(this._minWeekdaysParse,o))?s:-1!==(s=us.call(this._weekdaysParse,o))?s:(s=us.call(this._shortWeekdaysParse,o),-1!==s?s:null)}function Rt(t,e,n){var i,s,a;if(this._weekdaysParseExact)return Dt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=d([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function Lt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Et(t,this.localeData()),this.add(t-e,"d")):e}function Pt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function $t(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Mt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function jt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ft.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=xs),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ht(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ft.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ss),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ft.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Cs),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ft(){function t(t,e){return e.length-t.length}var e,n,i,s,a,o=[],r=[],c=[],l=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),i=this.weekdaysMin(n,""),s=this.weekdaysShort(n,""),a=this.weekdays(n,""),o.push(i),r.push(s),c.push(a),l.push(i),l.push(s),l.push(a);for(o.sort(t),r.sort(t),c.sort(t),l.sort(t),e=0;e<7;e++)r[e]=K(r[e]),c[e]=K(c[e]),l[e]=K(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Bt(){return this.hours()%12||12}function Vt(){return this.hours()||24}function zt(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Wt(t,e){return e._meridiemParse}function Yt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ut(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Gt(t){for(var e,n,i,s,a=0;a<t.length;){for(s=Xt(t[a]).split("-"),e=s.length,n=Xt(t[a+1]),n=n?n.split("-"):null;e>0;){if(i=Qt(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&_(s,n,!0)>=e-1)break;e--}a++}return null}function Qt(t){var e=null
;if(!Ms[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ks._abbr,require("./locale/"+t),Jt(e)}catch(t){}return Ms[t]}function Jt(t,e){var n;return t&&(n=s(e)?te(t):Zt(t,e))&&(ks=n),ks._abbr}function Zt(t,e){if(null!==e){var n=Es;if(e.abbr=t,null!=Ms[t])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ms[t]._config;else if(null!=e.parentLocale){if(null==Ms[e.parentLocale])return Ns[e.parentLocale]||(Ns[e.parentLocale]=[]),Ns[e.parentLocale].push({name:t,config:e}),null;n=Ms[e.parentLocale]._config}return Ms[t]=new A(T(n,e)),Ns[t]&&Ns[t].forEach(function(t){Zt(t.name,t.config)}),Jt(t),Ms[t]}return delete Ms[t],null}function Kt(t,e){if(null!=e){var n,i=Es;null!=Ms[t]&&(i=Ms[t]._config),e=T(i,e),n=new A(e),n.parentLocale=Ms[t],Ms[t]=n,Jt(t)}else null!=Ms[t]&&(null!=Ms[t].parentLocale?Ms[t]=Ms[t].parentLocale:null!=Ms[t]&&delete Ms[t]);return Ms[t]}function te(t){var n;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ks;if(!e(t)){if(n=Qt(t))return n;t=[t]}return Gt(t)}function ee(){return Ti(Ms)}function ne(t){var e,n=t._a;return n&&-2===h(t).overflow&&(e=n[is]<0||n[is]>11?is:n[ss]<1||n[ss]>it(n[ns],n[is])?ss:n[as]<0||n[as]>24||24===n[as]&&(0!==n[os]||0!==n[rs]||0!==n[cs])?as:n[os]<0||n[os]>59?os:n[rs]<0||n[rs]>59?rs:n[cs]<0||n[cs]>999?cs:-1,h(t)._overflowDayOfYear&&(e<ns||e>ss)&&(e=ss),h(t)._overflowWeeks&&-1===e&&(e=ls),h(t)._overflowWeekday&&-1===e&&(e=ds),h(t).overflow=e),t}function ie(t){var e,n,i,s,a,o,r=t._i,c=Os.exec(r)||Is.exec(r);if(c){for(h(t).iso=!0,e=0,n=Rs.length;e<n;e++)if(Rs[e][1].exec(c[1])){s=Rs[e][0],i=!1!==Rs[e][2];break}if(null==s)return void(t._isValid=!1);if(c[3]){for(e=0,n=Ls.length;e<n;e++)if(Ls[e][1].exec(c[3])){a=(c[2]||" ")+Ls[e][0];break}if(null==a)return void(t._isValid=!1)}if(!i&&null!=a)return void(t._isValid=!1);if(c[4]){if(!Ds.exec(c[4]))return void(t._isValid=!1);o="Z"}t._f=s+(a||"")+(o||""),de(t)}else t._isValid=!1}function se(t){var e,n,i,s,a,o,r,c,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},d="YXWVUTSRQPONZABCDEFGHIKLM";if(e=t._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=$s.exec(e)){if(i=n[1]?"ddd"+(5===n[1].length?", ":" "):"",s="D MMM "+(n[2].length>10?"YYYY ":"YY "),a="HH:mm"+(n[4]?":ss":""),n[1]){var u=new Date(n[2]),p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()];if(n[1].substr(0,3)!==p)return h(t).weekdayMismatch=!0,void(t._isValid=!1)}switch(n[5].length){case 2:0===c?r=" +0000":(c=d.indexOf(n[5][1].toUpperCase())-12,r=(c<0?" -":" +")+(""+c).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:r=l[n[5]];break;default:r=l[" GMT"]}n[5]=r,t._i=n.splice(1).join(""),o=" ZZ",t._f=i+s+a+o,de(t),h(t).rfc2822=!0}else t._isValid=!1}function ae(e){var n=Ps.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));ie(e),!1===e._isValid&&(delete e._isValid,se(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function oe(t,e,n){return null!=t?t:null!=e?e:n}function re(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ce(t){var e,n,i,s,a=[];if(!t._d){for(i=re(t),t._w&&null==t._a[ss]&&null==t._a[is]&&le(t),null!=t._dayOfYear&&(s=oe(t._a[ns],i[ns]),(t._dayOfYear>ft(s)||0===t._dayOfYear)&&(h(t)._overflowDayOfYear=!0),n=bt(s,0,t._dayOfYear),t._a[is]=n.getUTCMonth(),t._a[ss]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[as]&&0===t._a[os]&&0===t._a[rs]&&0===t._a[cs]&&(t._nextDay=!0,t._a[as]=0),t._d=(t._useUTC?bt:vt).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[as]=24)}}function le(t){var e,n,i,s,a,o,r,c;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)a=1,o=4,n=oe(e.GG,t._a[ns],wt(be(),1,4).year),i=oe(e.W,1),((s=oe(e.E,1))<1||s>7)&&(c=!0);else{a=t._locale._week.dow,o=t._locale._week.doy;var l=wt(be(),a,o);n=oe(e.gg,t._a[ns],l.year),i=oe(e.w,l.week),null!=e.d?((s=e.d)<0||s>6)&&(c=!0):null!=e.e?(s=e.e+a,(e.e<0||e.e>6)&&(c=!0)):s=a}i<1||i>xt(n,a,o)?h(t)._overflowWeeks=!0:null!=c?h(t)._overflowWeekday=!0:(r=_t(n,i,s,a,o),t._a[ns]=r.year,t._dayOfYear=r.dayOfYear)}function de(e){if(e._f===t.ISO_8601)return void ie(e);if(e._f===t.RFC_2822)return void se(e);e._a=[],h(e).empty=!0;var n,i,s,a,o,r=""+e._i,c=r.length,l=0;for(s=G(e._f,e._locale).match(Di)||[],n=0;n<s.length;n++)a=s[n],i=(r.match(J(a,e))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&h(e).unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),l+=i.length),Pi[a]?(i?h(e).empty=!1:h(e).unusedTokens.push(a),nt(a,i,e)):e._strict&&!i&&h(e).unusedTokens.push(a);h(e).charsLeftOver=c-l,r.length>0&&h(e).unusedInput.push(r),e._a[as]<=12&&!0===h(e).bigHour&&e._a[as]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[as]=ue(e._locale,e._a[as],e._meridiem),ce(e),ne(e)}function ue(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function he(t){var e,n,i,s,a;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)a=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],de(e),p(e)&&(a+=h(e).charsLeftOver,a+=10*h(e).unusedTokens.length,h(e).score=a,(null==i||a<i)&&(i=a,n=e));l(t,n||e)}function pe(t){if(!t._d){var e=P(t._i);t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ce(t)}}function fe(t){var e=new g(ne(me(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function me(t){var n=t._i,i=t._f;return t._locale=t._locale||te(t._l),null===n||void 0===i&&""===n?f({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),v(n)?new g(ne(n)):(o(n)?t._d=n:e(i)?he(t):i?de(t):ge(t),p(t)||(t._d=null),t))}function ge(i){var c=i._i;s(c)?i._d=new Date(t.now()):o(c)?i._d=new Date(c.valueOf()):"string"==typeof c?ae(i):e(c)?(i._a=r(c.slice(0),function(t){return parseInt(t,10)}),ce(i)):n(c)?pe(i):a(c)?i._d=new Date(c):t.createFromInputFallback(i)}function ve(t,s,a,o,r){var c={};return!0!==a&&!1!==a||(o=a,a=void 0),(n(t)&&i(t)||e(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=r,c._l=a,c._i=t,c._f=s,c._strict=o,fe(c)}function be(t,e,n,i){return ve(t,e,n,i,!1)}function ye(t,n){var i,s;if(1===n.length&&e(n[0])&&(n=n[0]),!n.length)return be();for(i=n[0],s=1;s<n.length;++s)n[s].isValid()&&!n[s][t](i)||(i=n[s]);return i}function _e(){return ye("isBefore",[].slice.call(arguments,0))}function we(){return ye("isAfter",[].slice.call(arguments,0))}function xe(t){for(var e in t)if(-1===Fs.indexOf(e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Fs.length;++i)if(t[Fs[i]]){if(n)return!1;parseFloat(t[Fs[i]])!==y(t[Fs[i]])&&(n=!0)}return!0}function Se(){return this._isValid}function Ce(){return Ve(NaN)}function ke(t){var e=P(t),n=e.year||0,i=e.quarter||0,s=e.month||0,a=e.week||0,o=e.day||0,r=e.hour||0,c=e.minute||0,l=e.second||0,d=e.millisecond||0;this._isValid=xe(e),this._milliseconds=+d+1e3*l+6e4*c+1e3*r*60*60,this._days=+o+7*a,this._months=+s+3*i+12*n,this._data={},this._locale=te(),this._bubble()}function Te(t){return t instanceof ke}function Ae(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ee(t,e){W(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+z(~~(t/60),2)+e+z(~~t%60,2)})}function Me(t,e){var n=(e||"").match(t);if(null===n)return null;var i=n[n.length-1]||[],s=(i+"").match(Bs)||["-",0,0],a=60*s[1]+y(s[2]);return 0===a?0:"+"===s[0]?a:-a}function Ne(e,n){var i,s;return n._isUTC?(i=n.clone(),s=(v(e)||o(e)?e.valueOf():be(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),t.updateOffset(i,!1),i):be(e).local()}function Oe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ie(e,n,i){var s,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Me(Ji,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&n&&(s=Oe(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),a!==e&&(!n||this._changeInProgress?Xe(this,Ve(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Oe(this)}function De(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Re(t){return this.utcOffset(0,t)}function Le(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Oe(this),"m")),this}function Pe(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Me(Qi,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function $e(t){return!!this.isValid()&&(t=t?be(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function je(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function He(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),t=me(t),t._a){var e=t._isUTC?d(t._a):be(t._a);this._isDSTShifted=this.isValid()&&_(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return!!this.isValid()&&!this._isUTC}function Fe(){return!!this.isValid()&&this._isUTC}function Be(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ve(t,e){var n,i,s,o=t,r=null;return Te(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:a(t)?(o={},e?o[e]=t:o.milliseconds=t):(r=Vs.exec(t))?(n="-"===r[1]?-1:1,o={y:0,d:y(r[ss])*n,h:y(r[as])*n,m:y(r[os])*n,s:y(r[rs])*n,ms:y(Ae(1e3*r[cs]))*n}):(r=zs.exec(t))?(n="-"===r[1]?-1:1,o={y:ze(r[2],n),M:ze(r[3],n),w:ze(r[4],n),d:ze(r[5],n),h:ze(r[6],n),m:ze(r[7],n),s:ze(r[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(s=Ye(be(o.from),be(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),i=new ke(o),Te(t)&&c(t,"_locale")&&(i._locale=t._locale),i}function ze(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function We(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ye(t,e){var n;return t.isValid()&&e.isValid()?(e=Ne(e,t),t.isBefore(e)?n=We(t,e):(n=We(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ue(t,e){return function(n,i){var s,a;return null===i||isNaN(+i)||(S(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=i,i=a),n="string"==typeof n?+n:n,s=Ve(n,i),Xe(this,s,t),this}}function Xe(e,n,i,s){var a=n._milliseconds,o=Ae(n._days),r=Ae(n._months);e.isValid()&&(s=null==s||s,a&&e._d.setTime(e._d.valueOf()+a*i),o&&F(e,"Date",q(e,"Date")+o*i),r&&ct(e,q(e,"Month")+r*i),s&&t.updateOffset(e,o||r))}function Ge(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Qe(e,n){var i=e||be(),s=Ne(i,this).startOf("day"),a=t.calendarFormat(this,s)||"sameElse",o=n&&(C(n[a])?n[a].call(this,i):n[a]);return this.format(o||this.localeData().calendar(a,this,be(i)))}function Je(){return new g(this)}function Ze(t,e){var n=v(t)?t:be(t);return!(!this.isValid()||!n.isValid())&&(e=L(s(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Ke(t,e){var n=v(t)?t:be(t);return!(!this.isValid()||!n.isValid())&&(e=L(s(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function tn(t,e,n,i){return i=i||"()",("("===i[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))}function en(t,e){var n,i=v(t)?t:be(t);return!(!this.isValid()||!i.isValid())&&(e=L(e||"millisecond"),"millisecond"===e?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function nn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function sn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function an(t,e,n){var i,s,a,o;return this.isValid()?(i=Ne(t,this),i.isValid()?(s=6e4*(i.utcOffset()-this.utcOffset()),e=L(e),"year"===e||"month"===e||"quarter"===e?(o=on(this,i),"quarter"===e?o/=3:"year"===e&&(o/=12)):(a=this-i,o="second"===e?a/1e3:"minute"===e?a/6e4:"hour"===e?a/36e5:"day"===e?(a-s)/864e5:"week"===e?(a-s)/6048e5:a),n?o:b(o)):NaN):NaN}function on(t,e){var n,i,s=12*(e.year()-t.year())+(e.month()-t.month()),a=t.clone().add(s,"months");return e-a<0?(n=t.clone().add(s-1,"months"),i=(e-a)/(a-n)):(n=t.clone().add(s+1,"months"),i=(e-a)/(n-a)),-(s+i)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cn(){if(!this.isValid())return null;var t=this.clone().utc();return t.year()<0||t.year()>9999?X(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):C(Date.prototype.toISOString)?this.toDate().toISOString():X(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ln(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s=e+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+s)}function dn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=X(this,e);return this.localeData().postformat(n)}function un(t,e){return this.isValid()&&(v(t)&&t.isValid()||be(t).isValid())?Ve({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function hn(t){return this.from(be(),t)}function pn(t,e){return this.isValid()&&(v(t)&&t.isValid()||be(t).isValid())?Ve({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fn(t){return this.to(be(),t)}function mn(t){var e;return void 0===t?this._locale._abbr:(e=te(t),null!=e&&(this._locale=e),this)}function gn(){return this._locale}function vn(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function bn(t){return void 0===(t=L(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function yn(){return this._d.valueOf()-6e4*(this._offset||0)}function _n(){return Math.floor(this.valueOf()/1e3)}function wn(){return new Date(this.valueOf())}function xn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Sn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Cn(){return this.isValid()?this.toISOString():null}function kn(){return p(this)}function Tn(){return l({},h(this))}function An(){return h(this).overflow}function En(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mn(t,e){W(0,[t,t.length],0,e)}function Nn(t){return Rn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function On(t){return Rn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function In(){return xt(this.year(),1,4)}function Dn(){var t=this.localeData()._week;return xt(this.year(),t.dow,t.doy)}function Rn(t,e,n,i,s){var a;return null==t?wt(this,i,s).year:(a=xt(t,i,s),e>a&&(e=a),Ln.call(this,t,e,n,i,s))}function Ln(t,e,n,i,s){var a=_t(t,e,n,i,s),o=bt(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Pn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function $n(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function jn(t,e){e[cs]=y(1e3*("0."+t))}function Hn(){return this._isUTC?"UTC":""}function qn(){return this._isUTC?"Coordinated Universal Time":""}function Fn(t){return be(1e3*t)}function Bn(){return be.apply(null,arguments).parseZone()}function Vn(t){return t}function zn(t,e,n,i){var s=te(),a=d().set(i,e);return s[n](a,t)}function Wn(t,e,n){if(a(t)&&(e=t,t=void 0),t=t||"",null!=e)return zn(t,e,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=zn(t,i,n,"month");return s}function Yn(t,e,n,i){"boolean"==typeof t?(a(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,a(e)&&(n=e,e=void 0),e=e||"");var s=te(),o=t?s._week.dow:0;if(null!=n)return zn(e,(n+o)%7,i,"day");var r,c=[];for(r=0;r<7;r++)c[r]=zn(e,(r+o)%7,i,"day");return c}function Un(t,e){return Wn(t,e,"months")}function Xn(t,e){return Wn(t,e,"monthsShort")}function Gn(t,e,n){return Yn(t,e,n,"weekdays")}function Qn(t,e,n){return Yn(t,e,n,"weekdaysShort")}function Jn(t,e,n){return Yn(t,e,n,"weekdaysMin")}function Zn(){var t=this._data;return this._milliseconds=ea(this._milliseconds),this._days=ea(this._days),this._months=ea(this._months),t.milliseconds=ea(t.milliseconds),t.seconds=ea(t.seconds),t.minutes=ea(t.minutes),t.hours=ea(t.hours),t.months=ea(t.months),t.years=ea(t.years),this}function Kn(t,e,n,i){var s=Ve(e,n);return t._milliseconds+=i*s._milliseconds,t._days+=i*s._days,t._months+=i*s._months,t._bubble()}function ti(t,e){return Kn(this,t,e,1)}function ei(t,e){return Kn(this,t,e,-1)}function ni(t){return t<0?Math.floor(t):Math.ceil(t)}function ii(){var t,e,n,i,s,a=this._milliseconds,o=this._days,r=this._months,c=this._data;return a>=0&&o>=0&&r>=0||a<=0&&o<=0&&r<=0||(a+=864e5*ni(ai(r)+o),o=0,r=0),c.milliseconds=a%1e3,t=b(a/1e3),c.seconds=t%60,e=b(t/60),c.minutes=e%60,n=b(e/60),c.hours=n%24,o+=b(n/24),s=b(si(o)),r+=s,o-=ni(ai(s)),i=b(r/12),r%=12,c.days=o,c.months=r,c.years=i,this}function si(t){return 4800*t/146097}function ai(t){return 146097*t/4800}function oi(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=L(t))||"year"===t)return e=this._days+i/864e5,n=this._months+si(e),"month"===t?n:n/12;switch(e=this._days+Math.round(ai(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function ri(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12):NaN}function ci(t){return function(){return this.as(t)}}function li(t){return t=L(t),this.isValid()?this[t+"s"]():NaN}function di(t){return function(){return this.isValid()?this._data[t]:NaN}}function ui(){return b(this.days()/7)}function hi(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function pi(t,e,n){var i=Ve(t).abs(),s=va(i.as("s")),a=va(i.as("m")),o=va(i.as("h")),r=va(i.as("d")),c=va(i.as("M")),l=va(i.as("y")),d=s<=ba.ss&&["s",s]||s<ba.s&&["ss",s]||a<=1&&["m"]||a<ba.m&&["mm",a]||o<=1&&["h"]||o<ba.h&&["hh",o]||r<=1&&["d"]||r<ba.d&&["dd",r]||c<=1&&["M"]||c<ba.M&&["MM",c]||l<=1&&["y"]||["yy",l];return d[2]=e,d[3]=+t>0,d[4]=n,hi.apply(null,d)}function fi(t){return void 0===t?va:"function"==typeof t&&(va=t,!0)}function mi(t,e){return void 0!==ba[t]&&(void 0===e?ba[t]:(ba[t]=e,"s"===t&&(ba.ss=e-1),!0))}function gi(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=pi(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function vi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i=ya(this._milliseconds)/1e3,s=ya(this._days),a=ya(this._months);t=b(i/60),e=b(t/60),i%=60,t%=60,n=b(a/12),a%=12;var o=n,r=a,c=s,l=e,d=t,u=i,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(r?r+"M":"")+(c?c+"D":"")+(l||d||u?"T":"")+(l?l+"H":"")+(d?d+"M":"")+(u?u+"S":""):"P0D"}var bi,yi;yi=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var _i=yi,wi=t.momentProperties=[],xi=!1,Si={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Ci;Ci=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)c(t,e)&&n.push(e);return n};var ki,Ti=Ci,Ai={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ei={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Mi=/\d{1,2}/,Ni={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Oi={},Ii={},Di=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ri=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Li={},Pi={},$i=/\d/,ji=/\d\d/,Hi=/\d{3}/,qi=/\d{4}/,Fi=/[+-]?\d{6}/,Bi=/\d\d?/,Vi=/\d\d\d\d?/,zi=/\d\d\d\d\d\d?/,Wi=/\d{1,3}/,Yi=/\d{1,4}/,Ui=/[+-]?\d{1,6}/,Xi=/\d+/,Gi=/[+-]?\d+/,Qi=/Z|[+-]\d\d:?\d\d/gi,Ji=/Z|[+-]\d\d(?::?\d\d)?/gi,Zi=/[+-]?\d+(\.\d{1,3})?/,Ki=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ts={},es={},ns=0,is=1,ss=2,as=3,os=4,rs=5,cs=6,ls=7,ds=8;ki=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};var us=ki;W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),W("MMMM",0,0,function(t){return this.localeData().months(this,t)}),R("month","M"),$("month",8),Q("M",Bi),Q("MM",Bi,ji),Q("MMM",function(t,e){return e.monthsShortRegex(t)}),Q("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[is]=y(t)-1}),tt(["MMM","MMMM"],function(t,e,n,i){var s=n._locale.monthsParse(t,i,n._strict);null!=s?e[is]=s:h(n).invalidMonth=t});var hs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ps="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fs="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ms=Ki,gs=Ki;W("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),R("year","y"),$("year",1),Q("Y",Gi),Q("YY",Bi,ji),Q("YYYY",Yi,qi),Q("YYYYY",Ui,Fi),Q("YYYYYY",Ui,Fi),tt(["YYYYY","YYYYYY"],ns),tt("YYYY",function(e,n){n[ns]=2===e.length?t.parseTwoDigitYear(e):y(e)}),tt("YY",function(e,n){n[ns]=t.parseTwoDigitYear(e)}),tt("Y",function(t,e){e[ns]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var vs=H("FullYear",!0);W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),$("week",5),$("isoWeek",5),Q("w",Bi),Q("ww",Bi,ji),Q("W",Bi),Q("WW",Bi,ji),et(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});var bs={dow:0,doy:6};W("d",0,"do","day"),W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),$("day",11),$("weekday",11),$("isoWeekday",11),Q("d",Bi),Q("e",Bi),Q("E",Bi),Q("dd",function(t,e){return e.weekdaysMinRegex(t)}),Q("ddd",function(t,e){return e.weekdaysShortRegex(t)}),Q("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,n,i){var s=n._locale.weekdaysParse(t,i,n._strict);null!=s?e.d=s:h(n).invalidWeekday=t}),et(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var ys="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_s="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ws="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xs=Ki,Ss=Ki,Cs=Ki;W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Bt),W("k",["kk",2],0,Vt),W("hmm",0,0,function(){return""+Bt.apply(this)+z(this.minutes(),2)}),W("hmmss",0,0,function(){return""+Bt.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),zt("a",!0),zt("A",!1),R("hour","h"),$("hour",13),Q("a",Wt),Q("A",Wt),Q("H",Bi),Q("h",Bi),Q("k",Bi),Q("HH",Bi,ji),Q("hh",Bi,ji),Q("kk",Bi,ji),Q("hmm",Vi),Q("hmmss",zi),Q("Hmm",Vi),Q("Hmmss",zi),tt(["H","HH"],as),tt(["k","kk"],function(t,e,n){var i=y(t);e[as]=24===i?0:i}),tt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),tt(["h","hh"],function(t,e,n){e[as]=y(t),h(n).bigHour=!0}),tt("hmm",function(t,e,n){var i=t.length-2;e[as]=y(t.substr(0,i)),e[os]=y(t.substr(i)),h(n).bigHour=!0}),tt("hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[as]=y(t.substr(0,i)),e[os]=y(t.substr(i,2)),e[rs]=y(t.substr(s)),h(n).bigHour=!0}),tt("Hmm",function(t,e,n){var i=t.length-2;e[as]=y(t.substr(0,i)),e[os]=y(t.substr(i))}),tt("Hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[as]=y(t.substr(0,i)),e[os]=y(t.substr(i,2)),e[rs]=y(t.substr(s))});var ks,Ts=/[ap]\.?m?\.?/i,As=H("Hours",!0),Es={calendar:Ai,longDateFormat:Ei,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Mi,relativeTime:Ni,months:ps,monthsShort:fs,week:bs,weekdays:ys,weekdaysMin:ws,weekdaysShort:_s,meridiemParse:Ts},Ms={},Ns={},Os=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Is=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ds=/Z|[+-]\d\d(?::?\d\d)?/,Rs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ls=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ps=/^\/?Date\((\-?\d+)/i,$s=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var js=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=be.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()}),Hs=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=be.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()}),qs=function(){return Date.now?Date.now():+new Date},Fs=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ee("Z",":"),Ee("ZZ",""),Q("Z",Ji),Q("ZZ",Ji),tt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Me(Ji,t)});var Bs=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Vs=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,zs=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ve.fn=ke.prototype,Ve.invalid=Ce;var Ws=Ue(1,"add"),Ys=Ue(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Us=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Mn("gggg","weekYear"),Mn("ggggg","weekYear"),Mn("GGGG","isoWeekYear"),Mn("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),$("weekYear",1),$("isoWeekYear",1),Q("G",Gi),Q("g",Gi),Q("GG",Bi,ji),Q("gg",Bi,ji),Q("GGGG",Yi,qi),Q("gggg",Yi,qi),Q("GGGGG",Ui,Fi),Q("ggggg",Ui,Fi),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),et(["gg","GG"],function(e,n,i,s){n[s]=t.parseTwoDigitYear(e)}),W("Q",0,"Qo","quarter"),R("quarter","Q"),$("quarter",7),Q("Q",$i),tt("Q",function(t,e){e[is]=3*(y(t)-1)}),W("D",["DD",2],"Do","date"),R("date","D"),$("date",9),Q("D",Bi),Q("DD",Bi,ji),Q("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),tt(["D","DD"],ss),tt("Do",function(t,e){e[ss]=y(t.match(Bi)[0],10)});var Xs=H("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),$("dayOfYear",4),Q("DDD",Wi),Q("DDDD",Hi),tt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),W("m",["mm",2],0,"minute"),R("minute","m"),$("minute",14),Q("m",Bi),Q("mm",Bi,ji),tt(["m","mm"],os);var Gs=H("Minutes",!1);W("s",["ss",2],0,"second"),R("second","s"),$("second",15),Q("s",Bi),Q("ss",Bi,ji),tt(["s","ss"],rs);var Qs=H("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),R("millisecond","ms"),$("millisecond",16),Q("S",Wi,$i),Q("SS",Wi,ji),Q("SSS",Wi,Hi);var Js;for(Js="SSSS";Js.length<=9;Js+="S")Q(Js,Xi);for(Js="S";Js.length<=9;Js+="S")tt(Js,jn);var Zs=H("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var Ks=g.prototype;Ks.add=Ws,Ks.calendar=Qe,Ks.clone=Je,Ks.diff=an,Ks.endOf=bn,Ks.format=dn,Ks.from=un,Ks.fromNow=hn,Ks.to=pn,Ks.toNow=fn,Ks.get=B,Ks.invalidAt=An,Ks.isAfter=Ze,Ks.isBefore=Ke,Ks.isBetween=tn,Ks.isSame=en,Ks.isSameOrAfter=nn,Ks.isSameOrBefore=sn,Ks.isValid=kn,Ks.lang=Us,Ks.locale=mn,Ks.localeData=gn,Ks.max=Hs,Ks.min=js,Ks.parsingFlags=Tn,Ks.set=V,Ks.startOf=vn,Ks.subtract=Ys,Ks.toArray=xn,Ks.toObject=Sn,Ks.toDate=wn,Ks.toISOString=cn,Ks.inspect=ln,Ks.toJSON=Cn,Ks.toString=rn,Ks.unix=_n,Ks.valueOf=yn,Ks.creationData=En,Ks.year=vs,Ks.isLeapYear=gt,Ks.weekYear=Nn,Ks.isoWeekYear=On,Ks.quarter=Ks.quarters=Pn,Ks.month=lt,Ks.daysInMonth=dt,Ks.week=Ks.weeks=Tt,Ks.isoWeek=Ks.isoWeeks=At,Ks.weeksInYear=Dn,Ks.isoWeeksInYear=In,Ks.date=Xs,Ks.day=Ks.days=Lt,Ks.weekday=Pt,Ks.isoWeekday=$t,Ks.dayOfYear=$n,Ks.hour=Ks.hours=As,Ks.minute=Ks.minutes=Gs,Ks.second=Ks.seconds=Qs,Ks.millisecond=Ks.milliseconds=Zs,Ks.utcOffset=Ie,Ks.utc=Re,Ks.local=Le,Ks.parseZone=Pe,Ks.hasAlignedHourOffset=$e,Ks.isDST=je,Ks.isLocal=qe,
Ks.isUtcOffset=Fe,Ks.isUtc=Be,Ks.isUTC=Be,Ks.zoneAbbr=Hn,Ks.zoneName=qn,Ks.dates=x("dates accessor is deprecated. Use date instead.",Xs),Ks.months=x("months accessor is deprecated. Use month instead",lt),Ks.years=x("years accessor is deprecated. Use year instead",vs),Ks.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",De),Ks.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",He);var ta=A.prototype;ta.calendar=E,ta.longDateFormat=M,ta.invalidDate=N,ta.ordinal=O,ta.preparse=Vn,ta.postformat=Vn,ta.relativeTime=I,ta.pastFuture=D,ta.set=k,ta.months=st,ta.monthsShort=at,ta.monthsParse=rt,ta.monthsRegex=ht,ta.monthsShortRegex=ut,ta.week=St,ta.firstDayOfYear=kt,ta.firstDayOfWeek=Ct,ta.weekdays=Nt,ta.weekdaysMin=It,ta.weekdaysShort=Ot,ta.weekdaysParse=Rt,ta.weekdaysRegex=jt,ta.weekdaysShortRegex=Ht,ta.weekdaysMinRegex=qt,ta.isPM=Yt,ta.meridiem=Ut,Jt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=x("moment.lang is deprecated. Use moment.locale instead.",Jt),t.langData=x("moment.langData is deprecated. Use moment.localeData instead.",te);var ea=Math.abs,na=ci("ms"),ia=ci("s"),sa=ci("m"),aa=ci("h"),oa=ci("d"),ra=ci("w"),ca=ci("M"),la=ci("y"),da=di("milliseconds"),ua=di("seconds"),ha=di("minutes"),pa=di("hours"),fa=di("days"),ma=di("months"),ga=di("years"),va=Math.round,ba={ss:44,s:45,m:45,h:22,d:26,M:11},ya=Math.abs,_a=ke.prototype;return _a.isValid=Se,_a.abs=Zn,_a.add=ti,_a.subtract=ei,_a.as=oi,_a.asMilliseconds=na,_a.asSeconds=ia,_a.asMinutes=sa,_a.asHours=aa,_a.asDays=oa,_a.asWeeks=ra,_a.asMonths=ca,_a.asYears=la,_a.valueOf=ri,_a._bubble=ii,_a.get=li,_a.milliseconds=da,_a.seconds=ua,_a.minutes=ha,_a.hours=pa,_a.days=fa,_a.weeks=ui,_a.months=ma,_a.years=ga,_a.humanize=gi,_a.toISOString=vi,_a.toString=vi,_a.toJSON=vi,_a.locale=mn,_a.localeData=gn,_a.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vi),_a.lang=Us,W("X",0,0,"unix"),W("x",0,0,"valueOf"),Q("x",Gi),Q("X",Zi),tt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,n){n._d=new Date(y(t))}),t.version="2.18.1",function(t){bi=t}(be),t.fn=Ks,t.min=_e,t.max=we,t.now=qs,t.utc=d,t.unix=Fn,t.months=Un,t.isDate=o,t.locale=Jt,t.invalid=f,t.duration=Ve,t.isMoment=v,t.weekdays=Gn,t.parseZone=Bn,t.localeData=te,t.isDuration=Te,t.monthsShort=Xn,t.weekdaysMin=Jn,t.defineLocale=Zt,t.updateLocale=Kt,t.locales=ee,t.weekdaysShort=Qn,t.normalizeUnits=L,t.relativeTimeRounding=fi,t.relativeTimeThreshold=mi,t.calendarFormat=Ge,t.prototype=Ks,t}),function(t,e){if("function"==typeof define&&define.amd)define("strophe",[],e);else{var n=e();t.Strophe=n.Strophe,t.$build=n.$build,t.$iq=n.$iq,t.$msg=n.$msg,t.$pres=n.$pres,t.SHA1=n.SHA1,t.MD5=n.MD5,t.b64_hmac_sha1=n.b64_hmac_sha1,t.b64_sha1=n.b64_sha1,t.str_hmac_sha1=n.str_hmac_sha1,t.str_sha1=n.str_sha1}}(this,function(){var t,e,n;return function(i){function s(t,e){return w.call(t,e)}function a(t,e){var n,i,s,a,o,r,c,l,d,u,h,p,f=e&&e.split("/"),m=y.map,g=m&&m["*"]||{};if(t){for(t=t.split("/"),o=t.length-1,y.nodeIdCompat&&S.test(t[o])&&(t[o]=t[o].replace(S,"")),"."===t[0].charAt(0)&&f&&(p=f.slice(0,f.length-1),t=p.concat(t)),d=0;d<t.length;d++)if("."===(h=t[d]))t.splice(d,1),d-=1;else if(".."===h){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((f||g)&&m){for(n=t.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),f)for(u=f.length;u>0;u-=1)if((s=m[f.slice(0,u).join("/")])&&(s=s[i])){a=s,r=d;break}if(a)break;!c&&g&&g[i]&&(c=g[i],l=d)}!a&&c&&(a=c,r=l),a&&(n.splice(0,r,a),t=n.join("/"))}return t}function o(t,e){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),f.apply(i,n.concat([t,e]))}}function r(t){return function(e){return a(e,t)}}function c(t){return function(e){v[t]=e}}function l(t){if(s(b,t)){var e=b[t];delete b[t],_[t]=!0,p.apply(i,e)}if(!s(v,t)&&!s(_,t))throw new Error("No "+t);return v[t]}function d(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return t?d(t):[]}function h(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,f,m,g,v={},b={},y={},_={},w=Object.prototype.hasOwnProperty,x=[].slice,S=/\.js$/;m=function(t,e){var n,i=d(t),s=i[0],o=e[1];return t=i[1],s&&(s=a(s,o),n=l(s)),s?t=n&&n.normalize?n.normalize(t,r(o)):a(t,o):(t=a(t,o),i=d(t),s=i[0],t=i[1],s&&(n=l(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:n}},g={require:function(t){return o(t)},exports:function(t){var e=v[t];return void 0!==e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:h(t)}}},p=function(t,e,n,a){var r,d,h,p,f,y,w,x=[],S=typeof n;if(a=a||t,y=u(a),"undefined"===S||"function"===S){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=m(e[f],y),"require"===(d=p.f))x[f]=g.require(t);else if("exports"===d)x[f]=g.exports(t),w=!0;else if("module"===d)r=x[f]=g.module(t);else if(s(v,d)||s(b,d)||s(_,d))x[f]=l(d);else{if(!p.p)throw new Error(t+" missing "+d);p.p.load(p.n,o(a,!0),c(d),{}),x[f]=v[d]}h=n?n.apply(v[t],x):void 0,t&&(r&&r.exports!==i&&r.exports!==v[t]?v[t]=r.exports:h===i&&w||(v[t]=h))}else t&&(v[t]=n)},t=e=f=function(t,e,n,s,a){if("string"==typeof t)return g[t]?g[t](e):l(m(t,u(e)).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=n,n=null):t=i}return e=e||function(){},"function"==typeof n&&(n=s,s=a),s?p(i,t,e,n):setTimeout(function(){p(i,t,e,n)},4),f},f.config=function(t){return f(t)},t._defined=v,n=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),s(v,t)||s(b,t)||(b[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("node_modules/almond/almond.js",function(){}),function(t,e){if("function"!=typeof n||!n.amd)return e(t);n("strophe-polyfill",[],function(){return e(t)})}(this,function(t){Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice,i=Array.prototype.concat,s=n.call(arguments,1);return function(){return e.apply(t||this,i.call(s,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var s=Object(this),a=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<a;){var o;i in s&&(o=s[i],t.call(n,o,i,s)),i++}});var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.btoa||(t.btoa=function(t){var n,i,s,a,o,r,c,l="",d=0;do{n=t.charCodeAt(d++),i=t.charCodeAt(d++),s=t.charCodeAt(d++),a=n>>2,o=(3&n)<<4|i>>4,r=(15&i)<<2|s>>6,c=63&s,isNaN(i)?(o=(3&n)<<4,r=c=64):isNaN(s)&&(c=64),l=l+e.charAt(a)+e.charAt(o)+e.charAt(r)+e.charAt(c)}while(d<t.length);return l}),t.atob||(t.atob=function(t){var n,i,s,a,o,r,c,l="",d=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{a=e.indexOf(t.charAt(d++)),o=e.indexOf(t.charAt(d++)),r=e.indexOf(t.charAt(d++)),c=e.indexOf(t.charAt(d++)),n=a<<2|o>>4,i=(15&o)<<4|r>>2,s=(3&r)<<6|c,l+=String.fromCharCode(n),64!==r&&(l+=String.fromCharCode(i)),64!==c&&(l+=String.fromCharCode(s))}while(d<t.length);return l})}),function(t,e){"function"==typeof n&&n.amd?n("strophe-sha1",[],function(){return e()}):t.SHA1=e()}(this,function(){function t(t,i){t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;var o,r,c,l,d,u,h,p,f=new Array(80),m=1732584193,g=-271733879,v=-1732584194,b=271733878,y=-1009589776;for(o=0;o<t.length;o+=16){for(l=m,d=g,u=v,h=b,p=y,r=0;r<80;r++)f[r]=r<16?t[o+r]:a(f[r-3]^f[r-8]^f[r-14]^f[r-16],1),c=s(s(a(m,5),e(r,g,v,b)),s(s(y,f[r]),n(r))),y=b,b=v,v=a(g,30),g=m,m=c;m=s(m,l),g=s(g,d),v=s(v,u),b=s(b,h),y=s(y,p)}return[m,g,v,b,y]}function e(t,e,n,i){return t<20?e&n|~e&i:t<40?e^n^i:t<60?e&n|e&i|n&i:e^n^i}function n(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function i(e,n){var i=o(e);i.length>16&&(i=t(i,8*e.length));for(var s=new Array(16),a=new Array(16),r=0;r<16;r++)s[r]=909522486^i[r],a[r]=1549556828^i[r];var c=t(s.concat(o(n)),512+8*n.length);return t(a.concat(c),672)}function s(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e){return t<<e|t>>>32-e}function o(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}function r(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>24-n%32&255);return e}function c(t){for(var e,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",a=0;a<4*t.length;a+=3)for(e=(t[a>>2]>>8*(3-a%4)&255)<<16|(t[a+1>>2]>>8*(3-(a+1)%4)&255)<<8|t[a+2>>2]>>8*(3-(a+2)%4)&255,n=0;n<4;n++)8*a+6*n>32*t.length?s+="=":s+=i.charAt(e>>6*(3-n)&63);return s}return{b64_hmac_sha1:function(t,e){return c(i(t,e))},b64_sha1:function(e){return c(t(o(e),8*e.length))},binb2str:r,core_hmac_sha1:i,str_hmac_sha1:function(t,e){return r(i(t,e))},str_sha1:function(e){return r(t(o(e),8*e.length))}}}),function(t,e){"function"==typeof n&&n.amd?n("strophe-md5",[],function(){return e()}):t.MD5=e()}(this,function(){var t=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},e=function(t,e){return t<<e|t>>>32-e},n=function(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},i=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},s=function(t){for(var e="0123456789abcdef",n="",i=0;i<4*t.length;i++)n+=e.charAt(t[i>>2]>>i%4*8+4&15)+e.charAt(t[i>>2]>>i%4*8&15);return n},a=function(n,i,s,a,o,r){return t(e(t(t(i,n),t(a,r)),o),s)},o=function(t,e,n,i,s,o,r){return a(e&n|~e&i,t,e,s,o,r)},r=function(t,e,n,i,s,o,r){return a(e&i|n&~i,t,e,s,o,r)},c=function(t,e,n,i,s,o,r){return a(e^n^i,t,e,s,o,r)},l=function(t,e,n,i,s,o,r){return a(n^(e|~i),t,e,s,o,r)},d=function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var i,s,a,d,u=1732584193,h=-271733879,p=-1732584194,f=271733878,m=0;m<e.length;m+=16)i=u,s=h,a=p,d=f,u=o(u,h,p,f,e[m+0],7,-680876936),f=o(f,u,h,p,e[m+1],12,-389564586),p=o(p,f,u,h,e[m+2],17,606105819),h=o(h,p,f,u,e[m+3],22,-1044525330),u=o(u,h,p,f,e[m+4],7,-176418897),f=o(f,u,h,p,e[m+5],12,1200080426),p=o(p,f,u,h,e[m+6],17,-1473231341),h=o(h,p,f,u,e[m+7],22,-45705983),u=o(u,h,p,f,e[m+8],7,1770035416),f=o(f,u,h,p,e[m+9],12,-1958414417),p=o(p,f,u,h,e[m+10],17,-42063),h=o(h,p,f,u,e[m+11],22,-1990404162),u=o(u,h,p,f,e[m+12],7,1804603682),f=o(f,u,h,p,e[m+13],12,-40341101),p=o(p,f,u,h,e[m+14],17,-1502002290),h=o(h,p,f,u,e[m+15],22,1236535329),u=r(u,h,p,f,e[m+1],5,-165796510),f=r(f,u,h,p,e[m+6],9,-1069501632),p=r(p,f,u,h,e[m+11],14,643717713),h=r(h,p,f,u,e[m+0],20,-373897302),u=r(u,h,p,f,e[m+5],5,-701558691),f=r(f,u,h,p,e[m+10],9,38016083),p=r(p,f,u,h,e[m+15],14,-660478335),h=r(h,p,f,u,e[m+4],20,-405537848),u=r(u,h,p,f,e[m+9],5,568446438),f=r(f,u,h,p,e[m+14],9,-1019803690),p=r(p,f,u,h,e[m+3],14,-187363961),h=r(h,p,f,u,e[m+8],20,1163531501),u=r(u,h,p,f,e[m+13],5,-1444681467),f=r(f,u,h,p,e[m+2],9,-51403784),p=r(p,f,u,h,e[m+7],14,1735328473),h=r(h,p,f,u,e[m+12],20,-1926607734),u=c(u,h,p,f,e[m+5],4,-378558),f=c(f,u,h,p,e[m+8],11,-2022574463),p=c(p,f,u,h,e[m+11],16,1839030562),h=c(h,p,f,u,e[m+14],23,-35309556),u=c(u,h,p,f,e[m+1],4,-1530992060),f=c(f,u,h,p,e[m+4],11,1272893353),p=c(p,f,u,h,e[m+7],16,-155497632),h=c(h,p,f,u,e[m+10],23,-1094730640),u=c(u,h,p,f,e[m+13],4,681279174),f=c(f,u,h,p,e[m+0],11,-358537222),p=c(p,f,u,h,e[m+3],16,-722521979),h=c(h,p,f,u,e[m+6],23,76029189),u=c(u,h,p,f,e[m+9],4,-640364487),f=c(f,u,h,p,e[m+12],11,-421815835),p=c(p,f,u,h,e[m+15],16,530742520),h=c(h,p,f,u,e[m+2],23,-995338651),u=l(u,h,p,f,e[m+0],6,-198630844),f=l(f,u,h,p,e[m+7],10,1126891415),p=l(p,f,u,h,e[m+14],15,-1416354905),h=l(h,p,f,u,e[m+5],21,-57434055),u=l(u,h,p,f,e[m+12],6,1700485571),f=l(f,u,h,p,e[m+3],10,-1894986606),p=l(p,f,u,h,e[m+10],15,-1051523),h=l(h,p,f,u,e[m+1],21,-2054922799),u=l(u,h,p,f,e[m+8],6,1873313359),f=l(f,u,h,p,e[m+15],10,-30611744),p=l(p,f,u,h,e[m+6],15,-1560198380),h=l(h,p,f,u,e[m+13],21,1309151649),u=l(u,h,p,f,e[m+4],6,-145523070),f=l(f,u,h,p,e[m+11],10,-1120210379),p=l(p,f,u,h,e[m+2],15,718787259),h=l(h,p,f,u,e[m+9],21,-343485551),u=t(u,i),h=t(h,s),p=t(p,a),f=t(f,d);return[u,h,p,f]};return{hexdigest:function(t){return s(d(n(t),8*t.length))},hash:function(t){return i(d(n(t),8*t.length))}}}),function(t,e){"function"==typeof n&&n.amd?n("strophe-utils",[],function(){return e()}):t.stropheUtils=e()}(this,function(){return{utf16to8:function(t){var e,n,i="",s=t.length;for(e=0;e<s;e++)n=t.charCodeAt(e),n>=0&&n<=127?i+=t.charAt(e):n>2047?(i+=String.fromCharCode(224|n>>12&15),i+=String.fromCharCode(128|n>>6&63),i+=String.fromCharCode(128|n>>0&63)):(i+=String.fromCharCode(192|n>>6&31),i+=String.fromCharCode(128|n>>0&63));return i},addCookies:function(t){var e,n,i,s,a,o,r;for(e in t||{})a="",o="",r="",n=t[e],i="object"==typeof n,s=escape(unescape(i?n.value:n)),i&&(a=n.expires?";expires="+n.expires:"",o=n.domain?";domain="+n.domain:"",r=n.path?";path="+n.path:""),document.cookie=e+"="+s+a+o+r}}}),function(t,e){if("function"==typeof n&&n.amd)n("strophe-core",["strophe-sha1","strophe-md5","strophe-utils"],function(){return e.apply(this,arguments)});else{var i=e(t.SHA1,t.MD5,t.stropheUtils);t.Strophe=i.Strophe,t.$build=i.$build,t.$iq=i.$iq,t.$msg=i.$msg,t.$pres=i.$pres,t.SHA1=i.SHA1,t.MD5=i.MD5,t.b64_hmac_sha1=i.SHA1.b64_hmac_sha1,t.b64_sha1=i.SHA1.b64_sha1,t.str_hmac_sha1=i.SHA1.str_hmac_sha1,t.str_sha1=i.SHA1.str_sha1}}(this,function(t,e,n){function i(t,e){return new r.Builder(t,e)}function s(t){return new r.Builder("message",t)}function a(t){return new r.Builder("iq",t)}function o(t){return new r.Builder("presence",t)}var r;return r={VERSION:"1.2.14",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(t){for(var e=0;e<r.XHTML.tags.length;e++)if(t===r.XHTML.tags[e])return!0;return!1},validAttribute:function(t,e){if(void 0!==r.XHTML.attributes[t]&&r.XHTML.attributes[t].length>0)for(var n=0;n<r.XHTML.attributes[t].length;n++)if(e===r.XHTML.attributes[t][n])return!0;return!1},validCSS:function(t){for(var e=0;e<r.XHTML.css.length;e++)if(t===r.XHTML.css[e])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(t,e){r.NS[t]=e},forEachChild:function(t,e,n){var i,s;for(i=0;i<t.childNodes.length;i++)s=t.childNodes[i],s.nodeType!==r.ElementType.NORMAL||e&&!this.isTagEqual(s,e)||n(s)},isTagEqual:function(t,e){return t.tagName===e},_xmlGenerator:null,_makeGenerator:function(){var t;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(t=this._getIEXmlDom(),t.appendChild(t.createElement("strophe"))):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlGenerator:function(){return r._xmlGenerator||(r._xmlGenerator=r._makeGenerator()),r._xmlGenerator},_getIEXmlDom:function(){for(var t=null,e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<e.length&&null===t;n++)try{t=new ActiveXObject(e[n])}catch(e){t=null}return t},xmlElement:function(t){if(!t)return null;var e,n,i,s=r.xmlGenerator().createElement(t);for(e=1;e<arguments.length;e++){var a=arguments[e];if(a)if("string"==typeof a||"number"==typeof a)s.appendChild(r.xmlTextNode(a));else if("object"==typeof a&&"function"==typeof a.sort)for(n=0;n<a.length;n++){var o=a[n];"object"==typeof o&&"function"==typeof o.sort&&void 0!==o[1]&&null!==o[1]&&s.setAttribute(o[0],o[1])}else if("object"==typeof a)for(i in a)a.hasOwnProperty(i)&&void 0!==a[i]&&null!==a[i]&&s.setAttribute(i,a[i])}return s},xmlescape:function(t){return t=t.replace(/\&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;")},xmlunescape:function(t){return t=t.replace(/\&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&apos;/g,"'"),t=t.replace(/&quot;/g,'"')},xmlTextNode:function(t){return r.xmlGenerator().createTextNode(t)},xmlHtmlNode:function(t){var e;if(DOMParser){e=(new DOMParser).parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},getText:function(t){if(!t)return null;var e="";0===t.childNodes.length&&t.nodeType===r.ElementType.TEXT&&(e+=t.nodeValue);for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===r.ElementType.TEXT&&(e+=t.childNodes[n].nodeValue);return r.xmlescape(e)},copyElement:function(t){var e,n;if(t.nodeType===r.ElementType.NORMAL){for(n=r.xmlElement(t.tagName),e=0;e<t.attributes.length;e++)n.setAttribute(t.attributes[e].nodeName,t.attributes[e].value);for(e=0;e<t.childNodes.length;e++)n.appendChild(r.copyElement(t.childNodes[e]))}else t.nodeType===r.ElementType.TEXT&&(n=r.xmlGenerator().createTextNode(t.nodeValue));return n},createHtml:function(t){var e,n,i,s,a,o,c,l,d,u,h;if(t.nodeType===r.ElementType.NORMAL)if(s=t.nodeName.toLowerCase(),r.XHTML.validTag(s))try{for(n=r.xmlElement(s),e=0;e<r.XHTML.attributes[s].length;e++)if(a=r.XHTML.attributes[s][e],void 0!==(o=t.getAttribute(a))&&null!==o&&""!==o&&!1!==o&&0!==o)if("style"===a&&"object"==typeof o&&void 0!==o.cssText&&(o=o.cssText),"style"===a){for(c=[],l=o.split(";"),i=0;i<l.length;i++)d=l[i].split(":"),u=d[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),r.XHTML.validCSS(u)&&(h=d[1].replace(/^\s*/,"").replace(/\s*$/,""),c.push(u+": "+h));c.length>0&&(o=c.join("; "),n.setAttribute(a,o))}else n.setAttribute(a,o);for(e=0;e<t.childNodes.length;e++)n.appendChild(r.createHtml(t.childNodes[e]))}catch(t){n=r.xmlTextNode("")}else for(n=r.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)n.appendChild(r.createHtml(t.childNodes[e]));else if(t.nodeType===r.ElementType.FRAGMENT)for(n=r.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)n.appendChild(r.createHtml(t.childNodes[e]));else t.nodeType===r.ElementType.TEXT&&(n=r.xmlTextNode(t.nodeValue));return n},escapeNode:function(t){return"string"!=typeof t?t:t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return"string"!=typeof t?t:t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=r.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var n=e.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t?t.split("/")[0]:null},_handleError:function(t){void 0!==t.stack&&r.fatal(t.stack),t.sourceURL?r.fatal("error: "+this.handler+" "+t.sourceURL+":"+t.line+" - "+t.name+": "+t.message):t.fileName?r.fatal("error: "+this.handler+" "+t.fileName+":"+t.lineNumber+" - "+t.name+": "+t.message):r.fatal("error: "+t.message)},log:function(t,e){},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(t){var e;if(!t)return null;"function"==typeof t.tree&&(t=t.tree());var n,i,s=t.nodeName;for(t.getAttribute("_realname")&&(s=t.getAttribute("_realname")),e="<"+s,n=0;n<t.attributes.length;n++)"_realname"!==t.attributes[n].nodeName&&(e+=" "+t.attributes[n].nodeName+"='"+r.xmlescape(t.attributes[n].value)+"'");if(t.childNodes.length>0){for(e+=">",n=0;n<t.childNodes.length;n++)switch(i=t.childNodes[n],i.nodeType){case r.ElementType.NORMAL:e+=r.serialize(i);break;case r.ElementType.TEXT:e+=r.xmlescape(i.nodeValue);break;case r.ElementType.CDATA:e+="<![CDATA["+i.nodeValue+"]]>"}e+="</"+s+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){r._connectionPlugins[t]=e}},r.Builder=function(t,e){"presence"!==t&&"message"!==t&&"iq"!==t||(e&&!e.xmlns?e.xmlns=r.NS.CLIENT:e||(e={xmlns:r.NS.CLIENT})),this.nodeTree=r.xmlElement(t,e),this.node=this.nodeTree},r.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return r.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(t){for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?this.node.removeAttribute(e):this.node.setAttribute(e,t[e]));return this},c:function(t,e,n){var i=r.xmlElement(t,e,n);return this.node.appendChild(i),"string"!=typeof n&&"number"!=typeof n&&(this.node=i),this},cnode:function(t){var e,n=r.xmlGenerator();try{e=void 0!==n.importNode}catch(t){e=!1}var i=e?n.importNode(t,!0):r.copyElement(t);return this.node.appendChild(i),this.node=i,this},t:function(t){var e=r.xmlTextNode(t);return this.node.appendChild(e),this},h:function(t){var e=document.createElement("body");e.innerHTML=t;for(var n=r.createHtml(e);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},r.Handler=function(t,e,n,i,s,a,o){this.handler=t,this.ns=e,this.name=n,this.type=i,this.id=s,this.options=o||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(r.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=a?r.getBareJidFromJid(a):null:this.from=a,this.user=!0},r.Handler.prototype={getNamespace:function(t){var e=t.getAttribute("xmlns");return e&&this.options.ignoreNamespaceFragment&&(e=e.split("#")[0]),e},namespaceMatch:function(t){var e=!1;if(!this.ns)return!0;var n=this;return r.forEachChild(t,null,function(t){n.getNamespace(t)===n.ns&&(e=!0)}),e=e||this.getNamespace(t)===this.ns},isMatch:function(t){var e=t.getAttribute("from");this.options.matchBareFromJid&&(e=r.getBareJidFromJid(e));var n=t.getAttribute("type");return!(!this.namespaceMatch(t)||this.name&&!r.isTagEqual(t,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&t.getAttribute("id")!==this.id||this.from&&e!==this.from)},run:function(t){var e=null;try{e=this.handler(t)}catch(t){throw r._handleError(t),t}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},r.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},r.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},r.Connection=function(t,e){this.service=t,this.options=e||{};var i=this.options.protocol||"";0===t.indexOf("ws:")||0===t.indexOf("wss:")||0===i.indexOf("ws")?this._proto=new r.Websocket(this):this._proto=new r.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),n.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms);for(var s in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(s)){var a=r._connectionPlugins[s],o=function(){};o.prototype=a,this[s]=new o,this[s].init(this)}},r.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});return"string"==typeof t||"number"==typeof t?e+":"+t:e+""},addProtocolErrorHandler:function(t,e,n){this.protocolErrorHandlers[t][e]=n},connect:function(t,e,n,i,s,a,o){this.jid=t,this.authzid=r.getBareJidFromJid(this.jid),this.authcid=o||r.getNodeFromJid(this.jid),this.pass=e,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=r.getDomainFromJid(this.jid),this._changeConnectStatus(r.Status.CONNECTING,null),this._proto._connect(i,s,a)},attach:function(t,e,n,i,s,a,o){if(!(this._proto instanceof r.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(t,e,n,i,s,a,o)},restore:function(t,e,n,i,s){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(t,e,n,i,s)},_sessionCachingSupported:function(){if(this._proto instanceof r.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(t){return!1}return!0}return!1},xmlInput:function(t){},xmlOutput:function(t){},rawInput:function(t){},rawOutput:function(t){},nextValidRid:function(t){},send:function(t){if(null!==t){if("function"==typeof t.sort)for(var e=0;e<t.length;e++)this._queueData(t[e]);else"function"==typeof t.tree?this._queueData(t.tree()):this._queueData(t);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(t,e,n,i){var s=null,a=this;"function"==typeof t.tree&&(t=t.tree());var o=t.getAttribute("id");if(o||(o=this.getUniqueId("sendPresence"),t.setAttribute("id",o)),"function"==typeof e||"function"==typeof n){var r=this.addHandler(function(t){s&&a.deleteTimedHandler(s),"error"===t.getAttribute("type")?n&&n(t):e&&e(t)},null,"presence",null,o);i&&(s=this.addTimedHandler(i,function(){return a.deleteHandler(r),n&&n(null),!1}))}return this.send(t),o},sendIQ:function(t,e,n,i){var s=null,a=this;"function"==typeof t.tree&&(t=t.tree());var o=t.getAttribute("id");if(o||(o=this.getUniqueId("sendIQ"),t.setAttribute("id",o)),"function"==typeof e||"function"==typeof n){var r=this.addHandler(function(t){s&&a.deleteTimedHandler(s);var i=t.getAttribute("type");if("result"===i)e&&e(t);else{if("error"!==i)throw{name:"StropheError",message:"Got bad IQ type of "+i};n&&n(t)}},null,"iq",["error","result"],o);i&&(s=this.addTimedHandler(i,function(){return a.deleteHandler(r),n&&n(null),!1}))}return this.send(t),o},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(t)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(t,e){var n=new r.TimedHandler(t,e);return this.addTimeds.push(n),n},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,n,i,s,a,o){var c=new r.Handler(t,e,n,i,s,a,o);return this.addHandlers.push(c),c},deleteHandler:function(t){this.removeHandlers.push(t);var e=this.addHandlers.indexOf(t);e>=0&&this.addHandlers.splice(e,1)},registerSASLMechanisms:function(t){this.mechanisms={},t=t||[r.SASLAnonymous,r.SASLExternal,r.SASLMD5,r.SASLOAuthBearer,r.SASLPlain,r.SASLSHA1],t.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(t){this.mechanisms[t.prototype.name]=t},disconnect:function(t){if(this._changeConnectStatus(r.Status.DISCONNECTING,t),r.info("Disconnect was called because: "+t),this.connected){var e=!1;this.disconnecting=!0,this.authenticated&&(e=o({xmlns:r.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else r.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(t,e){for(var n in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(n)){var i=this[n];if(i.statusChanged)try{i.statusChanged(t,e)}catch(t){r.error(n+" plugin caused an exception changing status: "+t)}}if(this.connect_callback)try{this.connect_callback(t,e)}catch(t){r._handleError(t),r.error("User connection callback caused an exception: "+t)}},_doDisconnect:function(t){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),r.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(r.Status.DISCONNECTED,t),this.connected=!1},_dataRecv:function(t,e){r.info("_dataRecv called");var n=this._proto._reqToData(t);if(null!==n){this.xmlInput!==r.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==r.Connection.prototype.rawInput&&(e?this.rawInput(e):this.rawInput(r.serialize(n)));for(var i,s;this.removeHandlers.length>0;)s=this.removeHandlers.pop(),(i=this.handlers.indexOf(s))>=0&&this.handlers.splice(i,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop())
;if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var a,o,c=n.getAttribute("type");if(null!==c&&"terminate"===c){if(this.disconnecting)return;return a=n.getAttribute("condition"),o=n.getElementsByTagName("conflict"),null!==a?("remote-stream-error"===a&&o.length>0&&(a="conflict"),this._changeConnectStatus(r.Status.CONNFAIL,a)):this._changeConnectStatus(r.Status.CONNFAIL,"unknown"),void this._doDisconnect(a)}var l=this;r.forEachChild(n,null,function(t){var e,n;for(n=l.handlers,l.handlers=[],e=0;e<n.length;e++){var i=n[e];try{!i.isMatch(t)||!l.authenticated&&i.user?l.handlers.push(i):i.run(t)&&l.handlers.push(i)}catch(t){r.warn("Removing Strophe handlers due to uncaught exception: "+t.message)}}})}},mechanisms:{},_connect_cb:function(t,e,n){r.info("_connect_cb was called"),this.connected=!0;var i;try{i=this._proto._reqToData(t)}catch(t){if("badformat"!==t)throw t;this._changeConnectStatus(r.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(i){this.xmlInput!==r.Connection.prototype.xmlInput&&(i.nodeName===this._proto.strip&&i.childNodes.length?this.xmlInput(i.childNodes[0]):this.xmlInput(i)),this.rawInput!==r.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(r.serialize(i)));if(this._proto._connect_cb(i)!==r.Status.CONNFAIL){if(!(i.getElementsByTagNameNS?i.getElementsByTagNameNS(r.NS.STREAM,"features").length>0:i.getElementsByTagName("stream:features").length>0||i.getElementsByTagName("features").length>0))return void this._proto._no_auth_received(e);var s,a,o=[],c=i.getElementsByTagName("mechanism");if(c.length>0)for(s=0;s<c.length;s++)a=r.getText(c[s]),this.mechanisms[a]&&o.push(this.mechanisms[a]);if(0===o.length&&0===i.getElementsByTagName("auth").length)return void this._proto._no_auth_received(e);!1!==this.do_authentication&&this.authenticate(o)}}},sortMechanismsByPriority:function(t){var e,n,i,s;for(e=0;e<t.length-1;++e){for(i=e,n=e+1;n<t.length;++n)t[n].prototype.priority>t[i].prototype.priority&&(i=n);i!==e&&(s=t[e],t[e]=t[i],t[i]=s)}return t},_attemptSASLAuth:function(t){t=this.sortMechanismsByPriority(t||[]);var e=0,n=!1;for(e=0;e<t.length;++e)if(t[e].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new t[e],this._sasl_mechanism.onStart(this);var s=i("auth",{xmlns:r.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var a=this._sasl_mechanism.onChallenge(this,null);s.t(btoa(a))}this.send(s.tree()),n=!0;break}return n},_attemptLegacyAuth:function(){null===r.getNodeFromJid(this.jid)?(this._changeConnectStatus(r.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(a({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).tree()))},authenticate:function(t){this._attemptSASLAuth(t)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(t){var e=atob(r.getText(t)),n=this._sasl_mechanism.onChallenge(this,e),s=i("response",{xmlns:r.NS.SASL});return""!==n&&s.t(btoa(n)),this.send(s.tree()),!0},_auth1_cb:function(t){var e=a({type:"set",id:"_auth_2"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return r.getResourceFromJid(this.jid)||(this.jid=r.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(r.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(t){if(this._sasl_data["server-signature"]){var e,n=atob(r.getText(t)),i=/([a-z]+)=([^,]+)(,|$)/,s=n.match(i);if("v"===s[1]&&(e=s[2]),e!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}r.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var a=[],o=function(t,e){for(;t.length;)this.deleteHandler(t.pop());return this._sasl_auth1_cb.bind(this)(e),!1};return a.push(this._addSysHandler(function(t){o.bind(this)(a,t)}.bind(this),null,"stream:features",null,null)),a.push(this._addSysHandler(function(t){o.bind(this)(a,t)}.bind(this),r.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(t){this.features=t;var e,n;for(e=0;e<t.childNodes.length;e++)n=t.childNodes[e],"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var i=r.getResourceFromJid(this.jid);return i?this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).c("resource",{}).t(i).tree()):this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){if("error"===t.getAttribute("type")){r.info("SASL binding failed.");var e,n=t.getElementsByTagName("conflict");return n.length>0&&(e="conflict"),this._changeConnectStatus(r.Status.AUTHFAIL,e),!1}var i,s=t.getElementsByTagName("bind");if(!(s.length>0))return r.info("SASL binding failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;i=s[0].getElementsByTagName("jid"),i.length>0&&(this.jid=r.getText(i[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(a({type:"set",id:"_session_auth_2"}).c("session",{xmlns:r.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null)))},_sasl_session_cb:function(t){if("result"===t.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null);else if("error"===t.getAttribute("type"))return r.info("Session creation failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(t){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1},_auth2_cb:function(t){return"result"===t.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null)):"error"===t.getAttribute("type")&&(this._changeConnectStatus(r.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(t,e){var n=new r.TimedHandler(t,e);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(t,e,n,i,s){var a=new r.Handler(t,e,n,i,s);return a.user=!1,this.addHandlers.push(a),a},_onDisconnectTimeout:function(){return r.info("_onDisconnectTimeout was called"),this._changeConnectStatus(r.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var t,e,n,i;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)e=this.removeTimeds.pop(),(t=this.timedHandlers.indexOf(e))>=0&&this.timedHandlers.splice(t,1);var s=(new Date).getTime();for(i=[],t=0;t<this.timedHandlers.length;t++)e=this.timedHandlers[t],!this.authenticated&&e.user||(n=e.lastCalled+e.period,n-s<=0?e.run()&&i.push(e):i.push(e));this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100))}},r.SASLMechanism=function(t,e,n){this.name=t,this.isClientFirst=e,this.priority=n},r.SASLMechanism.prototype={test:function(t){return!0},onStart:function(t){this._connection=t},onChallenge:function(t,e){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},r.SASLAnonymous=function(){},r.SASLAnonymous.prototype=new r.SASLMechanism("ANONYMOUS",!1,20),r.SASLAnonymous.prototype.test=function(t){return null===t.authcid},r.SASLPlain=function(){},r.SASLPlain.prototype=new r.SASLMechanism("PLAIN",!0,30),r.SASLPlain.prototype.test=function(t){return null!==t.authcid},r.SASLPlain.prototype.onChallenge=function(t){var e=t.authzid;return e+="\0",e+=t.authcid,e+="\0",e+=t.pass,n.utf16to8(e)},r.SASLSHA1=function(){},r.SASLSHA1.prototype=new r.SASLMechanism("SCRAM-SHA-1",!0,50),r.SASLSHA1.prototype.test=function(t){return null!==t.authcid},r.SASLSHA1.prototype.onChallenge=function(i,s,a){var o=a||e.hexdigest(1234567890*Math.random()),r="n="+n.utf16to8(i.authcid);return r+=",r=",r+=o,i._sasl_data.cnonce=o,i._sasl_data["client-first-message-bare"]=r,r="n,,"+r,this.onChallenge=function(e,i){for(var s,a,o,r,c,l,d,u,h,p,f,m,g="c=biws,",v=e._sasl_data["client-first-message-bare"]+","+i+",",b=e._sasl_data.cnonce,y=/([a-z]+)=([^,]+)(,|$)/;i.match(y);){var _=i.match(y);switch(i=i.replace(_[0],""),_[1]){case"r":s=_[2];break;case"s":a=_[2];break;case"i":o=_[2]}}if(s.substr(0,b.length)!==b)return e._sasl_data={},e._sasl_failure_cb();for(g+="r="+s,v+=g,a=atob(a),a+="\0\0\0",h=n.utf16to8(e.pass),r=l=t.core_hmac_sha1(h,a),d=1;d<o;d++){for(c=t.core_hmac_sha1(h,t.binb2str(l)),u=0;u<5;u++)r[u]^=c[u];l=c}for(r=t.binb2str(r),p=t.core_hmac_sha1(r,"Client Key"),f=t.str_hmac_sha1(r,"Server Key"),m=t.core_hmac_sha1(t.str_sha1(t.binb2str(p)),v),e._sasl_data["server-signature"]=t.b64_hmac_sha1(f,v),u=0;u<5;u++)p[u]^=m[u];return g+=",p="+btoa(t.binb2str(p))}.bind(this),r},r.SASLMD5=function(){},r.SASLMD5.prototype=new r.SASLMechanism("DIGEST-MD5",!1,40),r.SASLMD5.prototype.test=function(t){return null!==t.authcid},r.SASLMD5.prototype._quote=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},r.SASLMD5.prototype.onChallenge=function(t,i,s){for(var a,o=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,r=s||e.hexdigest(""+1234567890*Math.random()),c="",l=null,d="";i.match(o);)switch(a=i.match(o),i=i.replace(a[0],""),a[2]=a[2].replace(/^"(.+)"$/,"$1"),a[1]){case"realm":c=a[2];break;case"nonce":d=a[2];break;case"qop":a[2];break;case"host":l=a[2]}var u=t.servtype+"/"+t.domain;null!==l&&(u=u+"/"+l);var h=n.utf16to8(t.authcid+":"+c+":"+this._connection.pass),p=e.hash(h)+":"+d+":"+r,f="AUTHENTICATE:"+u,m="";return m+="charset=utf-8,",m+="username="+this._quote(n.utf16to8(t.authcid))+",",m+="realm="+this._quote(c)+",",m+="nonce="+this._quote(d)+",",m+="nc=00000001,",m+="cnonce="+this._quote(r)+",",m+="digest-uri="+this._quote(u)+",",m+="response="+e.hexdigest(e.hexdigest(p)+":"+d+":00000001:"+r+":auth:"+e.hexdigest(f))+",",m+="qop=auth",this.onChallenge=function(){return""},m},r.SASLOAuthBearer=function(){},r.SASLOAuthBearer.prototype=new r.SASLMechanism("OAUTHBEARER",!0,60),r.SASLOAuthBearer.prototype.test=function(t){return null!==t.pass},r.SASLOAuthBearer.prototype.onChallenge=function(t){var e="n,";return null!==t.authcid&&(e=e+"a="+t.authzid),e+=",",e+="",e+="auth=Bearer ",e+=t.pass,e+="",e+="",n.utf16to8(e)},r.SASLExternal=function(){},r.SASLExternal.prototype=new r.SASLMechanism("EXTERNAL",!0,10),r.SASLExternal.prototype.onChallenge=function(t){return t.authcid===t.authzid?"":t.authzid},{Strophe:r,$build:i,$iq:a,$msg:s,$pres:o,SHA1:t,MD5:e,b64_hmac_sha1:t.b64_hmac_sha1,b64_sha1:t.b64_sha1,str_hmac_sha1:t.str_hmac_sha1,str_sha1:t.str_sha1}}),function(t,e){if("function"!=typeof n||!n.amd)return e(Strophe,$build);n("strophe-bosh",["strophe-core"],function(t){return e(t.Strophe,t.$build)})}(0,function(t,e){return t.Request=function(e,n,i,s){this.id=++t._requestId,this.xmlData=e,this.data=t.serialize(e),this.origFunc=n,this.func=n,this.rid=i,this.date=NaN,this.sends=s||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},t.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"===e.tagName)throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText)throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),"badformat";return e},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.bind(null,this),t}},t.Bosh=function(t){this._conn=t,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this._requests=[]},t.Bosh.prototype={strip:null,_buildBody:function(){var n=e("body",{rid:this.rid++,xmlns:t.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,n,i){this.wait=e||this.wait,this.hold=n||this.hold,this.errors=0;var s=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":t.NS.BOSH});i&&s.attrs({route:i});var a=this._conn._connect_cb;this._requests.push(new t.Request(s.tree(),this._onRequestStateChange.bind(this,a.bind(this._conn)),s.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,n,i,s,a,o,r){this._conn.jid=e,this.sid=n,this.rid=i,this._conn.connect_callback=s,this._conn.domain=t.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=a||this.wait,this.hold=o||this.hold,this.window=r||this.window,this._conn._changeConnectStatus(t.Status.ATTACHED,null)},_restore:function(e,n,i,s,a){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(void 0!==o&&null!==o&&o.rid&&o.sid&&o.jid&&(void 0===e||null===e||t.getBareJidFromJid(o.jid)===t.getBareJidFromJid(e)||null===t.getNodeFromJid(e)&&t.getDomainFromJid(o.jid)===e)))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,n,i,s,a)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var n,i,s=e.getAttribute("type");if(null!==s&&"terminate"===s)return n=e.getAttribute("condition"),t.error("BOSH-Connection failed: "+n),i=e.getElementsByTagName("conflict"),null!==n?("remote-stream-error"===n&&i.length>0&&(n="conflict"),this._conn._changeConnectStatus(t.Status.CONNFAIL,n)):this._conn._changeConnectStatus(t.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),t.Status.CONNFAIL;this.sid||(this.sid=e.getAttribute("sid"));var a=e.getAttribute("requests");a&&(this.window=parseInt(a,10));var o=e.getAttribute("hold");o&&(this.hold=parseInt(o,10));var r=e.getAttribute("wait");r&&(this.wait=parseInt(r,10));var c=e.getAttribute("inactivity");c&&(this.inactivity=parseInt(c,10))},_disconnect:function(t){this._sendTerminate(t)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(t){var e,n=this._getRequestStatus(t);(e=this._conn.protocolErrorHandlers.HTTP[n])&&e.call(this,n)},_hitError:function(e){this.errors++,t.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new t.Request(n.tree(),this._onRequestStateChange.bind(this,e.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var t;this._requests.length>0;)t=this._requests.pop(),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(t.info("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var n=this._buildBody(),i=0;i<e.length;i++)null!==e[i]&&("restart"===e[i]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":t.NS.BOSH}):n.cnode(e[i]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new t.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var s=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),s>Math.floor(t.TIMEOUT*this.wait)&&(t.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(t.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(e,n){var i;if(4===e.xhr.readyState)try{i=e.xhr.status}catch(e){t.error("Caught an error while retrieving a request's status, reqStatus: "+i)}return void 0===i&&(i="number"==typeof n?n:0),i},_onRequestStateChange:function(e,n){if(t.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)return void(n.abort=!1);if(4===n.xhr.readyState){var i=this._getRequestStatus(n);if(this.disconnecting&&i>=400)return this._hitError(i),void this._callProtocolErrorHandlers(n);var s=i>0&&i<500,a=n.sends>this._conn.maxRetries;if((s||a)&&(this._removeRequest(n),t.debug("request id "+n.id+" should now be removed")),200===i){var o=this._requests[0]===n;(this._requests[1]===n||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(t.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),t.debug("request id "+n.id+"."+n.sends+" got 200"),e(n),this.errors=0}else 0===i||i>=400&&i<600||i>=12e3?(t.error("request id "+n.id+"."+n.sends+" error "+i+" happened"),this._hitError(i),this._callProtocolErrorHandlers(n),i>=400&&i<500&&(this._conn._changeConnectStatus(t.Status.DISCONNECTING,null),this._conn._doDisconnect())):t.error("request id "+n.id+"."+n.sends+" error "+i+" happened");s||a?a&&!this._conn.connected&&this._conn._changeConnectStatus(t.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(e){var n=this,i=this._requests[e],s=this._getRequestStatus(i,-1);if(i.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var a=i.age(),o=!isNaN(a)&&a>Math.floor(t.TIMEOUT*this.wait),r=null!==i.dead&&i.timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait),c=4===i.xhr.readyState&&(s<1||s>=500);if((o||r||c)&&(r&&t.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),i.abort=!0,i.xhr.abort(),i.xhr.onreadystatechange=function(){},this._requests[e]=new t.Request(i.xmlData,i.origFunc,i.rid,i.sends),i=this._requests[e]),0===i.xhr.readyState){t.debug("request id "+i.id+"."+i.sends+" posting");try{var l=this._conn.options.contentType||"text/xml; charset=utf-8";i.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==i.xhr.setRequestHeader&&i.xhr.setRequestHeader("Content-Type",l),this._conn.options.withCredentials&&(i.xhr.withCredentials=!0)}catch(e){return t.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(t.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var d=function(){if(i.date=new Date,n._conn.options.customHeaders){var t=n._conn.options.customHeaders;for(var e in t)t.hasOwnProperty(e)&&i.xhr.setRequestHeader(e,t[e])}i.xhr.send(i.data)};if(i.sends>1){var u=1e3*Math.min(Math.floor(t.TIMEOUT*this.wait),Math.pow(i.sends,3));setTimeout(function(){d()},u)}else d();i.sends++,this._conn.xmlOutput!==t.Connection.prototype.xmlOutput&&(i.xmlData.nodeName===this.strip&&i.xmlData.childNodes.length?this._conn.xmlOutput(i.xmlData.childNodes[0]):this._conn.xmlOutput(i.xmlData)),this._conn.rawOutput!==t.Connection.prototype.rawOutput&&this._conn.rawOutput(i.data)}else t.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+i.xhr.readyState)},_removeRequest:function(e){t.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)e===this._requests[n]&&this._requests.splice(n,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];null===e.dead&&(e.dead=new Date),this._processRequest(t)},_reqToData:function(t){try{return t.getResponse()}catch(t){if("parsererror"!==t)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){t.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});e&&n.cnode(e.tree());var i=new t.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(i),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?t.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):t.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},t}),function(t,e){if("function"!=typeof n||!n.amd)return e(Strophe,$build);n("strophe-websocket",["strophe-core"],function(t){return e(t.Strophe,t.$build)})}(0,function(t,e){return t.Websocket=function(t){this._conn=t,this.strip="wrapper";var e=t.service;if(0!==e.indexOf("ws:")&&0!==e.indexOf("wss:")){var n="";"ws"===t.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==e.indexOf("/")?n+=window.location.pathname+e:n+=e,t.service=n}},t.Websocket.prototype={_buildStream:function(){return e("open",{xmlns:t.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,n){var i;if(i=e.getElementsByTagNameNS?e.getElementsByTagNameNS(t.NS.STREAM,"error"):e.getElementsByTagName("stream:error"),0===i.length)return!1;for(var s=i[0],a="",o="",r=0;r<s.childNodes.length;r++){var c=s.childNodes[r];if("urn:ietf:params:xml:ns:xmpp-streams"!==c.getAttribute("xmlns"))break;"text"===c.nodeName?o=c.textContent:a=c.nodeName}var l="WebSocket stream error: ";return l+=a||"unknown",o&&(l+=" - "+o),t.error(l),this._conn._changeConnectStatus(n,a),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){if(this._check_streamerror(e,t.Status.CONNFAIL))return t.Status.CONNFAIL},_handleStreamStart:function(e){var n=!1,i=e.getAttribute("xmlns");"string"!=typeof i?n="Missing xmlns in <open />":i!==t.NS.FRAMING&&(n="Wrong xmlns in <open />: "+i);var s=e.getAttribute("version");return"string"!=typeof s?n="Missing version in <open />":"1.0"!==s&&(n="Wrong version in <open />: "+s),!n||(this._conn._changeConnectStatus(t.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var n=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var i=(new DOMParser).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(i),this._conn.rawInput(e.data),this._handleStreamStart(i)&&this._connect_cb(i)}else if(0===e.data.indexOf("<close ")){this._conn.rawInput(e.data),this._conn.xmlInput(e);var s=e.getAttribute("see-other-uri");s?(this._conn._changeConnectStatus(t.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=s,this._connect()):(this._conn._changeConnectStatus(t.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var a=this._streamWrap(e.data),o=(new DOMParser).parseFromString(a,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(o,null,e.data)}},_disconnect:function(n){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){n&&this._conn.send(n);var i=e("close",{xmlns:t.NS.FRAMING});this._conn.xmlOutput(i);var s=t.serialize(i);this._conn.rawOutput(s);try{this.socket.send(s)}catch(e){t.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){t.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(t){return"<wrapper>"+t+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(t){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(e){this._conn.connected&&!this._conn.disconnecting?(t.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(t.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(t.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):t.info("Websocket closed")},_no_auth_received:function(e){t.error("Server did not send any auth methods"),this._conn._changeConnectStatus(t.Status.CONNFAIL,"Server did not send any auth methods"),e&&(e=e.bind(this._conn))(),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){t.error("Websocket error "+e),this._conn._changeConnectStatus(t.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var n=0;n<e.length;n++)if(null!==e[n]){var i,s;i="restart"===e[n]?this._buildStream().tree():e[n],s=t.serialize(i),this._conn.xmlOutput(i),this._conn.rawOutput(s),this.socket.send(s)}this._conn._data=[]}},_onMessage:function(e){var n,i,s='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===s)return this._conn.rawInput(s),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(n=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else i=this._streamWrap(e.data),n=(new DOMParser).parseFromString(i,"text/xml").documentElement;return this._check_streamerror(n,t.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(t.serialize(n))):void this._conn._dataRecv(n,e.data)},_onOpen:function(){t.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var n=t.serialize(e);this._conn.rawOutput(n),this.socket.send(n)},_reqToData:function(t){return t},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},t}),function(t){"function"==typeof n&&n.amd&&n("strophe",["strophe-core","strophe-bosh","strophe-websocket"],function(t){return t})}(),e(["strophe-polyfill"]),e("strophe")}),function(t,e){"function"==typeof define&&define.amd?define("strophe.disco",["strophe"],function(t){return e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres),t}):e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres)}(this,function(t,e,n,i,s){t.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(e){this._connection=e,this._identities=[],this._features=[],this._items=[],e.addHandler(this._onDiscoInfo.bind(this),t.NS.DISCO_INFO,"iq","get",null,null),e.addHandler(this._onDiscoItems.bind(this),t.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(t,e,n,i){for(var s=0;s<this._identities.length;s++)if(this._identities[s].category==t&&this._identities[s].type==e&&this._identities[s].name==n&&this._identities[s].lang==i)return!1;return this._identities.push({category:t,type:e,name:n,lang:i}),!0},addFeature:function(t){for(var e=0;e<this._features.length;e++)if(this._features[e]==t)return!1;return this._features.push(t),!0},removeFeature:function(t){for(var e=0;e<this._features.length;e++)if(this._features[e]===t)return this._features.splice(e,1),!0;return!1},addItem:function(t,e,n,i){return!(n&&!i)&&(this._items.push({jid:t,name:e,node:n,call_back:i}),!0)},info:function(e,i,s,a,o){var r={xmlns:t.NS.DISCO_INFO};i&&(r.node=i);var c=n({from:this._connection.jid,to:e,type:"get"}).c("query",r);this._connection.sendIQ(c,s,a,o)},items:function(e,i,s,a,o){var r={xmlns:t.NS.DISCO_ITEMS};i&&(r.node=i);var c=n({from:this._connection.jid,to:e,type:"get"}).c("query",r);this._connection.sendIQ(c,s,a,o)},_buildIQResult:function(t,e){var i=t.getAttribute("id"),s=t.getAttribute("from"),a=n({type:"result",id:i});return null!==s&&a.attrs({to:s}),a.c("query",e)},_onDiscoInfo:function(e){var n,i=e.getElementsByTagName("query")[0].getAttribute("node"),s={xmlns:t.NS.DISCO_INFO};i&&(s.node=i);var a=this._buildIQResult(e,s);for(n=0;n<this._identities.length;n++)s={category:this._identities[n].category,type:this._identities[n].type},this._identities[n].name&&(s.name=this._identities[n].name),this._identities[n].lang&&(s["xml:lang"]=this._identities[n].lang),a.c("identity",s).up();for(n=0;n<this._features.length;n++)a.c("feature",{var:this._features[n]}).up();return this._connection.send(a.tree()),!0},_onDiscoItems:function(e){var n,i,s={xmlns:t.NS.DISCO_ITEMS},a=e.getElementsByTagName("query")[0].getAttribute("node");if(a){for(s.node=a,n=[],i=0;i<this._items.length;i++)if(this._items[i].node==a){n=this._items[i].call_back(e);break}}else n=this._items;var o=this._buildIQResult(e,s);for(i=0;i<n.length;i++){var r={jid:n[i].jid};n[i].name&&(r.name=n[i].name),n[i].node&&(r.node=n[i].node),o.c("item",r).up()}return this._connection.send(o.tree()),!0}})}),function(t,e){"function"==typeof define&&define.amd?define("strophe.ping",["strophe"],function(t){return e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres),t}):e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres)}(this,function(t,e,n,i,s){t.addConnectionPlugin("ping",{_c:null,init:function(e){this._c=e,t.addNamespace("PING","urn:xmpp:ping")},ping:function(e,i,s,a){var o=this._c.getUniqueId("ping"),r=n({type:"get",to:e,id:o}).c("ping",{xmlns:t.NS.PING})
;this._c.sendIQ(r,i,s,a)},pong:function(t){var e=t.getAttribute("from"),i=t.getAttribute("id"),s=n({type:"result",to:e,id:i});this._c.sendIQ(s)},addPingHandler:function(e){return this._c.addHandler(e,t.NS.PING,"iq","get")}})}),function(t,e){"function"==typeof define&&define.amd?define("strophe.rsm",["strophe"],function(t){return e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres),t}):e(t.Strophe,t.$build,t.$iq,t.$msg,t.$pres)}(this,function(t,e,n,i,s){t.addNamespace("RSM","http://jabber.org/protocol/rsm"),t.RSM=function(t){if(this.attribs=["max","first","last","after","before","index","count"],void 0!==t.xml)this.fromXMLElement(t.xml);else for(var e=0;e<this.attribs.length;e++){var n=this.attribs[e];this[n]=t[n]}},t.RSM.prototype={toXML:function(){for(var n=e("set",{xmlns:t.NS.RSM}),i=0;i<this.attribs.length;i++){var s=this.attribs[i];void 0!==this[s]&&(n=n.c(s).t(this[s].toString()).up())}return n.tree()},next:function(e){return new t.RSM({max:e,after:this.last})},previous:function(e){return new t.RSM({max:e,before:this.first})},fromXMLElement:function(e){for(var n=0;n<this.attribs.length;n++){var i=this.attribs[n],s=e.getElementsByTagName(i)[0];void 0!==s&&null!==s&&(this[i]=t.getText(s),"first"==i&&(this.index=s.getAttribute("index")))}}}}),function(t,e){define("strophe.caps",["strophe","strophe.disco"],function(t){e(t.Strophe,t.SHA1,t.$build,t.$iq,t.$msg,t.$pres)})}(0,function(t,e,n,i,s,a){var o=e.b64_sha1;t.addConnectionPlugin("caps",function(){var e,i,s,r,c,l,d,u;return i=null,c=function(e){if(i=e,t.addNamespace("CAPS","http://jabber.org/protocol/caps"),void 0===i.disco)throw new Error("disco plugin required!");if(void 0===o)throw new Error("SHA-1 library required!");i.disco.addFeature(t.NS.CAPS),i.disco.addFeature(t.NS.DISCO_INFO)},e=function(t){return i.disco.addFeature(t)},d=function(t){return i.disco.removeFeature(t)},getPres=function(){return a().cnode(s())},u=function(){return i.send(a().cnode(s().tree()))},s=function(e){e||(e={});var s=e.node;return s||(s=i.disco._identities.length>0?i.disco._identities[0].name||"":"strophejs"),n("c",{xmlns:t.NS.CAPS,hash:"sha-1",node:s,ver:r()})},l=function(t,e){return t.sort(function(t,n){return t[e]>n[e]?-1:1})},r=function(){var t,e,n,s,a,r,c,d,u,h,p,f,m,g,v,b;for(a=[],v=i.disco._identities,u=0,f=v.length;u<f;u++)n=v[u],a.push(n);for(e=[],b=i.disco._features,h=0,m=b.length;h<m;h++)r=b[h],e.push(r);t="",l(a,"category"),l(a,"type"),l(a,"lang");for(c in a)s=a[c],t+=s.category+"/"+s.type+"/"+s.lang+"/"+s.name+"<";for(e.sort(),p=0,g=e.length;p<g;p++)d=e[p],t+=d+"<";return o(t)},{init:c,removeFeature:d,addFeature:e,sendPres:u,generateVerificationString:r,createCapsNode:s}}())}),function(t,e){define("backbone.localsync",["backbone","underscore"],function(t,n){return e(t,n)})}(0,function(t,e){try{localStorage.setItem("test",1),localStorage.removeItem("test"),t.useLocalStorage=!0}catch(e){Storage.prototype._getItem=Storage.prototype.getItem,Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype._removeItem=Storage.prototype.removeItem,Storage.prototype.getItem=function(){},Storage.prototype.setItem=function(){},Storage.prototype.removeItem=function(){},t.useLocalStorage=!1}var n=function(t){this.name=t;var e=localStorage.getItem(this.name);this.records=this.from_string(e,[])};e.extend(n.prototype,{from_string:function(t,e){if(!t)return e;try{return JSON.parse(t)}catch(t){return e||{}}},to_string:function(t){try{return JSON.stringify(t)}catch(t){return""}},save:function(){this.records.length?localStorage.setItem(this.name,this.to_string(this.records)):localStorage.removeItem(this.name)},clear:function(){e.each(this.records,function(t){localStorage.removeItem(this._itemName(t))}.bind(this)),localStorage.removeItem(this.name)},create:function(t){localStorage.setItem(this._itemName(t.id),this.to_string(t)),this.records.push(t.id),this.save()},update:function(t){localStorage.setItem(this._itemName(t.id),this.to_string(t)),e.contains(this.records,t.id)||(this.records.push(t.id),this.save())},find:function(t){var e=localStorage.getItem(this._itemName(t.id));return this.from_string(e,{})},findAll:function(){return e.reduce(this.records,function(t,e){var n=localStorage.getItem(this._itemName(e));return n&&t.push(this.from_string(n,{})),t}.bind(this),[])},destroy:function(t){localStorage.removeItem(this._itemName(t.id));var e=this.records.indexOf(t.id);e>=0&&(this.records.splice(e,1),this.save())},_itemName:function(t){return this.name+"-"+t}}),t.sync=function(t,e,n){var i=e.storage||e.collection&&e.collection.storage;if(!i)return!1;var s;switch(t){case"read":s=e.id?i.find(e):i.findAll();break;case"create":s=i.create(e);break;case"update":s=i.update(e);break;case"delete":s=i.destroy(e)}s?n.success(s):n.error("Record not found")},t.ModelWithStorage=t.Model.extend({initialize:function(t,e){this.storage=new n(e.storage_name),"before"===e.fetch&&this.fetch(),this._initialize&&this._initialize(t,e),"after"===e.fetch&&this.fetch()},clearStorage:function(){this.storage.clear()}}),t.CollectionWithStorage=t.Collection.extend({initialize:function(t,e){this.storage=new n(e.storage_name),this._initialize&&this._initialize(t,e)},clearStorage:function(){this.storage.clear()}})}),function(t,e,n,i){"use strict";function s(t,e,n){return setTimeout(d(t,n),e)}function a(t,e,n){return!!Array.isArray(t)&&(o(t,n[e],n),!0)}function o(t,e,n){var s;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(s=0;s<t.length;)e.call(n,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(n,t[s],s,t)}function r(t,e,n){for(var s=Object.keys(e),a=0;a<s.length;)(!n||n&&t[s[a]]===i)&&(t[s[a]]=e[s[a]]),a++;return t}function c(t,e){return r(t,e,!0)}function l(t,e,n){var i,s=e.prototype;i=t.prototype=Object.create(s),i.constructor=t,i._super=s,n&&r(i,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==dt?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function p(t,e,n){o(v(e),function(e){t.addEventListener(e,n,!1)})}function f(t,e,n){o(v(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function _(t,e,n){for(var i=[],s=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];b(s,o)<0&&i.push(t[a]),s[a]=o,a++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n,s,a=e[0].toUpperCase()+e.slice(1),o=0;o<ct.length;){if(n=ct[o],(s=n?n+a:e)in t)return s;o++}return i}function x(){return ft++}function S(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t){var e=t.options.inputClass;return new(e||(vt?H:bt?B:gt?z:j))(t,T)}function T(t,e,n){var i=n.pointers.length,s=n.changedPointers.length,a=e&xt&&0==i-s,o=e&(Ct|kt)&&0==i-s;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,A(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function A(t,e){var n=t.session,i=e.pointers,s=i.length;n.firstInput||(n.firstInput=N(e)),s>1&&!n.firstMultiple?n.firstMultiple=N(e):1===s&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,r=o?o.center:a.center,c=e.center=O(i);e.timeStamp=pt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=L(r,c),e.distance=R(r,c),E(n,e),e.offsetDirection=D(e.deltaX,e.deltaY),e.scale=o?$(o.pointers,i):1,e.rotation=o?P(o.pointers,i):0,M(n,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function E(t,e){var n=e.center,i=t.offsetDelta||{},s=t.prevDelta||{},a=t.prevInput||{};(e.eventType===xt||a.eventType===Ct)&&(s=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=s.x+(n.x-i.x),e.deltaY=s.y+(n.y-i.y)}function M(t,e){var n,s,a,o,r=t.lastInterval||e,c=e.timeStamp-r.timeStamp;if(e.eventType!=kt&&(c>wt||r.velocity===i)){var l=r.deltaX-e.deltaX,d=r.deltaY-e.deltaY,u=I(c,l,d);s=u.x,a=u.y,n=ht(u.x)>ht(u.y)?u.x:u.y,o=D(l,d),t.lastInterval=e}else n=r.velocity,s=r.velocityX,a=r.velocityY,o=r.direction;e.velocity=n,e.velocityX=s,e.velocityY=a,e.direction=o}function N(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ut(t.pointers[n].clientX),clientY:ut(t.pointers[n].clientY)},n++;return{timeStamp:pt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:ut(t[0].clientX),y:ut(t[0].clientY)};for(var n=0,i=0,s=0;e>s;)n+=t[s].clientX,i+=t[s].clientY,s++;return{x:ut(n/e),y:ut(i/e)}}function I(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Tt:ht(t)>=ht(e)?t>0?At:Et:e>0?Mt:Nt}function R(t,e,n){n||(n=Rt);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return Math.sqrt(i*i+s*s)}function L(t,e,n){n||(n=Rt);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return 180*Math.atan2(s,i)/Math.PI}function P(t,e){return L(e[1],e[0],Lt)-L(t[1],t[0],Lt)}function $(t,e){return R(e[0],e[1],Lt)/R(t[0],t[1],Lt)}function j(){this.evEl=$t,this.evWin=jt,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function H(){this.evEl=Ft,this.evWin=Bt,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=zt,this.evWin=Wt,this.started=!1,C.apply(this,arguments)}function F(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(Ct|kt)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function B(){this.evTarget=Ut,this.targetIds={},C.apply(this,arguments)}function V(t,e){var n=y(t.touches),i=this.targetIds;if(e&(xt|St)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var s,a,o=y(t.changedTouches),r=[],c=this.target;if(a=n.filter(function(t){return m(t.target,c)}),e===xt)for(s=0;s<a.length;)i[a[s].identifier]=!0,s++;for(s=0;s<o.length;)i[o[s].identifier]&&r.push(o[s]),e&(Ct|kt)&&delete i[o[s].identifier],s++;return r.length?[_(a.concat(r),"identifier",!0),r]:void 0}function z(){C.apply(this,arguments);var t=d(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new j(this.manager,t)}function W(t,e){this.manager=t,this.set(e)}function Y(t){if(g(t,Kt))return Kt;var e=g(t,te),n=g(t,ee);return e&&n?te+" "+ee:e||n?e?te:ee:g(t,Zt)?Zt:Jt}function U(t){this.id=x(),this.manager=null,this.options=c(t||{},this.defaults),this.options.enable=h(this.options.enable,!0),this.state=ne,this.simultaneous={},this.requireFail=[]}function X(t){return t&re?"cancel":t&ae?"end":t&se?"move":t&ie?"start":""}function G(t){return t==Nt?"down":t==Mt?"up":t==At?"left":t==Et?"right":""}function Q(t,e){var n=e.manager;return n?n.get(t):t}function J(){U.apply(this,arguments)}function Z(){J.apply(this,arguments),this.pX=null,this.pY=null}function K(){J.apply(this,arguments)}function tt(){U.apply(this,arguments),this._timer=null,this._input=null}function et(){J.apply(this,arguments)}function nt(){J.apply(this,arguments)}function it(){U.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=h(e.recognizers,st.defaults.preset),new at(t,e)}function at(t,e){e=e||{},this.options=c(e,st.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=k(this),this.touchAction=new W(this,this.options.touchAction),ot(this,!0),o(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ot(t,e){var n=t.element;o(t.options.cssProps,function(t,i){n.style[w(n.style,i)]=e?t:""})}function rt(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ct=["","webkit","moz","MS","ms","o"],lt=e.createElement("div"),dt="function",ut=Math.round,ht=Math.abs,pt=Date.now,ft=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in t,vt=w(t,"PointerEvent")!==i,bt=gt&&mt.test(navigator.userAgent),yt="touch",_t="mouse",wt=25,xt=1,St=2,Ct=4,kt=8,Tt=1,At=2,Et=4,Mt=8,Nt=16,Ot=At|Et,It=Mt|Nt,Dt=Ot|It,Rt=["x","y"],Lt=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(S(this.element),this.evWin,this.domHandler)}};var Pt={mousedown:xt,mousemove:St,mouseup:Ct},$t="mousedown",jt="mousemove mouseup";l(j,C,{handler:function(t){var e=Pt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=Ct),this.pressed&&this.allow&&(e&Ct&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:_t,srcEvent:t}))}});var Ht={pointerdown:xt,pointermove:St,pointerup:Ct,pointercancel:kt,pointerout:kt},qt={2:yt,3:"pen",4:_t,5:"kinect"},Ft="pointerdown",Bt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Ft="MSPointerDown",Bt="MSPointerMove MSPointerUp MSPointerCancel"),l(H,C,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),s=Ht[i],a=qt[t.pointerType]||t.pointerType,o=a==yt,r=b(e,t.pointerId,"pointerId");s&xt&&(0===t.button||o)?0>r&&(e.push(t),r=e.length-1):s&(Ct|kt)&&(n=!0),0>r||(e[r]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(r,1))}});var Vt={touchstart:xt,touchmove:St,touchend:Ct,touchcancel:kt},zt="touchstart",Wt="touchstart touchmove touchend touchcancel";l(q,C,{handler:function(t){var e=Vt[t.type];if(e===xt&&(this.started=!0),this.started){var n=F.call(this,t,e);e&(Ct|kt)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}});var Yt={touchstart:xt,touchmove:St,touchend:Ct,touchcancel:kt},Ut="touchstart touchmove touchend touchcancel";l(B,C,{handler:function(t){var e=Yt[t.type],n=V.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}),l(z,C,{handler:function(t,e,n){var i=n.pointerType==yt,s=n.pointerType==_t;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(Ct|kt)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xt=w(lt.style,"touchAction"),Gt=Xt!==i,Qt="compute",Jt="auto",Zt="manipulation",Kt="none",te="pan-x",ee="pan-y";W.prototype={set:function(t){t==Qt&&(t=this.compute()),Gt&&(this.manager.element.style[Xt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Y(t.join(" "))},preventDefaults:function(t){if(!Gt){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,s=g(i,Kt),a=g(i,ee),o=g(i,te);return s||a&&n&Ot||o&&n&It?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ne=1,ie=2,se=4,ae=8,oe=ae,re=16;U.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?X(i):""),t)}var n=this,i=this.state;ae>i&&e(!0),e(),i>=ae&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ne)))return!1;t++}return!0},recognize:function(t){var e=r({},t);return u(this.options.enable,[this,e])?(this.state&(oe|re|32)&&(this.state=ne),this.state=this.process(e),void(this.state&(ie|se|ae|re)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},l(J,U,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ie|se),s=this.attrTest(t);return i&&(n&kt||!s)?e|re:i||s?n&Ct?e|ae:e&ie?e|se:ie:32}}),l(Z,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Dt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ot&&e.push(ee),t&It&&e.push(te),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,s=t.direction,a=t.deltaX,o=t.deltaY;return s&e.direction||(e.direction&Ot?(s=0===a?Tt:0>a?At:Et,n=a!=this.pX,i=Math.abs(t.deltaX)):(s=0===o?Tt:0>o?Mt:Nt,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=s,n&&i>e.threshold&&s&e.direction},attrTest:function(t){return J.prototype.attrTest.call(this,t)&&(this.state&ie||!(this.state&ie)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),l(K,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ie)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),l(tt,U,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Jt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ct|kt)&&!a)this.reset();else if(t.eventType&xt)this.reset(),this._timer=s(function(){this.state=oe,this.tryEmit()},e.time,this);else if(t.eventType&Ct)return oe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===oe&&(t&&t.eventType&Ct?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),l(et,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ie)}}),l(nt,J,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ot|It,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ot|It)?e=t.velocity:n&Ot?e=t.velocityX:n&It&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&ht(e)>this.options.velocity&&t.eventType&Ct},emit:function(t){var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(it,U,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Zt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(i&&a&&n){if(t.eventType!=Ct)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=oe,this.tryEmit()},e.interval,this),ie):oe}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==oe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.4",st.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[K,{enable:!1},["rotate"]],[nt,{direction:Ot}],[Z,{direction:Ot},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};at.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&oe)&&(s=e.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],2===e.stopped||s&&n!=s&&!n.canRecognizeWith(s)?n.reset():n.recognize(t),!s&&n.state&(ie|se|ae)&&(s=e.curRecognizer=n),a++}},get:function(t){if(t instanceof U)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(b(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return o(v(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return o(v(t),function(t){e?n[t].splice(b(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&rt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(st,{INPUT_START:xt,INPUT_MOVE:St,INPUT_END:Ct,INPUT_CANCEL:kt,STATE_POSSIBLE:ne,STATE_BEGAN:ie,STATE_CHANGED:se,STATE_ENDED:ae,STATE_RECOGNIZED:oe,STATE_CANCELLED:re,STATE_FAILED:32,DIRECTION_NONE:Tt,DIRECTION_LEFT:At,DIRECTION_RIGHT:Et,DIRECTION_UP:Mt,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:Ot,DIRECTION_VERTICAL:It,DIRECTION_ALL:Dt,Manager:at,Input:C,TouchAction:W,TouchInput:B,MouseInput:j,PointerEventInput:H,TouchMouseInput:z,SingleTouchInput:q,Recognizer:U,AttrRecognizer:J,Tap:it,Pan:Z,Swipe:nt,Pinch:K,Rotate:et,Press:tt,on:p,off:f,each:o,merge:c,extend:r,inherit:l,bindFn:d,prefixed:w}),typeof define==dt&&define.amd?define("hammerjs",[],function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:t.Hammer=st}(window,document),define("materialize",["jquery","hammerjs"],function(t,e){window.$=window.jQuery=$=t,t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,n,i,s,a){return t.easing[t.easing.def](e,n,i,s,a)},easeInQuad:function(t,e,n,i,s){return i*(e/=s)*e+n},easeOutQuad:function(t,e,n,i,s){return-i*(e/=s)*(e-2)+n},easeInOutQuad:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,s){return i*(e/=s)*e*e+n},easeOutCubic:function(t,e,n,i,s){return i*((e=e/s-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,s){return i*(e/=s)*e*e*e+n},easeOutQuart:function(t,e,n,i,s){return-i*((e=e/s-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,s){return i*(e/=s)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,s){return i*((e=e/s-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,s){return i*Math.sin(e/s*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+n},easeInExpo:function(t,e,n,i,s){return 0==e?n:i*Math.pow(2,10*(e/s-1))+n},easeOutExpo:function(t,e,n,i,s){return e==s?n+i:i*(1-Math.pow(2,-10*e/s))+n},easeInOutExpo:function(t,e,n,i,s){return 0==e?n:e==s?n+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,i,s){return-i*(Math.sqrt(1-(e/=s)*e)-1)+n},easeOutCirc:function(t,e,n,i,s){return i*Math.sqrt(1-(e=e/s-1)*e)+n},easeInOutCirc:function(t,e,n,i,s){return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,s){var a=1.70158,o=0,r=i;if(0==e)return n;if(1==(e/=s))return n+i;if(o||(o=.3*s),r<Math.abs(i)){r=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/r);return-r*Math.pow(2,10*(e-=1))*Math.sin((e*s-a)*(2*Math.PI)/o)+n},easeOutElastic:function(t,e,n,i,s){var a=1.70158,o=0,r=i;if(0==e)return n;if(1==(e/=s))return n+i;if(o||(o=.3*s),r<Math.abs(i)){r=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/r);return r*Math.pow(2,-10*e)*Math.sin((e*s-a)*(2*Math.PI)/o)+i+n},easeInOutElastic:function(t,e,n,i,s){var a=1.70158,o=0,r=i;if(0==e)return n;if(2==(e/=s/2))return n+i;if(o||(o=s*(.3*1.5)),r<Math.abs(i)){r=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/r);return e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*s-a)*(2*Math.PI)/o)*-.5+n:r*Math.pow(2,-10*(e-=1))*Math.sin((e*s-a)*(2*Math.PI)/o)*.5+i+n},easeInBack:function(t,e,n,i,s,a){return void 0==a&&(a=1.70158),i*(e/=s)*e*((a+1)*e-a)+n},easeOutBack:function(t,e,n,i,s,a){return void 0==a&&(a=1.70158),i*((e=e/s-1)*e*((a+1)*e+a)+1)+n},easeInOutBack:function(t,e,n,i,s,a){return void 0==a&&(a=1.70158),(e/=s/2)<1?i/2*(e*e*((1+(a*=1.525))*e-a))+n:i/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+n},easeInBounce:function(e,n,i,s,a){return s-t.easing.easeOutBounce(e,a-n,0,s,a)+i},easeOutBounce:function(t,e,n,i,s){return(e/=s)<1/2.75?i*(7.5625*e*e)+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(e,n,i,s,a){return n<a/2?.5*t.easing.easeInBounce(e,2*n,0,s,a)+i:.5*t.easing.easeOutBounce(e,2*n-a,0,s,a)+.5*s+i}}),t.extend(t.easing,{easeInOutMaterial:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e+n:i/4*((e-=2)*e*e+2)+n}}),t.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(t){function e(t){var e=t.length,i=n.type(t);return"function"!==i&&!n.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}if(!t.jQuery){var n=function(t,e){return new n.fn.init(t,e)};n.isWindow=function(t){return null!=t&&t==t.window},n.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?s[o.call(t)]||"object":typeof t},n.isArray=Array.isArray||function(t){return"array"===n.type(t)},n.isPlainObject=function(t){var e;if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!a.call(t,"constructor")&&!a.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(e in t);return void 0===e||a.call(t,e)},n.each=function(t,n,i){var s=0,a=t.length,o=e(t);if(i){if(o)for(;a>s&&!1!==n.apply(t[s],i);s++);else for(s in t)if(!1===n.apply(t[s],i))break}else if(o)for(;a>s&&!1!==n.call(t[s],s,t[s]);s++);else for(s in t)if(!1===n.call(t[s],s,t[s]))break;return t},n.data=function(t,e,s){if(void 0===s){var a=t[n.expando],o=a&&i[a];if(void 0===e)return o;if(o&&e in o)return o[e]}else if(void 0!==e){var a=t[n.expando]||(t[n.expando]=++n.uuid);return i[a]=i[a]||{},i[a][e]=s,s}},n.removeData=function(t,e){var s=t[n.expando],a=s&&i[s];a&&n.each(e,function(t,e){delete a[e]})},n.extend=function(){var t,e,i,s,a,o,r=arguments[0]||{},c=1,l=arguments.length,d=!1;for("boolean"==typeof r&&(d=r,r=arguments[c]||{},c++),"object"!=typeof r&&"function"!==n.type(r)&&(r={}),c===l&&(r=this,c--);l>c;c++)if(null!=(a=arguments[c]))for(s in a)t=r[s],i=a[s],r!==i&&(d&&i&&(n.isPlainObject(i)||(e=n.isArray(i)))?(e?(e=!1,o=t&&n.isArray(t)?t:[]):o=t&&n.isPlainObject(t)?t:{},r[s]=n.extend(d,o,i)):void 0!==i&&(r[s]=i));return r},n.queue=function(t,i,s){if(t){i=(i||"fx")+"queue";var a=n.data(t,i);return s?(!a||n.isArray(s)?a=n.data(t,i,function(t,n){var i=n||[];return null!=t&&(e(Object(t))?function(t,e){for(var n=+e.length,i=0,s=t.length;n>i;)t[s++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[s++]=e[i++];t.length=s}(i,"string"==typeof t?[t]:t):[].push.call(i,t)),i}(s)):a.push(s),a):a||[]}},n.dequeue=function(t,e){n.each(t.nodeType?[t]:t,function(t,i){e=e||"fx";var s=n.queue(i,e),a=s.shift();"inprogress"===a&&(a=s.shift()),a&&("fx"===e&&s.unshift("inprogress"),a.call(i,function(){n.dequeue(i,e)}))})},n.fn=n.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],t=t.apply(e),i=this.offset(),s=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return i.top-=parseFloat(e.style.marginTop)||0,i.left-=parseFloat(e.style.marginLeft)||0,t.style&&(s.top+=parseFloat(t.style.borderTopWidth)||0,s.left+=parseFloat(t.style.borderLeftWidth)||0),{top:i.top-s.top,left:i.left-s.left}}};var i={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var s={},a=s.hasOwnProperty,o=s.toString,r="Boolean Number String Function Array Date RegExp Object Error".split(" "),c=0;c<r.length;c++)s["[object "+r[c]+"]"]=r[c].toLowerCase();n.fn.init.prototype=n.fn,t.Velocity={Utilities:n}}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():("function"==typeof define&&define.amd,t())}(function(){return function(e,n,i,s){function a(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var s=t[e];s&&i.push(s)}return i}function o(t){return g.isWrapped(t)?t=[].slice.call(t):g.isNode(t)&&(t=[t]),t}function r(t){var e=p.data(t,"velocity");return null===e?s:e}function c(t){return function(e){return Math.round(e*t)*(1/t)}}function l(t,e,i,s){function a(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function r(t){return 3*t}function c(t,e,n){return((a(e,n)*t+o(e,n))*t+r(e))*t}function l(t,e,n){return 3*a(e,n)*t*t+2*o(e,n)*t+r(e)}function d(e,n){for(var s=0;m>s;++s){var a=l(n,t,i);if(0===a)return n;n-=(c(n,t,i)-e)/a}return n}function u(){for(var e=0;y>e;++e)S[e]=c(e*_,t,i)}function h(e,n,s){var a,o,r=0;do{o=n+(s-n)/2,a=c(o,t,i)-e,a>0?s=o:n=o}while(Math.abs(a)>v&&++r<b);return o}function p(e){for(var n=0,s=1,a=y-1;s!=a&&S[s]<=e;++s)n+=_;--s;var o=(e-S[s])/(S[s+1]-S[s]),r=n+o*_,c=l(r,t,i);return c>=g?d(e,r):0==c?r:h(e,n,n+_)}function f(){C=!0,(t!=e||i!=s)&&u()}var m=4,g=.001,v=1e-7,b=10,y=11,_=1/(y-1),w="Float32Array"in n;if(4!==arguments.length)return!1;for(var x=0;4>x;++x)if("number"!=typeof arguments[x]||isNaN(arguments[x])||!isFinite(arguments[x]))return!1;t=Math.min(t,1),i=Math.min(i,1),t=Math.max(t,0),i=Math.max(i,0);var S=w?new Float32Array(y):new Array(y),C=!1,k=function(n){return C||f(),t===e&&i===s?n:0===n?0:1===n?1:c(p(n),e,s)};k.getControlPoints=function(){return[{x:t,y:e},{x:i,y:s
}]};var T="generateBezier("+[t,e,i,s]+")";return k.toString=function(){return T},k}function d(t,e){var n=t;return g.isString(t)?_.Easings[t]||(n=!1):n=g.isArray(t)&&1===t.length?c.apply(null,t):g.isArray(t)&&2===t.length?w.apply(null,t.concat([e])):!(!g.isArray(t)||4!==t.length)&&l.apply(null,t),!1===n&&(n=_.Easings[_.defaults.easing]?_.defaults.easing:y),n}function u(t){if(t){var e=(new Date).getTime(),n=_.State.calls.length;n>1e4&&(_.State.calls=a(_.State.calls));for(var i=0;n>i;i++)if(_.State.calls[i]){var o=_.State.calls[i],c=o[0],l=o[2],d=o[3],f=!!d,m=null;d||(d=_.State.calls[i][3]=e-16);for(var v=Math.min((e-d)/l.duration,1),b=0,y=c.length;y>b;b++){var w=c[b],S=w.element;if(r(S)){var k=!1;if(l.display!==s&&null!==l.display&&"none"!==l.display){if("flex"===l.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];p.each(T,function(t,e){x.setPropertyValue(S,"display",e)})}x.setPropertyValue(S,"display",l.display)}l.visibility!==s&&"hidden"!==l.visibility&&x.setPropertyValue(S,"visibility",l.visibility);for(var A in w)if("element"!==A){var E,M=w[A],N=g.isString(M.easing)?_.Easings[M.easing]:M.easing;if(1===v)E=M.endValue;else{var O=M.endValue-M.startValue;if(E=M.startValue+O*N(v,l,O),!f&&E===M.currentValue)continue}if(M.currentValue=E,"tween"===A)m=E;else{if(x.Hooks.registered[A]){var I=x.Hooks.getRoot(A),D=r(S).rootPropertyValueCache[I];D&&(M.rootPropertyValue=D)}var R=x.setPropertyValue(S,A,M.currentValue+(0===parseFloat(E)?"":M.unitType),M.rootPropertyValue,M.scrollData);x.Hooks.registered[A]&&(r(S).rootPropertyValueCache[I]=x.Normalizations.registered[I]?x.Normalizations.registered[I]("extract",null,R[1]):R[1]),"transform"===R[0]&&(k=!0)}}l.mobileHA&&r(S).transformCache.translate3d===s&&(r(S).transformCache.translate3d="(0px, 0px, 0px)",k=!0),k&&x.flushTransformCache(S)}}l.display!==s&&"none"!==l.display&&(_.State.calls[i][2].display=!1),l.visibility!==s&&"hidden"!==l.visibility&&(_.State.calls[i][2].visibility=!1),l.progress&&l.progress.call(o[1],o[1],v,Math.max(0,d+l.duration-e),d,m),1===v&&h(i)}}_.State.isTicking&&C(u)}function h(t,e){if(!_.State.calls[t])return!1;for(var n=_.State.calls[t][0],i=_.State.calls[t][1],a=_.State.calls[t][2],o=_.State.calls[t][4],c=!1,l=0,d=n.length;d>l;l++){var u=n[l].element;if(e||a.loop||("none"===a.display&&x.setPropertyValue(u,"display",a.display),"hidden"===a.visibility&&x.setPropertyValue(u,"visibility",a.visibility)),!0!==a.loop&&(p.queue(u)[1]===s||!/\.velocityQueueEntryFlag/i.test(p.queue(u)[1]))&&r(u)){r(u).isAnimating=!1,r(u).rootPropertyValueCache={};var h=!1;p.each(x.Lists.transforms3D,function(t,e){var n=/^scale/.test(e)?1:0,i=r(u).transformCache[e];r(u).transformCache[e]!==s&&new RegExp("^\\("+n+"[^.]").test(i)&&(h=!0,delete r(u).transformCache[e])}),a.mobileHA&&(h=!0,delete r(u).transformCache.translate3d),h&&x.flushTransformCache(u),x.Values.removeClass(u,"velocity-animating")}if(!e&&a.complete&&!a.loop&&l===d-1)try{a.complete.call(i,i)}catch(t){setTimeout(function(){throw t},1)}o&&!0!==a.loop&&o(i),r(u)&&!0===a.loop&&!e&&(p.each(r(u).tweensContainer,function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360),/^backgroundPosition/.test(t)&&100===parseFloat(e.endValue)&&"%"===e.unitType&&(e.endValue=0,e.startValue=100)}),_(u,"reverse",{loop:!0,delay:a.delay})),!1!==a.queue&&p.dequeue(u,a.queue)}_.State.calls[t]=!1;for(var f=0,m=_.State.calls.length;m>f;f++)if(!1!==_.State.calls[f]){c=!0;break}!1===c&&(_.State.isTicking=!1,delete _.State.calls,_.State.calls=[])}var p,f=function(){if(i.documentMode)return i.documentMode;for(var t=7;t>4;t--){var e=i.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}return s}(),m=function(){var t=0;return n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(e){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-t)),t=i+n,setTimeout(function(){e(i+n)},n)}}(),g={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==s&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||n.Zepto&&n.Zepto.zepto.isZ(t))},isSVG:function(t){return n.SVGElement&&t instanceof n.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},v=!1;if(e.fn&&e.fn.jquery?(p=e,v=!0):p=n.Velocity.Utilities,8>=f&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=f)return void(t.fn.velocity=t.fn.animate);var b=400,y="swing",_={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:n.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:i.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:p,Redirects:{},Easings:{},Promise:n.Promise,defaults:{queue:"",duration:b,easing:y,begin:s,complete:s,progress:s,display:s,visibility:s,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){p.data(t,"velocity",{isSVG:g.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};n.pageYOffset!==s?(_.State.scrollAnchor=n,_.State.scrollPropertyLeft="pageXOffset",_.State.scrollPropertyTop="pageYOffset"):(_.State.scrollAnchor=i.documentElement||i.body.parentNode||i.body,_.State.scrollPropertyLeft="scrollLeft",_.State.scrollPropertyTop="scrollTop");var w=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,i){var s={x:e.x+i.dx*n,v:e.v+i.dv*n,tension:e.tension,friction:e.friction};return{dx:s.v,dv:t(s)}}function n(n,i){var s={dx:n.v,dv:t(n)},a=e(n,.5*i,s),o=e(n,.5*i,a),r=e(n,i,o),c=1/6*(s.dx+2*(a.dx+o.dx)+r.dx),l=1/6*(s.dv+2*(a.dv+o.dv)+r.dv);return n.x=n.x+c*i,n.v=n.v+l*i,n}return function t(e,i,s){var a,o,r,c={x:-1,v:0,tension:null,friction:null},l=[0],d=0;for(e=parseFloat(e)||500,i=parseFloat(i)||20,s=s||null,c.tension=e,c.friction=i,a=null!==s,a?(d=t(e,i),o=d/s*.016):o=.016;r=n(r||c,o),l.push(1+r.x),d+=16,Math.abs(r.x)>1e-4&&Math.abs(r.v)>1e-4;);return a?function(t){return l[t*(l.length-1)|0]}:d}}();_.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},p.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){_.Easings[e[0]]=l.apply(null,e[1])});var x=_.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<x.Lists.colors.length;t++){var e="color"===x.Lists.colors[t]?"0 0 0 1":"255 255 255 1";x.Hooks.templates[x.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,i,s;if(f)for(n in x.Hooks.templates){i=x.Hooks.templates[n],s=i[0].split(" ");var a=i[1].match(x.RegEx.valueSplit);"Color"===s[0]&&(s.push(s.shift()),a.push(a.shift()),x.Hooks.templates[n]=[s.join(" "),a.join(" ")])}for(n in x.Hooks.templates){i=x.Hooks.templates[n],s=i[0].split(" ");for(var t in s){var o=n+s[t],r=t;x.Hooks.registered[o]=[n,r]}}},getRoot:function(t){var e=x.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return x.RegEx.valueUnwrap.test(e)&&(e=e.match(x.RegEx.valueUnwrap)[1]),x.Values.isCSSNullValue(e)&&(e=x.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=x.Hooks.registered[t];if(n){var i=n[0],s=n[1];return e=x.Hooks.cleanRootPropertyValue(i,e),e.toString().match(x.RegEx.valueSplit)[s]}return e},injectValue:function(t,e,n){var i=x.Hooks.registered[t];if(i){var s,a=i[0],o=i[1];return n=x.Hooks.cleanRootPropertyValue(a,n),s=n.toString().match(x.RegEx.valueSplit),s[o]=e,s.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var i;return x.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(x.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return _.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var s=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=s?s[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(8>=f)switch(t){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){9>=f||_.State.isGingerbread||(x.Lists.transformsBase=x.Lists.transformsBase.concat(x.Lists.transforms3D));for(var t=0;t<x.Lists.transformsBase.length;t++)!function(){var e=x.Lists.transformsBase[t];x.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return"transform";case"extract":return r(n)===s||r(n).transformCache[e]===s?/^scale/i.test(e)?1:0:r(n).transformCache[e].replace(/[()]/g,"");case"inject":var a=!1;switch(e.substr(0,e.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":_.State.isAndroid&&r(n).transformCache[e]===s&&1>i&&(i=1),a=!/(\d)$/i.test(i);break;case"skew":a=!/(deg|\d)$/i.test(i);break;case"rotate":a=!/(deg|\d)$/i.test(i)}return a||(r(n).transformCache[e]="("+i+")"),r(n).transformCache[e]}}}();for(var t=0;t<x.Lists.colors.length;t++)!function(){var e=x.Lists.colors[t];x.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return e;case"extract":var a;if(x.RegEx.wrappedValueAlreadyExtracted.test(i))a=i;else{var o,r={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?o=r[i]!==s?r[i]:r.black:x.RegEx.isHex.test(i)?o="rgb("+x.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(o=r.black),a=(o||i).toString().match(x.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==a.split(" ").length||(a+=" 1"),a;case"inject":return 8>=f?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=f?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||_.State.isAndroid&&!_.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(_.State.prefixMatches[t])return[_.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,i=e.length;i>n;n++){var s;if(s=0===n?t:e[n]+t.replace(/^\w/,function(t){return t.toUpperCase()}),g.isString(_.State.prefixElement.style[s]))return _.State.prefixMatches[t]=s,[s,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return t=t.replace(n,function(t,e,n,i){return e+e+n+n+i+i}),e=i.exec(t),e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":/^(table)$/i.test(e)?"table":/^(tbody)$/i.test(e)?"table-row-group":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,e,i,a){function o(t,e){function i(){l&&x.setPropertyValue(t,"display","none")}var c=0;if(8>=f)c=p.css(t,e);else{var l=!1;if(/^(width|height)$/.test(e)&&0===x.getPropertyValue(t,"display")&&(l=!0,x.setPropertyValue(t,"display",x.Values.getDisplayType(t))),!a){if("height"===e&&"border-box"!==x.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var d=t.offsetHeight-(parseFloat(x.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(x.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(x.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(x.getPropertyValue(t,"paddingBottom"))||0);return i(),d}if("width"===e&&"border-box"!==x.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var u=t.offsetWidth-(parseFloat(x.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(x.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(x.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(x.getPropertyValue(t,"paddingRight"))||0);return i(),u}}var h;h=r(t)===s?n.getComputedStyle(t,null):r(t).computedStyle?r(t).computedStyle:r(t).computedStyle=n.getComputedStyle(t,null),"borderColor"===e&&(e="borderTopColor"),c=9===f&&"filter"===e?h.getPropertyValue(e):h[e],(""===c||null===c)&&(c=t.style[e]),i()}if("auto"===c&&/^(top|right|bottom|left)$/i.test(e)){var m=o(t,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(e))&&(c=p(t).position()[e]+"px")}return c}var c;if(x.Hooks.registered[e]){var l=e,d=x.Hooks.getRoot(l);i===s&&(i=x.getPropertyValue(t,x.Names.prefixCheck(d)[0])),x.Normalizations.registered[d]&&(i=x.Normalizations.registered[d]("extract",t,i)),c=x.Hooks.extractValue(l,i)}else if(x.Normalizations.registered[e]){var u,h;u=x.Normalizations.registered[e]("name",t),"transform"!==u&&(h=o(t,x.Names.prefixCheck(u)[0]),x.Values.isCSSNullValue(h)&&x.Hooks.templates[e]&&(h=x.Hooks.templates[e][1])),c=x.Normalizations.registered[e]("extract",t,h)}if(!/^[\d-]/.test(c))if(r(t)&&r(t).isSVG&&x.Names.SVGAttribute(e))if(/^(height|width)$/i.test(e))try{c=t.getBBox()[e]}catch(t){c=0}else c=t.getAttribute(e);else c=o(t,x.Names.prefixCheck(e)[0]);return x.Values.isCSSNullValue(c)&&(c=0),_.debug>=2&&console.log("Get "+e+": "+c),c},setPropertyValue:function(t,e,i,s,a){var o=e;if("scroll"===e)a.container?a.container["scroll"+a.direction]=i:"Left"===a.direction?n.scrollTo(i,a.alternateValue):n.scrollTo(a.alternateValue,i);else if(x.Normalizations.registered[e]&&"transform"===x.Normalizations.registered[e]("name",t))x.Normalizations.registered[e]("inject",t,i),o="transform",i=r(t).transformCache[e];else{if(x.Hooks.registered[e]){var c=e,l=x.Hooks.getRoot(e);s=s||x.getPropertyValue(t,l),i=x.Hooks.injectValue(c,i,s),e=l}if(x.Normalizations.registered[e]&&(i=x.Normalizations.registered[e]("inject",t,i),e=x.Normalizations.registered[e]("name",t)),o=x.Names.prefixCheck(e)[0],8>=f)try{t.style[o]=i}catch(t){_.debug&&console.log("Browser does not support ["+i+"] for ["+o+"]")}else r(t)&&r(t).isSVG&&x.Names.SVGAttribute(e)?t.setAttribute(e,i):t.style[o]=i;_.debug>=2&&console.log("Set "+e+" ("+o+"): "+i)}return[o,i]},flushTransformCache:function(t){function e(e){return parseFloat(x.getPropertyValue(t,e))}var n="";if((f||_.State.isAndroid&&!_.State.isChrome)&&r(t).isSVG){var i={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};p.each(r(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),i[t]&&(n+=t+"("+i[t].join(" ")+") ",delete i[t])})}else{var s,a;p.each(r(t).transformCache,function(e){return s=r(t).transformCache[e],"transformPerspective"===e?(a=s,!0):(9===f&&"rotateZ"===e&&(e="rotate"),void(n+=e+s+" "))}),a&&(n="perspective"+a+" "+n)}x.setPropertyValue(t,"transform",n)}};x.Hooks.register(),x.Normalizations.register(),_.hook=function(t,e,n){var i=s;return t=o(t),p.each(t,function(t,a){if(r(a)===s&&_.init(a),n===s)i===s&&(i=_.CSS.getPropertyValue(a,e));else{var o=_.CSS.setPropertyValue(a,e,n);"transform"===o[0]&&_.CSS.flushTransformCache(a),i=o}}),i};var S=function(){function t(){return a?A.promise||null:c}function e(){function t(t){function l(t,e){var n=s,i=s,r=s;return g.isArray(t)?(n=t[0],!g.isArray(t[1])&&/^[\d-]/.test(t[1])||g.isFunction(t[1])||x.RegEx.isHex.test(t[1])?r=t[1]:(g.isString(t[1])&&!x.RegEx.isHex.test(t[1])||g.isArray(t[1]))&&(i=e?t[1]:d(t[1],o.duration),t[2]!==s&&(r=t[2]))):n=t,e||(i=i||o.easing),g.isFunction(n)&&(n=n.call(a,C,w)),g.isFunction(r)&&(r=r.call(a,C,w)),[n||0,i,r]}function h(t,e){var n,i;return i=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return n=t,""}),n||(n=x.Values.getUnitType(t)),[i,n]}if(o.begin&&0===C)try{o.begin.call(f,f)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===E){var b,y,S,k=/^x$/i.test(o.axis)?"Left":"Top",T=parseFloat(o.offset)||0;o.container?g.isWrapped(o.container)||g.isNode(o.container)?(o.container=o.container[0]||o.container,b=o.container["scroll"+k],S=b+p(a).position()[k.toLowerCase()]+T):o.container=null:(b=_.State.scrollAnchor[_.State["scrollProperty"+k]],y=_.State.scrollAnchor[_.State["scrollProperty"+("Left"===k?"Top":"Left")]],S=p(a).offset()[k.toLowerCase()]+T),c={scroll:{rootPropertyValue:!1,startValue:b,currentValue:b,endValue:S,unitType:"",easing:o.easing,scrollData:{container:o.container,direction:k,alternateValue:y}},element:a},_.debug&&console.log("tweensContainer (scroll): ",c.scroll,a)}else if("reverse"===E){if(!r(a).tweensContainer)return void p.dequeue(a,o.queue);"none"===r(a).opts.display&&(r(a).opts.display="auto"),"hidden"===r(a).opts.visibility&&(r(a).opts.visibility="visible"),r(a).opts.loop=!1,r(a).opts.begin=null,r(a).opts.complete=null,v.easing||delete o.easing,v.duration||delete o.duration,o=p.extend({},r(a).opts,o);var M=p.extend(!0,{},r(a).tweensContainer);for(var N in M)if("element"!==N){var O=M[N].startValue;M[N].startValue=M[N].currentValue=M[N].endValue,M[N].endValue=O,g.isEmptyObject(v)||(M[N].easing=o.easing),_.debug&&console.log("reverse tweensContainer ("+N+"): "+JSON.stringify(M[N]),a)}c=M}else if("start"===E){var M;r(a).tweensContainer&&!0===r(a).isAnimating&&(M=r(a).tweensContainer),p.each(m,function(t,e){if(RegExp("^"+x.Lists.colors.join("$|^")+"$").test(t)){var n=l(e,!0),i=n[0],a=n[1],o=n[2];if(x.RegEx.isHex.test(i)){for(var r=["Red","Green","Blue"],c=x.Values.hexToRgb(i),d=o?x.Values.hexToRgb(o):s,u=0;u<r.length;u++){var h=[c[u]];a&&h.push(a),d!==s&&h.push(d[u]),m[t+r[u]]=h}delete m[t]}}});for(var I in m){var D=l(m[I]),P=D[0],$=D[1],j=D[2];I=x.Names.camelCase(I);var H=x.Hooks.getRoot(I),q=!1;if(r(a).isSVG||"tween"===H||!1!==x.Names.prefixCheck(H)[1]||x.Normalizations.registered[H]!==s){(o.display!==s&&null!==o.display&&"none"!==o.display||o.visibility!==s&&"hidden"!==o.visibility)&&/opacity|filter/.test(I)&&!j&&0!==P&&(j=0),o._cacheValues&&M&&M[I]?(j===s&&(j=M[I].endValue+M[I].unitType),q=r(a).rootPropertyValueCache[H]):x.Hooks.registered[I]?j===s?(q=x.getPropertyValue(a,H),j=x.getPropertyValue(a,I,q)):q=x.Hooks.templates[H][1]:j===s&&(j=x.getPropertyValue(a,I));var F,B,V,z=!1;if(F=h(I,j),j=F[0],V=F[1],F=h(I,P),P=F[0].replace(/^([+-\/*])=/,function(t,e){return z=e,""}),B=F[1],j=parseFloat(j)||0,P=parseFloat(P)||0,"%"===B&&(/^(fontSize|lineHeight)$/.test(I)?(P/=100,B="em"):/^scale/.test(I)?(P/=100,B=""):/(Red|Green|Blue)$/i.test(I)&&(P=P/100*255,B="")),/[\/*]/.test(z))B=V;else if(V!==B&&0!==j)if(0===P)B=V;else{e=e||function(){var t={myParent:a.parentNode||i.body,position:x.getPropertyValue(a,"position"),fontSize:x.getPropertyValue(a,"fontSize")},e=t.position===R.lastPosition&&t.myParent===R.lastParent,s=t.fontSize===R.lastFontSize;R.lastParent=t.myParent,R.lastPosition=t.position,R.lastFontSize=t.fontSize;var o=100,c={};if(s&&e)c.emToPx=R.lastEmToPx,c.percentToPxWidth=R.lastPercentToPxWidth,c.percentToPxHeight=R.lastPercentToPxHeight;else{var l=r(a).isSVG?i.createElementNS("http://www.w3.org/2000/svg","rect"):i.createElement("div");_.init(l),t.myParent.appendChild(l),p.each(["overflow","overflowX","overflowY"],function(t,e){_.CSS.setPropertyValue(l,e,"hidden")}),_.CSS.setPropertyValue(l,"position",t.position),_.CSS.setPropertyValue(l,"fontSize",t.fontSize),_.CSS.setPropertyValue(l,"boxSizing","content-box"),p.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){_.CSS.setPropertyValue(l,e,o+"%")}),_.CSS.setPropertyValue(l,"paddingLeft",o+"em"),c.percentToPxWidth=R.lastPercentToPxWidth=(parseFloat(x.getPropertyValue(l,"width",null,!0))||1)/o,c.percentToPxHeight=R.lastPercentToPxHeight=(parseFloat(x.getPropertyValue(l,"height",null,!0))||1)/o,c.emToPx=R.lastEmToPx=(parseFloat(x.getPropertyValue(l,"paddingLeft"))||1)/o,t.myParent.removeChild(l)}return null===R.remToPx&&(R.remToPx=parseFloat(x.getPropertyValue(i.body,"fontSize"))||16),null===R.vwToPx&&(R.vwToPx=parseFloat(n.innerWidth)/100,R.vhToPx=parseFloat(n.innerHeight)/100),c.remToPx=R.remToPx,c.vwToPx=R.vwToPx,c.vhToPx=R.vhToPx,_.debug>=1&&console.log("Unit ratios: "+JSON.stringify(c),a),c}();var W=/margin|padding|left|right|width|text|word|letter/i.test(I)||/X$/.test(I)||"x"===I?"x":"y";switch(V){case"%":j*="x"===W?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:j*=e[V+"ToPx"]}switch(B){case"%":j*=1/("x"===W?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:j*=1/e[B+"ToPx"]}}switch(z){case"+":P=j+P;break;case"-":P=j-P;break;case"*":P*=j;break;case"/":P=j/P}c[I]={rootPropertyValue:q,startValue:j,currentValue:j,endValue:P,unitType:B,easing:$},_.debug&&console.log("tweensContainer ("+I+"): "+JSON.stringify(c[I]),a)}else _.debug&&console.log("Skipping ["+H+"] due to a lack of browser support.")}c.element=a}c.element&&(x.Values.addClass(a,"velocity-animating"),L.push(c),""===o.queue&&(r(a).tweensContainer=c,r(a).opts=o),r(a).isAnimating=!0,C===w-1?(_.State.calls.push([L,f,o,null,A.resolver]),!1===_.State.isTicking&&(_.State.isTicking=!0,u())):C++)}var e,a=this,o=p.extend({},_.defaults,v),c={};switch(r(a)===s&&_.init(a),parseFloat(o.delay)&&!1!==o.queue&&p.queue(a,o.queue,function(t){_.velocityQueueEntryFlag=!0,r(a).delayTimer={setTimeout:setTimeout(t,parseFloat(o.delay)),next:t}}),o.duration.toString().toLowerCase()){case"fast":o.duration=200;break;case"normal":o.duration=b;break;case"slow":o.duration=600;break;default:o.duration=parseFloat(o.duration)||1}!1!==_.mock&&(!0===_.mock?o.duration=o.delay=1:(o.duration*=parseFloat(_.mock)||1,o.delay*=parseFloat(_.mock)||1)),o.easing=d(o.easing,o.duration),o.begin&&!g.isFunction(o.begin)&&(o.begin=null),o.progress&&!g.isFunction(o.progress)&&(o.progress=null),o.complete&&!g.isFunction(o.complete)&&(o.complete=null),o.display!==s&&null!==o.display&&(o.display=o.display.toString().toLowerCase(),"auto"===o.display&&(o.display=_.CSS.Values.getDisplayType(a))),o.visibility!==s&&null!==o.visibility&&(o.visibility=o.visibility.toString().toLowerCase()),o.mobileHA=o.mobileHA&&_.State.isMobile&&!_.State.isGingerbread,!1===o.queue?o.delay?setTimeout(t,o.delay):t():p.queue(a,o.queue,function(e,n){return!0===n?(A.promise&&A.resolver(f),!0):(_.velocityQueueEntryFlag=!0,void t(e))}),""!==o.queue&&"fx"!==o.queue||"inprogress"===p.queue(a)[0]||p.dequeue(a)}var a,c,l,f,m,v,y=arguments[0]&&(arguments[0].p||p.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(a=!1,l=0,f=this,c=this):(a=!0,l=1,f=y?arguments[0].elements||arguments[0].e:arguments[0]),f=o(f)){y?(m=arguments[0].properties||arguments[0].p,v=arguments[0].options||arguments[0].o):(m=arguments[l],v=arguments[l+1]);var w=f.length,C=0;if(!/^(stop|finish)$/i.test(m)&&!p.isPlainObject(v)){var k=l+1;v={};for(var T=k;T<arguments.length;T++)g.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?g.isString(arguments[T])||g.isArray(arguments[T])?v.easing=arguments[T]:g.isFunction(arguments[T])&&(v.complete=arguments[T]):v.duration=arguments[T]}var A={promise:null,resolver:null,rejecter:null};a&&_.Promise&&(A.promise=new _.Promise(function(t,e){A.resolver=t,A.rejecter=e}));var E;switch(m){case"scroll":E="scroll";break;case"reverse":E="reverse";break;case"finish":case"stop":p.each(f,function(t,e){r(e)&&r(e).delayTimer&&(clearTimeout(r(e).delayTimer.setTimeout),r(e).delayTimer.next&&r(e).delayTimer.next(),delete r(e).delayTimer)});var M=[];return p.each(_.State.calls,function(t,e){e&&p.each(e[1],function(n,i){var a=v===s?"":v;return!0!==a&&e[2].queue!==a&&(v!==s||!1!==e[2].queue)||void p.each(f,function(n,s){s===i&&((!0===v||g.isString(v))&&(p.each(p.queue(s,g.isString(v)?v:""),function(t,e){g.isFunction(e)&&e(null,!0)}),p.queue(s,g.isString(v)?v:"",[])),"stop"===m?(r(s)&&r(s).tweensContainer&&!1!==a&&p.each(r(s).tweensContainer,function(t,e){e.endValue=e.currentValue}),M.push(t)):"finish"===m&&(e[2].duration=1))})})}),"stop"===m&&(p.each(M,function(t,e){h(e,!0)}),A.promise&&A.resolver(f)),t();default:if(!p.isPlainObject(m)||g.isEmptyObject(m)){if(g.isString(m)&&_.Redirects[m]){var N=p.extend({},v),O=N.duration,I=N.delay||0;return!0===N.backwards&&(f=p.extend(!0,[],f).reverse()),p.each(f,function(t,e){parseFloat(N.stagger)?N.delay=I+parseFloat(N.stagger)*t:g.isFunction(N.stagger)&&(N.delay=I+N.stagger.call(e,t,w)),N.drag&&(N.duration=parseFloat(O)||(/^(callout|transition)/.test(m)?1e3:b),N.duration=Math.max(N.duration*(N.backwards?1-t/w:(t+1)/w),.75*N.duration,200)),_.Redirects[m].call(e,e,N||{},t,w,f,A.promise?A:s)}),t()}var D="Velocity: First argument ("+m+") was not a property map, a known action, or a registered redirect. Aborting.";return A.promise?A.rejecter(new Error(D)):console.log(D),t()}E="start"}var R={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},L=[];p.each(f,function(t,n){g.isNode(n)&&e.call(n)});var P,N=p.extend({},_.defaults,v);if(N.loop=parseInt(N.loop),P=2*N.loop-1,N.loop)for(var $=0;P>$;$++){var j={delay:N.delay,progress:N.progress};$===P-1&&(j.display=N.display,j.visibility=N.visibility,j.complete=N.complete),S(f,"reverse",j)}return t()}};_=p.extend(S,_),_.animate=S;var C=n.requestAnimationFrame||m;return _.State.isMobile||i.hidden===s||i.addEventListener("visibilitychange",function(){i.hidden?(C=function(t){return setTimeout(function(){t(!0)},16)},u()):C=n.requestAnimationFrame||m}),e.Velocity=_,e!==n&&(e.fn.velocity=S,e.fn.velocity.defaults=_.defaults),p.each(["Down","Up"],function(t,e){_.Redirects["slide"+e]=function(t,n,i,a,o,r){var c=p.extend({},n),l=c.begin,d=c.complete,u={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},h={};c.display===s&&(c.display="Down"===e?"inline"===_.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),c.begin=function(){l&&l.call(o,o);for(var n in u){h[n]=t.style[n];var i=_.CSS.getPropertyValue(t,n);u[n]="Down"===e?[i,0]:[0,i]}h.overflow=t.style.overflow,t.style.overflow="hidden"},c.complete=function(){for(var e in h)t.style[e]=h[e];d&&d.call(o,o),r&&r.resolver(o)},_(t,u,c)}}),p.each(["In","Out"],function(t,e){_.Redirects["fade"+e]=function(t,n,i,a,o,r){var c=p.extend({},n),l={opacity:"In"===e?1:0},d=c.complete;c.complete=i!==a-1?c.begin=null:function(){d&&d.call(o,o),r&&r.resolver(o)},c.display===s&&(c.display="In"===e?"auto":"none"),_(this,l,c)}}),_}(window.jQuery||window.Zepto||window,window,document)})),function(t,e,n,i){"use strict";function s(t,e,n){return setTimeout(d(t,n),e)}function a(t,e,n){return!!Array.isArray(t)&&(o(t,n[e],n),!0)}function o(t,e,n){var s;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(s=0;s<t.length;)e.call(n,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(n,t[s],s,t)}function r(t,e,n){for(var s=Object.keys(e),a=0;a<s.length;)(!n||n&&t[s[a]]===i)&&(t[s[a]]=e[s[a]]),a++;return t}function c(t,e){return r(t,e,!0)}function l(t,e,n){var i,s=e.prototype;i=t.prototype=Object.create(s),i.constructor=t,i._super=s,n&&r(i,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==dt?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function p(t,e,n){o(v(e),function(e){t.addEventListener(e,n,!1)})}function f(t,e,n){o(v(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function _(t,e,n){for(var i=[],s=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];b(s,o)<0&&i.push(t[a]),s[a]=o,a++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n,s,a=e[0].toUpperCase()+e.slice(1),o=0;o<ct.length;){if(n=ct[o],(s=n?n+a:e)in t)return s;o++}return i}function x(){return ft++}function S(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t){var e=t.options.inputClass;return new(e||(vt?H:bt?B:gt?z:j))(t,T)}function T(t,e,n){var i=n.pointers.length,s=n.changedPointers.length,a=e&xt&&0==i-s,o=e&(Ct|kt)&&0==i-s;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,A(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function A(t,e){var n=t.session,i=e.pointers,s=i.length;n.firstInput||(n.firstInput=N(e)),s>1&&!n.firstMultiple?n.firstMultiple=N(e):1===s&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,r=o?o.center:a.center,c=e.center=O(i);e.timeStamp=pt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=L(r,c),e.distance=R(r,c),E(n,e),e.offsetDirection=D(e.deltaX,e.deltaY),
e.scale=o?$(o.pointers,i):1,e.rotation=o?P(o.pointers,i):0,M(n,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function E(t,e){var n=e.center,i=t.offsetDelta||{},s=t.prevDelta||{},a=t.prevInput||{};(e.eventType===xt||a.eventType===Ct)&&(s=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=s.x+(n.x-i.x),e.deltaY=s.y+(n.y-i.y)}function M(t,e){var n,s,a,o,r=t.lastInterval||e,c=e.timeStamp-r.timeStamp;if(e.eventType!=kt&&(c>wt||r.velocity===i)){var l=r.deltaX-e.deltaX,d=r.deltaY-e.deltaY,u=I(c,l,d);s=u.x,a=u.y,n=ht(u.x)>ht(u.y)?u.x:u.y,o=D(l,d),t.lastInterval=e}else n=r.velocity,s=r.velocityX,a=r.velocityY,o=r.direction;e.velocity=n,e.velocityX=s,e.velocityY=a,e.direction=o}function N(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ut(t.pointers[n].clientX),clientY:ut(t.pointers[n].clientY)},n++;return{timeStamp:pt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:ut(t[0].clientX),y:ut(t[0].clientY)};for(var n=0,i=0,s=0;e>s;)n+=t[s].clientX,i+=t[s].clientY,s++;return{x:ut(n/e),y:ut(i/e)}}function I(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Tt:ht(t)>=ht(e)?t>0?At:Et:e>0?Mt:Nt}function R(t,e,n){n||(n=Rt);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return Math.sqrt(i*i+s*s)}function L(t,e,n){n||(n=Rt);var i=e[n[0]]-t[n[0]],s=e[n[1]]-t[n[1]];return 180*Math.atan2(s,i)/Math.PI}function P(t,e){return L(e[1],e[0],Lt)-L(t[1],t[0],Lt)}function $(t,e){return R(e[0],e[1],Lt)/R(t[0],t[1],Lt)}function j(){this.evEl=$t,this.evWin=jt,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function H(){this.evEl=Ft,this.evWin=Bt,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=zt,this.evWin=Wt,this.started=!1,C.apply(this,arguments)}function F(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(Ct|kt)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function B(){this.evTarget=Ut,this.targetIds={},C.apply(this,arguments)}function V(t,e){var n=y(t.touches),i=this.targetIds;if(e&(xt|St)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var s,a,o=y(t.changedTouches),r=[],c=this.target;if(a=n.filter(function(t){return m(t.target,c)}),e===xt)for(s=0;s<a.length;)i[a[s].identifier]=!0,s++;for(s=0;s<o.length;)i[o[s].identifier]&&r.push(o[s]),e&(Ct|kt)&&delete i[o[s].identifier],s++;return r.length?[_(a.concat(r),"identifier",!0),r]:void 0}function z(){C.apply(this,arguments);var t=d(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new j(this.manager,t)}function W(t,e){this.manager=t,this.set(e)}function Y(t){if(g(t,Kt))return Kt;var e=g(t,te),n=g(t,ee);return e&&n?te+" "+ee:e||n?e?te:ee:g(t,Zt)?Zt:Jt}function U(t){this.id=x(),this.manager=null,this.options=c(t||{},this.defaults),this.options.enable=h(this.options.enable,!0),this.state=ne,this.simultaneous={},this.requireFail=[]}function X(t){return t&re?"cancel":t&ae?"end":t&se?"move":t&ie?"start":""}function G(t){return t==Nt?"down":t==Mt?"up":t==At?"left":t==Et?"right":""}function Q(t,e){var n=e.manager;return n?n.get(t):t}function J(){U.apply(this,arguments)}function Z(){J.apply(this,arguments),this.pX=null,this.pY=null}function K(){J.apply(this,arguments)}function tt(){U.apply(this,arguments),this._timer=null,this._input=null}function et(){J.apply(this,arguments)}function nt(){J.apply(this,arguments)}function it(){U.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=h(e.recognizers,st.defaults.preset),new at(t,e)}function at(t,e){e=e||{},this.options=c(e,st.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=k(this),this.touchAction=new W(this,this.options.touchAction),ot(this,!0),o(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ot(t,e){var n=t.element;o(t.options.cssProps,function(t,i){n.style[w(n.style,i)]=e?t:""})}function rt(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ct=["","webkit","moz","MS","ms","o"],lt=e.createElement("div"),dt="function",ut=Math.round,ht=Math.abs,pt=Date.now,ft=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in t,vt=w(t,"PointerEvent")!==i,bt=gt&&mt.test(navigator.userAgent),yt="touch",_t="mouse",wt=25,xt=1,St=2,Ct=4,kt=8,Tt=1,At=2,Et=4,Mt=8,Nt=16,Ot=At|Et,It=Mt|Nt,Dt=Ot|It,Rt=["x","y"],Lt=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(S(this.element),this.evWin,this.domHandler)}};var Pt={mousedown:xt,mousemove:St,mouseup:Ct},$t="mousedown",jt="mousemove mouseup";l(j,C,{handler:function(t){var e=Pt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=Ct),this.pressed&&this.allow&&(e&Ct&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:_t,srcEvent:t}))}});var Ht={pointerdown:xt,pointermove:St,pointerup:Ct,pointercancel:kt,pointerout:kt},qt={2:yt,3:"pen",4:_t,5:"kinect"},Ft="pointerdown",Bt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Ft="MSPointerDown",Bt="MSPointerMove MSPointerUp MSPointerCancel"),l(H,C,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),s=Ht[i],a=qt[t.pointerType]||t.pointerType,o=a==yt,r=b(e,t.pointerId,"pointerId");s&xt&&(0===t.button||o)?0>r&&(e.push(t),r=e.length-1):s&(Ct|kt)&&(n=!0),0>r||(e[r]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(r,1))}});var Vt={touchstart:xt,touchmove:St,touchend:Ct,touchcancel:kt},zt="touchstart",Wt="touchstart touchmove touchend touchcancel";l(q,C,{handler:function(t){var e=Vt[t.type];if(e===xt&&(this.started=!0),this.started){var n=F.call(this,t,e);e&(Ct|kt)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}});var Yt={touchstart:xt,touchmove:St,touchend:Ct,touchcancel:kt},Ut="touchstart touchmove touchend touchcancel";l(B,C,{handler:function(t){var e=Yt[t.type],n=V.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}),l(z,C,{handler:function(t,e,n){var i=n.pointerType==yt,s=n.pointerType==_t;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(Ct|kt)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xt=w(lt.style,"touchAction"),Gt=Xt!==i,Qt="compute",Jt="auto",Zt="manipulation",Kt="none",te="pan-x",ee="pan-y";W.prototype={set:function(t){t==Qt&&(t=this.compute()),Gt&&(this.manager.element.style[Xt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Y(t.join(" "))},preventDefaults:function(t){if(!Gt){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,s=g(i,Kt),a=g(i,ee),o=g(i,te);return s||a&&n&Ot||o&&n&It?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ne=1,ie=2,se=4,ae=8,oe=ae,re=16;U.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?X(i):""),t)}var n=this,i=this.state;ae>i&&e(!0),e(),i>=ae&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ne)))return!1;t++}return!0},recognize:function(t){var e=r({},t);return u(this.options.enable,[this,e])?(this.state&(oe|re|32)&&(this.state=ne),this.state=this.process(e),void(this.state&(ie|se|ae|re)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},l(J,U,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ie|se),s=this.attrTest(t);return i&&(n&kt||!s)?e|re:i||s?n&Ct?e|ae:e&ie?e|se:ie:32}}),l(Z,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Dt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ot&&e.push(ee),t&It&&e.push(te),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,s=t.direction,a=t.deltaX,o=t.deltaY;return s&e.direction||(e.direction&Ot?(s=0===a?Tt:0>a?At:Et,n=a!=this.pX,i=Math.abs(t.deltaX)):(s=0===o?Tt:0>o?Mt:Nt,n=o!=this.pY,i=Math.abs(t.deltaY))),t.direction=s,n&&i>e.threshold&&s&e.direction},attrTest:function(t){return J.prototype.attrTest.call(this,t)&&(this.state&ie||!(this.state&ie)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),l(K,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ie)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),l(tt,U,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Jt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ct|kt)&&!a)this.reset();else if(t.eventType&xt)this.reset(),this._timer=s(function(){this.state=oe,this.tryEmit()},e.time,this);else if(t.eventType&Ct)return oe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===oe&&(t&&t.eventType&Ct?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),l(et,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ie)}}),l(nt,J,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ot|It,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ot|It)?e=t.velocity:n&Ot?e=t.velocityX:n&It&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&ht(e)>this.options.velocity&&t.eventType&Ct},emit:function(t){var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(it,U,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Zt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(i&&a&&n){if(t.eventType!=Ct)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=oe,this.tryEmit()},e.interval,this),ie):oe}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==oe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.4",st.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[K,{enable:!1},["rotate"]],[nt,{direction:Ot}],[Z,{direction:Ot},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};at.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&oe)&&(s=e.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],2===e.stopped||s&&n!=s&&!n.canRecognizeWith(s)?n.reset():n.recognize(t),!s&&n.state&(ie|se|ae)&&(s=e.curRecognizer=n),a++}},get:function(t){if(t instanceof U)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(b(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return o(v(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return o(v(t),function(t){e?n[t].splice(b(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&rt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ot(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(st,{INPUT_START:xt,INPUT_MOVE:St,INPUT_END:Ct,INPUT_CANCEL:kt,STATE_POSSIBLE:ne,STATE_BEGAN:ie,STATE_CHANGED:se,STATE_ENDED:ae,STATE_RECOGNIZED:oe,STATE_CANCELLED:re,STATE_FAILED:32,DIRECTION_NONE:Tt,DIRECTION_LEFT:At,DIRECTION_RIGHT:Et,DIRECTION_UP:Mt,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:Ot,DIRECTION_VERTICAL:It,DIRECTION_ALL:Dt,Manager:at,Input:C,TouchAction:W,TouchInput:B,MouseInput:j,PointerEventInput:H,TouchMouseInput:z,SingleTouchInput:q,Recognizer:U,AttrRecognizer:J,Tap:it,Pan:Z,Swipe:nt,Pinch:K,Rotate:et,Press:tt,on:p,off:f,each:o,merge:c,extend:r,inherit:l,bindFn:d,prefixed:w}),typeof define==dt&&define.amd?define("materialize_anonymous_module_3",[],function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:t.Hammer=st}(window,document),function(n){"function"==typeof define&&define.amd?define("materialize_anonymous_module_1",["jquery","hammerjs"],n):n(t,e)}(function(t,e){function n(n,i){var s=t(n);s.data("hammer")||s.data("hammer",new e(s[0],i))}t.fn.hammer=function(t){return this.each(function(){n(this,t)})},e.Manager.prototype.emit=function(e){return function(n,i){e.call(this,n,i),t(this.element).trigger({type:n,gesture:i})}}(e.Manager.prototype.emit)}),function(t){t.Package?Materialize={}:t.Materialize={}}(window),Materialize.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),Materialize.elementOrParentIsFixed=function(t){var e=$(t),n=e.add(e.parents()),i=!1;return n.each(function(){if("fixed"===$(this).css("position"))return i=!0,!1}),i};var n;n=$?$.Velocity:t?t.Velocity:Velocity,function(t){t.fn.collapsible=function(e){var n={accordion:void 0};return e=t.extend(n,e),this.each(function(){function n(e){r=o.find("> li > .collapsible-header"),e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}),r.not(e).removeClass("active").parent().removeClass("active"),r.not(e).parent().children(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}})}function i(e){e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){t(this).css("height","")}})}function s(t){return a(t).length>0}function a(t){return t.closest("li > .collapsible-header")}var o=t(this),r=t(this).find("> li > .collapsible-header"),c=o.data("collapsible");o.off("click.collapse","> li > .collapsible-header"),r.off("click.collapse"),o.on("click.collapse","> li > .collapsible-header",function(o){var r=t(this),l=t(o.target);s(l)&&(l=a(l)),l.toggleClass("active"),e.accordion||"accordion"===c||void 0===c?n(l):(i(l),r.hasClass("active")&&i(r))});var r=o.find("> li > .collapsible-header");e.accordion||"accordion"===c||void 0===c?n(r.filter(".active").first()):r.filter(".active").each(function(){i(t(this))})})},t(document).ready(function(){t(".collapsible").collapsible()})}(t),function(t){t.fn.scrollTo=function(e){return t(this).scrollTop(t(this).scrollTop()-t(this).offset().top+t(e).offset().top),this},t.fn.dropdown=function(e){var n={inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left"};this.each(function(){function i(){void 0!==o.data("induration")&&(r.inDuration=o.data("inDuration")),void 0!==o.data("outduration")&&(r.outDuration=o.data("outDuration")),void 0!==o.data("constrainwidth")&&(r.constrain_width=o.data("constrainwidth")),void 0!==o.data("hover")&&(r.hover=o.data("hover")),void 0!==o.data("gutter")&&(r.gutter=o.data("gutter")),void 0!==o.data("beloworigin")&&(r.belowOrigin=o.data("beloworigin")),void 0!==o.data("alignment")&&(r.alignment=o.data("alignment"))}function s(e){"focus"===e&&(c=!0),i(),l.addClass("active"),o.addClass("active"),!0===r.constrain_width?l.css("width",o.outerWidth()):l.css("white-space","nowrap");var n=window.innerHeight,s=o.innerHeight(),a=o.offset().left,d=o.offset().top-t(window).scrollTop(),u=r.alignment,h=0,p=0,f=0;!0===r.belowOrigin&&(f=s);var m=0,g=o.parent();if(!g.is("body")&&g[0].scrollHeight>g[0].clientHeight&&(m=g[0].scrollTop),a+l.innerWidth()>t(window).width()?u="right":a-l.innerWidth()+o.innerWidth()<0&&(u="left"),d+l.innerHeight()>n)if(d+s-l.innerHeight()<0){var v=n-d-f;l.css("max-height",v)}else f||(f+=s),f-=l.innerHeight();if("left"===u)h=r.gutter,p=o.position().left+h;else if("right"===u){var b=o.position().left+o.outerWidth()-l.outerWidth();h=-r.gutter,p=b+h}l.css({position:"absolute",top:o.position().top+f+m,left:p}),l.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:r.inDuration,easing:"easeOutCubic",complete:function(){t(this).css("height",""),o.trigger("change_state",!0)}}).animate({opacity:1},{queue:!1,duration:r.inDuration,easing:"easeOutSine"})}function a(){c=!1,l.fadeOut(r.outDuration),l.removeClass("active"),o.removeClass("active"),setTimeout(function(){l.css("max-height",""),o.trigger("change_state",!1)},r.outDuration)}var o=t(this),r=t.extend({},n,e),c=!1,l=t("#"+o.attr("data-activates"));if(i(),o.after(l),r.hover){var d=!1;o.unbind("click."+o.attr("id")),o.on("mouseenter",function(t){!1===d&&(s(),d=!0)}),o.on("mouseleave",function(e){var n=e.toElement||e.relatedTarget;t(n).closest(".dropdown-content").is(l)||(l.stop(!0,!0),a(),d=!1)}),l.on("mouseleave",function(e){var n=e.toElement||e.relatedTarget;t(n).closest(".dropdown-button").is(o)||(l.stop(!0,!0),a(),d=!1)})}else o.unbind("click."+o.attr("id")),o.bind("click."+o.attr("id"),function(e){c||(o[0]!=e.currentTarget||o.hasClass("active")||0!==t(e.target).closest(".dropdown-content").length?o.hasClass("active")&&(a(),t(document).unbind("click."+l.attr("id")+" touchstart."+l.attr("id"))):(e.preventDefault(),s("click")),l.hasClass("active")&&t(document).bind("click."+l.attr("id")+" touchstart."+l.attr("id"),function(e){l.is(e.target)||o.is(e.target)||o.find(e.target).length||(a(),t(document).unbind("click."+l.attr("id")+" touchstart."+l.attr("id")))}))});o.on("open",function(t,e){s(e)}),o.on("close",a)})},t(document).ready(function(){t(".dropdown-button").dropdown()})}(t),function(t){var e=0,n=0,i=function(){return"materialize-lean-overlay-"+ ++n};Materialize.modalSettings={open:{},close:{}},t.fn.extend({openModal:function(n){var s=t("body"),a=(s.innerWidth(),t.extend({opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%"},Materialize.modalSettings.open)),o=t(this);o.hasClass("open")||(overlayID=i(),$overlay=t('<div class="lean-overlay"></div>'),lStack=++e,$overlay.attr("id",overlayID).css("z-index",1e3+2*lStack),o.data("overlay-id",overlayID).css("z-index",1e3+2*lStack+1),o.addClass("open"),t("body").append($overlay),n=t.extend(a,n),n.dismissible&&($overlay.click(function(){o.closeModal(n)}),t(document).on("keyup.leanModal"+overlayID,function(t){27===t.keyCode&&o.closeModal(n)})),o.find(".modal-close").on("click.close",function(t){o.closeModal(n)}),$overlay.css({display:"block",opacity:0}),o.css({display:"block",opacity:0}),$overlay.velocity({opacity:n.opacity/lStack},{duration:n.in_duration,queue:!1,ease:"easeOutCubic"}),o.data("associated-overlay",$overlay[0]),o.hasClass("bottom-sheet")?o.velocity({bottom:"0",opacity:1},{duration:n.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof n.ready&&n.ready()}}):(t.Velocity.hook(o,"scaleX",.7),o.css({top:n.starting_top}),o.velocity({top:"10%",opacity:1,scaleX:"1"},{duration:n.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof n.ready&&n.ready()}})))}}),t.fn.extend({closeModal:function(n){var i=t.extend({out_duration:250,complete:void 0},Materialize.modalSettings.close),s=t(this),a=s.data("overlay-id"),o=t("#"+a);if(!s.hasClass("open"))return void("function"==typeof n.complete&&n.complete());s.removeClass("open"),n=t.extend(i,n),s.find(".modal-close").off("click.close"),t(document).off("keyup.leanModal"+a),o.velocity({opacity:0},{duration:n.out_duration,queue:!1,ease:"easeOutQuart"}),s.hasClass("bottom-sheet")?s.velocity({bottom:"-100%",opacity:0},{duration:n.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){o.css({display:"none"}),e--,o.remove(),"function"==typeof n.complete&&n.complete()}}):s.velocity({top:n.starting_top,opacity:0,scaleX:.7},{duration:n.out_duration,complete:function(){t(this).css("display","none"),e--,o.remove(),"function"==typeof n.complete&&n.complete()}})}}),t.fn.extend({leanModal:function(e){return this.each(function(){var n={starting_top:"4%"},i=t.extend(n,e);t(this).click(function(e){i.starting_top=(t(this).offset().top-t(window).scrollTop())/1.15;var n=t(this).attr("href")||"#"+t(this).data("target");t(n).openModal(i),e.preventDefault()})})}})}(t),function(t){t.fn.materialbox=function(){return this.each(function(){function e(){a=!1;var e=r.parent(".material-placeholder"),i=(window.innerWidth,window.innerHeight,r.data("width")),c=r.data("height");r.velocity("stop",!0),t("#materialbox-overlay").velocity("stop",!0),t(".materialbox-caption").velocity("stop",!0),t("#materialbox-overlay").velocity({opacity:0},{duration:o,queue:!1,easing:"easeOutQuad",complete:function(){s=!1,t(this).remove()}}),r.velocity({width:i,height:c,left:0,top:0},{duration:o,queue:!1,easing:"easeOutQuad"}),t(".materialbox-caption").velocity({opacity:0},{duration:o,queue:!1,easing:"easeOutQuad",complete:function(){e.css({height:"",width:"",position:"",top:"",left:""}),r.css({height:"",top:"",left:"",width:"","max-width":"",position:"","z-index":""}),r.removeClass("active"),a=!0,t(this).remove(),n&&n.css("overflow","")}})}if(!t(this).hasClass("initialized")){t(this).addClass("initialized");var n,i,s=!1,a=!0,o=200,r=t(this),c=t("<div></div>").addClass("material-placeholder");r.wrap(c),r.on("click",function(){var o=r.parent(".material-placeholder"),c=window.innerWidth,l=window.innerHeight,d=r.width(),u=r.height();if(!1===a)return e(),!1;if(s&&!0===a)return e(),!1;a=!1,r.addClass("active"),s=!0,o.css({width:o[0].getBoundingClientRect().width,height:o[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),n=void 0,i=o[0].parentNode;for(;null!==i&&!t(i).is(document);){var h=t(i);"visible"!==h.css("overflow")&&(h.css("overflow","visible"),n=void 0===n?h:n.add(h)),i=i.parentNode}r.css({position:"absolute","z-index":1e3}).data("width",d).data("height",u);var p=t('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===a&&e()});if(r.before(p),p.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"}),""!==r.data("caption")){var f=t('<div class="materialbox-caption"></div>');f.text(r.data("caption")),t("body").append(f),f.css({display:"inline"}),f.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"})}var m=0,g=d/c,v=u/l,b=0,y=0;g>v?(m=u/d,b=.9*c,y=.9*c*m):(m=d/u,b=.9*l*m,y=.9*l),r.hasClass("responsive-img")?r.velocity({"max-width":b,width:d},{duration:0,queue:!1,complete:function(){r.css({left:0,top:0}).velocity({height:y,width:b,left:t(document).scrollLeft()+c/2-r.parent(".material-placeholder").offset().left-b/2,top:t(document).scrollTop()+l/2-r.parent(".material-placeholder").offset().top-y/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){a=!0}})}}):r.css("left",0).css("top",0).velocity({height:y,width:b,left:t(document).scrollLeft()+c/2-r.parent(".material-placeholder").offset().left-b/2,top:t(document).scrollTop()+l/2-r.parent(".material-placeholder").offset().top-y/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){a=!0}})}),t(window).scroll(function(){s&&e()}),t(document).keyup(function(t){27===t.keyCode&&!0===a&&s&&e()})}})},t(document).ready(function(){t(".materialboxed").materialbox()})}(t),function(t){t.fn.parallax=function(){var e=t(window).width();return this.each(function(n){function i(n){var i;i=e<601?s.height()>0?s.height():s.children("img").height():s.height()>0?s.height():500;var a=s.children("img").first(),o=a.height(),r=o-i,c=s.offset().top+i,l=s.offset().top,d=t(window).scrollTop(),u=window.innerHeight,h=d+u,p=(h-l)/(i+u),f=Math.round(r*p);n&&a.css("display","block"),c>d&&l<d+u&&a.css("transform","translate3D(-50%,"+f+"px, 0)")}var s=t(this);s.addClass("parallax"),s.children("img").one("load",function(){i(!0)}).each(function(){this.complete&&t(this).load()}),t(window).scroll(function(){e=t(window).width(),i(!1)}),t(window).resize(function(){e=t(window).width(),i(!1)})})}}(t),function(t){var e={init:function(){return this.each(function(){var e=t(this);t(window).width();e.width("100%");var n,i,s=e.find("li.tab a"),a=e.width(),o=Math.max(a,e[0].scrollWidth)/s.length,r=0;n=t(s.filter('[href="'+location.hash+'"]')),0===n.length&&(n=t(this).find("li.tab a.active").first()),0===n.length&&(n=t(this).find("li.tab a").first()),n.addClass("active"),r=s.index(n),r<0&&(r=0),void 0!==n[0]&&(i=t(n[0].hash)),e.append('<div class="indicator"></div>');var c=e.find(".indicator");e.is(":visible")&&(c.css({right:a-(r+1)*o}),c.css({left:r*o})),t(window).resize(function(){a=e.width(),o=Math.max(a,e[0].scrollWidth)/s.length,r<0&&(r=0),0!==o&&0!==a&&(c.css({right:a-(r+1)*o}),c.css({left:r*o}))}),s.not(n).each(function(){t(this.hash).hide()}),e.on("click","a",function(l){if(t(this).parent().hasClass("disabled"))return void l.preventDefault();a=e.width(),o=Math.max(a,e[0].scrollWidth)/s.length,n.removeClass("active"),void 0!==i&&i.hide(),n=t(this),i=t(this.hash),s=e.find("li.tab a"),n.addClass("active");var d=r;r=s.index(t(this)),r<0&&(r=0),void 0!==i&&i.show(),r-d>=0?(c.velocity({right:a-(r+1)*o},{duration:300,queue:!1,easing:"easeOutQuad"}),c.velocity({left:r*o},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(c.velocity({left:r*o},{duration:300,queue:!1,easing:"easeOutQuad"}),c.velocity({right:a-(r+1)*o},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})),l.preventDefault()})})},select_tab:function(t){this.find('a[href="#'+t+'"]').trigger("click")}};t.fn.tabs=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)},t(document).ready(function(){t("ul.tabs").tabs()})}(t),function(t){t.fn.tooltip=function(n){var i={delay:350};return"remove"===n?(this.each(function(){t("#"+t(this).attr("data-tooltip-id")).remove(),t(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(n=t.extend(i,n),this.each(function(){var i=Materialize.guid(),s=t(this);s.attr("data-tooltip-id",i);var a=t("<span></span>").text(s.attr("data-tooltip")),o=t("<div></div>");o.addClass("material-tooltip").append(a).appendTo(t("body")).attr("id",i);var r=t("<div></div>").addClass("backdrop");r.appendTo(o),r.css({top:0,left:0}),s.off("mouseenter.tooltip mouseleave.tooltip");var c,l=!1;s.on({"mouseenter.tooltip":function(t){var i=s.attr("data-delay");i=void 0===i||""===i?n.delay:i,c=setTimeout(function(){l=!0,o.velocity("stop"),r.velocity("stop"),o.css({display:"block",left:"0px",top:"0px"}),o.children("span").text(s.attr("data-tooltip"));var t,n,i,a=s.outerWidth(),c=s.outerHeight(),d=s.attr("data-position"),u=o.outerHeight(),h=o.outerWidth(),p="0px",f="0px",m=8;"top"===d?(t=s.offset().top-u-5,n=s.offset().left+a/2-h/2,i=e(n,t,h,u),p="-10px",r.css({borderRadius:"14px 14px 0 0",transformOrigin:"50% 90%",marginTop:u,marginLeft:h/2-r.width()/2})):"left"===d?(t=s.offset().top+c/2-u/2,n=s.offset().left-h-5,i=e(n,t,h,u),f="-10px",r.css({width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:u/2,marginLeft:h})):"right"===d?(t=s.offset().top+c/2-u/2,n=s.offset().left+a+5,i=e(n,t,h,u),f="+10px",r.css({width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:u/2,marginLeft:"0px"})):(t=s.offset().top+s.outerHeight()+5,n=s.offset().left+a/2-h/2,i=e(n,t,h,u),p="+10px",r.css({marginLeft:h/2-r.width()/2})),o.css({top:i.y,left:i.x}),m=h/8,m<8&&(m=8),"right"!==d&&"left"!==d||(m=h/10)<6&&(m=6),o.velocity({marginTop:p,marginLeft:f},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),r.css({display:"block"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scale:m},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})},i)},"mouseleave.tooltip":function(){l=!1,clearTimeout(c),setTimeout(function(){1!=l&&(o.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:225,queue:!1}),r.velocity({opacity:0,scale:1},{duration:225,queue:!1,complete:function(){r.css("display","none"),o.css("display","none"),l=!1}}))},225)}})}))}
;var e=function(e,n,i,s){var a=e,o=n;return a<0?a=4:a+i>window.innerWidth&&(a-=a+i-window.innerWidth),o<0?o=4:o+s>window.innerHeight+t(window).scrollTop&&(o-=o+s-window.innerHeight),{x:a,y:o}};t(document).ready(function(){t(".tooltipped").tooltip()})}(t),function(t){"use strict";function e(t){return null!==t&&t===t.window}function n(t){return e(t)?t:9===t.nodeType&&t.defaultView}function i(t){var e,i,s={top:0,left:0},a=t&&t.ownerDocument;return e=a.documentElement,void 0!==t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=n(a),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}}function s(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}function a(t){if(!1===d.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentElement;){if(!(n instanceof SVGElement||-1===n.className.indexOf("waves-effect"))){e=n;break}if(n.classList.contains("waves-effect")){e=n;break}n=n.parentElement}return e}function o(e){var n=a(e);null!==n&&(l.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",l.hide,!1),n.addEventListener("touchcancel",l.hide,!1)),n.addEventListener("mouseup",l.hide,!1),n.addEventListener("mouseleave",l.hide,!1))}var r=r||{},c=document.querySelectorAll.bind(document),l={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,a=document.createElement("div");a.className="waves-ripple",n.appendChild(a);var o=i(n),r=t.pageY-o.top,c=t.pageX-o.left,d="scale("+n.clientWidth/100*10+")";"touches"in t&&(r=t.touches[0].pageY-o.top,c=t.touches[0].pageX-o.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",d),a.setAttribute("data-x",c),a.setAttribute("data-y",r);var u={top:r+"px",left:c+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",s(u)),a.className=a.className.replace("waves-notransition",""),u["-webkit-transform"]=d,u["-moz-transform"]=d,u["-ms-transform"]=d,u["-o-transform"]=d,u.transform=d,u.opacity="1",u["-webkit-transition-duration"]=l.duration+"ms",u["-moz-transition-duration"]=l.duration+"ms",u["-o-transition-duration"]=l.duration+"ms",u["transition-duration"]=l.duration+"ms",u["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",a.setAttribute("style",s(u))},hide:function(t){d.touchup(t);var e=this,n=(e.clientWidth,null),i=e.getElementsByClassName("waves-ripple");if(!(i.length>0))return!1;n=i[i.length-1];var a=n.getAttribute("data-x"),o=n.getAttribute("data-y"),r=n.getAttribute("data-scale"),c=Date.now()-Number(n.getAttribute("data-hold")),u=350-c;u<0&&(u=0),setTimeout(function(){var t={top:o+"px",left:a+"px",opacity:"0","-webkit-transition-duration":l.duration+"ms","-moz-transition-duration":l.duration+"ms","-o-transition-duration":l.duration+"ms","transition-duration":l.duration+"ms","-webkit-transform":r,"-moz-transform":r,"-ms-transform":r,"-o-transform":r,transform:r};n.setAttribute("style",s(t)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},l.duration)},u)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var s=document.createElement("i");s.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),s.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(s,n),s.appendChild(n)}}}},d={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?d.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){d.touches>0&&(d.touches-=1)},500):"mousedown"===t.type&&d.touches>0&&(e=!1),e},touchup:function(t){d.allowEvent(t)}};r.displayEffect=function(e){e=e||{},"duration"in e&&(l.duration=e.duration),l.wrapInput(c(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},r.attach=function(e){"input"===e.tagName.toLowerCase()&&(l.wrapInput([e]),e=e.parentElement),"ontouchstart"in t&&e.addEventListener("touchstart",o,!1),e.addEventListener("mousedown",o,!1)},t.Waves=r,document.addEventListener("DOMContentLoaded",function(){r.displayEffect()},!1)}(window),Materialize.toast=function(i,s,a,o){a=a||"";var r=document.getElementById("toast-container");null===r&&(r=document.createElement("div"),r.id="toast-container",document.body.appendChild(r));var c=function(i){var s=document.createElement("div");if(s.classList.add("toast"),a)for(var r=a.split(" "),c=0,l=r.length;c<l;c++)s.classList.add(r[c]);("object"==typeof HTMLElement?i instanceof HTMLElement:i&&"object"==typeof i&&null!==i&&1===i.nodeType&&"string"==typeof i.nodeName)?s.appendChild(i):i instanceof t?s.appendChild(i[0]):s.innerHTML=i;var d=new e(s,{prevent_default:!1});return d.on("pan",function(t){var e=t.deltaX;s.classList.contains("panning")||s.classList.add("panning");var i=1-Math.abs(e/80);i<0&&(i=0),n(s,{left:e,opacity:i},{duration:50,queue:!1,easing:"easeOutQuad"})}),d.on("panend",function(t){var e=t.deltaX;Math.abs(e)>80?n(s,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),s.parentNode.removeChild(s)}}):(s.classList.remove("panning"),n(s,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),s}(i);i&&r.appendChild(c),c.style.top="35px",c.style.opacity=0,n(c,{top:"0px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var l=s,d=setInterval(function(){null===c.parentNode&&window.clearInterval(d),c.classList.contains("panning")||(l-=20),l<=0&&(n(c,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(d))},20)},function(t){var e={init:function(e){var n={menuWidth:240,edge:"left",closeOnClick:!1};e=t.extend(n,e),t(this).each(function(){function n(n){o=!1,r=!1,t("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),"left"===e.edge?(a.css({width:"",right:"",left:"0"}),s.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(s.removeAttr("style"),s.css("width",e.menuWidth))}})):(a.css({width:"",right:"0",left:""}),s.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(s.removeAttr("style"),s.css("width",e.menuWidth))}}))}var i=t(this),s=t("#"+i.attr("data-activates"));240!=e.menuWidth&&s.css("width",e.menuWidth);var a=t('<div class="drag-target"></div>');t("body").append(a),"left"==e.edge?(s.css("transform","translateX(-100%)"),a.css({left:0})):(s.addClass("right-aligned").css("transform","translateX(100%)"),a.css({right:0})),s.hasClass("fixed")&&window.innerWidth>992&&s.css("transform","translateX(0)"),s.hasClass("fixed")&&t(window).resize(function(){window.innerWidth>992?0!=t("#sidenav-overlay").length&&r?n(!0):s.css("transform","translateX(0%)"):!1===r&&("left"===e.edge?s.css("transform","translateX(-100%)"):s.css("transform","translateX(100%)"))}),!0===e.closeOnClick&&s.on("click.itemclick","a:not(.collapsible-header)",function(){n()});var o=!1,r=!1;a.on("click",function(){n()}),a.hammer({prevent_default:!1}).bind("pan",function(i){if("touch"==i.gesture.pointerType){var a=(i.gesture.direction,i.gesture.center.x),o=(i.gesture.center.y,i.gesture.velocityX,t("body"));o.innerWidth();if(0===t("#sidenav-overlay").length){var c=t('<div id="sidenav-overlay"></div>');c.css("opacity",0).click(function(){n()}),t("body").append(c)}if("left"===e.edge&&(a>e.menuWidth?a=e.menuWidth:a<0&&(a=0)),"left"===e.edge)a<e.menuWidth/2?r=!1:a>=e.menuWidth/2&&(r=!0),s.css("transform","translateX("+(a-e.menuWidth)+"px)");else{a<window.innerWidth-e.menuWidth/2?r=!0:a>=window.innerWidth-e.menuWidth/2&&(r=!1);var l=a-e.menuWidth/2;l<0&&(l=0),s.css("transform","translateX("+l+"px)")}var d;"left"===e.edge?(d=a/e.menuWidth,t("#sidenav-overlay").velocity({opacity:d},{duration:10,queue:!1,easing:"easeOutQuad"})):(d=Math.abs((a-window.innerWidth)/e.menuWidth),t("#sidenav-overlay").velocity({opacity:d},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(n){if("touch"==n.gesture.pointerType){var i=n.gesture.velocityX,c=n.gesture.center.x,l=c-e.menuWidth,d=c-e.menuWidth/2;l>0&&(l=0),d<0&&(d=0),o=!1,"left"===e.edge?r&&i<=.3||i<-.5?(0!=l&&s.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),a.css({width:"50%",right:0,left:""})):(!r||i>.3)&&(s.velocity({translateX:[-1*e.menuWidth-10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),a.css({width:"10px",right:"",left:0})):r&&i>=-.3||i>.5?(s.velocity({translateX:[0,d]},{duration:300,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),a.css({width:"50%",right:"",left:0})):(!r||i<-.3)&&(s.velocity({translateX:[e.menuWidth+10,d]},{duration:200,queue:!1,easing:"easeOutQuad"}),t("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}}),a.css({width:"10px",right:0,left:""}))}}),i.click(function(){if(!0===r)r=!1,o=!1,n();else{var i=t("body");i.innerWidth();t("body").append(a),"left"===e.edge?(a.css({width:"50%",right:0,left:""}),s.velocity({translateX:[0,-1*e.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(a.css({width:"50%",right:"",left:0}),s.velocity({translateX:[0,e.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"}));var c=t('<div id="sidenav-overlay"></div>');c.css("opacity",0).click(function(){r=!1,o=!1,n(),c.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){t(this).remove()}})}),t("body").append(c),c.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){r=!0,o=!1}})}return!1})})},show:function(){this.trigger("click")},hide:function(){t("#sidenav-overlay").trigger("click")}};t.fn.sideNav=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.sideNav"):e.init.apply(this,arguments)}}(t),function(t){function e(e,n,i,s){var a=t();return t.each(o,function(t,o){if(o.height()>0){var r=o.offset().top,c=o.offset().left,l=c+o.width(),d=r+o.height();!(c>n||l<s||r>i||d<e)&&a.push(o)}}),a}function n(){++l;var n=a.scrollTop(),i=a.scrollLeft(),s=i+a.width(),o=n+a.height(),c=e(n+d.top+200,s+d.right,o+d.bottom,i+d.left);t.each(c,function(t,e){"number"!=typeof e.data("scrollSpy:ticks")&&e.triggerHandler("scrollSpy:enter"),e.data("scrollSpy:ticks",l)}),t.each(r,function(t,e){var n=e.data("scrollSpy:ticks");"number"==typeof n&&n!==l&&(e.triggerHandler("scrollSpy:exit"),e.data("scrollSpy:ticks",null))}),r=c}function i(){a.trigger("scrollSpy:winSize")}function s(t,e,n){var i,s,a,o=null,r=0;n||(n={});var c=function(){r=!1===n.leading?0:u(),o=null,a=t.apply(i,s),i=s=null};return function(){var l=u();r||!1!==n.leading||(r=l);var d=e-(l-r);return i=this,s=arguments,d<=0?(clearTimeout(o),o=null,r=l,a=t.apply(i,s),i=s=null):o||!1===n.trailing||(o=setTimeout(c,d)),a}}var a=t(window),o=[],r=[],c=!1,l=0,d={top:0,right:0,bottom:0,left:0},u=Date.now||function(){return(new Date).getTime()};t.scrollSpy=function(e,i){var r=[];e=t(e),e.each(function(e,n){o.push(t(n)),t(n).data("scrollSpy:id",e),t('a[href="#'+t(n).attr("id")+'"]').click(function(e){e.preventDefault();var n=t(this.hash).offset().top+1;t("html, body").animate({scrollTop:n-200},{duration:400,queue:!1,easing:"easeOutCubic"})})}),i=i||{throttle:100},d.top=i.offsetTop||0,d.right=i.offsetRight||0,d.bottom=i.offsetBottom||0,d.left=i.offsetLeft||0;var l=s(n,i.throttle||100),u=function(){t(document).ready(l)};return c||(a.on("scroll",u),a.on("resize",u),c=!0),setTimeout(u,0),e.on("scrollSpy:enter",function(){r=t.grep(r,function(t){return 0!=t.height()});var e=t(this);r[0]?(t('a[href="#'+r[0].attr("id")+'"]').removeClass("active"),e.data("scrollSpy:id")<r[0].data("scrollSpy:id")?r.unshift(t(this)):r.push(t(this))):r.push(t(this)),t('a[href="#'+r[0].attr("id")+'"]').addClass("active")}),e.on("scrollSpy:exit",function(){if(r=t.grep(r,function(t){return 0!=t.height()}),r[0]){t('a[href="#'+r[0].attr("id")+'"]').removeClass("active");var e=t(this);r=t.grep(r,function(t){return t.attr("id")!=e.attr("id")}),r[0]&&t('a[href="#'+r[0].attr("id")+'"]').addClass("active")}}),e},t.winSizeSpy=function(e){return t.winSizeSpy=function(){return a},e=e||{throttle:100},a.on("resize",s(i,e.throttle||100))},t.fn.scrollSpy=function(e){return t.scrollSpy(t(this),e)}}(t),function(t){t(document).ready(function(){function e(e){var n=e.css("font-family"),s=e.css("font-size");s&&i.css("font-size",s),n&&i.css("font-family",n),"off"===e.attr("wrap")&&i.css("overflow-wrap","normal").css("white-space","pre"),i.text(e.val()+"\n");var a=i.html().replace(/\n/g,"<br>");i.html(a),e.is(":visible")?i.css("width",e.width()):i.css("width",t(window).width()/2),e.css("height",i.height())}Materialize.updateTextFields=function(){t("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(e,n){t(n).val().length>0||n.autofocus||void 0!==t(this).attr("placeholder")||!0===t(n)[0].validity.badInput?t(this).siblings("label, i").addClass("active"):t(this).siblings("label, i").removeClass("active")})};var n="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";t(document).on("change",n,function(){0===t(this).val().length&&void 0===t(this).attr("placeholder")||t(this).siblings("label").addClass("active"),validate_field(t(this))}),t(document).ready(function(){Materialize.updateTextFields()}),t(document).on("reset",function(e){var i=t(e.target);i.is("form")&&(i.find(n).removeClass("valid").removeClass("invalid"),i.find(n).each(function(){""===t(this).attr("value")&&t(this).siblings("label, i").removeClass("active")}),i.find("select.initialized").each(function(){var t=i.find("option[selected]").text();i.siblings("input.select-dropdown").val(t)}))}),t(document).on("focus",n,function(){t(this).siblings("label, i").addClass("active")}),t(document).on("blur",n,function(){var e=t(this);0===e.val().length&&!0!==e[0].validity.badInput&&void 0===e.attr("placeholder")&&e.siblings("label, i").removeClass("active"),0===e.val().length&&!0!==e[0].validity.badInput&&void 0!==e.attr("placeholder")&&e.siblings("i").removeClass("active"),validate_field(e)}),window.validate_field=function(t){var e=void 0!==t.attr("length"),n=parseInt(t.attr("length")),i=t.val().length;0===t.val().length&&!1===t[0].validity.badInput?t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid")):t.hasClass("validate")&&(t.is(":valid")&&e&&i<=n||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid")))};t(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(e){if(9===e.which){t(this).addClass("tabbed");return void t(this).one("blur",function(e){t(this).removeClass("tabbed")})}});var i=t(".hiddendiv").first();i.length||(i=t('<div class="hiddendiv common"></div>'),t("body").append(i));t(".materialize-textarea").each(function(){var n=t(this);n.val().length&&e(n)}),t("body").on("keyup keydown autoresize",".materialize-textarea",function(){e(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var e=t(this).closest(".file-field"),n=e.find("input.file-path"),i=t(this)[0].files,s=[],a=0;a<i.length;a++)s.push(i[a].name);n.val(s.join(", ")),n.trigger("change")});var s,a="input[type=range]",o=!1;t(a).each(function(){var e=t('<span class="thumb"><span class="value"></span></span>');t(this).after(e)});t(document).on("change",a,function(e){t(this).siblings(".thumb").find(".value").html(t(this).val())}),t(document).on("input mousedown touchstart",a,function(e){var n=t(this).siblings(".thumb"),i=t(this).outerWidth();n.length<=0&&(n=t('<span class="thumb"><span class="value"></span></span>'),t(this).after(n)),n.find(".value").html(t(this).val()),o=!0,t(this).addClass("active"),n.hasClass("active")||n.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),"input"!==e.type&&(s=void 0===e.pageX||null===e.pageX?e.originalEvent.touches[0].pageX-t(this).offset().left:e.pageX-t(this).offset().left,s<0?s=0:s>i&&(s=i),n.addClass("active").css("left",s)),n.find(".value").html(t(this).val())}),t(document).on("mouseup touchend",".range-field",function(){o=!1,t(this).removeClass("active")}),t(document).on("mousemove touchmove",".range-field",function(e){var n,i=t(this).children(".thumb");if(o){i.hasClass("active")||i.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),n=void 0===e.pageX||null===e.pageX?e.originalEvent.touches[0].pageX-t(this).offset().left:e.pageX-t(this).offset().left;var s=t(this).outerWidth();n<0?n=0:n>s&&(n=s),i.addClass("active").css("left",n),i.find(".value").html(i.siblings(a).val())}}),t(document).on("mouseout touchleave",".range-field",function(){if(!o){var e=t(this).children(".thumb");e.hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),e.removeClass("active")}})}),t.fn.material_select=function(e){function n(t,e,n){var s=t.indexOf(e),a=-1===s;return a?t.push(e):t.splice(s,1),n.siblings("ul.dropdown-content").find("li").eq(e).toggleClass("active"),n.find("option").eq(e).prop("selected",a),i(t,n),a}function i(t,e){for(var n="",i=0,s=t.length;i<s;i++){var a=e.find("option").eq(t[i]).text();n+=0===i?a:", "+a}""===n&&(n=e.find("option:disabled").eq(0).text()),e.siblings("input.select-dropdown").val(n)}t(this).each(function(){var i=t(this),s=i.siblings(".select-options"),a=s.length;if(!i.hasClass("browser-default")){var o=!!i.attr("multiple"),r=i.data("select-id");if(r&&(i.parent().find("span.caret").remove(),i.parent().find("input").remove(),i.unwrap(),t("ul#select-options-"+r).remove()),"destroy"===e)return void i.data("select-id",null).removeClass("initialized");var c=Materialize.guid();i.data("select-id",c);var l=t('<div class="select-wrapper"></div>');l.addClass(i.attr("class"));var d,u=t('<ul id="select-options-'+c+'" class="dropdown-content select-dropdown '+(o?"multiple-select-dropdown":"")+'"></ul>'),h=i.children("option, optgroup"),p=[],f=!1,m=i.find("option:selected")||i.find("option:first");d=m.html();var g=function(e,n,i){var o,r=n.is(":disabled")?"disabled ":"",c="optgroup-option"===i?"optgroup-option ":"";o=a?s.find("[data-value="+n.attr("value")+"]").html()||"<span>"+n.html()+"</span>":"<span>"+n.html()+"</span>";var l=n.data("icon"),d=n.attr("class");if(l){var h="";return d&&(h=' class="'+d+'"'),"multiple"===i?u.append(t('<li class="'+r+'"><img src="'+l+'"'+h+'><span><input type="checkbox"'+r+"/><label></label>"+o+"</span></li>")):u.append(t('<li class="'+r+c+'"><img src="'+l+'"'+h+">"+o+"</li>")),!0}"multiple"===i?u.append(t('<li class="'+r+'"><span><input type="checkbox"'+r+"/><label></label>"+o+"</li>")):u.append(t('<li class="'+r+c+'">'+o+"</li>"))};h.length&&h.each(function(){if(t(this).is("option"))o?g(0,t(this),"multiple"):g(0,t(this));else if(t(this).is("optgroup")){var e=t(this).children("option");u.append(t('<li class="optgroup"><span>'+t(this).attr("label")+"</span></li>")),e.each(function(){g(0,t(this),"optgroup-option")})}}),u.find("li:not(.optgroup)").each(function(s){t(this).click(function(a){if(!t(this).hasClass("disabled")&&!t(this).hasClass("optgroup")){var r=!0;o?(t('input[type="checkbox"]',this).prop("checked",function(t,e){return!e}),r=n(p,t(this).index(),i),y.trigger("focus")):(u.find("li").removeClass("active"),t(this).toggleClass("active"),y.val(t(this).text().trim())),_(u,t(this)),i.find("option").eq(s).prop("selected",r),i.trigger("change"),void 0!==e&&e()}a.stopPropagation()})}),i.wrap(l);var v=t('<span class="caret">&#9660;</span>');i.is(":disabled")&&v.addClass("disabled");var b;b=a?d:d.replace(/"/g,"&quot;");var y=t('<input type="text" class="select-dropdown" readonly="true" '+(i.is(":disabled")?"disabled":"")+' data-activates="select-options-'+c+'" value="'+b+'"/>');i.before(y),y.before(v),y.after(u),i.is(":disabled")||y.dropdown({hover:!1,closeOnClick:!1}),i.attr("tabindex")&&t(y[0]).attr("tabindex",i.attr("tabindex")),i.addClass("initialized"),y.on({focus:function(){if(t("ul.select-dropdown").not(u[0]).is(":visible")&&t("input.select-dropdown").trigger("close"),!u.is(":visible")){t(this).trigger("open",["focus"]);var e=t(this).val(),n=u.find("li").filter(function(){return t(this).text().toLowerCase()===e.toLowerCase()})[0];_(u,n)}},click:function(t){t.stopPropagation()}}),y.on("blur",function(){o||t(this).trigger("close"),u.find("li.selected").removeClass("selected")}),u.hover(function(){f=!0},function(){f=!1}),t(window).on({click:function(){o&&(f||y.trigger("close"))}}),o&&i.find("option:selected:not(:disabled)").each(function(){var e=t(this).index();n(p,e,i),u.find("li").eq(e).find(":checkbox").prop("checked",!0)});var _=function(e,n){if(n){e.find("li.selected").removeClass("selected");var i=t(n);i.addClass("selected"),u.scrollTo(i)}},w=[],x=function(e){if(9==e.which)return void y.trigger("close");if(40==e.which&&!u.is(":visible"))return void y.trigger("open");if(13!=e.which||u.is(":visible")){e.preventDefault();var n=String.fromCharCode(e.which).toLowerCase(),i=[9,13,27,38,40];if(n&&-1===i.indexOf(e.which)){w.push(n);var s=w.join(""),a=u.find("li").filter(function(){return 0===t(this).text().toLowerCase().indexOf(s)})[0];a&&_(u,a)}if(13==e.which){var r=u.find("li.selected:not(.disabled)")[0];r&&(t(r).trigger("click"),o||y.trigger("close"))}40==e.which&&(a=u.find("li.selected").length?u.find("li.selected").next("li:not(.disabled)")[0]:u.find("li:not(.disabled)")[0],_(u,a)),27==e.which&&y.trigger("close"),38==e.which&&(a=u.find("li.selected").prev("li:not(.disabled)")[0])&&_(u,a),setTimeout(function(){w=[]},1e3)}};y.on("keydown",x)}})}}(t),function(t){var e={init:function(e){var n={indicators:!0,height:400,transition:500,interval:6e3};return e=t.extend(n,e),this.each(function(){function n(t,e){t.hasClass("center-align")?t.velocity({opacity:0,translateY:-100},{duration:e,queue:!1}):t.hasClass("right-align")?t.velocity({opacity:0,translateX:100},{duration:e,queue:!1}):t.hasClass("left-align")&&t.velocity({opacity:0,translateX:-100},{duration:e,queue:!1})}function i(t){t>=l.length?t=0:t<0&&(t=l.length-1),(d=c.find(".active").index())!=t&&(s=l.eq(d),$caption=s.find(".caption"),s.removeClass("active"),s.velocity({opacity:0},{duration:e.transition,queue:!1,easing:"easeOutQuad",complete:function(){l.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),n($caption,e.transition),e.indicators&&a.eq(d).removeClass("active"),l.eq(t).velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),l.eq(t).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,delay:e.transition,queue:!1,easing:"easeOutQuad"}),l.eq(t).addClass("active"),e.indicators&&a.eq(t).addClass("active"))}var s,a,o,r=t(this),c=r.find("ul.slides").first(),l=c.find("li"),d=c.find(".active").index();-1!=d&&(s=l.eq(d)),r.hasClass("fullscreen")||(e.indicators?r.height(e.height+40):r.height(e.height),c.height(e.height)),l.find(".caption").each(function(){n(t(this),0)}),l.find("img").each(function(){var e="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t(this).attr("src")!==e&&(t(this).css("background-image","url("+t(this).attr("src")+")"),t(this).attr("src",e))}),e.indicators&&(a=t('<ul class="indicators"></ul>'),l.each(function(n){var s=t('<li class="indicator-item"></li>');s.click(function(){i(c.parent().find(t(this)).index()),clearInterval(o),o=setInterval(function(){d=c.find(".active").index(),l.length==d+1?d=0:d+=1,i(d)},e.transition+e.interval)}),a.append(s)}),r.append(a),a=r.find("ul.indicators").find("li.indicator-item")),s?s.show():(l.first().addClass("active").velocity({opacity:1},{duration:e.transition,queue:!1,easing:"easeOutQuad"}),d=0,s=l.eq(d),e.indicators&&a.eq(d).addClass("active")),s.find("img").each(function(){s.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:e.transition,queue:!1,easing:"easeOutQuad"})}),o=setInterval(function(){d=c.find(".active").index(),i(d+1)},e.transition+e.interval);var u=!1,h=!1,p=!1;r.hammer({prevent_default:!1}).bind("pan",function(t){if("touch"===t.gesture.pointerType){clearInterval(o);var e=t.gesture.direction,n=t.gesture.deltaX,i=t.gesture.velocityX;$curr_slide=c.find(".active"),$curr_slide.velocity({translateX:n},{duration:50,queue:!1,easing:"easeOutQuad"}),4===e&&(n>r.innerWidth()/2||i<-.65)?p=!0:2===e&&(n<-1*r.innerWidth()/2||i>.65)&&(h=!0);var s;h&&(s=$curr_slide.next(),0===s.length&&(s=l.first()),s.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),p&&(s=$curr_slide.prev(),0===s.length&&(s=l.last()),s.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(t){"touch"===t.gesture.pointerType&&($curr_slide=c.find(".active"),u=!1,curr_index=c.find(".active").index(),!p&&!h||l.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):h?(i(curr_index+1),$curr_slide.velocity({translateX:-1*r.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):p&&(i(curr_index-1),$curr_slide.velocity({translateX:r.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),h=!1,p=!1,clearInterval(o),o=setInterval(function(){d=c.find(".active").index(),l.length==d+1?d=0:d+=1,i(d)},e.transition+e.interval))}),r.on("sliderPause",function(){clearInterval(o)}),r.on("sliderStart",function(){clearInterval(o),o=setInterval(function(){d=c.find(".active").index(),l.length==d+1?d=0:d+=1,i(d)},e.transition+e.interval)}),r.on("sliderNext",function(){d=c.find(".active").index(),i(d+1)}),r.on("sliderPrev",function(){d=c.find(".active").index(),i(d-1)})})},pause:function(){t(this).trigger("sliderPause")},start:function(){t(this).trigger("sliderStart")},next:function(){t(this).trigger("sliderNext")},prev:function(){t(this).trigger("sliderPrev")}};t.fn.slider=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)}}(t),function(t){t(document).ready(function(){t(document).on("click.card",".card",function(e){t(this).find("> .card-reveal").length&&(t(e.target).is(t(".card-reveal .card-title"))||t(e.target).is(t(".card-reveal .card-title i"))?t(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){t(this).css({display:"none"})}}):(t(e.target).is(t(".card .activator"))||t(e.target).is(t(".card .activator i")))&&(t(e.target).closest(".card").css("overflow","hidden"),t(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))),t(".card-reveal").closest(".card").css("overflow","hidden")})})}(t),function(t){t(document).ready(function(){t(document).on("click.chip",".chip .material-icons",function(e){t(this).parent().remove()})})}(t),function(t){t.fn.pushpin=function(e){var n={top:0,bottom:1/0,offset:0};return e=t.extend(n,e),$index=0,this.each(function(){function n(t){t.removeClass("pin-top"),t.removeClass("pinned"),t.removeClass("pin-bottom")}function i(i,s){i.each(function(){e.top<=s&&e.bottom>=s&&!t(this).hasClass("pinned")&&(n(t(this)),t(this).css("top",e.offset),t(this).addClass("pinned")),s<e.top&&!t(this).hasClass("pin-top")&&(n(t(this)),t(this).css("top",0),t(this).addClass("pin-top")),s>e.bottom&&!t(this).hasClass("pin-bottom")&&(n(t(this)),t(this).addClass("pin-bottom"),t(this).css("top",e.bottom-o))})}var s=Materialize.guid(),a=t(this),o=t(this).offset().top;i(a,t(window).scrollTop()),t(window).on("scroll."+s,function(){var n=t(window).scrollTop()+e.offset;i(a,n)})})}}(t),function(t){t(document).ready(function(){t.fn.reverse=[].reverse,t(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle)",function(n){var i=t(this);e(i)}),t(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle)",function(e){var i=t(this);n(i)}),t(document).on("click.fixedActionBtn",".fixed-action-btn.click-to-toggle > a",function(i){var s=t(this),a=s.parent();a.hasClass("active")?n(a):e(a)})}),t.fn.extend({openFAB:function(){e(t(this))},closeFAB:function(){n(t(this))}});var e=function(e){if($this=e,!1===$this.hasClass("active")){var n,i,s=$this.hasClass("horizontal");!0===s?i=40:n=40,$this.addClass("active"),$this.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:n+"px",translateX:i+"px"},{duration:0});var a=0;$this.find("ul .btn-floating").reverse().each(function(){t(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:a}),a+=40})}},n=function(t){$this=t;var e,n,i=$this.hasClass("horizontal");!0===i?n=40:e=40,$this.removeClass("active");$this.find("ul .btn-floating").velocity("stop",!0),$this.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:e+"px",translateX:n+"px"},{duration:80})}}(t),function(t){Materialize.fadeInImage=function(e){var n=t(e);n.css({opacity:0}),t(n).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),t(n).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(e,n){n.start=100;var i=e/100,s=150-(100-e)/1.75;s<100&&(s=100),e>=0&&t(this).css({"-webkit-filter":"grayscale("+i+")brightness("+s+"%)",filter:"grayscale("+i+")brightness("+s+"%)"})}})},Materialize.showStaggeredList=function(e){var n=0;t(e).find("li").velocity({translateX:"-100px"},{duration:0}),t(e).find("li").each(function(){t(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:n,easing:[60,10]}),n+=120})},t(document).ready(function(){var e=!1,n=!1;t(".dismissable").each(function(){t(this).hammer({prevent_default:!1}).bind("pan",function(i){if("touch"===i.gesture.pointerType){var s=t(this),a=i.gesture.direction,o=i.gesture.deltaX,r=i.gesture.velocityX;s.velocity({translateX:o},{duration:50,queue:!1,easing:"easeOutQuad"}),4===a&&(o>s.innerWidth()/2||r<-.75)&&(e=!0),2===a&&(o<-1*s.innerWidth()/2||r>.75)&&(n=!0)}}).bind("panend",function(i){if(Math.abs(i.gesture.deltaX)<t(this).innerWidth()/2&&(n=!1,e=!1),"touch"===i.gesture.pointerType){var s=t(this);if(e||n){var a;a=e?s.innerWidth():-1*s.innerWidth(),s.velocity({translateX:a},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){s.css("border","none"),s.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){s.remove()}})}})}else s.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});e=!1,n=!1}})})})}(t),function(t){Materialize.scrollFire=function(t){var e=!1;window.addEventListener("scroll",function(){e=!0}),setInterval(function(){if(e){e=!1;for(var n=window.pageYOffset+window.innerHeight,i=0;i<t.length;i++){var s=t[i],a=s.selector,o=s.offset,r=s.callback,c=document.querySelector(a);if(null!==c){if(n>c.getBoundingClientRect().top+window.pageYOffset+o&&!0!==s.done){
if("function"==typeof r)r.call(this);else if("string"==typeof r){var l=new Function(r);l()}s.done=!0}}}}},100)}}(),function(e){Materialize.DefaultDatePicker=function(t){function e(a,o,c,u){function h(){return e._.node("div",e._.node("div",e._.node("div",e._.node("div",C.component.nodes(y.open),w.box),w.wrap),w.frame),w.holder)}function p(){x.data(o,C).addClass(w.input).attr("tabindex",-1).val(x.data("value")?C.get("select",_.format):a.value),_.editable||x.on("focus."+y.id+" click."+y.id,function(t){t.preventDefault(),C.$root.eq(0).focus()}).on("keydown."+y.id,g),s(a,{haspopup:!0,expanded:!1,readonly:!1,owns:a.id+"_root"})}function f(){C.$root.on({keydown:g,focusin:function(t){C.$root.removeClass(w.focused),t.stopPropagation()},"mousedown click":function(e){var n=e.target;n!=C.$root.children()[0]&&(e.stopPropagation(),"mousedown"!=e.type||t(n).is("input, select, textarea, button, option")||(e.preventDefault(),C.$root.eq(0).focus()))}}).on({focus:function(){x.addClass(w.target)},blur:function(){x.removeClass(w.target)}}).on("focus.toOpen",v).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=t(this),n=e.data(),i=e.hasClass(w.navDisabled)||e.hasClass(w.disabled),s=r();s=s&&(s.type||s.href),(i||s&&!t.contains(C.$root[0],s))&&C.$root.eq(0).focus(),!i&&n.nav?C.set("highlight",C.component.item.highlight,{nav:n.nav}):!i&&"pick"in n?C.set("select",n.pick):n.clear?C.clear().close(!0):n.close&&C.close(!0)}),s(C.$root[0],"hidden",!0)}function m(){var e;!0===_.hiddenName?(e=a.name,a.name=""):(e=["string"==typeof _.hiddenPrefix?_.hiddenPrefix:"","string"==typeof _.hiddenSuffix?_.hiddenSuffix:"_submit"],e=e[0]+a.name+e[1]),C._hidden=t('<input type=hidden name="'+e+'"'+(x.data("value")||a.value?' value="'+C.get("select",_.formatSubmit)+'"':"")+">")[0],x.on("change."+y.id,function(){C._hidden.value=a.value?C.get("select",_.formatSubmit):""}),_.container?t(_.container).append(C._hidden):x.after(C._hidden)}function g(t){var e=t.keyCode,n=/^(8|46)$/.test(e);if(27==e)return C.close(),!1;(32==e||n||!y.open&&C.component.key[e])&&(t.preventDefault(),t.stopPropagation(),n?C.clear().close():C.open())}function v(t){t.stopPropagation(),"focus"==t.type&&C.$root.addClass(w.focused),C.open()}if(!a)return e;var b=!1,y={id:a.id||"P"+Math.abs(~~(Math.random()*new Date))},_=c?t.extend(!0,{},c.defaults,u):u||{},w=t.extend({},e.klasses(),_.klass),x=t(a),S=function(){return this.start()},C=S.prototype={constructor:S,$node:x,start:function(){return y&&y.start?C:(y.methods={},y.start=!0,y.open=!1,y.type=a.type,a.autofocus=a==r(),a.readOnly=!_.editable,a.id=a.id||y.id,"text"!=a.type&&(a.type="text"),C.component=new c(C,_),C.$root=t(e._.node("div",h(),w.picker,'id="'+a.id+'_root" tabindex="0"')),f(),_.formatSubmit&&m(),p(),_.container?t(_.container).append(C.$root):x.after(C.$root),C.on({start:C.component.onStart,render:C.component.onRender,stop:C.component.onStop,open:C.component.onOpen,close:C.component.onClose,set:C.component.onSet}).on({start:_.onStart,render:_.onRender,stop:_.onStop,open:_.onOpen,close:_.onClose,set:_.onSet}),b=n(C.$root.children()[0]),a.autofocus&&C.open(),C.trigger("start").trigger("render"))},render:function(t){return t?C.$root.html(h()):C.$root.find("."+w.box).html(C.component.nodes(y.open)),C.trigger("render")},stop:function(){return y.start?(C.close(),C._hidden&&C._hidden.parentNode.removeChild(C._hidden),C.$root.remove(),x.removeClass(w.input).removeData(o),setTimeout(function(){x.off("."+y.id)},0),a.type=y.type,a.readOnly=!1,C.trigger("stop"),y.methods={},y.start=!1,C):C},open:function(n){return y.open?C:(x.addClass(w.active),s(a,"expanded",!0),setTimeout(function(){C.$root.addClass(w.opened),s(C.$root[0],"hidden",!1)},0),!1!==n&&(y.open=!0,b&&d.css("overflow","hidden").css("padding-right","+="+i()),C.$root.eq(0).focus(),l.on("click."+y.id+" focusin."+y.id,function(t){var e=t.target;e!=a&&e!=document&&3!=t.which&&C.close(e===C.$root.children()[0])}).on("keydown."+y.id,function(n){var i=n.keyCode,s=C.component.key[i],a=n.target;27==i?C.close(!0):a!=C.$root[0]||!s&&13!=i?t.contains(C.$root[0],a)&&13==i&&(n.preventDefault(),a.click()):(n.preventDefault(),s?e._.trigger(C.component.key.go,C,[e._.trigger(s)]):C.$root.find("."+w.highlighted).hasClass(w.disabled)||C.set("select",C.component.item.highlight).close())})),C.trigger("open"))},close:function(t){return t&&(C.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){C.$root.on("focus.toOpen",v)},0)),x.removeClass(w.active),s(a,"expanded",!1),setTimeout(function(){C.$root.removeClass(w.opened+" "+w.focused),s(C.$root[0],"hidden",!0)},0),y.open?(y.open=!1,b&&d.css("overflow","").css("padding-right","-="+i()),l.off("."+y.id),C.trigger("close")):C},clear:function(t){return C.set("clear",null,t)},set:function(e,n,i){var s,a,o=t.isPlainObject(e),r=o?e:{};if(i=o&&t.isPlainObject(n)?n:i||{},e){o||(r[e]=n);for(s in r)a=r[s],s in C.component.item&&(void 0===a&&(a=null),C.component.set(s,a,i)),"select"!=s&&"clear"!=s||x.val("clear"==s?"":C.get(s,_.format)).trigger("change");C.render()}return i.muted?C:C.trigger("set",r)},get:function(t,n){if(t=t||"value",null!=y[t])return y[t];if("valueSubmit"==t){if(C._hidden)return C._hidden.value;t="value"}if("value"==t)return a.value;if(t in C.component.item){if("string"==typeof n){var i=C.component.get(t);return i?e._.trigger(C.component.formats.toString,C.component,[n,i]):""}return C.component.get(t)}},on:function(e,n,i){var s,a,o=t.isPlainObject(e),r=o?e:{};if(e){o||(r[e]=n);for(s in r)a=r[s],i&&(s="_"+s),y.methods[s]=y.methods[s]||[],y.methods[s].push(a)}return C},off:function(){var t,e,n=arguments;for(t=0,namesCount=n.length;t<namesCount;t+=1)(e=n[t])in y.methods&&delete y.methods[e];return C},trigger:function(t,n){var i=function(t){var i=y.methods[t];i&&i.map(function(t){e._.trigger(t,C,[n])})};return i("_"+t),i(t),C}};return new S}function n(t){var e;return t.currentStyle?e=t.currentStyle.position:window.getComputedStyle&&(e=getComputedStyle(t).position),"fixed"==e}function i(){if(d.height()<=c.height())return 0;var e=t('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=e[0].offsetWidth;e.css("overflow","scroll");var i=t('<div style="width:100%" />').appendTo(e),s=i[0].offsetWidth;return e.remove(),n-s}function s(e,n,i){if(t.isPlainObject(n))for(var s in n)a(e,s,n[s]);else a(e,n,i)}function a(t,e,n){t.setAttribute(("role"==e?"":"aria-")+e,n)}function o(e,n){t.isPlainObject(e)||(e={attribute:n}),n="";for(var i in e){var s=("role"==i?"":"aria-")+i;n+=null==e[i]?"":s+'="'+e[i]+'"'}return n}function r(){try{return document.activeElement}catch(t){}}var c=t(window),l=t(document),d=t(document.documentElement);return e.klasses=function(t){return t=t||"picker",{picker:t,opened:t+"--opened",focused:t+"--focused",input:t+"__input",active:t+"__input--active",target:t+"__input--target",holder:t+"__holder",frame:t+"__frame",wrap:t+"__wrap",box:t+"__box"}},e._={group:function(t){for(var n,i="",s=e._.trigger(t.min,t);s<=e._.trigger(t.max,t,[s]);s+=t.i)n=e._.trigger(t.item,t,[s]),i+=e._.node(t.node,n[0],n[1],n[2]);return i},node:function(e,n,i,s){return n?(n=t.isArray(n)?n.join(""):n,i=i?' class="'+i+'"':"",s=s?" "+s:"","<"+e+i+s+">"+n+"</"+e+">"):""},lead:function(t){return(t<10?"0":"")+t},trigger:function(t,e,n){return"function"==typeof t?t.apply(e,n||[]):t},digits:function(t){return/\d/.test(t[1])?2:1},isDate:function(t){return{}.toString.call(t).indexOf("Date")>-1&&this.isInteger(t.getDate())},isInteger:function(t){return{}.toString.call(t).indexOf("Number")>-1&&t%1==0},ariaAttr:o},e.extend=function(n,i){t.fn[n]=function(s,a){var o=this.data(n);return"picker"==s?o:o&&"string"==typeof s?e._.trigger(o[s],o,[a]):this.each(function(){t(this).data(n)||new e(this,n,i,s)})},t.fn[n].defaults=i.defaults},e}(t)}(),function(e){!function(t,e){function n(t,e){var n=this,i=t.$node[0],s=i.value,a=t.$node.data("value"),o=a||s,r=a?e.formatSubmit:e.format,c=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction};n.settings=e,n.$node=t.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(e.disable||[]).slice(0),n.item.enable=-function(t){return!0===t[0]?t.shift():-1}(n.item.disable),n.set("min",e.min).set("max",e.max).set("now"),o?n.set("select",o,{format:r}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return c()?-1:1},37:function(){return c()?1:-1},go:function(t){var e=n.item.highlight,i=new Date(e.year,e.month,e.date+t);n.set("highlight",i,{interval:t}),this.render()}},t.on("render",function(){t.$root.find("."+e.klass.selectMonth).on("change",function(){var n=this.value;n&&(t.set("highlight",[t.get("view").year,n,t.get("highlight").date]),t.$root.find("."+e.klass.selectMonth).trigger("focus"))}),t.$root.find("."+e.klass.selectYear).on("change",function(){var n=this.value;n&&(t.set("highlight",[n,t.get("view").month,t.get("highlight").date]),t.$root.find("."+e.klass.selectYear).trigger("focus"))})},1).on("open",function(){var i="";n.disabled(n.get("now"))&&(i=":not(."+e.klass.buttonToday+")"),t.$root.find("button"+i+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}var i=t._;n.prototype.set=function(t,e,n){var i=this,s=i.item;return null===e?("clear"==t&&(t="select"),s[t]=e,i):(s["enable"==t?"disable":"flip"==t?"enable":t]=i.queue[t].split(" ").map(function(s){return e=i[s](t,e,n)}).pop(),"select"==t?i.set("highlight",s.select,n):"highlight"==t?i.set("view",s.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(s.select&&i.disabled(s.select)&&i.set("select",s.select,n),s.highlight&&i.disabled(s.highlight)&&i.set("highlight",s.highlight,n)),i)},n.prototype.get=function(t){return this.item[t]},n.prototype.create=function(t,n,s){var a,o=this;return n=void 0===n?t:n,n==-1/0||n==1/0?a=n:e.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:e.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:o.create().obj):n=i.isInteger(n)||i.isDate(n)?o.normalize(new Date(n),s):o.now(t,n,s),{year:a||n.getFullYear(),month:a||n.getMonth(),date:a||n.getDate(),day:a||n.getDay(),obj:a||n,pick:a||n.getTime()}},n.prototype.createRange=function(t,n){var s=this,a=function(t){return!0===t||e.isArray(t)||i.isDate(t)?s.create(t):t};return i.isInteger(t)||(t=a(t)),i.isInteger(n)||(n=a(n)),i.isInteger(t)&&e.isPlainObject(n)?t=[n.year,n.month,n.date+t]:i.isInteger(n)&&e.isPlainObject(t)&&(n=[t.year,t.month,t.date+n]),{from:a(t),to:a(n)}},n.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},n.prototype.overlapRanges=function(t,e){var n=this;return t=n.createRange(t.from,t.to),e=n.createRange(e.from,e.to),n.withinRange(t,e.from)||n.withinRange(t,e.to)||n.withinRange(e,t.from)||n.withinRange(e,t.to)},n.prototype.now=function(t,e,n){return e=new Date,n&&n.rel&&e.setDate(e.getDate()+n.rel),this.normalize(e,n)},n.prototype.navigate=function(t,n,i){var s,a,o,r,c=e.isArray(n),l=e.isPlainObject(n),d=this.item.view;if(c||l){for(l?(a=n.year,o=n.month,r=n.date):(a=+n[0],o=+n[1],r=+n[2]),i&&i.nav&&d&&d.month!==o&&(a=d.year,o=d.month),s=new Date(a,o+(i&&i.nav?i.nav:0),1),a=s.getFullYear(),o=s.getMonth();new Date(a,o,r).getMonth()!==o;)r-=1;n=[a,o,r]}return n},n.prototype.normalize=function(t){return t.setHours(0,0,0,0),t},n.prototype.measure=function(t,e){var n=this;return e?"string"==typeof e?e=n.parse(t,e):i.isInteger(e)&&(e=n.now(t,e,{rel:e})):e="min"==t?-1/0:1/0,e},n.prototype.viewset=function(t,e){return this.create([e.year,e.month,1])},n.prototype.validate=function(t,n,s){var a,o,r,c,l=this,d=n,u=s&&s.interval?s.interval:1,h=-1===l.item.enable,p=l.item.min,f=l.item.max,m=h&&l.item.disable.filter(function(t){if(e.isArray(t)){var s=l.create(t).pick;s<n.pick?a=!0:s>n.pick&&(o=!0)}return i.isInteger(t)}).length;if((!s||!s.nav)&&(!h&&l.disabled(n)||h&&l.disabled(n)&&(m||a||o)||!h&&(n.pick<=p.pick||n.pick>=f.pick)))for(h&&!m&&(!o&&u>0||!a&&u<0)&&(u*=-1);l.disabled(n)&&(Math.abs(u)>1&&(n.month<d.month||n.month>d.month)&&(n=d,u=u>0?1:-1),n.pick<=p.pick?(r=!0,u=1,n=l.create([p.year,p.month,p.date+(n.pick===p.pick?0:-1)])):n.pick>=f.pick&&(c=!0,u=-1,n=l.create([f.year,f.month,f.date+(n.pick===f.pick?0:1)])),!r||!c);)n=l.create([n.year,n.month,n.date+u]);return n},n.prototype.disabled=function(t){var n=this,s=n.item.disable.filter(function(s){return i.isInteger(s)?t.day===(n.settings.firstDay?s:s-1)%7:e.isArray(s)||i.isDate(s)?t.pick===n.create(s).pick:e.isPlainObject(s)?n.withinRange(s,t):void 0});return s=s.length&&!s.filter(function(t){return e.isArray(t)&&"inverted"==t[3]||e.isPlainObject(t)&&t.inverted}).length,-1===n.item.enable?!s:s||t.pick<n.item.min.pick||t.pick>n.item.max.pick},n.prototype.parse=function(t,e,n){var s=this,a={};return e&&"string"==typeof e?(n&&n.format||(n=n||{},n.format=s.settings.format),s.formats.toArray(n.format).map(function(t){var n=s.formats[t],o=n?i.trigger(n,s,[e,a]):t.replace(/^!/,"").length;n&&(a[t]=e.substr(0,o)),e=e.substr(o)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):e},n.prototype.formats=function(){function t(t,e,n){var i=t.match(/\w+/)[0];return n.mm||n.m||(n.m=e.indexOf(i)+1),i.length}function e(t){return t.match(/\w+/)[0].length}return{d:function(t,e){return t?i.digits(t):e.date},dd:function(t,e){return t?2:i.lead(e.date)},ddd:function(t,n){return t?e(t):this.settings.weekdaysShort[n.day]},dddd:function(t,n){return t?e(t):this.settings.weekdaysFull[n.day]},m:function(t,e){return t?i.digits(t):e.month+1},mm:function(t,e){return t?2:i.lead(e.month+1)},mmm:function(e,n){var i=this.settings.monthsShort;return e?t(e,i,n):i[n.month]},mmmm:function(e,n){var i=this.settings.monthsFull;return e?t(e,i,n):i[n.month]},yy:function(t,e){return t?2:(""+e.year).slice(2)},yyyy:function(t,e){return t?4:e.year},toArray:function(t){return t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,e){var n=this;return n.formats.toArray(t).map(function(t){return i.trigger(n.formats[t],n,[0,e])||t.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(t,n){var s=this;return i.isInteger(t)&&i.isInteger(n)||"boolean"==typeof t&&"boolean"==typeof n?t===n:(i.isDate(t)||e.isArray(t))&&(i.isDate(n)||e.isArray(n))?s.create(t).pick===s.create(n).pick:!(!e.isPlainObject(t)||!e.isPlainObject(n))&&(s.isDateExact(t.from,n.from)&&s.isDateExact(t.to,n.to))},n.prototype.isDateOverlap=function(t,n){var s=this,a=s.settings.firstDay?1:0;return i.isInteger(t)&&(i.isDate(n)||e.isArray(n))?(t=t%7+a)===s.create(n).day+1:i.isInteger(n)&&(i.isDate(t)||e.isArray(t))?(n=n%7+a)===s.create(t).day+1:!(!e.isPlainObject(t)||!e.isPlainObject(n))&&s.overlapRanges(t,n)},n.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(-1==e.enable?1:-1)},n.prototype.deactivate=function(t,n){var s=this,a=s.item.disable.slice(0);return"flip"==n?s.flipEnable():!1===n?(s.flipEnable(1),a=[]):!0===n?(s.flipEnable(-1),a=[]):n.map(function(t){for(var n,o=0;o<a.length;o+=1)if(s.isDateExact(t,a[o])){n=!0;break}n||(i.isInteger(t)||i.isDate(t)||e.isArray(t)||e.isPlainObject(t)&&t.from&&t.to)&&a.push(t)}),a},n.prototype.activate=function(t,n){var s=this,a=s.item.disable,o=a.length;return"flip"==n?s.flipEnable():!0===n?(s.flipEnable(1),a=[]):!1===n?(s.flipEnable(-1),a=[]):n.map(function(t){var n,r,c,l;for(c=0;c<o;c+=1){if(r=a[c],s.isDateExact(r,t)){n=a[c]=null,l=!0;break}if(s.isDateOverlap(r,t)){e.isPlainObject(t)?(t.inverted=!0,n=t):e.isArray(t)?(n=t,n[3]||n.push("inverted")):i.isDate(t)&&(n=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(n)for(c=0;c<o;c+=1)if(s.isDateExact(a[c],t)){a[c]=null;break}if(l)for(c=0;c<o;c+=1)if(s.isDateOverlap(a[c],t)){a[c]=null;break}n&&a.push(n)}),a.filter(function(t){return null!=t})},n.prototype.nodes=function(t){var e=this,n=e.settings,s=e.item,a=s.now,o=s.select,r=s.highlight,c=s.view,l=s.disable,d=s.min,u=s.max,h=function(t,e){return n.firstDay&&(t.push(t.shift()),e.push(e.shift())),i.node("thead",i.node("tr",i.group({min:0,max:6,i:1,node:"th",item:function(i){return[t[i],n.klass.weekdays,'scope=col title="'+e[i]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysLetter).slice(0),n.weekdaysFull.slice(0)),p=function(t){return i.node("div"," ",n.klass["nav"+(t?"Next":"Prev")]+(t&&c.year>=u.year&&c.month>=u.month||!t&&c.year<=d.year&&c.month<=d.month?" "+n.klass.navDisabled:""),"data-nav="+(t||-1)+" "+i.ariaAttr({role:"button",controls:e.$node[0].id+"_table"})+' title="'+(t?n.labelMonthNext:n.labelMonthPrev)+'"')},f=function(s){var a=n.showMonthsShort?n.monthsShort:n.monthsFull;return"short_months"==s&&(a=n.monthsShort),n.selectMonths&&void 0==s?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(t){return[a[t],0,"value="+t+(c.month==t?" selected":"")+(c.year==d.year&&t<d.month||c.year==u.year&&t>u.month?" disabled":"")]}}),n.klass.selectMonth+" browser-default",(t?"":"disabled")+" "+i.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):"short_months"==s?null!=o?i.node("div",a[o.month]):i.node("div",a[c.month]):i.node("div",a[c.month],n.klass.month)},m=function(s){var a=c.year,o=!0===n.selectYears?5:~~(n.selectYears/2);if(o){var r=d.year,l=u.year,h=a-o,p=a+o;if(r>h&&(p+=r-h,h=r),l<p){var f=h-r,m=p-l;h-=f>m?m:f,p=l}if(n.selectYears&&void 0==s)return i.node("select",i.group({min:h,max:p,i:1,node:"option",item:function(t){return[t,0,"value="+t+(a==t?" selected":"")]}}),n.klass.selectYear+" browser-default",(t?"":"disabled")+" "+i.ariaAttr({controls:e.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return"raw"==s?i.node("div",a):i.node("div",a,n.klass.year)};return createDayLabel=function(){return null!=o?i.node("div",o.date):i.node("div",a.date)},createWeekdayLabel=function(){var t;return t=null!=o?o.day:a.day,n.weekdaysFull[t]},i.node("div",i.node("div",createWeekdayLabel(),n.klass.weekday_display)+i.node("div",f("short_months"),n.klass.month_display)+i.node("div",createDayLabel(),n.klass.day_display)+i.node("div",m("raw"),n.klass.year_display),n.klass.date_display)+i.node("div",i.node("div",(n.selectYears,f()+m()+p()+p(1)),n.klass.header)+i.node("table",h+i.node("tbody",i.group({min:0,max:5,i:1,node:"tr",item:function(t){var s=n.firstDay&&0===e.create([c.year,c.month,1]).day?-7:0;return[i.group({min:7*t-c.day+s+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(t){t=e.create([c.year,c.month,t+(n.firstDay?1:0)]);var s=o&&o.pick==t.pick,h=r&&r.pick==t.pick,p=l&&e.disabled(t)||t.pick<d.pick||t.pick>u.pick,f=i.trigger(e.formats.toString,e,[n.format,t]);return[i.node("div",t.date,function(e){return e.push(c.month==t.month?n.klass.infocus:n.klass.outfocus),a.pick==t.pick&&e.push(n.klass.now),s&&e.push(n.klass.selected),h&&e.push(n.klass.highlighted),p&&e.push(n.klass.disabled),e.join(" ")}([n.klass.day]),"data-pick="+t.pick+" "+i.ariaAttr({role:"gridcell",label:f,selected:!(!s||e.$node.val()!==f)||null,activedescendant:!!h||null,disabled:!!p||null})),"",i.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+e.$node[0].id+'_table" '+i.ariaAttr({role:"grid",controls:e.$node[0].id,readonly:!0})),n.klass.calendar_container)+i.node("div",i.node("button",n.today,n.klass.buttonToday,"type=button data-pick="+a.pick+(t&&!e.disabled(a)?"":" disabled")+" "+i.ariaAttr({controls:e.$node[0].id}))+i.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(t?"":" disabled")+" "+i.ariaAttr({controls:e.$node[0].id}))+i.node("button",n.close,n.klass.buttonClose,"type=button data-close=true "+(t?"":" disabled")+" "+i.ariaAttr({controls:e.$node[0].id})),n.klass.footer)},n.defaults=function(t){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:t+"table",header:t+"header",date_display:t+"date-display",day_display:t+"day-display",month_display:t+"month-display",year_display:t+"year-display",calendar_container:t+"calendar-container",navPrev:t+"nav--prev",navNext:t+"nav--next",navDisabled:t+"nav--disabled",month:t+"month",year:t+"year",selectMonth:t+"select--month",selectYear:t+"select--year",weekdays:t+"weekday",day:t+"day",disabled:t+"day--disabled",selected:t+"day--selected",highlighted:t+"day--highlighted",now:t+"day--today",infocus:t+"day--infocus",outfocus:t+"day--outfocus",footer:t+"footer",buttonClear:t+"button--clear",buttonToday:t+"button--today",buttonClose:t+"button--close"}}}(t.klasses().picker+"__"),t.extend("pickadate",n)}(Materialize.DefaultDatePicker,t)}(),function(t){function e(){var e=+t(this).attr("length"),n=+t(this).val().length,i=n<=e;t(this).parent().find('span[class="character-counter"]').html(n+"/"+e),s(i,t(this))}function n(e){var n=e.parent().find('span[class="character-counter"]');n.length||(n=t("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),e.parent().append(n))}function i(){t(this).parent().find('span[class="character-counter"]').html("")}function s(t,e){var n=e.hasClass("invalid");t&&n?e.removeClass("invalid"):t||n||(e.removeClass("valid"),e.addClass("invalid"))}t.fn.characterCounter=function(){return this.each(function(){var s=t(this);s.parent().find('span[class="character-counter"]').length||void 0!==s.attr("length")&&(s.on("input",e),s.on("focus",e),s.on("blur",i),n(s))})},t(document).ready(function(){t("input, textarea").characterCounter()})}(t),function(t){var e={init:function(e){var n={time_constant:200,dist:-100,shift:0,padding:0,full_width:!1};return e=t.extend(n,e),this.each(function(){function n(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function i(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function s(t){return t>=v?t%v:t<0?s(v+t%v):t}function a(t){var n,i,a,o,r,c,l;for(p="number"==typeof t?t:p,f=Math.floor((p+g/2)/g),a=p-f*g,o=a<0?1:-1,r=-o*a*2/g,e.full_width?l="translateX(0)":(l="translateX("+(N[0].clientWidth-item_width)/2+"px) ",l+="translateY("+(N[0].clientHeight-item_width)/2+"px)"),c=h[s(f)],c.style[C]=l+" translateX("+-a/2+"px) translateX("+o*e.shift*r*n+"px) translateZ("+e.dist*r+"px)",c.style.zIndex=0,e.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*r,c.style.opacity=tweenedOpacity,i=v>>1,n=1;n<=i;++n)e.full_width?(zTranslation=e.dist,tweenedOpacity=n===i&&a<0?1-r:1):(zTranslation=e.dist*(2*n+r*o),tweenedOpacity=1-.2*(2*n+r*o)),c=h[s(f+n)],c.style[C]=l+" translateX("+(e.shift+(g*n-a)/2)+"px) translateZ("+zTranslation+"px)",c.style.zIndex=-n,c.style.opacity=tweenedOpacity,e.full_width?(zTranslation=e.dist,tweenedOpacity=n===i&&a>0?1-r:1):(zTranslation=e.dist*(2*n-r*o),tweenedOpacity=1-.2*(2*n-r*o)),c=h[s(f-n)],c.style[C]=l+" translateX("+(-e.shift+(-g*n-a)/2)+"px) translateZ("+zTranslation+"px)",c.style.zIndex=-n,c.style.opacity=tweenedOpacity;c=h[s(f)],c.style[C]=l+" translateX("+-a/2+"px) translateX("+o*e.shift*r+"px) translateZ("+e.dist*r+"px)",c.style.zIndex=0,e.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*r,c.style.opacity=tweenedOpacity}function o(){var t,e,n,i;t=Date.now(),e=t-T,T=t,n=p-k,k=p,i=1e3*n/(1+e),S=.8*i+.2*S}function r(){var t,n;w&&(t=Date.now()-T,n=w*Math.exp(-t/e.time_constant),n>2||n<-2?(a(x-n),requestAnimationFrame(r)):a(x))}function c(n){if(E)return n.preventDefault(),n.stopPropagation(),!1;if(!e.full_width){var i=t(n.target).closest(".carousel-item").index(),s=f%v-i;s<0?Math.abs(s+v)<Math.abs(s)&&(s+=v):s>0&&Math.abs(s-v)<s&&(s-=v),s<0?t(this).trigger("carouselNext",[Math.abs(s)]):s>0&&t(this).trigger("carouselPrev",[s])}}function l(t){m=!0,E=!1,M=!1,b=n(t),_=i(t),S=w=0,k=p,T=Date.now(),clearInterval(A),A=setInterval(o,100)}function d(t){var e,s;if(m)if(e=n(t),y=i(t),s=b-e,Math.abs(_-y)<30&&!M)(s>2||s<-2)&&(E=!0,b=e,a(p+s));else{if(E)return t.preventDefault(),t.stopPropagation(),!1;M=!0}if(E)return t.preventDefault(),t.stopPropagation(),!1}function u(t){return m=!1,clearInterval(A),x=p,(S>10||S<-10)&&(w=.9*S,x=p+w),x=Math.round(x/g)*g,w=x-p,T=Date.now(),requestAnimationFrame(r),t.preventDefault(),t.stopPropagation(),!1}var h,p,f,m,g,v,b,_,w,x,S,C,k,T,A,E,M,N=t(this);if(N.hasClass("initialized"))return!0;e.full_width&&(e.dist=0,imageHeight=N.find(".carousel-item img").first().load(function(){N.css("height",t(this).height())})),N.addClass("initialized"),m=!1,p=x=0,h=[],item_width=N.find(".carousel-item").first().innerWidth(),g=2*item_width+e.padding,N.find(".carousel-item").each(function(){h.push(t(this)[0])}),v=h.length,C="transform",["webkit","Moz","O","ms"].every(function(t){var e=t+"Transform";return void 0===document.body.style[e]||(C=e,!1)}),window.onresize=a,function(){void 0!==window.ontouchstart&&(N[0].addEventListener("touchstart",l),N[0].addEventListener("touchmove",d),N[0].addEventListener("touchend",u)),N[0].addEventListener("mousedown",l),N[0].addEventListener("mousemove",d),N[0].addEventListener("mouseup",u),N[0].addEventListener("click",c)}(),a(p),t(this).on("carouselNext",function(t,e){void 0===e&&(e=1),x=p+g*e,p!==x&&(w=x-p,T=Date.now(),requestAnimationFrame(r))}),t(this).on("carouselPrev",function(t,e){void 0===e&&(e=1),x=p-g*e,p!==x&&(w=x-p,T=Date.now(),requestAnimationFrame(r))})})},next:function(e){t(this).trigger("carouselNext",[e])},prev:function(e){t(this).trigger("carouselPrev",[e])}};t.fn.carousel=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.carousel"):e.init.apply(this,arguments)}}(t)}),function t(e,n,i){function s(o,r){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return s(n||t)},d,d.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,n){"use strict";function i(t){t.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||void 0===t){var e=t;a.get(this)||s.initialize(this,e)}else{var n=t;"update"===n?s.update(this):"destroy"===n&&s.destroy(this)}})}}var s=t("../main"),a=t("../plugin/instances");if("function"==typeof define&&define.amd)define("perfectScrollbarJQuery",["jquery"],i);else{var o=window.jQuery?window.jQuery:window.$;void 0!==o&&i(o)}e.exports=i},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";function i(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function s(t,e){var n=t.className.split(" "),i=n.indexOf(e);i>=0&&n.splice(i,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):i(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):s(t,e)},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function i(t,e){return window.getComputedStyle(t)[e]}function s(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function a(t,e){for(var n in e){var i=e[n];"number"==typeof i&&(i=i.toString()+"px"),t.style[n]=i}return t}var o={};o.e=function(t,e){var n=document.createElement(t);return n.className=e,n},o.appendTo=function(t,e){return e.appendChild(t),t},o.css=function(t,e,n){return"object"==typeof e?a(t,e):void 0===n?i(t,e):s(t,e,n)},o.matches=function(t,e){return void 0!==t.matches?t.matches(e):void 0!==t.matchesSelector?t.matchesSelector(e):void 0!==t.webkitMatchesSelector?t.webkitMatchesSelector(e):void 0!==t.mozMatchesSelector?t.mozMatchesSelector(e):void 0!==t.msMatchesSelector?t.msMatchesSelector(e):void 0},o.remove=function(t){void 0!==t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},o.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return o.matches(t,e)})},e.exports=o},{}],4:[function(t,e,n){"use strict";var i=function(t){this.element=t,this.events={}};i.prototype.bind=function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},i.prototype.unbind=function(t,e){var n=void 0!==e;this.events[t]=this.events[t].filter(function(i){return!(!n||i===e)||(this.element.removeEventListener(t,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var s=function(){this.eventElements=[]};s.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return void 0===e&&(e=new i(t),this.eventElements.push(e)),e},s.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},s.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},s.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},s.prototype.once=function(t,e,n){var i=this.eventElement(t),s=function(t){i.unbind(e,s),n(t)};i.bind(e,s)},e.exports=s},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var i=t("./class"),s=t("./dom"),a=n.toInt=function(t){return parseInt(t,10)||0},o=n.clone=function(t){if(t){if(t.constructor===Array)return t.map(o);if("object"==typeof t){var e={};for(var n in t)e[n]=o(t[n]);return e}return t}return null};n.extend=function(t,e){var n=o(t);for(var i in e)n[i]=o(e[i]);return n},n.isEditable=function(t){return s.matches(t,"input,[contenteditable]")||s.matches(t,"select,[contenteditable]")||s.matches(t,"textarea,[contenteditable]")||s.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=i.list(t),n=0;n<e.length;n++){var s=e[n];0===s.indexOf("ps-")&&i.remove(t,s)}},n.outerWidth=function(t){return a(s.css(t,"width"))+a(s.css(t,"paddingLeft"))+a(s.css(t,"paddingRight"))+a(s.css(t,"borderLeftWidth"))+a(s.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){i.add(t,"ps-in-scrolling"),void 0!==e?i.add(t,"ps-"+e):(i.add(t,"ps-x"),i.add(t,"ps-y"))},n.stopScrolling=function(t,e){i.remove(t,"ps-in-scrolling"),void 0!==e?i.remove(t,"ps-"+e):(i.remove(t,"ps-x"),i.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var i=t("./plugin/destroy"),s=t("./plugin/initialize"),a=t("./plugin/update");e.exports={initialize:s,update:a,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e,n){"use strict";var i=t("../lib/helper"),s=t("../lib/dom"),a=t("./instances");e.exports=function(t){var e=a.get(t);e&&(e.event.unbindAll(),s.remove(e.scrollbarX),s.remove(e.scrollbarY),s.remove(e.scrollbarXRail),s.remove(e.scrollbarYRail),i.removePsClasses(t),a.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){
"use strict";function i(t,e){function n(t){return t.getBoundingClientRect()}var i=function(t){t.stopPropagation()};e.event.bind(e.scrollbarY,"click",i),e.event.bind(e.scrollbarYRail,"click",function(i){var s=i.pageY-window.pageYOffset-n(e.scrollbarYRail).top,r=s>e.scrollbarYTop?1:-1;o(t,"top",t.scrollTop+r*e.containerHeight),a(t),i.stopPropagation()}),e.event.bind(e.scrollbarX,"click",i),e.event.bind(e.scrollbarXRail,"click",function(i){var s=i.pageX-window.pageXOffset-n(e.scrollbarXRail).left,r=s>e.scrollbarXLeft?1:-1;o(t,"left",t.scrollLeft+r*e.containerWidth),a(t),i.stopPropagation()})}var s=t("../instances"),a=t("../update-geometry"),o=t("../update-scroll");e.exports=function(t){i(t,s.get(t))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";function i(t,e){function n(n){var s=i+n*e.railXRatio,o=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);e.scrollbarXLeft=s<0?0:s>o?o:s;var r=a.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;l(t,"left",r)}var i=null,s=null,r=function(e){n(e.pageX-s),c(t),e.stopPropagation(),e.preventDefault()},d=function(){a.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",r)};e.event.bind(e.scrollbarX,"mousedown",function(n){s=n.pageX,i=a.toInt(o.css(e.scrollbarX,"left"))*e.railXRatio,a.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",r),e.event.once(e.ownerDocument,"mouseup",d),n.stopPropagation(),n.preventDefault()})}function s(t,e){function n(n){var s=i+n*e.railYRatio,o=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);e.scrollbarYTop=s<0?0:s>o?o:s;var r=a.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));l(t,"top",r)}var i=null,s=null,r=function(e){n(e.pageY-s),c(t),e.stopPropagation(),e.preventDefault()},d=function(){a.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",r)};e.event.bind(e.scrollbarY,"mousedown",function(n){s=n.pageY,i=a.toInt(o.css(e.scrollbarY,"top"))*e.railYRatio,a.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",r),e.event.once(e.ownerDocument,"mouseup",d),n.stopPropagation(),n.preventDefault()})}var a=t("../../lib/helper"),o=t("../../lib/dom"),r=t("../instances"),c=t("../update-geometry"),l=t("../update-scroll");e.exports=function(t){var e=r.get(t);i(t,e),s(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";function i(t,e){function n(n,i){var s=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===s&&i>0||s>=e.contentHeight-e.containerHeight&&i<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(0===i){if(!e.scrollbarXActive)return!1;if(0===a&&n<0||a>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var i=!1;e.event.bind(t,"mouseenter",function(){i=!0}),e.event.bind(t,"mouseleave",function(){i=!1});var o=!1;e.event.bind(e.ownerDocument,"keydown",function(l){if(!(l.isDefaultPrevented&&l.isDefaultPrevented()||l.defaultPrevented)){var d=a.matches(e.scrollbarX,":focus")||a.matches(e.scrollbarY,":focus");if(i||d){var u=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(u){if("IFRAME"===u.tagName)u=u.contentDocument.activeElement;else for(;u.shadowRoot;)u=u.shadowRoot.activeElement;if(s.isEditable(u))return}var h=0,p=0;switch(l.which){case 37:h=l.metaKey?-e.contentWidth:l.altKey?-e.containerWidth:-30;break;case 38:p=l.metaKey?e.contentHeight:l.altKey?e.containerHeight:30;break;case 39:h=l.metaKey?e.contentWidth:l.altKey?e.containerWidth:30;break;case 40:p=l.metaKey?-e.contentHeight:l.altKey?-e.containerHeight:-30;break;case 33:p=90;break;case 32:p=l.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=l.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:p=l.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}c(t,"top",t.scrollTop-p),c(t,"left",t.scrollLeft+h),r(t),o=n(h,p),o&&l.preventDefault()}}})}var s=t("../../lib/helper"),a=t("../../lib/dom"),o=t("../instances"),r=t("../update-geometry"),c=t("../update-scroll");e.exports=function(t){i(t,o.get(t))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";function i(t,e){function n(n,i){var s=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===s&&i>0||s>=e.contentHeight-e.containerHeight&&i<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(0===i){if(!e.scrollbarXActive)return!1;if(0===a&&n<0||a>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function i(t){var e=t.deltaX,n=-1*t.deltaY;return void 0!==e&&void 0!==n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}function s(e,n){var i=t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(i){if(!window.getComputedStyle(i).overflow.match(/(scroll|auto)/))return!1;var s=i.scrollHeight-i.clientHeight;if(s>0&&!(0===i.scrollTop&&n>0||i.scrollTop===s&&n<0))return!0;var a=i.scrollLeft-i.clientWidth;if(a>0&&!(0===i.scrollLeft&&e<0||i.scrollLeft===a&&e>0))return!0}return!1}function r(r){var l=i(r),d=l[0],u=l[1];s(d,u)||(c=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(u?o(t,"top",t.scrollTop-u*e.settings.wheelSpeed):o(t,"top",t.scrollTop+d*e.settings.wheelSpeed),c=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(d?o(t,"left",t.scrollLeft+d*e.settings.wheelSpeed):o(t,"left",t.scrollLeft-u*e.settings.wheelSpeed),c=!0):(o(t,"top",t.scrollTop-u*e.settings.wheelSpeed),o(t,"left",t.scrollLeft+d*e.settings.wheelSpeed)),a(t),(c=c||n(d,u))&&(r.stopPropagation(),r.preventDefault()))}var c=!1;void 0!==window.onwheel?e.event.bind(t,"wheel",r):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",r)}var s=t("../instances"),a=t("../update-geometry"),o=t("../update-scroll");e.exports=function(t){i(t,s.get(t))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";function i(t,e){e.event.bind(t,"scroll",function(){a(t)})}var s=t("../instances"),a=t("../update-geometry");e.exports=function(t){i(t,s.get(t))}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";function i(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function i(){l||(l=setInterval(function(){if(!a.get(t))return void clearInterval(l);r(t,"top",t.scrollTop+d.top),r(t,"left",t.scrollLeft+d.left),o(t)},50))}function c(){l&&(clearInterval(l),l=null),s.stopScrolling(t)}var l=null,d={top:0,left:0},u=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?u=!0:(u=!1,c())}),e.event.bind(window,"mouseup",function(){u&&(u=!1,c())}),e.event.bind(window,"keyup",function(){u&&(u=!1,c())}),e.event.bind(window,"mousemove",function(e){if(u){var n={x:e.pageX,y:e.pageY},a={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<a.left+3?(d.left=-5,s.startScrolling(t,"x")):n.x>a.right-3?(d.left=5,s.startScrolling(t,"x")):d.left=0,n.y<a.top+3?(d.top=a.top+3-n.y<5?-5:-20,s.startScrolling(t,"y")):n.y>a.bottom-3?(d.top=n.y-a.bottom+3<5?5:20,s.startScrolling(t,"y")):d.top=0,0===d.top&&0===d.left?c():i()}})}var s=t("../../lib/helper"),a=t("../instances"),o=t("../update-geometry"),r=t("../update-scroll");e.exports=function(t){i(t,a.get(t))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";function i(t,e,n,i){function s(n,i){var s=t.scrollTop,a=t.scrollLeft,o=Math.abs(n),r=Math.abs(i);if(r>o){if(i<0&&s===e.contentHeight-e.containerHeight||i>0&&0===s)return!e.settings.swipePropagation}else if(o>r&&(n<0&&a===e.contentWidth-e.containerWidth||n>0&&0===a))return!e.settings.swipePropagation;return!0}function c(e,n){r(t,"top",t.scrollTop-n),r(t,"left",t.scrollLeft-e),o(t)}function l(){_=!0}function d(){_=!1}function u(t){return t.targetTouches?t.targetTouches[0]:t}function h(t){return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function p(t){if(h(t)){w=!0;var e=u(t);g.pageX=e.pageX,g.pageY=e.pageY,v=(new Date).getTime(),null!==y&&clearInterval(y),t.stopPropagation()}}function f(t){if(!w&&e.settings.swipePropagation&&p(t),!_&&w&&h(t)){var n=u(t),i={pageX:n.pageX,pageY:n.pageY},a=i.pageX-g.pageX,o=i.pageY-g.pageY;c(a,o),g=i;var r=(new Date).getTime(),l=r-v;l>0&&(b.x=a/l,b.y=o/l,v=r),s(a,o)&&(t.stopPropagation(),t.preventDefault())}}function m(){!_&&w&&(w=!1,clearInterval(y),y=setInterval(function(){return a.get(t)&&(b.x||b.y)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(y):(c(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(y)},10))}var g={},v=0,b={},y=null,_=!1,w=!1;n?(e.event.bind(window,"touchstart",l),e.event.bind(window,"touchend",d),e.event.bind(t,"touchstart",p),e.event.bind(t,"touchmove",f),e.event.bind(t,"touchend",m)):i&&(window.PointerEvent?(e.event.bind(window,"pointerdown",l),e.event.bind(window,"pointerup",d),e.event.bind(t,"pointerdown",p),e.event.bind(t,"pointermove",f),e.event.bind(t,"pointerup",m)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",l),e.event.bind(window,"MSPointerUp",d),e.event.bind(t,"MSPointerDown",p),e.event.bind(t,"MSPointerMove",f),e.event.bind(t,"MSPointerUp",m)))}var s=t("../../lib/helper"),a=t("../instances"),o=t("../update-geometry"),r=t("../update-scroll");e.exports=function(t){if(s.env.supportsTouch||s.env.supportsIePointer){i(t,a.get(t),s.env.supportsTouch,s.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var i=t("../lib/helper"),s=t("../lib/class"),a=t("./instances"),o=t("./update-geometry"),r={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},c=t("./handler/native-scroll");e.exports=function(t,e){e="object"==typeof e?e:{},s.add(t,"ps-container");var n=a.add(t);n.settings=i.extend(n.settings,e),s.add(t,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(e){r[e](t)}),c(t),o(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function i(t){function e(){c.add(t,"ps-focus")}function n(){c.remove(t,"ps-focus")}var i=this;i.settings=r.clone(l),i.containerWidth=null,i.containerHeight=null,i.contentWidth=null,i.contentHeight=null,i.isRtl="rtl"===d.css(t,"direction"),i.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),i.negativeScrollAdjustment=i.isNegativeScroll?t.scrollWidth-t.clientWidth:0,i.event=new u,i.ownerDocument=t.ownerDocument||document,i.scrollbarXRail=d.appendTo(d.e("div","ps-scrollbar-x-rail"),t),i.scrollbarX=d.appendTo(d.e("div","ps-scrollbar-x"),i.scrollbarXRail),i.scrollbarX.setAttribute("tabindex",0),i.event.bind(i.scrollbarX,"focus",e),i.event.bind(i.scrollbarX,"blur",n),i.scrollbarXActive=null,i.scrollbarXWidth=null,i.scrollbarXLeft=null,i.scrollbarXBottom=r.toInt(d.css(i.scrollbarXRail,"bottom")),i.isScrollbarXUsingBottom=i.scrollbarXBottom===i.scrollbarXBottom,i.scrollbarXTop=i.isScrollbarXUsingBottom?null:r.toInt(d.css(i.scrollbarXRail,"top")),i.railBorderXWidth=r.toInt(d.css(i.scrollbarXRail,"borderLeftWidth"))+r.toInt(d.css(i.scrollbarXRail,"borderRightWidth")),d.css(i.scrollbarXRail,"display","block"),i.railXMarginWidth=r.toInt(d.css(i.scrollbarXRail,"marginLeft"))+r.toInt(d.css(i.scrollbarXRail,"marginRight")),d.css(i.scrollbarXRail,"display",""),i.railXWidth=null,i.railXRatio=null,i.scrollbarYRail=d.appendTo(d.e("div","ps-scrollbar-y-rail"),t),i.scrollbarY=d.appendTo(d.e("div","ps-scrollbar-y"),i.scrollbarYRail),i.scrollbarY.setAttribute("tabindex",0),i.event.bind(i.scrollbarY,"focus",e),i.event.bind(i.scrollbarY,"blur",n),i.scrollbarYActive=null,i.scrollbarYHeight=null,i.scrollbarYTop=null,i.scrollbarYRight=r.toInt(d.css(i.scrollbarYRail,"right")),i.isScrollbarYUsingRight=i.scrollbarYRight===i.scrollbarYRight,i.scrollbarYLeft=i.isScrollbarYUsingRight?null:r.toInt(d.css(i.scrollbarYRail,"left")),i.scrollbarYOuterWidth=i.isRtl?r.outerWidth(i.scrollbarY):null,i.railBorderYWidth=r.toInt(d.css(i.scrollbarYRail,"borderTopWidth"))+r.toInt(d.css(i.scrollbarYRail,"borderBottomWidth")),d.css(i.scrollbarYRail,"display","block"),i.railYMarginHeight=r.toInt(d.css(i.scrollbarYRail,"marginTop"))+r.toInt(d.css(i.scrollbarYRail,"marginBottom")),d.css(i.scrollbarYRail,"display",""),i.railYHeight=null,i.railYRatio=null}function s(t){return t.getAttribute("data-ps-id")}function a(t,e){t.setAttribute("data-ps-id",e)}function o(t){t.removeAttribute("data-ps-id")}var r=t("../lib/helper"),c=t("../lib/class"),l=t("./default-setting"),d=t("../lib/dom"),u=t("../lib/event-manager"),h=t("../lib/guid"),p={};n.add=function(t){var e=h();return a(t,e),p[e]=new i(t),p[e]},n.remove=function(t){delete p[s(t)],o(t)},n.get=function(t){return p[s(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";function i(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function s(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,r.css(e.scrollbarXRail,n);var i={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?i.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:i.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:i.left=e.scrollbarYLeft+t.scrollLeft,r.css(e.scrollbarYRail,i),r.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),r.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var a=t("../lib/helper"),o=t("../lib/class"),r=t("../lib/dom"),c=t("./instances"),l=t("./update-scroll");e.exports=function(t){var e=c.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=r.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){r.remove(t)}),r.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=r.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){r.remove(t)}),r.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=i(e,a.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=a.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=i(e,a.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=a.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),s(t,e),e.scrollbarXActive?o.add(t,"ps-active-x"):(o.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,l(t,"left",0)),e.scrollbarYActive?o.add(t,"ps-active-y"):(o.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,l(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var i,s,a=t("./instances"),o=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e};e.exports=function(t,e,n){if(void 0===t)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(o("ps-y-reach-start"))),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(o("ps-x-reach-start")));var r=a.get(t);"top"===e&&n>=r.contentHeight-r.containerHeight&&(n=r.contentHeight-r.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(o("ps-y-reach-end"))),"left"===e&&n>=r.contentWidth-r.containerWidth&&(n=r.contentWidth-r.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(o("ps-x-reach-end"))),i||(i=t.scrollTop),s||(s=t.scrollLeft),"top"===e&&n<i&&t.dispatchEvent(o("ps-scroll-up")),"top"===e&&n>i&&t.dispatchEvent(o("ps-scroll-down")),"left"===e&&n<s&&t.dispatchEvent(o("ps-scroll-left")),"left"===e&&n>s&&t.dispatchEvent(o("ps-scroll-right")),"top"===e&&(t.scrollTop=i=n,t.dispatchEvent(o("ps-scroll-y"))),"left"===e&&(t.scrollLeft=s=n,t.dispatchEvent(o("ps-scroll-x")))}},{"./instances":18}],21:[function(t,e,n){"use strict";var i=t("../lib/helper"),s=t("../lib/dom"),a=t("./instances"),o=t("./update-geometry"),r=t("./update-scroll");e.exports=function(t){var e=a.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,s.css(e.scrollbarXRail,"display","block"),s.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=i.toInt(s.css(e.scrollbarXRail,"marginLeft"))+i.toInt(s.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=i.toInt(s.css(e.scrollbarYRail,"marginTop"))+i.toInt(s.css(e.scrollbarYRail,"marginBottom")),s.css(e.scrollbarXRail,"display","none"),s.css(e.scrollbarYRail,"display","none"),o(t),r(t,"top",t.scrollTop),r(t,"left",t.scrollLeft),s.css(e.scrollbarXRail,"display",""),s.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),define("xabber-dependencies",["backbone","underscore","jquery","moment","strophe","strophe.disco","strophe.ping","strophe.rsm","strophe.caps","backbone.localsync","materialize","perfectScrollbarJQuery"],function(t,e,n,i,s){return e.extend({$:n,_:e,moment:i,Strophe:s},s)});var constants={DEBUG:!1,STORAGE_NAME:"xabber-storage",STORAGE_VERSION:"v8",FAVICON_DEFAULT:"images/favicon.png",FAVICON_MESSAGE:"images/favicon-message.png",WIDTH_MEDIUM:1420,WIDTH_NARROW:1280,WIDTH_TINY:1152,LOG_LEVEL_NONE:-1,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL:"ERROR",KEY_BACKSPACE:8,KEY_TAB:9,KEY_ENTER:13,KEY_ESCAPE:27,KEY_ARROW_LEFT:37,KEY_ARROW_UP:38,KEY_ARROW_RIGHT:39,KEY_ARROW_DOWN:40,KEY_DELETE:46,KEY_FORWARD_SLASH:47,PASSWORD_DOT:String.fromCharCode(8226),CONNECTION_URL:null,CONN_STATUSES:{0:"ERROR",1:"CONNECTING",2:"CONNFAIL",3:"AUTHENTICATING",4:"AUTHFAIL",5:"CONNECTED",6:"DISCONNECTED",7:"DISCONNECTING",8:"ATTACHED",9:"REDIRECT",10:"CONNTIMEOUT"},BAD_CONN_STATUSES:[0,2,4,6,10],RECONNECTION_TIMEOUTS:[3e3,1e4,15e3],STATUSES:{chat:"Ready for chat",online:"Online",away:"Away",xa:"Away for long time",dnd:"Busy",offline:"Offline",unavailable:"Unavailable"},STATUS_WEIGHTS:{chat:1,online:2,away:3,xa:4,dnd:5,offline:6,unavailable:7},CHATSTATE_TIMEOUT_PAUSED:5e3,CHATSTATE_TIMEOUT_STOPPED:5e3,MSG_ERROR:-1,MSG_PENDING:0,MSG_SENT:1,MSG_DISPLAYED:2,RSM_ATTRIBUTES:["max","first","last","after","before","index","count"],MAM_ATTRIBUTES:["with","start","end"],GENERAL_GROUP_ID:1,NON_ROSTER_GROUP_ID:2,ACCOUNT_COLORS:["red","green","blue","deep-purple","orange","lime","pink","purple","indigo","light-blue","cyan","teal","light-green","amber","deep-orange","brown","blue-grey"],MAX_AVATAR_FILE_SIZE:2e7,AVATAR_SIZES:{TOOLBAR_ACCOUNT_ITEM:32,SETTINGS_ACCOUNT_ITEM:32,SYNCHRONIZE_ACCOUNT_ITEM:36,XABBER_ACCOUNT:32,ACCOUNT_SETTINGS_LEFT:96,ACCOUNT_VCARD_EDIT:80,ROSTER_RIGHT_ACCOUNT_ITEM:38,ROSTER_LEFT_ACCOUNT_ITEM:40,CONTACT_RIGHT_ITEM:32,CONTACT_LEFT_ITEM:32,CONTACT_BLOCKED_ITEM:32,CONTACT_DETAILS:96,GROUP_SETTINGS:96,CHAT_ITEM:40,CHAT_HEAD:40,CHAT_MESSAGE:32,CHAT_BOTTOM:48},SOUNDS:{beep_up:"sounds/beep_up.ogg",tiny_noize:"sounds/tiny_noize.ogg",retro_game:"sounds/retro_game.ogg",pixel_beep:"sounds/pixel_beep.ogg",beep_positive:"sounds/beep_positive.ogg",good_chime:"sounds/good_chime.ogg",cellular_click:"sounds/cellular_click.ogg",bleep:"sounds/bleep.ogg",mono_u:"sounds/mono_u.ogg",plop:"sounds/plop.ogg",ether:"sounds/ether.ogg",pop:"sounds/pop.ogg",computer_chime:"sounds/computer_chime.ogg",beep_a:"sounds/beep_a.ogg"},SYNC_WAY_DATA:{no:{tip:"Settings are already synchronized",icon:"mdi-cloud-check"},from_server:{tip:"Settings will be downloaded from the cloud",icon:"mdi-cloud-download"},to_server:{tip:"Local settings will be uploaded to cloud",icon:"mdi-cloud-upload"},delete:{tip:"Local account will be deleted",icon:"mdi-delete"},off_local:{tip:"Local account",icon:"mdi-cloud-outline-off"},off_remote:{tip:"Remote account",icon:"mdi-cloud-outline-off"}},SYNCED_STATUS_DATA:{off:{tip:"Synchronization disabled",icon:"mdi-cloud-outline-off"},yes:{tip:"Settings are synchronized",icon:"mdi-cloud-check"},no:{tip:"Settings are not synchronized with cloud",icon:"mdi-cloud"}},XABBER_ACCOUNT_URL:"https://www.xabber.com/account",API_SERVICE_URL:"https://api.xabber.com/api/v1",USE_SOCIAL_AUTH:!0,DEFAULT_LOGIN_SCREEN:"xabber",GCM_SENDER_ID:"868637702480",GCM_API_KEY:"AIzaSyC1JCBB3LLf_4DG_vRWMEEe0I4X5msEU-M"};constants.MSG_STATE={},constants.MSG_STATE[constants.MSG_ERROR]="error",constants.MSG_STATE[constants.MSG_PENDING]="pending",constants.MSG_STATE[constants.MSG_SENT]="sent",constants.MSG_STATE[constants.MSG_DISPLAYED]="displayed",constants.MSG_VERBOSE_STATE={},constants.MSG_VERBOSE_STATE[constants.MSG_ERROR]="Message error",constants.MSG_VERBOSE_STATE[constants.MSG_PENDING]="Message not sent",constants.MSG_VERBOSE_STATE[constants.MSG_SENT]="Message sent",constants.MSG_VERBOSE_STATE[constants.MSG_DISPLAYED]="Message delivered to user","function"==typeof define&&define("xabber-constants",[],function(){return constants}),define("text",["module"],function(t){"use strict";function e(t,e){return void 0===t||""===t?e:t}function n(t,n,i,s){if(n===s)return!0;if(t===i){if("http"===t)return e(n,"80")===e(s,"80");if("https"===t)return e(n,"443")===e(s,"443")}return!1}var i,s,a,o,r,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,h=u&&location.protocol&&location.protocol.replace(/\:/,""),p=u&&location.hostname,f=u&&(location.port||void 0),m={},g=t.config&&t.config()||{};return i={version:"2.0.15",strip:function(t){if(t){t=t.replace(l,"");var e=t.match(d);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=c[e];try{t=new ActiveXObject(n)}catch(t){}if(t){c=[n];break}}return t},parseName:function(t){var e,n,i,s=!1,a=t.lastIndexOf("."),o=0===t.indexOf("./")||0===t.indexOf("../");return-1!==a&&(!o||a>1)?(e=t.substring(0,a),n=t.substring(a+1)):e=t,i=n||e,a=i.indexOf("!"),-1!==a&&(s="strip"===i.substring(a+1),i=i.substring(0,a),n?n=i:e=i),{moduleName:e,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,s,a){var o,r,c,l=i.xdRegExp.exec(t);return!l||(o=l[2],r=l[3],r=r.split(":"),c=r[1],r=r[0],(!o||o===e)&&(!r||r.toLowerCase()===s.toLowerCase())&&(!c&&!r||n(o,c,e,a)))},finishLoad:function(t,e,n,s){n=e?i.strip(n):n,g.isBuild&&(m[t]=n),s(n)},load:function(t,e,n,s){if(s&&s.isBuild&&!s.inlineText)return void n();g.isBuild=s&&s.isBuild;var a=i.parseName(t),o=a.moduleName+(a.ext?"."+a.ext:""),r=e.toUrl(o),c=g.useXhr||i.useXhr;if(0===r.indexOf("empty:"))return void n();!u||c(r,h,p,f)?i.get(r,function(e){i.finishLoad(t,a.strip,e,n)},function(t){n.error&&n.error(t)}):e([o],function(t){i.finishLoad(a.moduleName+"."+a.ext,a.strip,t,n)})},write:function(t,e,n,s){if(m.hasOwnProperty(e)){var a=i.jsEscape(m[e]);n.asModule(t+"!"+e,"define(function () { return '"+a+"';});\n")}},writeFile:function(t,e,n,s,a){var o=i.parseName(e),r=o.ext?"."+o.ext:"",c=o.moduleName+r,l=n.toUrl(o.moduleName+r)+".js";i.load(c,n,function(e){var n=function(t){return s(l,t)};n.asModule=function(t,e){return s.asModule(t,l,e)},i.write(t,c,n,a)},a)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(s=require.nodeRequire("fs"),i.get=function(t,e,n){try{var i=s.readFileSync(t,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),e(i)}catch(t){n&&n(t)}}):"xhr"===g.env||!g.env&&i.createXhr()?i.get=function(t,e,n,s){var a,o=i.createXhr();if(o.open("GET",t,!0),s)for(a in s)s.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),s[a]);g.onXhr&&g.onXhr(o,t),o.onreadystatechange=function(i){var s,a;4===o.readyState&&(s=o.status||0,s>399&&s<600?(a=new Error(t+" HTTP status: "+s),a.xhr=o,n&&n(a)):e(o.responseText),g.onXhrComplete&&g.onXhrComplete(o,t))},o.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(t,e){var n,i,s=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),"utf-8")),r="";try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(a),n.append(i);r=String(n.toString())}finally{o.close()}e(r)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in a,i.get=function(t,e){var n,i,s,c={};r&&(t=t.replace(/\//g,"\\")),s=new FileUtils.File(t);try{n=a["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(s,1,0,!1),i=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),i.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),c),i.close(),n.close(),e(c.value)}catch(t){throw new Error((s&&s.path||"")+": "+t)}}),i}),define("text!templates/base/dialog.html",[],function(){return'<div class="modal dialog-modal">\n    <div class="modal-header">\n        <div class="panel-header black-text">{{header}}</div>\n    </div>\n    <div class="modal-content">\n        <div class="dialog-text">{{text}}</div>\n        <div class="dialog-options-wrap">\n        {[ for (var idx in dialog_options) { var option = dialog_options[idx]; ]}\n            <div class="dialog-option" data-name="{{option.name}}">\n                <input type="checkbox" class="filled-in" id="dialog_option_{{option.name}}" {[ if (option.checked) { ]}checked="checked"{[ } ]}/>\n                <label for="dialog_option_{{option.name}}">{{option.text}}</label>\n            </div>\n        {[ } ]}\n        </div>\n    </div>\n    <div class="modal-footer">\n        {[ if (ok_button) { ]}\n        <button class="ok-button btn-flat btn-main" data-option=true>{{ok_button.text}}</button>\n        {[ } ]}\n        {[ if (cancel_button) { ]}\n        <button class="cancel-button btn-flat btn-main btn-dark btn-cancel" data-option=false>{{cancel_button.text}}</button>\n        {[ } ]}\n        {[ for (var idx in optional_buttons) { var button = optional_buttons[idx]; ]}\n        <button class="optional-button btn-flat btn-main btn-dark" data-option="{{button.value}}">{{button.name}}</button>\n        {[ } ]}\n    </div>\n</div>\n'}),define("text!templates/base/input_widget.html",[],function(){return'<div class="input-widget-wrap {{field_name}}-wrap">\n    <div class="{{field_name}} field-text one-line"></div>\n    <div class="{{field_name}}-input-wrap">\n        <input class="{{field_name}}-input field-input hidden" type="{{field_type}}" placeholder="{{placeholder}}">\n    </div>\n</div>\n'}),define("text!templates/base/toolbar.html",[],function(){return'<div class="toolbar-item all-chats" title="All chats">\n    <div class="border"></div>\n    <img class="logo" src="images/xabber-logo.png">\n</div>\n\n<div class="toolbar-item chats active" title="Chats">\n    <div class="border"></div>\n    <i class="toolbar-icon mdi mdi-24px mdi-message-text"></i>\n    <span class="msg-indicator"></span>\n</div>\n\n<div class="toolbar-item group-chats" title="Group chats">\n    <div class="border"></div>\n    <svg class="toolbar-icon mdi mdi-24px mdi-svg-template" data-svgname="message-group"></svg>\n</div>\n\n<div class="toolbar-item contacts" title="Contacts">\n    <div class="border"></div>\n    <i class="toolbar-icon mdi mdi-24px mdi-account-multiple"></i>\n</div>\n\n<div class="toolbar-item settings" title="Settings">\n    <div class="border"></div>\n    <i class="toolbar-icon mdi mdi-24px mdi-settings"></i>\n</div>\n\n<div class="add-something-wrap">\n    <div class="toolbar-item dropdown-button add-something" data-activates="{{view.cid}}-add" title="Add contact or account">\n        <i class="toolbar-icon mdi mdi-24px mdi-plus"></i>\n    </div>\n\n    <div id="{{view.cid}}-add" class="add-variants dropdown-content noselect">\n        <div class="add-variant contact">\n            <i class="mdi mdi-20px mdi-account-plus"></i>\n            <span class="text">Add contact</span>\n        </div>\n        <div class="add-variant account">\n            <i class="mdi mdi-20px mdi-account-circle"></i>\n            <span class="text">Add account</span>\n        </div>\n    </div>\n</div>\n\n<div class="divider noselect"></div>\n\n<div class="accounts-wrap">\n    <div class="accounts">\n    </div>\n</div>\n\n<div class="toolbar-bottom">\n    <div class="toolbar-item about" title="About">\n        <div class="border"></div>\n        <i class="toolbar-icon mdi mdi-24px mdi-information"></i>\n    </div>\n</div>\n'}),define("text!templates/base/settings.html",[],function(){
return'    <div class="left-column noselect">\n        <div class="main-info-wrap xabber-info-wrap">\n            <div class="picture-wrap">\n                <img class="logo" src="images/xabber-logo-76.png"/>\n            </div>\n            <div class="name">Xabber.Web</div>\n            <div class="version"></div>\n        </div>\n        <div class="settings-tabs-wrap">\n            <div class="settings-tab xabber-account-tab offline" data-block-name="xabber-account">\n                <svg class="mdi mdi-24px mdi-svg-template xabber-offline-icon" data-svgname="xabber-offline"></svg>\n                <svg class="mdi mdi-24px mdi-svg-template xabber-online-icon" data-svgname="xabber-online"></svg>\n                <div class="settings-block-name one-line">Xabber Account</div>\n            </div>\n            <div class="settings-tab" data-block-name="xmpp-accounts">\n                <i class="mdi mdi-24px mdi-settings"/>\n                <div class="settings-block-name one-line">XMPP Accounts</div>\n            </div>\n            <div class="settings-tab" data-block-name="keyboard">\n                <i class="mdi mdi-24px mdi-keyboard"></i>\n                <div class="settings-block-name one-line">Keyboard</div>\n            </div>\n            <div class="settings-tab" data-block-name="contact-list">\n                <i class="mdi mdi-24px mdi-account-multiple"></i>\n                <div class="settings-block-name one-line">Contact list</div>\n            </div>\n            <div class="settings-tab" data-block-name="notifications">\n                <i class="mdi mdi-24px mdi-bell"></i>\n                <div class="settings-block-name one-line">Notifications</div>\n            </div>\n            <div class="settings-tab" data-block-name="sounds">\n                <i class="mdi mdi-24px mdi-volume-high"></i>\n                <div class="settings-block-name one-line">Sounds</div>\n            </div>\n        </div>\n        <div class="settings-tabs-bottom-wrap">\n            <div class="settings-tab delete-all-accounts">\n                <i class="mdi mdi-24px mdi-logout-variant"></i>\n                <div class="settings-block-name">Quit Xabber Web</div>\n            </div>\n        </div>\n    </div>\n\n    <div class="right-column noselect">\n        <div class="settings-panel-head">\n            <span>Settings</span>\n        </div>\n\n        <div class="panel-content-wrap">\n            <div class="panel-content">\n                <div class="settings-block-wrap xabber-account">\n                    <div class="block-header">\n                        <span class="block-name">Xabber account</span>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap xmpp-accounts">\n                    <div class="block-header">\n                        <span class="block-name">XMPP accounts</span>\n                    </div>\n                    <div class="setting xmpp-account-list">\n                        <div class="accounts-head-wrap">\n                            <div class="accounts-head xmppid-head">XMPP ID</div>\n                            <div class="accounts-head sync-head">Sync</div>\n                            <div class="accounts-head enabled-head">Enabled</div>\n                        </div>\n                        <span class="no-accounts-tip">No accounts</span>\n                        <div class="move-account-to-bottom droppable"></div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap keyboard">\n                    <div class="block-header">\n                        <span class="block-name">Keyboard</span>\n                    </div>\n\n                    <div class="setting hotkeys radio-button field-wrap">\n                        <div class="field radio-field clickable-field">\n                            <form action="#">\n                                <p>\n                                    <input class="with-gap" name="hotkeys" value="enter" type="radio" id="{{view.cid}}-enter" />\n                                    <label for="{{view.cid}}-enter">Send message on Enter</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="hotkeys" value="ctrlenter" type="radio" id="{{view.cid}}-ctrlenter" />\n                                    <label for="{{view.cid}}-ctrlenter">Send message on Ctrl+Enter</label>\n                                </p>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap contact-list">\n                    <div class="block-header">\n                        <span class="block-name">Contact list</span>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap notifications">\n                    <div class="block-header">\n                        <span class="block-name">Notifications</span>\n                    </div>\n\n                    <div class="setting notifications field-wrap">\n                        <div class="field clickable-field switch small">\n                            <span class="field-name">Desktop notifications</span>\n                            <label class="field-value">\n                                <input type="checkbox" name="notifications">\n                                <span class="lever"></span>\n                            </label>\n                        </div>\n                    </div>\n                    <div class="setting message-preview field-wrap">\n                        <div class="field clickable-field switch small">\n                            <span class="field-name">Message preview</span>\n                            <label class="field-value">\n                                <input type="checkbox" name="message-preview">\n                                <span class="lever"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap sounds">\n                    <div class="block-header">\n                        <span class="block-name">Sounds</span>\n                    </div>\n                    <div class="setting sound radio-button field-wrap">\n                        <div class="field radio-field clickable-field">\n                            <form action="#">\n                                <p>\n                                    <input class="with-gap" name="sound" value="" type="radio" id="{{view.cid}}-sound-no" />\n                                    <label for="{{view.cid}}-sound-no">No sound</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="beep_up" type="radio" id="{{view.cid}}-sound-beep-up" />\n                                    <label for="{{view.cid}}-sound-beep-up">Beep Up</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="tiny_noize" type="radio" id="{{view.cid}}-sound-tiny-noize" />\n                                    <label for="{{view.cid}}-sound-tiny-noize">Tiny Noize</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="retro_game" type="radio" id="{{view.cid}}-sound-retro-game" />\n                                    <label for="{{view.cid}}-sound-retro-game">Retro Game</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="pixel_beep" type="radio" id="{{view.cid}}-sound-pixel-beep" />\n                                    <label for="{{view.cid}}-sound-pixel-beep">Pixel Beep</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="beep_positive" type="radio" id="{{view.cid}}-sound-beep-positive" />\n                                    <label for="{{view.cid}}-sound-beep-positive">Beep Positive</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="good_chime" type="radio" id="{{view.cid}}-sound-good-chime" />\n                                    <label for="{{view.cid}}-sound-good-chime">Good Chime</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="cellular_click" type="radio" id="{{view.cid}}-sound-cellular-click" />\n                                    <label for="{{view.cid}}-sound-cellular-click">Cellular Click</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="bleep" type="radio" id="{{view.cid}}-sound-bleep" />\n                                    <label for="{{view.cid}}-sound-bleep">Bleep</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="mono_u" type="radio" id="{{view.cid}}-sound-mono-u" />\n                                    <label for="{{view.cid}}-sound-mono-u">Mono U</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="plop" type="radio" id="{{view.cid}}-sound-plop" />\n                                    <label for="{{view.cid}}-sound-plop">Plop</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="ether" type="radio" id="{{view.cid}}-sound-ether" />\n                                    <label for="{{view.cid}}-sound-ether">Ether</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="pop" type="radio" id="{{view.cid}}-sound-pop" />\n                                    <label for="{{view.cid}}-sound-pop">Pop</label>\n                                </p>\n                                <p>\n                                    <input class="with-gap" name="sound" value="computer_chime" type="radio" id="{{view.cid}}-sound-computer-chime" />\n                                    <label for="{{view.cid}}-sound-computer-chime">Computer Chime</label>\n                                </p>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n'}),define("text!templates/base/about.html",[],function(){return'    <div class="left-column noselect">\n        <div class="main-info-wrap xabber-info-wrap">\n            <div class="picture-wrap">\n                <img class="logo" src="images/xabber-logo-76.png"/>\n            </div>\n            <div class="name">Xabber.Web</div>\n            <div class="version"></div>\n        </div>\n    </div>\n\n    <div class="right-column noselect">\n        <div class="settings-panel-head">\n            <span>About</span>\n        </div>\n\n        <div class="panel-content-wrap">\n            <div class="panel-content">\n                <div class="settings-block-wrap about">\n                    <div class="block-content">\n                        Xabber for Web is an open-source XMPP messenger built to work in any modern browser on any operating system. Like Xabber for Android, It is built around open standards, interoperability, design and user experience. Both versions are built to provide a continuous chat experience between platforms.\n                    </div>\n                    <div class="block-content">\n                        You will find more information on our official website <a href="https://www.xabber.com" target="_blank">https://www.xabber.com</a>\n                    </div>\n                    <div class="block-header">\n                        <span class="block-name">XMPP protocol</span>\n                    </div>\n                    <div class="block-content">\n                        Extensible Messaging and Presence Protocol (XMPP) is a communications protocol for message-oriented middleware based on XML (Extensible Markup Language). It enables the near-real-time exchange of structured yet extensible data between any two or more network entities. The protocol was originally named Jabber, and was developed by the Jabber open-source community in 1999 for near real-time instant messaging (IM),presence information, and contact list maintenance.\n                    </div>\n\n                    <div class="block-header">\n                        <span class="block-name">XMPP Extension Protocols</span>\n                    </div>\n                    <div class="block-content">\n                        XMPP is highly extensible, via extensions known as XEPs (XMPP Extension Protocol). Xabber supports a number of popular XEPs that are essential to providing great chat experience for our users.\n                    </div>\n\n                    <div class="block-header">\n                        <span class="block-name">Developers</span>\n                    </div>\n                    <div class="block-content">\n                        Xabber for Android was originally developed by <a href="http://redsolution.com" target="_blank">Redsolution, Inc.</a> — an international software and services company based in Russia and United States. Xabber was licensed under GNU GPL v.3 license early in 2013. Since then, a number of individuals joined Xabber as developers, testers and translators.\n                    </div>\n                    <div class="block-content">\n                        Xabber for Web was released in August 2017 under GNU AGPL v.3 license.\n                    </div>\n                    <div class="block-content">\n                        Our goal is to create a stable, reliable and user friendly ecosystem for instant messaging that does not rely on proprietary services. We welcome anyone who believes in open standards and free information interchange to take part in moving Xabber forward.\n                    </div>\n                    <div class="block-content">\n                        Follow us on <a href="https://twitter.com/Xabber_XMPP" target="_blank">Twitter</a> and <a href="https://github.com/redsolution/xabber-web" target="_blank">Github</a>.\n                    </div>\n\n                    <div class="block-header">\n                        <span class="block-name">License</span>\n                    </div>\n                    <div class="block-content">\n                        Xabber for Web source code is licensed under GNU AGPL v.3 license and is available on GitHub.\n                    </div>\n                    <div class="block-content">\n                        Graphical images are licensed under Creative Commons Attribution Share-Alike (CC BY-SA) license.\n                    </div>\n                    <div class="block-content">\n                        Xabber & Redsolution logo are property of Redsolution, Inc.\n                    </div>\n                    <div class="block-content">\n                        View Xabber for Web <a href="https://github.com/redsolution/xabber-web/blob/master/LICENSE" target="_blank">license file</a> for more information.\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'}),define("text!templates/api_service/xabber_login.html",[],function(){return'<div class="login-panel">\n    <div class="login-panel-head noselect">\n        <img src="images/xabber-logo.png" class="client-logo">\n        <span class="client-name">Xabber Web</span>\n        <span class="login-type">XMPP Login</span>\n    </div>\n    <div class="login-panel-form xmpp-login-form noselect">\n        <div class="login-form-header">Xabber Login</div>\n        <div class="input-field">\n            <input id="username" type="text" name="username">\n            <label for="username">Xabber username or email</label>\n            <span class="errors fixed one-line"></span>\n        </div>\n        <div class="input-field">\n            <input id="password" type="password" name="password">\n            <label for="password">Password</label>\n            <span class="errors fixed one-line"></span>\n        </div>\n        <div class="input-field buttons-wrap">\n            <a href="{{XABBER_ACCOUNT_URL}}/auth/forgot-password/" target="_blank" class="btn-flat btn-main btn-forgot-password">Forgot password?</a>\n            <button class="btn btn-flat btn-main-filled btn-log-in">Log In</button>\n        </div>\n        <div class="clearfix"></div>\n        {[ if (USE_SOCIAL_AUTH) { ]}\n        <div class="social-auth-wrap">\n            <div class="social-header">\n                <div class="divider"></div>\n                <div class="social-header-tip">Social Sign In</div>\n            </div>\n            <div class="social-buttons">\n                <div class="btn-social google-color" data-provider="google">\n                    <i class="mdi mdi-28px mdi-google-plus"></i>\n                </div>\n                <div class="btn-social facebook-color" data-provider="facebook">\n                    <i class="mdi mdi-28px mdi-facebook"></i>\n                </div>\n                <div class="btn-social twitter-color" data-provider="twitter">\n                    <i class="mdi mdi-28px mdi-twitter"></i>\n                </div>\n                <div class="btn-social github-color" data-provider="github">\n                    <i class="mdi mdi-28px mdi-github-circle"></i>\n                </div>\n            </div>\n        </div>\n        {[ } ]}\n    </div>\n    <div class="login-panel-footer">\n        <div class="registration-footer">\n            <div class="registration-tip-wrap">\n                <span class="registration-tip">No Xabber account?</span>\n                <a href="{{XABBER_ACCOUNT_URL}}/auth/signup/?source=Xabber Web" target="_blank" class="btn-flat btn-main btn-registration">Registration</a>\n            </div>\n        </div>\n        <div class="footer-text clearfix">Xabber account lets you easily sync your settings and connected XMPP accounts between various devices. Visit Xabber.com for more details.</div>\n    </div>\n</div>\n'}),define("text!templates/api_service/xabber_account.html",[],function(){return'<div class="xabber-account-content-wrap">\n    <div class="account-info-wrap">\n        <div class="circle-avatar noselect">\n            <img>\n        </div>\n        <div class="text-info-wrap">\n            <div class="name-wrap">\n                <div class="name text-color-red-700 one-line"></div>\n            </div>\n        </div>\n    </div>\n    <div class="sync-wrap">\n        <div class="btn-sync">\n            <div class="button">\n                <i class="mdi mdi-20px mdi-sync"></i>\n            </div>\n            <div class="preloader-wrapper preloader-20px active">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="last-sync-info"></div>\n    </div>\n    <div class="buttons-wrap">\n        <button class="btn-flat btn-main btn-login">Log in</button>\n        <button class="btn-flat btn-main btn-logout">Log out</button>\n    </div>\n</div>\n<div class="xabber-account-tip">Xabber account lets you easily sync your settings and connected XMPP accounts between various devices.</div>\n'}),define("text!templates/api_service/add_xabber_account.html",[],function(){return'<div class="modal main-modal add-xabber-account-modal">\n\n<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>Xabber Login</span>\n    </div>\n    <div class="modal-content">\n        <div class="row login-form-field">\n            <div class="input-field">\n                <input id="username" type="text" name="username">\n                <label for="username">Xabber username or email</label>\n                <span class="errors fixed"></span>\n            </div>\n            <div class="input-field">\n                <input id="password" type="password" name="password">\n                <label for="password">Password</label>\n                <span class="errors fixed"></span>\n            </div>\n        </div>\n        {[ if (USE_SOCIAL_AUTH) { ]}\n        <div class="row social-auth-wrap">\n            <div class="social-header">\n                <div class="divider"></div>\n                <div class="social-header-tip">Social Sign In</div>\n            </div>\n            <div class="social-buttons">\n                <div class="btn-social google-color" data-provider="google">\n                    <i class="mdi mdi-28px mdi-google-plus"></i>\n                </div>\n                <div class="btn-social facebook-color" data-provider="facebook">\n                    <i class="mdi mdi-28px mdi-facebook"></i>\n                </div>\n                <div class="btn-social twitter-color" data-provider="twitter">\n                    <i class="mdi mdi-28px mdi-twitter"></i>\n                </div>\n                <div class="btn-social github-color" data-provider="github">\n                    <i class="mdi mdi-28px mdi-github-circle"></i>\n                </div>\n            </div>\n        </div>\n        {[ } ]}\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-add">Log in</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n\n</div>\n\n    <div class="login-panel-footer">\n        <div class="registration-footer">\n            <div class="registration-tip-wrap">\n                <span class="registration-tip">No Xabber account?</span>\n                <a href="{{XABBER_ACCOUNT_URL}}/auth/signup/" target="_blank" class="btn-flat btn-main btn-registration">Registration</a>\n            </div>\n        </div>\n        <div class="footer-text clearfix">Xabber account lets you easily sync your settings and connected XMPP accounts between various devices. Visit Xabber.com for more details.</div>\n    </div>\n'}),define("text!templates/api_service/sync_settings.html",[],function(){return'<div class="modal-content-wrap settings-panel">\n    <div class="modal-header">\n        <span>Synchronization</span>\n    </div>\n    <div class="modal-content">\n        <div class="row">\n            <div class="setting sync-all-wrap field-wrap">\n                <div class="field clickable-field switch normal">\n                    <span class="field-name">Synchronize all</span>\n                    <label class="field-value">\n                       <input type="checkbox" class="sync-all">\n                       <span class="lever"></span>\n                    </label>\n                </div>\n            </div>\n            <div class="accounts-wrap">\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-sync">Synchronize</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n'}),define("text!templates/api_service/sync_settings_account_item.html",[],function(){return'<div class="account-wrap" data-jid="{{jid}}">\n    <div class="account-info-wrap">\n        <i class="sync-icon mdi mdi-24px" data-mdiclass=""></i>\n        <div class="text-info-wrap">\n            <div class="name text-color-grey-900 one-line">{{jid}}</div>\n            <div class="sync-tip text-color-grey-500 one-line"></div>\n        </div>\n    </div>\n    <div class="input-field checkbox-field sync-one-wrap no-padding">\n        <input type="checkbox" class="filled-in sync-one" id="{{view.cid}}_sync_{{jid}}"/>\n        <label for="{{view.cid}}_sync_{{jid}}"></label>\n    </div>\n</div>\n'}),define("text!templates/accounts/xmpp_login.html",[],function(){return'    <div class="login-panel-head noselect">\n        <img src="images/xabber-logo.png" class="client-logo">\n        <span class="client-name">Xabber Web</span>\n        <span class="login-type">Xabber Login</span>\n    </div>\n    <div class="login-panel-form xmpp-login-form noselect">\n        <div class="login-form-header">XMPP Login</div>\n        <div class="input-field">\n            <input id="jid" type="text" name="jid">\n            <label for="jid">XMPP Id</label>\n            <span class="errors fixed one-line"></span>\n        </div>\n        <div class="input-field">\n            <input id="password" type="password" name="password">\n            <label for="password">Password</label>\n            <span class="errors fixed one-line"></span>\n        </div>\n        <div class="input-field buttons-wrap">\n            <button class="btn btn-flat btn-main-filled btn-log-in">Log In</button>\n            <button class="btn btn-flat btn-main-filled btn-cancel">Cancel</button>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n    <div class="login-panel-footer">\n        <div class="footer-text">Connection to XMPP server is done via auxiliary websocket server maintained by redsolution. Theoretically we can intercept your XMPP passwords, however, we don’t do that. This won’t be a problem when more servers will support OAuth2 authentication and allow token-based connectivity.</div>\n    </div>\n'}),define("text!templates/accounts/add_account.html",[],function(){return'<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>Add new account</span>\n    </div>\n    <div class="modal-content">\n        <div class="row login-form-field">\n            <div class="input-field">\n                <input id="jid" type="text" name="jid">\n                <label for="jid">Username</label>\n                <span class="errors fixed"></span>\n            </div>\n            <div class="input-field">\n                <input id="password" type="password" name="password">\n                <label for="password">Password</label>\n                <span class="errors fixed"></span>\n            </div>\n        </div>\n        <div class="sync-option">\n            <input type="checkbox" class="filled-in" id="{{view.cid}}_sync_acc"/>\n            <label for="{{view.cid}}_sync_acc">Synchronize with Xabber account</label>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-add">Add</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n'}),define("text!templates/accounts/change_password.html",[],function(){return'<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>Set password</span>\n    </div>\n    <div class="modal-content">\n        <div class="row login-form-field">\n            <div class="input-field">\n                <input id="jid" type="text" name="jid" readonly>\n                <label for="jid">Username</label>\n                <span class="errors fixed"></span>\n            </div>\n            <div class="input-field">\n                <input id="password" type="password" name="password">\n                <label for="password">Password</label>\n                <span class="errors fixed"></span>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-change">Set</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n'}),define("text!templates/accounts/toolbar_item.html",[],function(){return'<div class="border"></div>\n<div class="circle-avatar border-color ground-color-700 noselect">\n    <img>\n</div>\n<div class="status"></div>\n<i class="auth-failed mdi mdi-16px mdi-close"></i>\n'}),define("text!templates/accounts/settings_left.html",[],function(){return'    <div class="left-column ground-color-900 noselect">\n        <div class="main-info-wrap account-main-info-wrap">\n            <div class="picture-wrap">\n                <div class="avatar-wrap">\n                    <div class="circle-avatar">\n                        <img/>\n                    </div>\n                    <div class="status"></div>\n                </div>\n            </div>\n            <div class="name-wrap">\n                <div class="name"></div>\n            </div>\n            <div class="status-wrap"></div>\n        </div>\n        <div class="settings-tabs-wrap">\n            <div class="settings-tab" data-block-name="connection">\n                <i class="mdi mdi-24px mdi-settings"></i>\n                <div class="settings-block-name one-line">Connection settings</div>\n            </div>\n            <div class="settings-tab" data-block-name="synchronization">\n                <i class="mdi mdi-24px mdi-sync"></i>\n                <div class="settings-block-name one-line">Synchronization</div>\n            </div>\n            <div class="settings-tab" data-block-name="color-scheme">\n                <i class="mdi mdi-24px mdi-palette"></i>\n                <div class="settings-block-name one-line">Color scheme</div>\n            </div>\n            <div class="settings-tab" data-block-name="xmpp-resources">\n                <svg class="mdi mdi-24px mdi-svg-template" data-svgname="ic-jabber"></svg>\n                <div class="settings-block-name one-line">XMPP Resources</div>\n            </div>\n            <div class="settings-tab" data-block-name="vcard">\n                <i class="mdi mdi-24px mdi-account-card-details"></i>\n                <div class="settings-block-name one-line">vCard</div>\n            </div>\n            <div class="settings-tab" data-block-name="server-info">\n                <i class="mdi mdi-24px mdi-information"></i>\n                <div class="settings-block-name one-line">Server information</div>\n            </div>\n            <div class="settings-tab" data-block-name="blocklist-info">\n                <i class="mdi mdi-24px mdi-block-helper"></i>\n                <div class="settings-block-name one-line">Blocked contacts</div>\n            </div>\n            <div class="settings-tab" data-block-name="groups-info">\n                <i class="mdi mdi-24px mdi-account-multiple"></i>\n                <div class="settings-block-name one-line">Groups</div>\n            </div>\n        </div>\n        <div class="settings-tabs-bottom-wrap ground-color-900">\n            <div class="settings-tab delete-account">\n                <i class="mdi mdi-24px mdi-logout-variant"></i>\n                <div class="settings-block-name">Delete account</div>\n            </div>\n        </div>\n    </div>\n'}),define("text!templates/accounts/settings_right.html",[],function(){
return'    <div class="right-column noselect">\n        <div class="settings-panel-head">\n            <span>Account settings</span>\n            <div class="field enabled-state switch normal">\n                <label class="field-value">\n                    <input type="checkbox">\n                    <span class="lever"></span>\n                </label>\n            </div>\n        </div>\n\n        <div class="panel-content-wrap">\n            <div class="panel-content details-panel">\n\n                <div class="settings-block-wrap connection">\n                    <div class="block-header">\n                        <span class="block-name">Connection settings</span>\n                    </div>\n                    <div class="connection-wrap">\n                        <div class="readonly-setting">\n                            <i class="details-icon mdi mdi-24px mdi-account"></i>\n                            <div class="setting-wrap account-name">\n                                <div class="value one-line"></div>\n                                <div class="label conn-status"></div>\n                            </div>\n                        </div>\n                        <div class="buttons-wrap">\n                            <button class="btn-change-password btn-flat btn-main btn-dark ground-color-100 hover-ground-color-300">Set password</button>\n                            <button class="btn-reconnect btn-flat btn-main btn-dark ground-color-100 hover-ground-color-300">Reconnect</button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap synchronization">\n                    <div class="block-header">\n                        <span class="block-name">Synchronization</span>\n                    </div>\n                    <div class="synchronization-wrap">\n                        <div class="readonly-setting">\n                            <i class="details-icon sync-status-icon mdi mdi-24px" data-mdiclass=""></i>\n                            <div class="setting-wrap account-name">\n                                <div class="value one-line"></div>\n                                <div class="label sync-status"></div>\n                            </div>\n                        </div>\n                        <div class="xabber-account-features-wrap">\n                            <div class="sync-enable-wrap">\n                                <input type="checkbox" class="filled-in sync-account" id="{{view.cid}}_sync_account"/>\n                                <label for="{{view.cid}}_sync_account">Enable synchronization</label>\n                            </div>\n                            <div class="buttons-wrap">\n                                <button class="btn-delete-settings btn-flat btn-main btn-dark ground-color-grey-100 hover-ground-color-grey-300">Delete settings</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap color-scheme">\n                    <div class="block-header">\n                        <span class="block-name">Color scheme</span>\n                    </div>\n                    <div class="color-scheme-wrap">\n                        <div class="account-color">\n                            <div class="current-color-name text-color-700"></div>\n                            <div class="dropdown-button" data-activates="select-color-{{view.cid}}">\n                                <i class="mdi mdi-24px mdi-menu-down"></i>\n                            </div>\n                            <ul id="select-color-{{view.cid}}" class="color-values dropdown-content noselect">\n                                <li class="color-value" data-value="red">\n                                    <div class="color-name text-color-red-700">red</div>\n                                    <div class="color-pattern ground-color-red-700"></div>\n                                </li>\n                                <li class="color-value" data-value="pink">\n                                    <div class="color-name text-color-pink-700">pink</div>\n                                    <div class="color-pattern ground-color-pink-700"></div>\n                                </li>\n                                <li class="color-value" data-value="purple">\n                                    <div class="color-name text-color-purple-700">purple</div>\n                                    <div class="color-pattern ground-color-purple-700"></div>\n                                </li>\n                                <li class="color-value" data-value="deep-purple">\n                                    <div class="color-name text-color-deep-purple-700">deep purple</div>\n                                    <div class="color-pattern ground-color-deep-purple-700"></div>\n                                </li>\n                                <li class="color-value" data-value="indigo">\n                                    <div class="color-name text-color-indigo-700">indigo</div>\n                                    <div class="color-pattern ground-color-indigo-700"></div>\n                                </li>\n                                <li class="color-value" data-value="blue">\n                                    <div class="color-name text-color-blue-700">blue</div>\n                                    <div class="color-pattern ground-color-blue-700"></div>\n                                </li>\n                                <li class="color-value" data-value="light-blue">\n                                    <div class="color-name text-color-light-blue-700">light blue</div>\n                                    <div class="color-pattern ground-color-light-blue-700"></div>\n                                </li>\n                                <li class="color-value" data-value="cyan">\n                                    <div class="color-name text-color-cyan-700">cyan</div>\n                                    <div class="color-pattern ground-color-cyan-700"></div>\n                                </li>\n                                <li class="color-value" data-value="teal">\n                                    <div class="color-name text-color-teal-700">teal</div>\n                                    <div class="color-pattern ground-color-teal-700"></div>\n                                </li>\n                                <li class="color-value" data-value="green">\n                                    <div class="color-name text-color-green-700">green</div>\n                                    <div class="color-pattern ground-color-green-700"></div>\n                                </li>\n                                <li class="color-value" data-value="light-green">\n                                    <div class="color-name text-color-light-green-700">light green</div>\n                                    <div class="color-pattern ground-color-light-green-700"></div>\n                                </li>\n                                <li class="color-value" data-value="lime">\n                                    <div class="color-name text-color-lime-700">lime</div>\n                                    <div class="color-pattern ground-color-lime-700"></div>\n                                </li>\n                                <li class="color-value" data-value="amber">\n                                    <div class="color-name text-color-amber-700">amber</div>\n                                    <div class="color-pattern ground-color-amber-700"></div>\n                                </li>\n                                <li class="color-value" data-value="orange">\n                                    <div class="color-name text-color-orange-700">orange</div>\n                                    <div class="color-pattern ground-color-orange-700"></div>\n                                </li>\n                                <li class="color-value" data-value="deep-orange">\n                                    <div class="color-name text-color-deep-orange-700">deep orange</div>\n                                    <div class="color-pattern ground-color-deep-orange-700"></div>\n                                </li>\n                                <li class="color-value" data-value="brown">\n                                    <div class="color-name text-color-brown-700">brown</div>\n                                    <div class="color-pattern ground-color-brown-700"></div>\n                                </li>\n                                <li class="color-value" data-value="blue-grey">\n                                    <div class="color-name text-color-blue-grey-700">blue grey</div>\n                                    <div class="color-pattern ground-color-blue-grey-700"></div>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap xmpp-resources">\n                    <div class="block-header">\n                        <span class="block-name">XMPP Resources</span>\n                    </div>\n                    <div class="resources-wrap">\n                        <div class="resource-wrap main-resource">\n                            <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="ic-jabber"></svg>\n                            <div class="info status-info">\n                                <div class="label">Status:</div>\n                                <div class="value status-message one-line"></div>\n                                <div class="status"></div>\n                            </div>\n                            <div class="info client-info">\n                                <div class="label">Client:</div>\n                                <div class="value client one-line"></div>\n                            </div>\n                            <div class="info resource-info">\n                                <div class="label">Resource:</div>\n                                <div class="value resource one-line"></div>\n                                <div class="device-indicator text-color-700">(this device)</div>\n                            </div>\n                            <div class="info priority-info">\n                                <div class="label">Priority:</div>\n                                <div class="value priority"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap vcard">\n                </div>\n\n                <div class="settings-block-wrap server-info">\n                    <div class="block-header">\n                        <span class="block-name">Server capabilities</span>\n                    </div>\n                    <div class="capabilities-wrap">\n                        <div class="capabilities">\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap blocklist-info">\n                    <div class="block-header">\n                        <span class="block-name">Blocked contacts</span>\n                    </div>\n                    <div class="blocklist-wrap">\n                        <div class="blocked-contacts">\n                            <div class="placeholder">No blocked contacts yet</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="settings-block-wrap groups-info">\n                    <div class="block-header">\n                        <span class="block-name">Groups</span>\n                    </div>\n                    <div class="groups-wrap">\n                        <div class="groups">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'}),define("text!templates/accounts/resource.html",[],function(){return'    <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="ic-jabber"></svg>\n    <div class="info status-info">\n        <div class="label">Status:</div>\n        <div class="value status-message one-line"></div>\n        <div class="status"></div>\n    </div>\n    <div class="info client-info">\n        <div class="label">Client:</div>\n        <div class="value client one-line"></div>\n    </div>\n    <div class="info resource-info">\n        <div class="label">Resource:</div>\n        <div class="value resource one-line"></div>\n    </div>\n    <div class="info priority-info">\n        <div class="label">Priority:</div>\n        <div class="value priority"></div>\n    </div>\n'}),define("text!templates/accounts/global_settings_item.html",[],function(){return'<div class="move-account-to-this droppable"></div>\n<div class="account-info-wrap">\n    <i class="drag-item drag-handle mdi mdi-28px mdi-drag-vertical"></i>\n    <div class="circle-avatar noselect">\n        <img>\n    </div>\n    <div class="text-info-wrap">\n        <div class="jid-wrap">\n            <div class="jid text-color-700 one-line"></div>\n        </div>\n        <div class="conn-status one-line"></div>\n    </div>\n</div>\n<div class="sync-marker-wrap">\n    <i class="sync-marker mdi mdi-20px mdi-cloud-check"></i>\n</div>\n<div class="field clickable-field enabled-state switch normal">\n    <label class="field-value">\n        <input type="checkbox">\n        <span class="lever"></span>\n    </label>\n</div>\n'}),define("text!templates/accounts/change_status.html",[],function(){return'<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>Set status</span>\n    </div>\n    <ul class="status-values noselect">\n        <li data-value="chat">\n            <span class="status-value one-line">Ready for chat</span>\n            <span class="status-bulb" data-status="chat"></span>\n        </li>\n        <li data-value="online">\n            <span class="status-value one-line">Online</span>\n            <span class="status-bulb" data-status="online"></span>\n        </li>\n        <li data-value="away">\n            <span class="status-value one-line">Away</span>\n            <span class="status-bulb" data-status="away"></span>\n        </li>\n        <li data-value="xa">\n            <span class="status-value one-line">Away for long time</span>\n            <span class="status-bulb" data-status="xa"></span>\n        </li>\n        <li data-value="dnd">\n            <span class="status-value one-line">Busy</span>\n            <span class="status-bulb" data-status="dnd"></span>\n        </li>\n        <li data-value="offline">\n            <span class="status-value one-line">Offline</span>\n            <span class="status-bulb" data-status="offline"></span>\n        </li>\n    </ul>\n    <div class="modal-content">\n        <div class="row">\n            <div class="input-field status-message-wrap">\n                <span class="static-label">Custom status message</span>\n                <input type="text" class="status-message">\n                <i class="clear-input mdi mdi-20px mdi-close"></i>\n            </div>\n            <div class="input-field checkbox-field no-padding">\n                <input type="checkbox" class="filled-in apply-to-all" id="{{view.cid}}_apply_to_all"/>\n                <label for="{{view.cid}}_apply_to_all">Apply to all accounts</label>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!templates/vcard/vcard.html",[],function(){return'<div class="block-header">\n    <span class="block-name">vCard</span>\n    <div class="btn-vcard-refresh">\n        <div class="button">\n            <i class="mdi mdi-20px mdi-refresh"></i>\n        </div>\n        <div class="preloader-wrapper preloader-20px active">\n            <div class="spinner-layer">\n                <div class="circle-clipper left">\n                    <div class="circle"></div>\n                </div>\n                <div class="gap-patch">\n                    <div class="circle"></div>\n                </div>\n                <div class="circle-clipper right">\n                    <div class="circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="vcard-wrap">\n    <div class="info-wrap jid-info-wrap hidden">\n        <svg class="details-icon mdi mdi-24px mdi-svg-template" data-svgname="xmpp"></svg>\n        <div class="info jabber-id">\n            <div class="value one-line"></div>\n            <div class="label">Jabber ID</div>\n        </div>\n    </div>\n    <div class="info-wrap personal-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n        <div class="info nickname">\n            <div class="value one-line"></div>\n            <div class="label">Nickname</div>\n        </div>\n        <div class="info fullname">\n            <div class="value one-line"></div>\n            <div class="label">Full name</div>\n        </div>\n        <div class="info first-name">\n            <div class="value one-line"></div>\n            <div class="label">Name</div>\n        </div>\n        <div class="info middle-name">\n            <div class="value one-line"></div>\n            <div class="label">Middle name</div>\n        </div>\n        <div class="info last-name">\n            <div class="value one-line"></div>\n            <div class="label">Surname</div>\n        </div>\n    </div>\n    <div class="info-wrap birthday-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-cake-variant"></i>\n        <div class="info birthday">\n            <div class="value one-line"></div>\n            <div class="label">Birthday</div>\n        </div>\n    </div>\n    <div class="info-wrap job-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-briefcase"></i>\n        <div class="info job-title">\n            <div class="value one-line"></div>\n            <div class="label">Job title</div>\n        </div>\n        <div class="info org-name">\n            <div class="value one-line"></div>\n            <div class="label">Company</div>\n        </div>\n        <div class="info org-unit">\n            <div class="value one-line"></div>\n            <div class="label">Unit</div>\n        </div>\n    </div>\n    <div class="info-wrap site-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-web"></i>\n        <div class="info url">\n            <div class="value one-line"></div>\n            <div class="label">Site</div>\n        </div>\n    </div>\n    <div class="info-wrap description-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-file-document-box"></i>\n        <div class="info description">\n            <div class="value one-line"></div>\n            <div class="label">Some description</div>\n        </div>\n    </div>\n    <div class="info-wrap phone-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-phone"></i>\n        <div class="info phone-work">\n            <div class="value one-line"></div>\n            <div class="label">Work</div>\n        </div>\n        <div class="info phone-home">\n            <div class="value one-line"></div>\n            <div class="label">Home</div>\n        </div>\n        <div class="info phone-mobile">\n            <div class="value one-line"></div>\n            <div class="label">Mobile</div>\n        </div>\n        <div class="info phone-default">\n            <div class="value one-line"></div>\n            <div class="label">Phone</div>\n        </div>\n    </div>\n    <div class="info-wrap email-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-email"></i>\n        <div class="info email-work">\n            <div class="value one-line"></div>\n            <div class="label">Work</div>\n        </div>\n        <div class="info email-home">\n            <div class="value one-line"></div>\n            <div class="label">Home</div>\n        </div>\n        <div class="info email-default">\n            <div class="value one-line"></div>\n            <div class="label">Email</div>\n        </div>\n    </div>\n    <div class="info-wrap address-info-wrap hidden">\n        <i class="details-icon mdi mdi-24px mdi-map-marker"></i>\n        <div class="info address-work">\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">Work</div>\n        </div>\n        <div class="info address-home">\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">Home</div>\n        </div>\n        <div class="info address-default">\n            <div class="extadd value one-line"></div>\n            <div class="street value one-line"></div>\n            <div class="locality value one-line"></div>\n            <div class="region value one-line"></div>\n            <div class="pcode value one-line"></div>\n            <div class="country value one-line"></div>\n            <div class="label">Address</div>\n        </div>\n    </div>\n    <button class="btn-vcard-edit btn-flat btn-main btn-dark ground-color-100 hover-ground-color-300 hidden">Edit</button>\n</div>\n'}),define("text!templates/vcard/vcard_edit.html",[],function(){
return'    <div class="right-column noselect">\n        <div class="settings-panel-head">\n            <span>Edit vCard</span>\n        </div>\n\n        <div class="panel-content-wrap">\n            <div class="panel-content details-panel">\n\n                <div class="settings-block-wrap vcard">\n                    <div class="vcard-edit-wrap">\n                        <div class="info-wrap personal-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-account-box-outline"></i>\n                            <div class="input-field nickname">\n                                <input id="{{view.cid}}-nickname" type="text" name="nickname">\n                                <label for="{{view.cid}}-nickname">Nickname</label>\n                            </div>\n                            <div class="input-field fullname">\n                                <input id="{{view.cid}}-fullname" type="text" name="fullname">\n                                <label for="{{view.cid}}-fullname">Full name</label>\n                            </div>\n                            <div class="input-field first-name">\n                                <input id="{{view.cid}}-first-name" type="text" name="first_name">\n                                <label for="{{view.cid}}-first-name">First name</label>\n                            </div>\n                            <div class="input-field middle-name">\n                                <input id="{{view.cid}}-middle-name" type="text" name="middle_name">\n                                <label for="{{view.cid}}-middle-name">Middle name</label>\n                            </div>\n                            <div class="input-field last-name">\n                                <input id="{{view.cid}}-last-name" type="text" name="last_name">\n                                <label for="{{view.cid}}-last-name">Last name</label>\n                            </div>\n                        </div>\n\n                        <div class="info-wrap avatar-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-camera"></i>\n                            <div class="circle-avatar circle-image-fix">\n                                <img/>\n                                <input type="file"/>\n                            </div>\n                        </div>\n\n                        <div class="info-wrap birthday-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-cake-variant"></i>\n                            <div class="input-field birthday">\n                                <input id="{{view.cid}}-birthday" type="text" class="datepicker">\n                                <label for="{{view.cid}}-birthday">Birthdate</label>\n                            </div>\n                        </div>\n\n                        <div class="info-wrap job-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-briefcase"></i>\n                            <div class="input-field job-title">\n                                <input id="{{view.cid}}-job-title" type="text" name="job_title">\n                                <label for="{{view.cid}}-job-title">Job title</label>\n                            </div>\n                            <div class="input-field org-name">\n                                <input id="{{view.cid}}-org-name" type="text" name="org_name">\n                                <label for="{{view.cid}}-org-name">Company</label>\n                            </div>\n                            <div class="input-field org-unit">\n                                <input id="{{view.cid}}-org-unit" type="text" name="org_unit">\n                                <label for="{{view.cid}}-org-unit">Unit</label>\n                            </div>\n                        </div>\n                        <div class="info-wrap site-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-web"></i>\n                            <div class="input-field url">\n                                <input id="{{view.cid}}-url" type="text" name="url">\n                                <label for="{{view.cid}}-url">Site</label>\n                            </div>\n                        </div>\n                        <div class="info-wrap description-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-file-document-box"></i>\n                            <div class="input-field description">\n                                <input id="{{view.cid}}-description" type="text" name="description">\n                                <label for="{{view.cid}}-description">Description</label>\n                            </div>\n                        </div>\n\n                        <div class="info-wrap phone-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-phone"></i>\n                            <div class="input-field phone-work">\n                                <input id="{{view.cid}}-phone-work" type="text" name="phone_work">\n                                <label for="{{view.cid}}-phone-work">Phone (work)</label>\n                            </div>\n                            <div class="input-field phone-home">\n                                <input id="{{view.cid}}-phone-home" type="text" name="phone_home">\n                                <label for="{{view.cid}}-phone-home">Phone (home)</label>\n                            </div>\n                            <div class="input-field phone-mobile">\n                                <input id="{{view.cid}}-phone-mobile" type="text" name="phone_mobile">\n                                <label for="{{view.cid}}-phone-mobile">Phone (mobile)</label>\n                            </div>\n                        </div>\n                        <div class="info-wrap email-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-email"></i>\n                            <div class="input-field email-work">\n                                <input id="{{view.cid}}-email-work" type="text" name="email_work">\n                                <label for="{{view.cid}}-email-work">Email (work)</label>\n                            </div>\n                            <div class="input-field email-home">\n                                <input id="{{view.cid}}-email-home" type="text" name="email_home">\n                                <label for="{{view.cid}}-email-home">Email (home)</label>\n                            </div>\n                        </div>\n\n                        <div class="info-wrap address-info-wrap">\n                            <i class="details-icon mdi mdi-24px mdi-map-marker"></i>\n                            <div class="input-wrap address-wrap address-work-wrap">\n                                <div class="input-label">Address (work)</div>\n                                <div class="input-field extadd">\n                                    <input id="{{view.cid}}-addr-work-extadd" type="text" name="addr_work_extadd">\n                                    <label for="{{view.cid}}-addr-work-extadd">Extended address</label>\n                                </div>\n                                <div class="input-field street">\n                                    <input id="{{view.cid}}-addr-work-street" type="text" name="addr_work_street">\n                                    <label for="{{view.cid}}-addr-work-street">Street</label>\n                                </div>\n                                <div class="input-field locality">\n                                    <input id="{{view.cid}}-addr-work-locality" type="text" name="addr_work_locality">\n                                    <label for="{{view.cid}}-addr-work-locality">Locality</label>\n                                </div>\n                                <div class="input-field region">\n                                    <input id="{{view.cid}}-addr-work-region" type="text" name="addr_work_region">\n                                    <label for="{{view.cid}}-addr-work-region">Region</label>\n                                </div>\n                                <div class="input-field pcode">\n                                    <input id="{{view.cid}}-addr-work-pcode" type="text" name="addr_work_pcode">\n                                    <label for="{{view.cid}}-addr-work-pcode">Post code</label>\n                                </div>\n                                <div class="input-field country">\n                                    <input id="{{view.cid}}-addr-work-country" type="text" name="addr_work_country">\n                                    <label for="{{view.cid}}-addr-work-country">Country</label>\n                                </div>\n                            </div>\n                            <div class="input-wrap address-wrap address-home-wrap">\n                                <div class="input-label">Address (home)</div>\n                                <div class="input-field extadd">\n                                    <input id="{{view.cid}}-addr-home-extadd" type="text" name="addr_home_extadd">\n                                    <label for="{{view.cid}}-addr-home-extadd">Extended address</label>\n                                </div>\n                                <div class="input-field street">\n                                    <input id="{{view.cid}}-addr-home-street" type="text" name="addr_home_street">\n                                    <label for="{{view.cid}}-addr-home-street">Street</label>\n                                </div>\n                                <div class="input-field locality">\n                                    <input id="{{view.cid}}-addr-home-locality" type="text" name="addr_home_locality">\n                                    <label for="{{view.cid}}-addr-home-locality">Locality</label>\n                                </div>\n                                <div class="input-field region">\n                                    <input id="{{view.cid}}-addr-home-region" type="text" name="addr_home_region">\n                                    <label for="{{view.cid}}-addr-home-region">Region</label>\n                                </div>\n                                <div class="input-field pcode">\n                                    <input id="{{view.cid}}-addr-home-pcode" type="text" name="addr_home_pcode">\n                                    <label for="{{view.cid}}-addr-home-pcode">Post code</label>\n                                </div>\n                                <div class="input-field country">\n                                    <input id="{{view.cid}}-addr-home-country" type="text" name="addr_home_country">\n                                    <label for="{{view.cid}}-addr-home-country">Country</label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n        <div class="panel-footer noselect">\n            <div class="buttons-wrap">\n                <button class="btn-vcard-save btn-flat btn-main">Save</button>\n                <button class="btn-vcard-back btn-flat btn-main btn-dark">Cancel</button>\n            </div>\n        </div>\n    </div>\n'}),define("text!templates/contacts/roster_right.html",[],function(){return'<div class="contacts-panel noselect">\n    <div class="collapsed-wrap">\n        <i class="collapsed-contacts-icon mdi mdi-24px mdi-account-multiple"></i>\n        <div class="all-contacts-counter"></div>\n    </div>\n    <div class="expanded-wrap">\n        <div class="roster-head panel-head">\n            <div class="contacts-header">Contacts</div>\n            <div class="roster-button btn-pin"></div>\n        </div>\n\n        <div class="contact-list-wrap">\n            <div class="contact-list">\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!templates/contacts/roster_left.html",[],function(){return'<div class="contacts-panel noselect">\n    <div class="contacts-search-form search-form panel-head">\n        <div class="account-indicator"></div>\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder="Search contacts">\n        <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n    </div>\n\n    <div class="contact-list-wrap left-panel-list-wrap">\n        <div class="contact-list item-list">\n        </div>\n    </div>\n</div>\n'}),define("text!templates/contacts/account_roster_right.html",[],function(){return'<div class="roster-account-info-wrap">\n    <div class="roster-account-info">\n        <div class="circle-avatar border-color ground-color-700 noselect">\n            <img>\n        </div>\n        <div class="text-info-wrap">\n            <p class="name text-color-700 one-line"></p>\n            <p class="status-message text-color-700 one-line"></p>\n            <div class="roster-info">\n                <i class="mdi mdi-account-multiple-outline"></i>\n                <span class="counter"></span>\n            </div>\n        </div>\n    </div>\n    <div class="status-button">\n        <div class="status"></div>\n    </div>\n    <div class="roster-account-shrank-footer1"></div>\n    <div class="roster-account-shrank-footer2"></div>\n</div>\n'}),define("text!templates/contacts/account_roster_left.html",[],function(){return'<div class="roster-account-info-wrap">\n    <div class="roster-account-info ground-color-100">\n        <div class="account-indicator ground-color-700"></div>\n        <div class="circle-avatar noselect">\n            <img>\n        </div>\n        <div class="text-info-wrap">\n            <p class="name text-color-900 one-line"></p>\n            <p class="jid one-line"></p>\n        </div>\n        <div class="button-divider"></div>\n    </div>\n    <div class="status-button">\n        <div class="status"></div>\n    </div>\n    <div class="roster-account-shrank-footer1 ground-color-50">\n        <div class="account-indicator ground-color-300"></div>\n    </div>\n    <div class="roster-account-shrank-footer2 ground-color-50">\n        <div class="account-indicator ground-color-300"></div>\n    </div>\n</div>\n'}),define("text!templates/contacts/group_right.html",[],function(){return'<div class="group-head">\n    <i class="arrow mdi mdi-20px"></i>\n    <div class="group-title">\n        <span class="group-name one-line"></span>\n        <span class="member-counter one-line"></span>\n    </div>\n    <i class="group-icon mdi mdi-20px hidden"></i>\n</div>\n'}),define("text!templates/contacts/group_left.html",[],function(){return'<div class="account-indicator ground-color-700"></div>\n<div class="group-head">\n    <i class="arrow mdi mdi-20px"></i>\n    <div class="group-title">\n        <span class="group-name one-line"></span>\n        <span class="member-counter one-line"></span>\n    </div>\n    <i class="group-icon mdi mdi-20px hidden"></i>\n</div>\n'}),define("text!templates/contacts/add_contact.html",[],function(){return'<div class="modal-content-wrap">\n    <div class="modal-header">\n        <span>Add new contact</span>\n    </div>\n    <div class="modal-content">\n        <div class="row account-field">\n            <div class="field-header">Account</div>\n            <div class="multiple-acc">\n                <div class="account-dropdown-wrap">\n                    <div class="dropdown-button" data-activates="select-account-for-add-contact">\n                        <div class="account-item-wrap">\n                        </div>\n                        <div class="caret">\n                            <i class="mdi mdi-20px mdi-menu-down"></i>\n                        </div>\n                    </div>\n                    <div id="select-account-for-add-contact" class="dropdown-content noselect">\n                    </div>\n                </div>\n            </div>\n            <div class="single-acc">\n                <div class="dropdown-button">\n                    <div class="account-item-wrap">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row name-field">\n            <div class="input-field">\n                <input id="new_contact_username" type="text" name="username">\n                <label for="new_contact_username">Contact username</label>\n                <span class="errors fixed"></span>\n            </div>\n            <div class="input-field">\n                <input id="new_contact_name" type="text" name="contact_name" required>\n                <label for="new_contact_name">Contact name</label>\n            </div>\n            <span class="add-contact-feedback red-text"></span>\n        </div>\n        <div class="row groups-field">\n            <div class="field-header">Groups</div>\n            <div class="groups checkbox-list">\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-add">Add</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n'}),define("text!templates/contacts/contact_right_item.html",[],function(){return'<div class="circle-avatar noselect">\n    <img>\n</div>\n<div class="text-info-wrap">\n    <p class="name one-line"></p>\n    <p class="jid one-line hidden"></p>\n    <p class="status-message one-line"></p>\n</div>\n<div class="status hide-offline"></div>\n'}),define("text!templates/contacts/contact_left_item.html",[],function(){return'<div class="circle-avatar noselect">\n    <img>\n</div>\n<div class="text-info-wrap">\n    <div class="name-wrap">\n        <p class="name one-line"></p>\n        <svg class="muted-icon mdi mdi-12px mdi-svg-template" data-svgname="volume-off-variant" viewBox="0 0 13 16"></svg>\n    </div>\n    <p class="jid one-line"></p>\n</div>\n<div class="status hide-offline"></div>\n<i class="blocked-indicator mdi mdi-14px mdi-block-helper"></i>\n'}),define("text!templates/contacts/contact_blocked_item.html",[],function(){return'<div class="circle-avatar noselect">\n    <img>\n</div>\n<div class="text-info-wrap">\n    <p class="jid one-line"></p>\n    <p class="btn-unblock text-color-700 hover-text-color-900 one-line">Unblock</p>\n</div>\n\n'}),define("text!templates/contacts/contact_details.html",[],function(){return'    <div class="panel-content-wrap noselect">\n        <div class="main-info">\n            <div class="circle-avatar"><img></div>\n            <div class="status hide-offline"></div>\n            <div class="text-info">\n                <div class="name-wrap"></div>\n                <div class="status-message one-line"></div>\n            </div>\n            <div class="btn-escape">\n                <i class="mdi mdi-24px mdi-close"></i>\n                <span class="btn-text">Esc</span>\n            </div>\n        </div>\n\n        <div class="panel-content">\n            <div class="left-column">\n                <div class="block-wrap vcard">\n                </div>\n            </div>\n\n            <div class="right-column">\n\n                <div class="block-wrap resources-block-wrap hidden">\n                    <div class="block-header">\n                        <span class="block-name">Resources</span>\n                    </div>\n\n                    <div class="resources-wrap">\n                    </div>\n                </div>\n\n                <div class="block-wrap groups-block-wrap">\n                    <div class="block-header">\n                        <span class="block-name">Groups</span>\n                    </div>\n                    <div class="groups-wrap">\n                        <div class="groups checkbox-list">\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n    <div class="panel-footer noselect">\n        <div class="buttons-wrap">\n            <button class="btn-add btn-flat btn-main">Add</button>\n            <button class="btn-auth-request btn-flat btn-main">Request authorization</button>\n            <button class="btn-chat btn-flat btn-main">Chat</button>\n            <button class="btn-block btn-flat btn-main">Block</button>\n            <button class="btn-unblock btn-flat btn-main">Unblock</button>\n            <button class="btn-delete btn-flat btn-main">Delete</button>\n        </div>\n    </div>\n'}),define("text!templates/contacts/roster_settings.html",[],function(){return'    <div class="setting-name">Show offline contacts</div>\n    <div class="setting offline-contacts radio-button field-wrap">\n        <div class="field radio-field clickable-field">\n            <form action="#">\n                <p>\n                    <input class="with-gap" name="offline-contacts" value="yes" type="radio" id="{{view.cid}}-show" />\n                    <label for="{{view.cid}}-show">Always show</label>\n                </p>\n                <p>\n                    <input class="with-gap" name="offline-contacts" value="no" type="radio" id="{{view.cid}}-hide" />\n                    <label for="{{view.cid}}-hide">Always hide</label>\n                </p>\n            </form>\n        </div>\n    </div>\n    <div class="setting-name">Sorting contacts</div>\n    <div class="setting sorting-contacts radio-button field-wrap">\n        <div class="field radio-field clickable-field">\n            <form action="#">\n                <p>\n                    <input class="with-gap" name="sorting-contacts" value="online-first" type="radio" id="{{view.cid}}-online-first" />\n                    <label for="{{view.cid}}-online-first">Online first</label>\n                </p>\n                <p>\n                    <input class="with-gap" name="sorting-contacts" value="by-alphabet" type="radio" id="{{view.cid}}-by-alphabet" />\n                    <label for="{{view.cid}}-by-alphabet">Alphabet order (A -> Z)</label>\n                </p>\n            </form>\n        </div>\n    </div>\n'}),define("text!templates/contacts/group_settings.html",[],function(){return'<div class="modal-content-wrap settings-panel">\n    <div class="modal-header">\n        <span>Group settings</span>\n    </div>\n\n    <div class="modal-content">\n            <div class="field-wrap group-name">\n                <div class="input-field">\n                    <input id="{{view.cid}}-group-name" type="text" name="group_name">\n                    <label for="{{view.cid}}-group-name">Name</label>\n                    <span class="errors fixed"></span>\n                </div>\n            </div>\n\n            <div class="setting-name">Offline contacts</div>\n            <div class="setting-wrap">\n                <div class="setting offline radio-button field-wrap">\n                    <div class="field radio-field clickable-field">\n                        <form action="#">\n                            <p>\n                                <input class="with-gap" name="offline" value="yes" type="radio" id="{{view.cid}}-show" />\n                                <label for="{{view.cid}}-show">Always show</label>\n                            </p>\n                            <p>\n                                <input class="with-gap" name="offline" value="no" type="radio" id="{{view.cid}}-hide" />\n                                <label for="{{view.cid}}-hide">Always hide</label>\n                            </p>\n                            <p>\n                                <input class="with-gap" name="offline" value="default" type="radio" id="{{view.cid}}-show-offline-default" />\n                                <label for="{{view.cid}}-show-offline-default">Use common settings</label>\n                            </p>\n                        </form>\n                    </div>\n                </div>\n            </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn-flat btn-main btn-dark btn-delete left">Delete</button>\n        <button class="btn-flat btn-main btn-apply">Apply</button>\n        <button class="btn-flat btn-main btn-dark btn-cancel">Cancel</button>\n    </div>\n</div>\n'}),define("text!templates/contacts/groups_checkbox_list.html",[],function(){return'{[ for (var i = 0; i < groups.length; i++) { var name = groups[i].name, checked = groups[i].checked, group_id = groups[i].id; ]}\n    <div class="input-field checkbox-field existing-group-field">\n        <input type="checkbox" class="filled-in" id="{{group_id}}" data-groupname="{{name}}" {[ if (checked) { ]}checked="checked"{[ } ]} />\n        <label for="{{group_id}}">{{name}}</label>\n    </div>\n{[ } ]}\n    <div class="new-group-field-wrap">\n        <div class="input-field checkbox-field new-group-checkbox hidden">\n            <input type="checkbox" class="filled-in" id="new_group_checkbox"/>\n            <label for="new_group_checkbox">.</label>\n        </div>\n        <div class="input-field new-group-name">\n            <input class="xabber-input" id="new-group-name" type="text" name="new_group_name" placeholder="Create new group">\n        </div>\n    </div>\n'}),define("text!templates/contacts/add_contact_account_item.html",[],function(){return'<div class="account-item-wrap" data-jid="{{jid}}">\n    <div class="circle-avatar noselect">\n        <img>\n    </div>\n    <div class="name one-line">{{jid}}</div>\n</div>\n'}),define("text!templates/contacts/contact_placeholder.html",[],function(){return'<div class="text">Please select a contact to view details</div>\n'}),define("text!templates/chats/chats_panel.html",[],function(){return'<div class="recent-chats-panel noselect">\n    <div class="chats-search-form search-form panel-head">\n        <div class="account-indicator"></div>\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" tabindex="1" placeholder="Search recent chats">\n        <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n    </div>\n    <div class="chat-list-wrap left-panel-list-wrap">\n        <div class="chat-list item-list">\n        </div>\n    </div>\n</div>\n'}),define("text!templates/chats/chat_item.html",[],function(){return'<div class="account-indicator ground-color-700"></div>\n<div class="circle-avatar">\n    <img>\n</div>\n<div class="status hide-offline"></div>\n<div class="recent-chat-info">\n    <div class="chat-title-wrap">\n        <p class="chat-title one-line"></p>\n        <svg class="muted-icon mdi mdi-12px mdi-svg-template" data-svgname="volume-off-variant" viewBox="0 0 13 16"></svg>\n    </div>\n    <p class="last-msg one-line"></p>\n    <p class="last-msg-date"></p>\n    <i class="msg-delivering-state mdi mdi-12px hidden"></i>\n    <i class="blocked-indicator mdi mdi-14px mdi-block-helper"></i>\n    <span class="msg-counter hidden"></span>\n</div>\n'}),define("text!templates/chats/chat_head.html",[],function(){return'    <div class="circle-avatar">\n        <img>\n    </div>\n    <div class="contact-status hide-offline"></div>\n    <div class="contact-info">\n        <p class="contact-name one-line"></p>\n        <p class="contact-status-message one-line"></p>\n    </div>\n    <div class="chat-tools-wrap">\n        <div class="chat-tool btn-notifications">\n            <i class="no-muted mdi mdi-20px mdi-volume-medium"></i>\n            <svg class="muted mdi mdi-16px mdi-svg-template" data-svgname="volume-off-variant" viewBox="0 0 13 16"></svg>\n        </div>\n        <div class="chat-tool btn-more dropdown-button" data-activates="{{view.cid}}-more">\n            <i class="mdi mdi-20px mdi-dots-vertical"></i>\n        </div>\n        <ul id="{{view.cid}}-more" class="chat-head-menu dropdown-content noselect">\n            <li class="btn-contact-details">\n                <span class="one-line">Contact info</span>\n            </li>\n            <li class="btn-clear-history">\n                <span class="one-line">Clear message history</span>\n            </li>\n            <li class="btn-block-contact">\n                <span class="one-line">Block contact</span>\n            </li>\n            <li class="btn-unblock-contact">\n                <span class="one-line">Unblock contact</span>\n            </li>\n            <li class="btn-close-chat">\n                <span class="one-line">Close chat</span>\n            </li>\n        </ul>\n    </div>\n'}),define("text!templates/chats/chat_content.html",[],function(){return'<div class="load-history-feedback hidden"></div>\n<div class="chat-content">\n</div>\n'}),define("text!templates/chats/chat_bottom.html",[],function(){return'    <div class="chat-notification one-line"></div>\n    <div class="message-input-panel noselect">\n        <div class="my-avatar circle-avatar circle-image-fix">\n            <img>\n        </div>\n        <div class="message-form">\n            <div class="fwd-messages-preview noselect hidden">\n                <div class="msg-border ground-color-700">\n                </div>\n                <div class="msg-content">\n                    <p class="msg-author text-color-700 one-line"></p>\n                    <p class="msg-text one-line"></p>\n                </div>\n                <div class="close-forward">\n                    <i class="mdi mdi-20px mdi-close hover-text-color-500"></i>\n                </div>\n            </div>\n            <div class="input-field input-message">\n                <div class="rich-textarea-wrap">\n                    <div class="rich-textarea" tabindex="2" contenteditable></div>\n                    <div class="placeholder">Write a message...</div>\n                    <div class="scrollbar-cover"></div>\n                </div>\n                <div class="insert-emoticon">\n                    <i class="mdi mdi-24px mdi-emoticon hover-text-color-500"></i>\n                </div>\n                <div class="emoticons-panel-wrap">\n                    <div class="emoticons-panel"></div>\n                </div>\n            </div>\n            <div class="input-toolbar">\n                <div class="attach attach-file">\n                    <i class="mdi mdi-24px mdi-paperclip"></i>\n                    <input type="file" title="Send file">\n                </div>\n                <div class="last-emoticons">\n                </div>\n                <div class="account-jid text-color-700"></div>\n            </div>\n        </div>\n        <div class="send-area">\n            <i class="send-message mdi mdi-28px mdi-send text-color-700 hover-text-color-500"></i>\n        </div>\n    </div>\n    <div class="message-actions-panel noselect hidden">\n        <button class="forward-message btn btn-main-filled ground-color-700">Forward<span class="counter"></span></button>\n        <button class="reply-message btn btn-main-filled ground-color-700">Reply</button>\n        <button class="close-message-panel btn-flat btn-main text-color-700 right">Cancel</button>\n    </div>\n'}),define("text!templates/chats/forward_panel.html",[],function(){
return'    <div class="modal-header noselect">\n        <div class="panel-header">\n            <span class="header">Forward</span>\n            <span class="btn-in-header close-button right">Close</span>\n        </div>\n    </div>\n    <div class="chats-search-form search-form panel-head">\n        <i class="search-icon mdi mdi-20px mdi-magnify"></i>\n        <input type="text" class="search-input simple-input-field" placeholder="Search">\n        <i class="close-search-icon mdi mdi-20px mdi-close"></i>\n    </div>\n    <div class="modal-content noselect">\n        <div class="chat-list-wrap left-panel-list-wrap">\n            <div class="chat-list item-list"></div>\n        </div>\n    </div>\n'}),define("text!templates/chats/chat_placeholder.html",[],function(){return'<div class="text">Please select a chat to start messaging</div>\n'}),define("text!templates/chats/group_chat_placeholder.html",[],function(){return'<div class="text">Group chats are not implemented yet</div>\n'}),define("text!templates/chats/messages/main.html",[],function(){return'<div class="chat-message main {{classlist}}" data-time="{{timestamp}}" data-msgid="{{msgid}}" data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"><img></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n        </div>\n        <div class="chat-msg-content chat-text-content">{[ if (is_file) {]}<div class="file-in-circle"><i class="mdi mdi-24px mdi-file"></i></div>{[ } ]}{{message}}</div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n        {[ if (is_sender) { ]}\n            <i class="msg-delivering-state mdi mdi-14px" data-state="{{state}}" title="{{verbose_state}}"></i>\n        {[ } ]}\n        <div class="msg-copy-link" title="Copy link"><i class="mdi mdi-link-variant" data-image="{{is_image}}"></i></div>\n    </div>\n</div>\n'}),define("text!templates/chats/messages/forwarded.html",[],function(){return'<div class="fwd-message" data-time="{{timestamp}}" data-msgid="{{msgid}}" data-from="{{from_jid}}">\n    <div class="fwd-left-side noselect">\n        <div class="circle-avatar"><img></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="fwd-msg-author-wrap">\n            <div class="fwd-msg-author text-color-700 one-line">{{username}}</div>\n            <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n        </div>\n        <div class="chat-msg-content chat-text-content">{[ if (is_file) { ]}<div class="file-in-circle"><i class="mdi mdi-24px mdi-file"></i></div>{[ } ]}{{message}}</div>\n    </div>\n</div>\n'}),define("text!templates/chats/messages/system.html",[],function(){return'<div class="chat-message system" data-time="{{timestamp}}" data-msgid="{{msgid}}" data-from="{{from_jid}}">\n    <div class="msg-wrap">\n        <div class="chat-msg-content chat-text-content">{{message}}</div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n    </div>\n</div>\n'}),define("text!templates/chats/messages/file_upload.html",[],function(){return'<div class="chat-message file-upload noselect" data-time="{{timestamp}}" data-from="{{from_jid}}" data-msgid="{{msgid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"><img></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n        </div>\n        <div class="chat-msg-content chat-file-content">{[ if (is_file) { ]}<div class="file-in-circle"><i class="mdi mdi-24px mdi-file"></i></div>{[ } ]}\n            <div class="chat-file-info">\n                <div class="filename text-color-700 one-line">{{file.name}}</div>\n                <div class="filesize grey-text one-line"></div>\n                <div class="status-area">\n                    <div class="status one-line text-color-700" style="display: none"></div>\n                    <div class="repeat-upload text-color-700" style="display: none;">Resend</div>\n                </div>\n                <div class="progress-area">\n                    <div class="progress ground-color-100">\n                        <div class="determinate ground-color-700" style="width: 0%"></div>\n                    </div>\n                    <div class="cancel-upload text-color-700">Cancel</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n        <i class="msg-delivering-state mdi mdi-14px" data-state="pending" title="{{verbose_state}}"></i>\n        <div class="msg-copy-link" title="Copy link"><i class="mdi mdi-link-variant" data-image="{{is_image}}"></i></div>\n    </div>\n'}),define("text!templates/chats/messages/auth_request.html",[],function(){return'<div class="chat-message system auth-request" data-time="{{timestamp}}" data-msgid="{{msgid}}" data-from="{{from_jid}}">\n    <div class="left-side noselect">\n        <div class="circle-avatar"><img></div>\n    </div>\n\n    <div class="msg-wrap">\n        <div class="chat-msg-author-wrap">\n            <div class="chat-msg-author text-color-700 one-line">{{username}}</div>\n        </div>\n        <div class="chat-msg-content chat-text-content">{{message}}<span class="accept-request">Accept</span><span class="decline-request">Decline</span><span class="block-request">Block</span></div>\n    </div>\n\n    <div class="right-side noselect">\n        <div class="msg-time selectable-text" title="{{time}}">{{short_time}}</div>\n    </div>\n</div>\n'}),define("text!templates/svg/ic-jabber.html",[],function(){return'<path\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path5"\n     d="m 5.2462478,6.4309194 c 0,0 0.2534497,0.5323027 1.6195791,-0.2126538 C 9.2126105,5.0708821 11.67437,4.0095 14.785441,5.5382202 17.009904,6.7924 17.27733,10.360371 13.864368,13.369134 c -1.679464,1.609494 -1.887868,4.226006 -1.825254,4.993295 -0.128246,1.561168 0.259655,1.837265 0.594912,1.938246 0.335257,0.100981 1.461445,-0.04379 1.305934,-1.000087 -0.193265,-1.461227 -0.06192,-2.413209 0.855267,-4.044829 0.758763,-1.162942 2.123721,-1.871086 3.273016,-4.211889 C 18.840748,9.1444158 18.891207,6.503336 17.479328,4.894053 16.152845,3.3821059 14.670099,2.4131656 12.422552,2.4210559 9.8716741,2.446853 8.13424,2.8374168 6.751418,3.5206351 4.5012489,4.730324 4.2973099,4.8714754 5.2462478,6.4309194 z"\n     clip-rule="evenodd"\n     sodipodi:nodetypes="cccccscccsccc" />\n<path\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path7"\n     d="M 10.393116,10.546893 C 10.179036,9.8582024 9.6418168,9.5037588 9.1268128,9.5037588 c -0.686671,0 -1.6386388,0.1373222 -1.6546508,1.5832442 0,0 0.5308711,2.944458 1.5235151,2.93234 0.364542,-0.004 0.7403587,-0.28287 0.017892,-1.856769 0,0 -0.4395592,-0.974022 -0.1380497,-1.193301 0.5440269,-0.394487 0.5911749,0.418754 0.9156116,1.069105 0.674692,0.328471 1.06244,-0.702948 1.201092,-0.722298 1.026124,-0.142524 -0.130551,1.372622 -0.2386,1.539241 -0.467844,0.515308 -1.3020963,1.251877 -0.614252,1.612091 0.864686,0.205725 1.292561,-0.492065 1.464229,-0.658684 0.2663,-0.37565 0.549622,-0.820112 0.721289,-1.133153 0.877971,-1.468145 0.834305,-2.8722146 -0.558429,-2.9011876 -0.515004,0 -0.814918,0.2302366 -1.373344,0.7725056 z"\n     clip-rule="evenodd"\n     sodipodi:nodetypes="cscccccccccccc" />\n<path\n     sodipodi:nodetypes="cssccsccccssccssc"\n     style="fill-rule:evenodd"\n     inkscape:connector-curvature="0"\n     id="path9"\n     d="m 6.8360046,14.735541 c -0.2526865,-0.134842 -0.341246,-0.148685 -0.556785,-0.125105 -0.4758127,0.05205 -0.712045,0.475393 -0.6165306,0.901178 0.2727696,1.215955 1.0359093,1.641989 2.25985,2.132257 1.2530682,0.41756 2.475738,0.396638 3.398493,-0.0757 0.298412,-0.05064 0.287556,-0.683612 0.292618,-1.034981 0.006,-0.414484 -0.327129,-0.528727 -0.651454,-0.493243 -0.82369,0.222079 -0.891361,0.338578 -1.882259,0.248554 -1.1996954,-0.369888 -1.6284239,-0.589257 -2.2439324,-1.55296 z m -0.596727,2.884244 c -0.1641271,-0.121 -0.2921232,-0.08347 -0.442594,-0.06701 -0.3893935,0.0426 -0.727761,0.382603 -0.6463412,0.81143 0.2795655,1.472433 3.2776659,2.179707 4.6014193,2.113323 1.0831623,-0.05044 1.6865703,-0.273231 1.7646093,-1.16247 -0.03364,-0.366114 -0.266964,-0.659232 -0.720411,-0.609623 -0.432095,0.04727 -0.373883,0.118182 -1.0438868,0.191485 C 8.563559,19.026954 7.5842504,18.723225 6.2392776,17.619785 z"\n     clip-rule="evenodd" />\n'}),define("text!templates/svg/xmpp.html",[],function(){return'<path\n     inkscape:connector-curvature="0"\n     d="m 17.765357,5.9248618 c 0.009,0.1518861 -0.206601,0.1119764 -0.206601,0.2652514 0,4.4595198 -5.17314,11.2012628 -10.3933633,12.5152538 v 0.136731 C 14.101125,18.204712 21.825325,11.114777 22,4.2839629 l -4.233831,1.6413619 z"\n     id="path4-5" />\n<path\n     inkscape:connector-curvature="0"\n     d="m 15.907561,6.3610856 c 0.009,0.1518861 0.014,0.3045804 0.014,0.4578554 0,4.459522 -3.55133,10.468554 -8.7715528,11.783009 v 0.189367 C 13.982554,18.349079 19.389945,11.500913 19.389945,6.1592263 c 0,-0.2747361 -0.01446,-0.5470438 -0.04292,-0.8162264 l -3.439122,1.017508 z"\n     id="path6" />\n<path\n     inkscape:connector-curvature="0"\n     d="m 6.2332547,5.9248618 c -0.00886,0.1518861 0.2067174,0.1119764 0.2067174,0.2652514 0,4.4595198 5.3857609,11.2631498 10.6063279,12.5777208 V 18.95743 C 10.11103,18.318886 2.1746761,11.11443 2,4.2836157 l 4.2337177,1.6413618 z"\n     id="path8" />\n<path\n     inkscape:connector-curvature="0"\n     d="M 8.3307389,6.473525 C 8.3219828,6.6254111 8.31686,6.7777591 8.31686,6.9312646 c 0,4.4595214 3.551213,10.4685544 8.771549,11.7830104 v 0.189596 C 10.258286,18.581129 4.8484667,11.613351 4.8484667,6.2717814 c 0,-0.2747361 0.014805,-0.5470427 0.042915,-0.8162284 l 3.4391228,1.0177415 z"\n     id="path10" />\n<path\n     inkscape:connector-curvature="0"\n     d="m 4.8583007,5.3920472 0.8811221,0.3148763 c -0.00473,0.111283 -0.00765,0.2607395 -0.00765,0.3730642 0,4.7681513 4.3114542,11.3600893 10.0954942,12.3914783 0.375377,0.125857 0.871982,0.240263 1.264595,0.339052 V 19 C 9.5433961,18.356828 4.2400023,10.686651 4.857725,5.3915852 z"\n     id="path12" />\n<path\n     inkscape:connector-curvature="0"\n     d="m 19.390639,5.2968432 -0.906108,0.3036565 c 0.0047,0.1113977 0.02208,0.2548387 0.02208,0.3670476 0,4.7681497 -4.311569,11.3602047 -10.0957226,12.3914777 -0.3751445,0.125972 -0.8719856,0.240267 -1.2643666,0.33917 v 0.189596 C 15.052467,17.886018 20.00767,10.591448 19.389946,5.2967275 z"\n     id="path14" />\n'}),define("text!templates/svg/volume-off-variant.html",[],function(){return'<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Mobile-Portrait" transform="translate(-41.000000, -4.000000)">\n        <g id="volume-off-variant" transform="translate(34.000000, 0.000000)">\n            <rect id="Bounds" x="0" y="0" width="24" height="24"></rect>\n            <polygon id="Path-2" points="7 9 7 15 11 15 16 20 16 16.5 8.5 9"></polygon>\n            <polygon id="Path-3" points="7 6 18.5 17.5 19.5 16.5 16 13 16 4 11.5 8.5 8 5"></polygon>\n        </g>\n    </g>\n</g>\n'}),define("text!templates/svg/message-group.html",[],function(){return'<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="message-group-variant2" fill="#000000">\n        <path d="M14.2526206,6 L21.4947588,6 C22.3260806,6 23,6.6752491 23,7.49824524 L23,24 L19,20 L8.50524116,20 C7.67391942,20 7,19.3247509 7,18.5017548 L7,17 L17.0005775,17 C18.6556493,17 20,15.6542582 20,13.9942017 L20,6 L14.2526206,6 Z" id="Message2"></path>\n        <path d="M1,2.49824524 C1,1.67078724 1.66642015,1 2.50863659,1 L16.4913634,1 C17.3245604,1 18,1.6752491 18,2.49824524 L18,13.5017548 C18,14.3292128 17.3335799,15 16.4913634,15 L5,15 L1,19 L1,2.49824524 Z M4,10 L4,12 L12,12 L12,10 L4,10 Z M4,7 L4,9 L15,9 L15,7 L4,7 Z M4,4 L4,6 L15,6 L15,4 L4,4 Z" id="Combined-Shape"></path>\n    </g>\n</g>\n'}),define("text!templates/svg/xabber-offline.html",[],function(){return'<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Xabber-Offline" fill="#000000">\n        <path d="M13.4146471,22.5 L14.009222,22.5 C14.5490248,22.5 15,22.0522847 15,21.5 C15,20.9438648 14.5564136,20.5 14.009222,20.5 L9.99077797,20.5 C9.45097518,20.5 9,20.9477153 9,21.5 C9,22.0561352 9.44358641,22.5 9.99077797,22.5 L10.5853529,22.5 C10.7912711,23.0825962 11.3468906,23.5 12,23.5 C12.6531094,23.5 13.2087289,23.0825962 13.4146471,22.5 Z" id="Base"></path>\n        <rect id="Middle-base" x="8" y="17.75" width="8" height="2" rx="1"></rect>\n        <path d="M17.5099945,14.8015103 L17.5099945,14.8015103 C17.1966102,15.1049344 17.0013821,15.5296633 17,16 C17,16.5522847 16.5443356,17 16.0046024,17 L7.99539757,17 C7.44565467,17 7,16.5561352 6.99998649,16 C6.99861167,15.5296664 6.80338616,15.10494 6.49000549,14.8015163 L6.49000549,14.8000192 C4.95622884,13.3424727 4,11.282906 4,9 C4,4.581722 7.581722,1 12,1 C16.418278,1 20,4.581722 20,9 C20,11.282906 19.0437712,13.3424727 17.5099945,14.8000192 L17.5099945,14.8015103 Z M8.86088543,15 L15.1391084,15 C15.3021338,14.4253123 15.6014858,13.895093 16,13.472213 C17.2274987,12.3735719 18,10.7769996 18,9 C18,5.6862915 15.3137085,3 12,3 C8.6862915,3 6,5.6862915 6,9 C6,10.7769996 6.77250128,12.3735719 8,13.472213 C8.39851111,13.8950917 8.69786083,14.4253152 8.86088543,15 Z" id="Bulb-shape"></path>\n    </g>\n</g>\n'}),define("text!templates/svg/xabber-online.html",[],function(){return'<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="Xabber-Online" fill="#000000">\n        <path d="M13.4146471,22.5 L14.009222,22.5 C14.5490248,22.5 15,22.0522847 15,21.5 C15,20.9438648 14.5564136,20.5 14.009222,20.5 L9.99077797,20.5 C9.45097518,20.5 9,20.9477153 9,21.5 C9,22.0561352 9.44358641,22.5 9.99077797,22.5 L10.5853529,22.5 C10.7912711,23.0825962 11.3468906,23.5 12,23.5 C12.6531094,23.5 13.2087289,23.0825962 13.4146471,22.5 Z" id="Base"></path>\n        <rect id="Middle-base" x="8" y="17.75" width="8" height="2" rx="1"></rect>\n        <path d="M17.5099945,14.8015103 L17.5099945,14.8000192 C19.0437712,13.3424727 20,11.282906 20,9 C20,4.581722 16.418278,1 12,1 C7.581722,1 4,4.581722 4,9 C4,11.282906 4.95622884,13.3424727 6.49000549,14.8000192 L6.49000549,14.8015163 C6.80338616,15.10494 6.99861167,15.5296664 6.99998649,16 C7,16.5561352 7.44565467,17 7.99539757,17 L16.0046024,17 C16.5443356,17 17,16.5522847 17,16 C17.0013821,15.5296633 17.1966102,15.1049344 17.5099945,14.8015103 L17.5099945,14.8015103 Z" id="Bulb-shape"></path>\n    </g>\n</g>\n'}),define("xabber-templates",["underscore","jquery","text!templates/base/dialog.html","text!templates/base/input_widget.html","text!templates/base/toolbar.html","text!templates/base/settings.html","text!templates/base/about.html","text!templates/api_service/xabber_login.html","text!templates/api_service/xabber_account.html","text!templates/api_service/add_xabber_account.html","text!templates/api_service/sync_settings.html","text!templates/api_service/sync_settings_account_item.html","text!templates/accounts/xmpp_login.html","text!templates/accounts/add_account.html","text!templates/accounts/change_password.html","text!templates/accounts/toolbar_item.html","text!templates/accounts/settings_left.html","text!templates/accounts/settings_right.html","text!templates/accounts/resource.html","text!templates/accounts/global_settings_item.html","text!templates/accounts/change_status.html","text!templates/vcard/vcard.html","text!templates/vcard/vcard_edit.html","text!templates/contacts/roster_right.html","text!templates/contacts/roster_left.html","text!templates/contacts/account_roster_right.html","text!templates/contacts/account_roster_left.html","text!templates/contacts/roster_left.html","text!templates/contacts/group_right.html","text!templates/contacts/group_left.html","text!templates/contacts/add_contact.html","text!templates/contacts/contact_right_item.html","text!templates/contacts/contact_left_item.html","text!templates/contacts/contact_blocked_item.html","text!templates/contacts/contact_details.html","text!templates/contacts/roster_settings.html","text!templates/contacts/group_settings.html","text!templates/contacts/groups_checkbox_list.html","text!templates/contacts/add_contact_account_item.html","text!templates/contacts/contact_placeholder.html","text!templates/chats/chats_panel.html","text!templates/chats/chat_item.html","text!templates/chats/chat_head.html","text!templates/chats/chat_content.html","text!templates/chats/chat_bottom.html","text!templates/chats/forward_panel.html","text!templates/chats/chat_placeholder.html","text!templates/chats/group_chat_placeholder.html","text!templates/chats/messages/main.html","text!templates/chats/messages/forwarded.html","text!templates/chats/messages/system.html","text!templates/chats/messages/file_upload.html","text!templates/chats/messages/auth_request.html","text!templates/svg/ic-jabber.html","text!templates/svg/xmpp.html","text!templates/svg/volume-off-variant.html","text!templates/svg/message-group.html","text!templates/svg/xabber-offline.html","text!templates/svg/xabber-online.html"],function(t,e){t.templateSettings={evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g};var n={},i=function(t){var i=e("<div/>").html(t);return i.find(".mdi-svg-template").each(function(){var t=e(this),i=t.data("svgname");t.removeClass("mdi-svg-template").addClass("mdi-"+i).attr("data-svgname",null),t.html(n.svg[i]())}),i.html()},s=function(e,s){s||(s={});var a=e.split("."),o=t.template(require("text!templates/"+a.join("/")+".html")),r=a.pop(),c=n;t.each(a,function(t){c[t]||(c[t]={}),c=c[t]}),s.is_svg?c[r]=o:c[r]=function(t){return i(o(t))}},a=function(t){s(t,{is_svg:!1})},o=function(t){s(t,{is_svg:!0})};return a("base.dialog"),a("base.input_widget"),a("base.toolbar"),a("base.settings"),a("base.about"),a("api_service.xabber_login"),a("api_service.add_xabber_account"),a("api_service.xabber_account"),a("api_service.sync_settings"),a("api_service.sync_settings_account_item"),a("accounts.xmpp_login"),a("accounts.add_account"),a("accounts.change_password"),a("accounts.toolbar_item"),a("accounts.settings_left"),a("accounts.settings_right"),a("accounts.resource"),a("accounts.global_settings_item"),a("accounts.change_status"),a("vcard.vcard"),a("vcard.vcard_edit"),a("contacts.roster_right"),a("contacts.roster_left"),a("contacts.account_roster_right"),a("contacts.account_roster_left"),a("contacts.group_right"),a("contacts.group_left"),a("contacts.add_contact"),a("contacts.contact_right_item"),a("contacts.contact_left_item"),a("contacts.contact_blocked_item"),a("contacts.contact_details"),a("contacts.roster_settings"),a("contacts.group_settings"),a("contacts.groups_checkbox_list"),a("contacts.add_contact_account_item"),a("contacts.contact_placeholder"),a("chats.chats_panel"),a("chats.chat_item"),a("chats.chat_head"),a("chats.chat_content"),a("chats.chat_bottom"),a("chats.forward_panel"),a("chats.chat_placeholder"),a("chats.group_chat_placeholder"),a("chats.messages.main"),a("chats.messages.forwarded"),a("chats.messages.system"),a("chats.messages.file_upload"),a("chats.messages.auth_request"),o("svg.ic-jabber"),o("svg.xmpp"),o("svg.volume-off-variant"),o("svg.message-group"),o("svg.xabber-offline"),o("svg.xabber-online"),n}),define("xabber-emoji-utils",["jquery","underscore"],function(t,e){var n=[{code:128516,x:0,y:0},{code:128515,x:1,y:0},{code:128512,x:2,y:0},{code:128522,x:3,y:0},{code:9786,x:4,y:0},{code:128521,x:5,y:0},{code:128525,x:6,y:0},{code:128536,x:7,y:0},{code:128538,x:8,y:0},{code:128535,x:9,y:0},{code:128537,x:10,y:0},{code:128540,x:11,y:0},{code:128541,x:12,y:0},{code:128539,x:13,y:0},{code:128563,x:14,y:0},{code:128513,x:15,y:0},{code:128532,x:16,y:0},{code:128524,x:17,y:0},{code:128530,x:18,y:0},{code:128542,x:19,y:0},{code:128547,x:20,y:0},{code:128546,x:21,y:0},{code:128514,x:22,y:0},{code:128557,x:23,y:0},{code:128554,x:24,y:0},{code:128549,x:25,y:0},{code:128560,x:26,y:0},{code:128517,x:0,y:1},{code:128531,x:1,y:1},{code:128553,x:2,y:1},{code:128555,x:3,y:1},{code:128552,x:4,y:1},{code:128561,x:5,y:1},{code:128544,x:6,y:1},{code:128545,x:7,y:1},{code:128548,x:8,y:1},{code:128534,x:9,y:1},{code:128518,x:10,y:1},{code:128523,x:11,y:1},{code:128567,x:12,y:1},{code:128526,x:13,y:1},{code:128564,x:14,y:1},{code:128565,x:15,y:1},{code:128562,x:16,y:1},{code:128543,x:17,y:1},{code:128550,x:18,y:1},{code:128551,x:19,y:1},{code:128520,x:20,y:1},{code:128127,x:21,y:1},{code:128558,x:22,y:1},{code:128556,x:23,y:1},{code:128528,x:24,y:1},{code:128533,x:25,y:1},{code:128559,x:26,y:1},{code:128566,x:0,y:2},{code:128519,x:1,y:2},{code:128527,x:2,y:2},{code:128529,x:3,y:2},{code:128114,x:4,y:2},{code:128115,x:5,y:2},{code:128110,x:6,y:2},{code:128119,x:7,y:2},{code:128130,x:8,y:2},{code:128118,x:9,y:2},{code:128102,x:10,y:2},{code:128103,x:11,y:2},{code:128104,x:12,y:2},{code:128105,x:13,y:2},{code:128116,x:14,y:2},{code:128117,x:15,y:2},{code:128113,x:16,y:2},{code:128124,x:17,y:2},{code:128120,x:18,y:2},{code:128570,x:19,y:2},{code:128568,x:20,y:2},{code:128571,x:21,y:2},{code:128573,x:22,y:2},{code:128572,x:23,y:2},{code:128576,x:24,y:2},{code:128575,x:25,y:2},{code:128569,x:26,y:2},{code:128574,x:0,y:3},{code:128121,x:1,y:3},{code:128122,x:2,y:3},{code:128584,x:3,y:3},{code:128585,x:4,y:3},{code:128586,x:5,y:3},{code:128128,x:6,y:3},{code:128125,x:7,y:3},{code:128169,x:8,y:3},{code:128293,x:9,y:3},{code:10024,x:10,y:3},{code:127775,x:11,y:3},{code:128171,x:12,y:3},{code:128165,x:13,y:3},{code:128162,x:14,y:3},{code:128166,x:15,y:3},{code:128167,x:16,y:3},{code:128164,x:17,y:3},{code:128168,x:18,y:3},{code:128066,x:19,y:3},{code:128064,x:20,y:3},{code:128067,x:21,y:3},{code:128069,x:22,y:3},{code:128068,x:23,y:3},{code:128077,x:24,y:3},{code:128078,x:25,y:3},{code:128076,x:26,y:3},{code:128074,x:0,y:4},{code:9994,x:1,y:4},{code:9996,x:2,y:4},{code:128075,x:3,y:4},{code:9995,x:4,y:4},{code:128080,x:5,y:4},{code:128070,x:6,y:4},{code:128071,x:7,y:4},{code:128073,x:8,y:4},{code:128072,x:9,y:4},{code:128588,x:10,y:4},{code:128591,x:11,y:4},{code:9757,x:12,y:4},{code:128079,x:13,y:4},{code:128170,x:14,y:4},{code:128694,x:15,y:4},{code:127939,x:16,y:4},{code:128131,x:17,y:4},{code:128107,x:18,y:4},{code:128106,x:19,y:4},{code:128108,x:20,y:4},{code:128109,x:21,y:4},{code:128143,x:22,y:4},{code:128145,x:23,y:4},{code:128111,x:24,y:4},{code:128582,x:25,y:4},{code:128581,x:26,y:4},{code:128129,x:0,y:5},{code:128587,x:1,y:5},{code:128134,x:2,y:5},{code:128135,x:3,y:5},{code:128133,x:4,y:5},{code:128112,x:5,y:5},{code:128590,x:6,y:5},{code:128589,x:7,y:5},{code:128583,x:8,y:5},{code:127913,x:9,y:5},{code:128081,x:10,y:5},{code:128082,x:11,y:5},{code:128095,x:12,y:5},{code:128094,x:13,y:5},{code:128097,x:14,y:5},{code:128096,x:15,y:5},{code:128098,x:16,y:5},{code:128085,x:17,y:5},{code:128084,x:18,y:5},{code:128090,x:19,y:5},{code:128087,x:20,y:5},{code:127933,x:21,y:5},{code:128086,x:22,y:5},{code:128088,x:23,y:5},{code:128089,x:24,y:5},{code:128188,x:25,y:5},{code:128092,x:26,y:5},{code:128093,x:0,y:6},{code:128091,x:1,y:6},{code:128083,x:2,y:6},{code:127872,x:3,y:6},{code:127746,x:4,y:6},{code:128132,x:5,y:6},{code:128155,x:6,y:6},{code:128153,x:7,y:6},{code:128156,x:8,y:6},{code:128154,x:9,y:6},{code:10084,x:10,y:6},{code:128148,x:11,y:6},{code:128151,x:12,y:6},{code:128147,x:13,y:6},{code:128149,x:14,y:6},{code:128150,x:15,y:6},{code:128158,x:16,y:6},{code:128152,x:17,y:6},{code:128140,x:18,y:6},{code:128139,x:19,y:6},{code:128141,x:20,y:6},{code:128142,x:21,y:6},{code:128100,x:22,y:6},{code:128101,x:23,y:6},{code:128172,x:24,y:6},{code:128099,x:25,y:6},{code:128173,x:26,y:6}],i=function(t){if(t<65536)return String.fromCharCode(t);var e=t-65536,n=55296+(e>>10),i=56320+(1023&e);return String.fromCharCode(n)+String.fromCharCode(i)},s=function(t){return i(n[t].code)},a={},o=[];e.each(n,function(t){var e=i(t.code);a[e]=t,o.push(e)});var r=function(t){return String.fromCharCode(t)},c=["["+r(9728)+"-"+r(10239)+"]",r(55356)+"["+r(57088)+"-"+r(57343)+"]",r(55357)+"["+r(56320)+"-"+r(56911)+"]",r(55357)+"["+r(56960)+"-"+r(57087)+"]"],l=new RegExp(c.join("|"),"g");return String.prototype.emojify=function(t){t||(t={});var e=t.tag_name||"span",n="img"===e?' src="images/emoji/blank.gif"':"",i=t.emoji_size||18;return this.replace(l,function(t){var s=a[t];return s?"<"+e+n+' class="emoji emoji-w'+i+' emoji-spritesheet-0" style="background-position: -'+i*s.x+"px -"+i*s.y+'px;" data-emoji="'+t+'"/>':t})},t.fn.emojify=function(e,n){return this.find(e).each(function(){var e=t(this).html();t(this).html(e.emojify(n))}),this},{all:o,get:i,getByIndex:s}}),define("xabber-image-utils",["xabber-dependencies"],function(t){var e=(t._,t.$),n=t.SHA1.b64_sha1,i={},s=["#1abc9c","#16a085","#f1c40f","#f39c12","#2ecc71","#27ae60","#e67e22","#d35400","#3498db","#2980b9","#e74c3c","#c0392b","#9b59b6","#8e44ad","#bdc3c7","#34495e","#2c3e50","#95a5a6","#7f8c8d","#ec87bf","#d870ad","#f69785","#9ba37e","#b49255","#a94136"],a=function(t,e,n){e=e||"",n=n||512;for(var i=atob(t),s=[],a=0;a<i.length;a+=n){for(var o=i.slice(a,a+n),r=new Array(o.length),c=0;c<o.length;c++)r[c]=o.charCodeAt(c);var l=new Uint8Array(r);s.push(l)}return new Blob(s,{type:e})},o=function(t){return this.url=window.URL.createObjectURL(a(t)),i[t]=this,this},r=function(t){return t instanceof o?t:i[t]||new o(t)},c=function(t){var e,i,a,o,r,c=document.createElement("canvas"),l=c.getContext("2d"),d=t?t.trim():"",u=d.split(" ",2);return e=u[0],i=u.length>1?u[1]:"",a=e[0]||"",o=i?i[0]:e.length>1?e[1]:"",r=Math.floor(n(d).charCodeAt(0)%s.length),c.width=128,c.height=128,l.rect(0,0,128,128),l.fillStyle=s[r],l.fill(),l.font="bold 50px sans-serif",l.fillStyle="#FFF",l.textAlign="center",l.fillText(a.toUpperCase()+o.toUpperCase(),64,80),c.toDataURL().replace(/^data:image\/(png|jpg|jpeg);base64,/,"")},l=function(t,n,i){var s,a=e(t),o=n.width,r=n.height,c={minWidth:"",maxWidth:"",minHeight:"",maxHeight:"",left:0,top:0};o<i?s=r<i&&o>r?i/r:i/o:r<i&&(s=i/r),s&&(o*=s,r*=s),o>r?(s?c.minHeight="100%":c.maxHeight="100%",c.left=-i/2*(o-r)/r+"px"):(s?c.minWidth="100%":c.maxWidth="100%",c.top=-i/2*(r-o)/o+"px"),a.css(c)},d=function(t,n){var i=new Image,s=window.URL.createObjectURL(t),a=new e.Deferred;return i.onload=function(){i.onload=null;var t,e=document.createElement("canvas"),n=e.getContext("2d"),o=i.naturalWidth,r=i.naturalHeight;o>r?o>256&&(r*=256/o,o=256):r>256&&(o*=256/r,r=256),e.width=o,e.height=r,n.drawImage(i,0,0,o,r),t=e.toDataURL("image/jpeg").replace(/^data:image\/(png|jpg|jpeg);base64,/,""),window.URL.revokeObjectURL(s),a.resolve(t)},i.onerror=function(){i.onerror=null,window.URL.revokeObjectURL(s),a.resolve(!1)},i.src=s,a.promise()};return e.fn.setAvatar=function(t,e){var n=this.find("img")[0];if(n){e||(e=this.width());var i=r(t);i.width&&i.height?(n.onload=null,l(n,i,e)):n.onload=function(){n.onload=null,i.width=n.naturalWidth,i.height=n.naturalHeight,l(n,i,e)},n.src=i.url}},{getCachedImage:r,getDefaultAvatar:c,getAvatarFromFile:d}}),define("xabber-modal-utils",["xabber-dependencies","xabber-templates"],function(t,e){var n=t._,i=t.$,s=i("<div>").attr("id","modals").appendTo("body"),a=[],o=function(t,e){t instanceof Function?this.$modal=i(t()):this.$modal=i(t),this.options=e||{},this.closed=new i.Deferred};return n.extend(o.prototype,{open:function(t){return this.options.use_queue?(a.push(this),1===a.length&&this.throw()):this.throw(),this.closed.promise()},throw:function(){this.$modal.appendTo(s).prop("modal",this);var t=n.omit(this.options,["use_queue"]);n.extend(t,{is_default_complete:!0,complete_data:null}),this.options.use_queue&&this.$modal.one("modal_close",function(t,e){this.$modal.detach(),this.closed.resolve(e.value),a.shift(),a.length&&a[0].throw()}.bind(this)),this.$modal._openModal(t)},close:function(t){var e=n.omit(t,["use_queue","is_default_complete","complete_data"]);n.extend(e,{complete:function(){if(this.options.use_queue){var e=n.isUndefined(t.complete_data)?null:t.complete_data;this.complete(e)}t.is_default_complete?"function"==typeof this.options.complete&&this.options.complete():(this.options.use_queue&&this.complete(),"function"==typeof t.complete&&t.complete())}.bind(this)}),this.$modal.prop("modal",null),this.$modal._closeModal(e)},complete:function(t){this.$modal.trigger("modal_close",{value:t})}}),i.fn._openModal=i.fn.openModal,i.fn.openModal=function(t){return new o(this,t).open()},i.fn._closeModal=i.fn.closeModal,i.fn.closeModal=function(t){var e=this.prop("modal");e?e.close(t):this._closeModal(t)},{Modal:o,dialogs:{common:function(t,s,a,r){var c=new o(function(){a||(a={}),r||(r=[]);var n=a.ok_button,i=a.cancel_button,o=(a.optional_buttons||[]).reverse();return n&&(n={text:n.text||"Ok"}),i&&(i={text:i.text||"Cancel"}),e.base.dialog({header:t,text:s,ok_button:n,cancel_button:i,optional_buttons:o,dialog_options:r})},{use_queue:!0});return c.$modal.find(".modal-footer button").click(function(t){var e=i(t.target).data("option"),s=c.$modal.find(".dialog-option");if(e&&s.length){var a={};n.each(s,function(t){var e=i(t);a[e.data("name")]=e.find("input").prop("checked")}),c.close({complete_data:a})}else c.close({complete_data:e})}),c.open()},warning:function(t,e){return this.common("Warning",t,{ok_button:!0},e)},error:function(t,e){return this.common("Error",t,{ok_button:!0},e)},ask:function(t,e,n){return this.common(t,e,{ok_button:!0,cancel_button:!0},n)}}}}),define("xabber-textarea-utils",["xabber-dependencies"],function(t){var e=t._,n=t.$;return n.fn.placeCaretAtEnd=function(){if(!this.length)return this;var t=this[0];if(t.focus(),e.isUndefined(window.getSelection)||e.isUndefined(document.createRange)){if(!e.isUndefined(document.body.createTextRange)){var n=document.body.createTextRange();n.moveToElementText(t),n.collapse(!1),n.select()}}else{var i=document.createRange();i.selectNodeContents(t),i.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}return this},n.fn.updateRichTextarea=function(){var t=this.siblings(".placeholder"),e=this.getTextFromRichTextarea();return e||this.html(""),t.hideIf(e),this},n.fn.flushRichTextarea=function(){return this.html("").siblings(".placeholder").removeClass("hidden"),this},n.fn.getTextFromRichTextarea=function(){var t=n("<div>").html(this.html());return t.find(".emoji").each(function(){n(this).replaceWith(n(this).data("emoji"))}),t.find("span").each(function(){n(this).replaceWith(n(this).html())}),t.find("div").each(function(){var t=n(this);t.find("br").remove();var e=t.html();t.replaceWith("\n"+e)}),t.find("br").each(function(){n(this).replaceWith("\n")}),t.text()},null}),define("xabber-utils",["xabber-dependencies","xabber-emoji-utils","xabber-image-utils","xabber-modal-utils","xabber-textarea-utils"],function(t,e,n,i,s){var a=t.$,o=(t._,t.moment);a.fn.switchClass=function(t,e){return 1===arguments.length&&(e=!this.hasClass(t)),e?this.addClass(t):this.removeClass(t),this},a.fn.showIf=function(t){return this.switchClass("hidden",!t)},a.fn.hideIf=function(t){return this.switchClass("hidden",t)};var r=function(t){return"<a target='_blank' class='msg-hyperlink' href='"+(0===t.indexOf("http://")||0===t.indexOf("https://")?"":"http://")+encodeURI(decodeURI(t)).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")+"'>"+t+"</a>"};return a.fn.hyperlinkify=function(t){return t||(t={}),(t.selector?this.find(t.selector):this).each(function(t,e){var n=a(e),i=n.html(),s=/(((ftp|http|https):\/\/)|(www\.))(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g,o=i.match(s)
;if(o)if(1===o.length&&o[0]===i)n.html(r(i));else{for(t=0;t<o.length;t++)i=i.replace(o[t],r(o[t]));n.html(i)}}),this},{uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},utoa:function(t){return window.btoa(unescape(encodeURIComponent(t)))},atou:function(t){return decodeURIComponent(escape(window.atob(t)))},now:function(){return Math.floor(o.now()/1e3)},pretty_time:function(t){return(t?o(t):o()).format("HH:mm:ss")},pretty_date:function(t){return(t?o(t):o()).format("dddd, MMMM D, YYYY")},pretty_datetime:function(t){return(t?o(t):o()).format("MMMM D, YYYY HH:mm:ss")},pretty_short_datetime:function(t){var e=t?o(t):o(),n=o(e).startOf("day"),i=o(e).startOf("year");return n.isSame(o().startOf("day"))?e.format("HH:mm:ss"):i.isSame(o().startOf("year"))?e.format("MMM D"):e.format("DD/MM/gg")},pretty_timedelta:function(t){return t<60?"just now":t<3600?Math.floor(t/60)+" minutes ago":t<86400?Math.floor(t/3600)+" hours ago":Math.floor(t/86400)+" days ago"},pretty_size:function(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(2)+" KB":t<1073741824?(t/1048576).toFixed(2)+" MB":(t/1073741824).toFixed(2)+" GB"},openWindow:function(t,e){var n=window.open(t,"_blank");n?n.focus():e&&e()},clearSelection:function(){var t=window.getSelection();t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges()},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},emoji:e,images:n,modals:i,dialogs:i.dialogs}}),define("xabber-version",[],function(){return JSON.parse('{"version_number":"1.0.12","version_description":"Add source info for Xabber API calls"}')}),define("xabber-environment",["xabber-dependencies","xabber-constants","xabber-templates","xabber-utils","xabber-version"],function(t,e,n,i,s){return _.extend({constants:e,templates:n,utils:i,uuid:i.uuid},s,t)}),function(t,e){define("xabber-core",["xabber-environment"],function(t){return e(t)})}(0,function(t){var e=t.constants,n=t._,i=t.$,s=t.uuid,a=t.utils;return new(Backbone.Model.extend({defaults:{version_number:t.version_number,actual_version_number:t.version_number,client_id:s().substring(0,18),client_name:"Xabber Web "+t.version_number},initialize:function(){this.env=t,this.fetchURLParams(),this.cleanUpStorage(),this._settings=new this.Settings({id:"settings"},{storage_name:this.getStorageName(),fetch:"before"}),this.settings=this._settings.attributes,this._cache=new Backbone.ModelWithStorage({id:"cache"},{storage_name:this.getStorageName(),fetch:"before"}),this.cache=this._cache.attributes,this.check_config=new i.Deferred,this.on("change:actual_version_number",this.throwNewVersion,this),this._version_interval=setInterval(this.readActualVersion.bind(this),6e5)},error:function(t){e.LOG_LEVEL>=e.LOG_LEVEL_ERROR&&console.error(t)},warn:function(t){e.LOG_LEVEL>=e.LOG_LEVEL_WARN&&console.warn(t)},info:function(t){e.LOG_LEVEL>=e.LOG_LEVEL_INFO&&console.log(t)},debug:function(t){e.LOG_LEVEL>=e.LOG_LEVEL_DEBUG&&console.log(t)},readActualVersion:function(){var t=new XMLHttpRequest;t.open("GET","src/version.js?"+s(),!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){t.onreadystatechange=null;try{var e=t.responseText,n=JSON.parse(e.split("\n")[1].slice(1,-1))}catch(t){return}this.set({actual_version_number:n.version_number,version_description:n.version_description})}}.bind(this),t.send()},throwNewVersion:function(){var t=this.get("actual_version_number"),e=this.get("version_description");a.dialogs.common("Update Xabber Web","New version "+t+' is available. <div class="new-version-description">'+e+"</div> Reload page to fetch this changes?",{ok_button:{text:"yes"},cancel_button:{text:"not now"}}).done(function(t){t&&window.location.reload(!0)})},Settings:Backbone.ModelWithStorage.extend({defaults:{max_connection_retries:-1,notifications:!0,message_preview:!1,sound:!0,sound_on_message:"beep_up",sound_on_auth_request:"beep_a",hotkeys:"enter",load_history:!0,mam_requests_limit:50,mam_messages_limit:20,ping_interval:180}}),start:function(){this.check_config.done(function(t){this.check_config=void 0,t&&this.trigger("start")}.bind(this))},configure:function(i){n.extend(e,n.pick(i,["CONNECTION_URL","LOG_LEVEL","DEBUG","XABBER_ACCOUNT_URL","API_SERVICE_URL","USE_SOCIAL_AUTH","DEFAULT_LOGIN_SCREEN","STORAGE_NAME_ENDING"]));var s=e["LOG_LEVEL_"+e.LOG_LEVEL];if(e.LOG_LEVEL=s||e.LOG_LEVEL_ERROR,e.DEBUG&&(window.xabber=this,n.extend(window,t)),a.isMobile.any()){var o,r="Sorry, but Xabber for Web may not work correctly on your device. ",c='Go to <a href="www.xabber.com">Xabber site</a> for more details.';return o=a.isMobile.iOS()?"Sorry, but Xabber for Web does not support iOS browsers. "+c:a.isMobile.Android()?r+"You should use Xabber for Android client.":r+c,a.dialogs.error(o),void this.check_config.resolve(!1)}if(!e.CONNECTION_URL)return a.dialogs.error("Missing connection URL!"),void this.check_config.resolve(!1);var l=this;Backbone.useLocalStorage||this.cache.ignore_localstorage_warning||a.dialogs.warning('Your web browser does not support storing data locally. In Safari, the most common cause of this is using "Private Browsing Mode". So, you will need log in after page refresh again.',[{name:"ignore",text:"Don't show this message again"}]).done(function(t){t&&t.ignore&&l._cache.save("ignore_localstorage_warning",!0)}),this.requestNotifications().done(function(t){l._cache.save("notifications",t),t&&"serviceWorker"in navigator&&"PushManager"in window?l.setUpPushNotifications().done(function(t){!0!==t&&a.dialogs.error("Could not enable push notifications! "+t),l.check_config.resolve(!0)}):(t&&!l.cache.ignore_push_warning&&a.dialogs.warning("Push notifications are not supported",[{name:"ignore",text:"Don't show this message again"}]).done(function(t){t&&t.ignore&&l._cache.save("ignore_push_warning",!0)}),l._cache.save("endpoint_key",void 0),l.check_config.resolve(!0))})},fetchURLParams:function(){var t=window.location.href.split(/[?#]/);if(this.url_params={},t.length>1){var e,n,i=t[1].split("&");for(e=0;e<i.length;e++)n=i[e].split("="),1===n.length?this.url_params[n[0]]=null:this.url_params[n[0]]=n[1]}window.history.pushState(null,null,window.location.pathname)},getStorageName:function(){var t=e.STORAGE_NAME+"-"+e.STORAGE_VERSION;return e.STORAGE_NAME_ENDING&&(t=t+"-"+e.STORAGE_NAME_ENDING),t},cleanUpStorage:function(){var t=e.STORAGE_NAME+"-"+e.STORAGE_VERSION;for(var n in window.localStorage)n.startsWith("xabber")&&!n.startsWith(t)&&window.localStorage.removeItem(n)},requestNotifications:function(){var t=new i.Deferred,e=this;return window.Notification?"granted"===window.Notification.permission?t.resolve(!0):window.Notification.requestPermission(function(n){"granted"===n||e.cache.ignore_push_warning||a.dialogs.warning("You should allow popup notifications for this site if you want to receive popups on new messages and some important push notifications.",[{name:"ignore",text:"Don't show this message again"}]).done(function(t){t&&t.ignore&&e._cache.save("ignore_push_warning",!0)}),t.resolve("granted"===n)}):(e.cache.ignore_notifications_warning||a.dialogs.warning("Notifications are not supported.",[{name:"ignore",text:"Don't show this message again"}]).done(function(t){t&&t.ignore&&e._cache.save("ignore_notifications_warning",!0)}),t.resolve(!1)),t.promise()},setUpPushNotifications:function(){var t=new i.Deferred,n=this;return firebase.initializeApp({apiKey:e.GCM_API_KEY,messagingSenderId:e.GCM_SENDER_ID}),n.messaging=firebase.messaging(),n.messaging.requestPermission().then(function(){n.messaging.getToken().then(function(e){n._cache.save("endpoint_key",e||void 0),t.resolve(!!e||"No Instance ID token available.")}).catch(function(e){t.resolve(e)}),n.messaging.onTokenRefresh(function(){n.messaging.getToken().then(function(t){n._cache.save("endpoint_key",t)}).catch(function(t){})}),navigator.serviceWorker.addEventListener("message",function(t){var i=t.data;if("push-msg-received"===i["firebase-messaging-msg-type"]){var s=i["firebase-messaging-msg-data"];if(s&&s.data&&s.from===e.GCM_SENDER_ID){var a;try{a=JSON.parse(atob(s.data.body))}catch(t){a=s.data}n.trigger("push_message",a)}}})}).catch(function(e){t.resolve({error:e})}),t.promise()},extendWith:function(){return n.reduce(arguments,function(t,e){return e(t)},this)}}))}),define("xabber-views",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.base,s=e.utils,a=e.$,o=e._;return t.ViewPath=function(t){this.path=t.split("."),this.applyTo=function(t){for(var e=t,n=0;n<this.path.length;n++)if(!(e=o.result(e,this.path[n])))return null;return e}},t.BasicView=Backbone.View.extend({template:function(){return""},initialize:function(e){e||(e={}),this.parent=e.parent,this.vname=e.vname,this.children={},this.$el.addClass(e.classlist),e.el||this.$el.html(this.template(o.extend({view:this},n))),o.isUndefined(this.ps_selector)||(this.ps_container=this.$(this.ps_selector),this.ps_container.length&&this.ps_container.perfectScrollbar(o.extend(this.ps_settings||{},t.ps_settings))),this.data=new Backbone.Model({visible:!1}),this.data.on("change:visible",this.onChangedVisibility,this),t.on("update_css",function(t){this.updateCSS&&this.updateCSS()},this),this._initialize&&this._initialize(e),this.__initialize&&this.__initialize(e)},isVisible:function(){return this.data.get("visible")},onChangedVisibility:function(){},show:function(){this.onShow.apply(this,arguments),this.data.set("visible",!0),this.trigger("after_show",this),this.updateScrollBar()},hide:function(){this.trigger("before_hide",this),this.data.set("visible",!1),this.onHide.apply(this,arguments)},onShow:function(){this.render.apply(this,arguments),o.each(this.children,function(t){t.render.apply(t,arguments)})},onHide:function(){o.each(this.children,function(t){t.onHide.apply(t,arguments)})},detach:function(){this.$el.detach()},child:function(t){return this.children[t]},addChild:function(t,e,n){var i;return e instanceof Backbone.View?(i=e,i.parent=this):i=new e(o.extend({parent:this,vname:t},n)),this.children[t]=i,i},removeChild:function(t,e){e||(e={});var n=this.children[t];n&&(delete this.children[t],e.soft?n.detach():n.remove())},removeChildren:function(){o.each(o.keys(this.children),function(t){this.removeChild(t)}.bind(this))},setCustomCss:function(t){this.$el.css(t)},removeCustomCss:function(){this.$el.removeAttr("style")},saveScrollBarOffset:function(){if(this.ps_container&&this.isVisible()){void 0===this.data.get("scroll_top")&&this.data.set("scroll_top",this.getScrollTop())}},updateScrollBar:function(){if(this.ps_container&&this.isVisible()){var t=this.data.get("scroll_top");void 0===t?this.ps_container.perfectScrollbar("update"):(this.data.set("scroll_top",void 0),this.scrollTo(t))}return this},scrollTo:function(t){this.ps_container[0].scrollTop=t,this.ps_container.perfectScrollbar("update")},scrollToTop:function(){this.scrollTo(0)},scrollToBottom:function(){var t=this.ps_container[0].scrollHeight,e=this.ps_container[0].offsetHeight;this.scrollTo(t-e)},scrollToChild:function(t){var e=o.reduce(t.prevAll(),function(t,e){return t+e.offsetHeight},0);this.scrollTo(e)},getScrollTop:function(){return this.ps_container[0].scrollTop},getPercentScrolled:function(){return this.isScrolledToTop()?0:this.ps_container[0].scrollTop/(this.ps_container[0].scrollHeight-this.ps_container[0].offsetHeight)},isScrolledToTop:function(){return 0===this.getScrollTop()},isScrolledToBottom:function(){var t=this.ps_container[0].scrollTop;return this.ps_container[0].scrollHeight===t+this.ps_container[0].offsetHeight}}),t.NodeView=t.BasicView.extend({onShow:function(t,e){return o.each(this.children,function(t){t.hide()}),this.$el.children().detach(),e=this.patchTree(e,t)||e,o.each(this.children,function(n,i){o.has(e,i)&&(this.$el.append(n.$el),n.show(t,e[i]))}.bind(this)),this.render(t)},onHide:function(t){o.each(this.children,function(e){e.hide(t)})},patchTree:function(){}}),t.Container=t.BasicView.extend({className:"container",render:function(t,e){var n=e.applyTo(t);return this.$el.children().detach(),this.view!==n&&this.onHide(t),this.view=n,this.view&&(this.$el.append(this.view.$el),this.view.show(t)),this},onHide:function(t){this.view&&this.view.hide(t),this.view=null}}),t.SearchView=t.BasicView.extend({events:{"keyup .search-input":"keyUpOnSearch","focusout .search-input":"clearSearchSelection","click .close-search-icon":"clearSearch"},keyUpOnSearch:function(t){t.stopPropagation(),this.ids=this.$(".list-item:not(.hidden)").map(function(){return a(this).data("id")}).toArray();var e=this.getSelectedItem();return t.keyCode===n.KEY_ARROW_DOWN?this.selectNextItem():t.keyCode===n.KEY_ARROW_UP?this.selectPreviousItem():t.keyCode===n.KEY_ENTER&&e.length?(t.preventDefault(),this.onEnterPressed(e)):t.keyCode===n.KEY_ESCAPE?(t.preventDefault(),this.clearSearch()):void this.updateSearch()},getSelectedItem:function(){return this.$('.list-item[data-id="'+this.selection_id+'"]')},selectItem:function(t){this.clearSearchSelection();var e=this.$('.list-item[data-id="'+t+'"]');e.length?this.selection_id=t:(e=this.$(".list-item:visible").first(),this.selection_id=e.data("id")),e.addClass("selected")},selectNextItem:function(){this.selectItem(this.ids[this.ids.indexOf(this.selection_id)+1])},selectPreviousItem:function(){this.selectItem(this.ids[this.ids.indexOf(this.selection_id)-1])},updateSearch:function(){if(this._update_search_timeout)this.query=!0;else{var t=this.$(".search-input").val();this.$(".search-form").switchClass("active",t),this.clearSearchSelection(),t?this.search(t.toLowerCase()):this.searchAll(),this.updateScrollBar(),this.query=!1,this._update_search_timeout=setTimeout(function(){this._update_search_timeout=null,this.query&&this.updateSearch()}.bind(this),150)}},clearSearch:function(t){t&&t.preventDefault(),this.$(".search-input").val(""),this.updateSearch()},clearSearchSelection:function(t){this.selection_id=null,this.$(".item-list .selected").removeClass("selected")},searchAll:function(){this.$(".list-item").removeClass("hidden")},search:function(){},onEnterPressed:function(){}}),t.InputWidget=Backbone.View.extend({field_type:"text",template:i.input_widget,events:{"click .field-text":"showInput","keydown .field-input":"keyDown","keyup .field-input":"keyUp","focusout .field-input":"changeValue"},initialize:function(){this.$el.html(this.template({field_name:this.field_name,field_type:this.field_type,placeholder:this.placeholder})),this.$value=this.$(".field-text"),this.$input=this.$(".field-input"),this.updateValue(),this.data=new Backbone.Model({input_mode:!1}),this.data.on("change:input_mode",this.onChangedInputMode,this),this.bindModelEvents()},bindModelEvents:function(){this.model.on("change:"+this.model_field,this.updateValue,this)},showInput:function(){this.data.set("input_mode",!0)},onChangedInputMode:function(){var t=this.data.get("input_mode");this.$value.hideIf(t),this.$input.showIf(t).focus()},keyDown:function(t){t.stopPropagation();var e=this.getValue();t.keyCode===n.KEY_ENTER?this.changeValue():t.keyCode===n.KEY_ESCAPE&&(this.$input.removeClass("changed").val(e),this.data.set("input_mode",!1))},keyUp:function(t){var e=this.getValue();this.$input.switchClass("changed",this.$input.val()!==e)},getValue:function(){return this.model.get(this.model_field)},setValue:function(t){this.model.save(this.model_field,t)},changeValue:function(){var t=this.getValue(),e=this.$input.removeClass("changed").val();e!==t&&this.setValue(e),this.data.set("input_mode",!1)},updateValue:function(){var t=this.getValue();this.$value.text(t),this.$input.val(t)}}),t.Body=t.NodeView.extend({className:"client-body-wrap",_initialize:function(){this.vname="body",this.data.set("visible",!0),this.screen=new Backbone.Model,this.screen_map=new Backbone.Model,this.screen.on("change",this.update,this),this.screen_map.on("change",this.onScreenMapChanged,this),a("body").append(this.$el)},addScreen:function(t,e){this.screen_map.set(t,e)},setScreen:function(t,e,n){var i={stamp:o.uniqueId()};t&&!this.isScreen(t)&&(i.name=t),this.screen.set(o.extend(i,e),n)},isScreen:function(t){return this.screen.get("name")===t},onScreenMapChanged:function(){var t=this.screen.get("name");o.has(this.screen_map.changed,t)&&this.update()},update:function(){var t=this.screen.attributes,e=this.screen_map.get(t.name);void 0!==e&&(this.onShow(t,e),this.model.trigger("update_screen",this.screen.get("name")),this.model.trigger("update_layout",{screen_changed:t.name}))}}),t.ToolbarView=t.BasicView.extend({className:"toolbar noselect",ps_selector:".accounts",ps_settings:{theme:"item-list"},template:i.toolbar,events:{"click .all-chats":"showAllChats","click .chats":"showChats","click .group-chats":"showGroupChats","click .contacts":"showContacts","click .settings":"showSettings","click .add-variant.contact":"showAddContactView","click .add-variant.account":"showAddAccountView","click .about":"showAbout"},_initialize:function(){var e=a('<div class="lean-overlay toolbar-menu"></div>');this.$(".add-something").on("change_state",function(t,n){a(this).switchClass("active",n).find(".mdi").switchClass("mdi-close",n).switchClass("mdi-plus",!n),n?e.appendTo("body"):e.detach()}),t.on("update_screen",this.onUpdatedScreen,this),this.data.on("change:add_menu_state",this.onChangedAddMenuState,this),this.data.on("change:msg_counter",this.onChangedMessageCounter,this),this.data.set({msg_counter:0})},render:function(){this.$(".add-something").dropdown({inDuration:50,outDuration:50,constrainWidth:!1,hover:!1,alignment:"left"})},onUpdatedScreen:function(t){"chats"===t&&(this.$(".toolbar-item.all-chats").hasClass("active")||this.$(".toolbar-item.chats").hasClass("active"))||(this.$(".toolbar-item").removeClass("active"),o.contains(["chats","group-chats","contacts","settings","about"],t)&&this.$(".toolbar-item."+t).addClass("active"))},showAllChats:function(e){this.$(".toolbar-item").removeClass("active").filter(".all-chats").addClass("active"),t.body.setScreen("chats",{right:null})},showChats:function(e){this.$(".toolbar-item").removeClass("active").filter(".chats").addClass("active"),t.body.setScreen("chats",{right:null})},showGroupChats:function(e){t.body.setScreen("group-chats",{right:null})},showContacts:function(e){t.body.setScreen("contacts",{right:null})},showSettings:function(e){t.body.setScreen("settings")},showAddContactView:function(){t.trigger("add_contact")},showAddAccountView:function(){t.trigger("add_account")},showAbout:function(){t.body.setScreen("about")},increaseMessageCounter:function(t){var e=this.data.get("msg_counter");this.data.set("msg_counter",e+(t||1))},decreaseMessageCounter:function(t){var e=this.data.get("msg_counter");this.data.set("msg_counter",e>(t||(t=1))?e-t:0)},onChangedMessageCounter:function(){var t=this.data.get("msg_counter");this.$(".msg-indicator").switchClass("unread",t).text(t)}}),t.SettingsView=t.BasicView.extend({className:"settings-panel",template:i.settings,ps_selector:".panel-content",events:{"click .settings-tabs-wrap .settings-tab":"jumpToBlock","mousedown .setting.notifications label":"setNotifications","mousedown .setting.message-preview label":"setMessagePreview","change .sound input[type=radio][name=sound]":"setSound","change .hotkeys input[type=radio][name=hotkeys]":"setHotkeys","click .settings-tab.delete-all-accounts":"deleteAllAccounts"},_initialize:function(){this.$(".xabber-info-wrap .version").text(t.get("version_number"))},render:function(){var t=this.model.attributes;this.$(".notifications input[type=checkbox]").prop({checked:t.notifications}),this.$(".message-preview input[type=checkbox]").prop({checked:t.message_preview});var e=t.sound?t.sound_on_message:"";return this.$('.sound input[type=radio][name=sound][value="'+e+'"]').prop("checked",!0),this.$(".hotkeys input[type=radio][name=hotkeys][value="+t.hotkeys+"]").prop("checked",!0),this},jumpToBlock:function(t){var e=a(t.target).closest(".settings-tab"),n=this.$(".settings-block-wrap."+e.data("block-name"));e.addClass("active").siblings().removeClass("active"),this.scrollToChild(n)},setNotifications:function(t){var e=!this.model.get("notifications");this.model.save("notifications",e),t.preventDefault(),a(t.target).closest("input").prop("checked",e)},setMessagePreview:function(t){var e=!this.model.get("message_preview");this.model.save("message_preview",e),t.preventDefault(),a(t.target).closest("input").prop("checked",e)},setSound:function(e){var n=e.target.value;n?(t.playAudio(n),this.model.save({sound:!0,sound_on_message:n})):this.model.save("sound",!1)},setHotkeys:function(t){this.model.save("hotkeys",t.target.value)},deleteAllAccounts:function(e){s.dialogs.ask("Quit Xabber Web","Do you want to delete all accounts from Xabber Web? Accounts will not be deleted from the server.").done(function(e){e&&t.trigger("quit")})}}),t.AboutView=t.BasicView.extend({className:"settings-panel about-panel",template:i.about,ps_selector:".panel-content",_initialize:function(){this.$(".xabber-info-wrap .version").text(this.model.get("version_number"))},render:function(){}}),t.DragManager=Backbone.Model.extend({initialize:function(){window.document.onmousedown=this.onMouseDown.bind(this),window.document.onmousemove=this.onMouseMove.bind(this),window.document.onmouseup=this.onMouseUp.bind(this)},onMouseDown:function(t){if(1==t.which){var e=t.target.closest(".drag-handle"),n=e&&e.closest(".draggable");if(!n)return this.resetElem();this.set({elem:n,draghandle_elem:e,downX:t.pageX,downY:t.pageY})}},onMouseMove:function(t){if(this.get("elem")){var e=this.get("avatar");if(!e){if(Math.abs(t.pageX-this.get("downX"))<3&&Math.abs(t.pageY-this.get("downY"))<3)return;if(!(e=this.createAvatar(t)))return this.resetElem();this.set("avatar",e);var n=this.getCoords(e);this.set({shiftX:this.get("downX")-n.left,shiftY:this.get("downY")-n.top}),this.startDrag(t)}e.style.left=t.pageX-this.get("shiftX")+"px",e.style.top=t.pageY-this.get("shiftY")+"px";var i=this.findDropElem(t);this.updateDropElem(i)}},onMouseUp:function(t){this.get("avatar")&&this.finishDrag(t),this.resetElem()},resetElem:function(){this.set({elem:null,draghandle_elem:null,avatar:null})},getCoords:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},createAvatar:function(){var t=this.get("elem"),e=a(t),n=this.get("draghandle_elem"),i={parent:t.parentNode,nextSibling:t.nextSibling,position:t.position||"",left:t.left||"",top:t.top||"",zIndex:t.zIndex||"",avatar_cursor:t.style.cursor||"",draghandle_elem_cursor:n.style.cursor||""};return e.addClass("dragging"),t.style.cursor="-webkit-grabbing",n.style.cursor="-webkit-grabbing",t.rollback=function(){i.parent.insertBefore(t,i.nextSibling),e.removeClass("dragging"),t.style.position=i.position,t.style.left=i.left,t.style.top=i.top,t.style.zIndex=i.zIndex,t.style.cursor=i.avatar_cursor,n.style.cursor=i.draghandle_elem_cursor},t},startDrag:function(t){var e=this.get("avatar");window.document.body.appendChild(e),e.style.zIndex=9999,e.style.position="absolute"},finishDrag:function(t){var e=this.get("elem"),n=this.get("avatar"),i=this.findDropElem(t);n.rollback(),this.updateDropElem(null),e&&i&&(a(e).trigger("drag_to",i),a(i).trigger("drag_from",e))},findDropElem:function(t){var e=this.get("avatar");e.hidden=!0;var n=window.document.elementFromPoint(t.clientX,t.clientY);return e.hidden=!1,n?n.closest(".droppable"):null},updateDropElem:function(t){var e=this.get("drop_elem");this.set("drop_elem",t),e&&a(e).removeClass("drag-on"),t&&a(t).addClass("drag-on")}}),o.extend(t,{modal_settings:{open:{in_duration:50,out_duration:100,opacity:.4},close:{out_duration:100}},ps_settings:{minScrollbarLength:40,suppressScrollX:!0,wheelSpeed:.5},startBlinkingFavicon:function(){this._blink_interval||(this._blink_interval=setInterval(function(){var t=a("link[rel='shortcut icon']");t.attr("href")===n.FAVICON_DEFAULT?t.attr("href",n.FAVICON_MESSAGE):t.attr("href",n.FAVICON_DEFAULT)},500))},stopBlinkingFavicon:function(){this._blink_interval&&(clearInterval(this._blink_interval),this._blink_interval=null,a("link[rel='shortcut icon']").attr("href",n.FAVICON_DEFAULT))},onChangedMessageCounter:function(){this.get("msg_counter")?(this.startBlinkingFavicon(),window.document.title="Messages ("+this.get("msg_counter")+")"):(this.stopBlinkingFavicon(),window.document.title="Xabber Web")},increaseMessageCounter:function(t){this.set("msg_counter",this.get("msg_counter")+(t||1))},decreaseMessageCounter:function(t){var e=this.get("msg_counter");this.set("msg_counter",e>(t||(t=1))?e-t:0)},resetMessageCounter:function(){this.set("msg_counter",0)},onChangedFocusState:function(){this.get("focused")&&this.resetMessageCounter()},openWindow:function(t){s.openWindow(t,function(){s.dialogs.error("Could not open new tab. Please allow popups")}.bind(this))},popupNotification:function(t){var e=new window.Notification(t.title,{body:t.text,icon:t.icon});return setTimeout(e.close.bind(e),5e3),e},playAudio:function(t){var e=n.SOUNDS[t];if(e){new window.Audio(e).play()}},registerDOMEvents:function(){var t=this;a(window).on("blur focus",function(e){t.set("focused","focus"===e.type)}),a(window).on("resize",function(e){t.set({width:window.innerWidth,height:window.innerHeight}),t.trigger("update_layout",{size_changed:!0})}),window.document.body.ondragover=function(t){t.preventDefault()},window.document.body.ondrop=function(t){t.preventDefault()}}}),t.once("start",function(){this.set("msg_counter",0),this.on("change:msg_counter",this.onChangedMessageCounter,this),this.on("change:focused",this.onChangedFocusState,this),this.set({focused:window.document.hasFocus(),width:window.innerWidth,height:window.innerHeight}),this.registerDOMEvents(),Materialize.modalSettings=this.modal_settings,this.drag_manager=new this.DragManager,this.body=new this.Body({model:this}),this.login_page=this.body.addChild("login",this.NodeView,{classlist:"login-page-wrap"}),this.toolbar_view=this.body.addChild("toolbar",this.ToolbarView),this.main_panel=this.body.addChild("main",this.NodeView,{classlist:"main-wrap"}),this.left_panel=this.main_panel.addChild("left",this.NodeView,{classlist:"panel-wrap left-panel-wrap"}),this.right_panel=this.main_panel.addChild("right",this.NodeView,{classlist:"panel-wrap right-panel-wrap"}),this.wide_panel=this.main_panel.addChild("wide",this.NodeView,{classlist:"panel-wrap wide-panel-wrap"}),this.settings_view=this.wide_panel.addChild("settings",this.SettingsView,{model:this._settings}),this.about_view=this.wide_panel.addChild("about",this.AboutView,{model:this})},t),t}}),define("xabber-api-service",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.api_service,s=e.utils,a=e.$,o=e._;return t.AccountSettings=Backbone.Model.extend({idAttribute:"jid",defaults:{timestamp:0,to_sync:!1,synced:!1,deleted:!1},update_timestamp:function(){this.save("timestamp",s.now())},update_settings:function(t){this.save(o.extend({timestamp:s.now()},t))},request_data:function(){return{jid:this.get("jid"),timestamp:this.get("timestamp"),settings:o.omit(this.attributes,["jid","timestamp","order","to_sync","synced","deleted"])}}}),t.AccountSettingsList=Backbone.CollectionWithStorage.extend({model:t.AccountSettings,create_from_server:function(t){var e=this.create(o.extend({jid:t.jid,timestamp:t.timestamp,to_sync:!0,synced:!0},t.settings));return this.trigger("add_settings",e),e}}),t.AccountsOrderTimestamp=Backbone.ModelWithStorage.extend({defaults:{timestamp:0}}),t.APIAccount=Backbone.ModelWithStorage.extend({defaults:{token:null,sync_all:!1},_initialize:function(e,n){if(this.list=n.settings_list,this.save({connected:!1,sync_request:"silent"}),this.on("change:connected",function(){this.get("connected")?this.fcm_subscribe():this.fcm_unsubscribe()},this),this.on("change:token",function(){null!==this.get("token")&&this.save({sync_all:!0,sync_request:this.list_length?"window":"silent"})},this),this.list.on("change:to_sync",function(t){this.get("sync_all")&&!t.get("to_sync")&&this.save("sync_all",!1)},this),t.on("push_message",function(t){this.get("connected")&&t.username===this.get("username")&&t.from_token!==this.get("token")&&"settings_updated"===t.action&&(this.synchronize_main_settings(),this.synchronize_order_settings())},this),this.ready=new a.Deferred,t.url_params.social_auth){var i=t.url_params.social_auth;delete t.url_params.social_auth;try{var s=JSON.parse(atob(i));return this.save("token",null),void this.social_login(s)}catch(t){}}t.url_params.token&&(this.save("token",t.url_params.token),delete t.url_params.token),this.get("token")?this.login_by_token():this.ready.resolve()},_call_method:function(t,e,i,s,o){var r={type:t,url:n.API_SERVICE_URL+e,headers:{Authorization:"Token "+this.get("token")},context:this,contentType:"application/json",dataType:"json",success:function(t,e,n){s&&s(t)},error:function(t,e,n){this.onAPIError(t,o)}.bind(this)};i&&(r.data=JSON.stringify(i)),a.ajax(r)},add_source:function(e){return o.extend({source:"Xabber Web "+t.get("version_number")},e)},get_settings:function(){null!==this.get("token")?this._call_method("GET","/accounts/current/",null,function(t){"registered"===t.account_status?(this.onUserData(t),this._call_method("GET","/accounts/current/client-settings/",null,this.onSettings.bind(this),this.onSettingsFailed.bind(this))):(s.dialogs.error("Your Xabber account has not permission to synchronize settings of XMPP accounts!"),this.save({token:null,connected:!1}),this.trigger("settings_result",null))}.bind(this),this.onSettingsFailed.bind(this)):this.trigger("settings_result",null)},delete_settings:function(t){this.get("connected")?this._call_method("DELETE","/accounts/current/client-settings/",{jid:t},this.onSettings.bind(this),this.onSettingsFailed.bind(this)):this.trigger("settings_result",null)},synchronize_main_settings:function(){if(this.get("connected")){var t=o.map(this.list.where({to_sync:!0}),function(t){return t.request_data()});t.length?this._call_method("PATCH","/accounts/current/client-settings/",{settings_data:t},this.onSettings.bind(this),this.onSettingsFailed.bind(this)):this.get_settings()}else this.trigger("settings_result",null)},synchronize_order_settings:function(){if(this.get("connected")&&this.get("sync_all")){var t=this.list.order_timestamp.get("timestamp"),e=this.list.map(function(t){return{jid:t.get("jid"),order:t.get("order")}});this._call_method("PATCH","/accounts/current/client-settings/",{order_data:{settings:e,timestamp:t}},this.onSettings.bind(this),this.onSettingsFailed.bind(this))}else this.trigger("settings_result",null)},fetch_from_server:function(t){var e=t.deleted,n=t.settings_data,i=t.order_data.timestamp,a=t.order_data.settings,r=this.list,c=this.get("sync_all");if(o.each(e,function(t){var e=r.get(t.jid);e&&e.get("to_sync")&&e.get("timestamp")<=t.timestamp&&e.trigger("delete_account",!0)}),o.each(n,function(t){var e=r.get(t.jid);e&&(e.get("to_sync")?e.save(o.extend({timestamp:t.timestamp,deleted:!1,synced:!0},t.settings)):e.save("synced",t.timestamp===e.get("timestamp"))),!e&&c&&(e=r.create_from_server(t))}),c){var l={},d=1;o.each(a,function(t){l[t.jid]=t.order,t.order>d&&(d=t.order)}),r.order_timestamp.save("timestamp",i),r.each(function(t){var e=t.get("jid"),n=l[e];n||(d+=1,n=d),t.save("order",n)})}this.trigger("settings_result",t),this.save("last_sync",s.now())},onAPIError:function(t,e){var n=t.status,i=t.responseJSON;403===n&&(this.save({connected:!1,token:null}),"Invalid token"===i.detail&&("not_found"===i.reason||("revoked"===i.reason?o.each(this.list.where({to_sync:!0}),function(t){t.trigger("delete_account",!0)
}):"expired"===i.reason&&s.dialogs.common("Error","Token for your Xabber account expired. Do you want relogin?",{ok_button:{text:"yes"},cancel_button:{text:"not now"}}).done(function(t){t&&this.trigger("relogin")}.bind(this))))),e&&e(i,n)},_login:function(t,e,i){var o={type:"POST",url:n.API_SERVICE_URL+"/accounts/login/",contentType:"application/json",dataType:"json",data:JSON.stringify(this.add_source()),success:e,error:function(t,e,n){this.onAPIError(t,i)}.bind(this)};if(t.token)o.headers={Authorization:"Token "+t.token};else{var r=t.username,c=t.password;o.headers={Authorization:"Basic "+s.utoa(r+":"+c)}}a.ajax(o)},login:function(t,e){this._login({username:t,password:e},this.onLogin.bind(this),this.onLoginFailed.bind(this))},login_by_token:function(){this._login({token:this.get("token")},this.onLoginByToken.bind(this),this.onLoginByTokenFailed.bind(this))},social_login:function(t){a.ajax({type:"POST",url:n.API_SERVICE_URL+"/accounts/social_auth/",contentType:"application/json",dataType:"json",data:JSON.stringify(this.add_source(t)),success:this.onSocialLogin.bind(this),error:function(t,e,n){this.onAPIError(t,this.onSocialLoginFailed.bind(this))}.bind(this)})},revoke_token:function(){var t=this.get("token");null!==t&&this._call_method("delete","/accounts/current/tokens/",{token:t}),this.save({connected:!1,token:null})},onLoginByToken:function(t,e,n){this.save({token:t.token,connected:!0}),this.ready.resolve()},onLoginByTokenFailed:function(t,e){this.save("connected",!1),this.ready.resolve()},onLogin:function(t,e,n){this.save({token:t.token,connected:!0}),this.get_settings()},onLoginFailed:function(t,e){this.save("connected",!1),this.trigger("login_failed",t)},onSocialLogin:function(e,n,i){this.save({token:e.token,connected:!0}),t.body.setScreen("settings"),this.ready.resolve()},onSocialLoginFailed:function(e,n){this.save("connected",!1),t.body.setScreen("settings"),s.dialogs.error("Authentication failed for Xabber account."),this.ready.resolve()},onUserData:function(t){var e;e=t.first_name&&t.last_name?t.first_name+" "+t.last_name:t.username,this.save({username:t.username,name:e})},onSettings:function(t){var e=this.get("sync_request");this.save("sync_request",void 0),"window"===e?this.trigger("open_sync_window",t):"silent"===e?this.synchronize_main_settings():this.fetch_from_server(t)},onSettingsFailed:function(t,e){this.trigger("settings_result",null)},logout:function(){s.dialogs.ask("Log out","Do you want to log out Xabber account?",[{name:"delete_accounts",checked:!0,text:"Delete synced XMPP accounts"}]).done(function(t){t&&(this.revoke_token(),t.delete_accounts&&o.each(this.list.where({to_sync:!0}),function(t){t.trigger("delete_account",!0)}))}.bind(this))},start:function(){this.get("connected")||this.fcm_unsubscribe(),this.get_settings()},fcm_subscribe:function(){this._call_method("post","/fcm/subscription/",{endpoint_key:t.cache.endpoint_key})},fcm_unsubscribe:function(){a.ajax({type:"DELETE",url:n.API_SERVICE_URL+"/fcm/subscription/",contentType:"application/json",dataType:"json",data:JSON.stringify({endpoint_key:t.cache.endpoint_key})})}}),t.APIAccountAuthView=t.BasicView.extend({_initialize:function(){return this.$username_input=this.$("input[name=username]"),this.$password_input=this.$("input[name=password]"),this.data.on("change:authentication",this.onChangeAuthenticationState,this),this},onRender:function(){this.authFeedback({}),Materialize.updateTextFields(),this.$username_input.val("").focus(),this.$password_input.val(""),this.updateButtons()},keyUp:function(t){t.keyCode===n.KEY_ENTER&&this.submit()},submit:function(){if(this.data.get("authentication"))return void this.cancel();this.data.set("authentication",!0),this.authFeedback({});var t=this.$username_input.val(),e=this.$password_input.val();return t?e?(this.authFeedback({password:"Authentication..."}),void this.model.login(t,e)):this.errorFeedback({password:"Please input password!"}):this.errorFeedback({username:"Please input username!"})},cancel:function(){this.data.set("authentication",!1),this.onRender()},authFeedback:function(t){this.$username_input.switchClass("invalid",t.username).siblings("span.errors").text(t.username||""),this.$password_input.switchClass("invalid",t.password).siblings("span.errors").text(t.password||"")},errorFeedback:function(t){this.authFeedback(t),this.data.set("authentication",!1)},updateButtons:function(){var t=this.data.get("authentication");this.$(".btn-log-in").switchClass("disabled",t)},onChangeAuthenticationState:function(){this.updateButtons(),this.data.get("authentication")?(this.model.on("change:connected",this.onChangeConnected,this),this.model.on("login_failed",this.onLoginFailed,this)):(this.model.off("change:connected",this.onChangeConnected,this),this.model.off("login_failed",this.onLoginFailed,this))},onChangeConnected:function(){this.model.get("connected")&&this.successFeedback()},onLoginFailed:function(t){this.errorFeedback({password:t&&t.detail||"Authentication failed"})},socialAuth:function(t){var e=window.location.href,i=a(t.target).closest(".btn-social").data("provider");window.location.href=n.XABBER_ACCOUNT_URL+"/social/login/"+i+"/?origin="+e+"&source=Xabber Web"}}),t.XabberLoginPanel=t.APIAccountAuthView.extend({className:"login-panel",template:i.xabber_login,events:{"click .login-type":"changeLoginType","click .btn-log-in":"submit","keyup input[name=password]":"keyUp","click .btn-social":"socialAuth"},render:function(){this.onRender()},successFeedback:function(){this.authFeedback({}),this.data.set("authentication",!1),t.body.setScreen("chats")},changeLoginType:function(){t.body.setScreen("login",{login_screen:"xmpp"})}}),t.AddAPIAccountView=t.APIAccountAuthView.extend({className:"login-panel add-xabber-account-panel",template:i.add_xabber_account,events:{"click .btn-add":"submit","keyup input[name=password]":"keyUp","click .btn-social":"socialAuth","click .btn-cancel":"closeModal"},render:function(){this.$el.openModal({opacity:.9,ready:this.onRender.bind(this),complete:this.closeModal.bind(this)})},successFeedback:function(){this.authFeedback({}),this.data.set("authentication",!1),this.closeModal()},onHide:function(){this.$el.detach()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),t.SyncSettingsView=t.BasicView.extend({className:"modal main-modal sync-settings-modal noselect",template:i.sync_settings,ps_selector:".modal-content",avatar_size:n.AVATAR_SIZES.SYNCHRONIZE_ACCOUNT_ITEM,events:{"click .btn-sync":"syncSettings","click .btn-cancel":"close","change .sync-all":"changeSyncAll","change .sync-one":"changeSyncOne","click .sync-icon":"changeSyncWay"},_initialize:function(){this.settings=null,this.to_sync_map=null,this.model.on("open_sync_window",this.render,this)},render:function(t,e){this.settings=t,this.sync_all=this.model.get("sync_all"),this.accounts=[],this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){this.$(".accounts-wrap").empty();var t=this.model.list,e={},n={},i={},s={};o.each(this.settings.settings_data,function(t){i[t.jid]=t}),this.settings_map=i,o.each(this.settings.order_data.settings,function(t){s[t.jid]=t.order}),o.each(this.settings.deleted,function(t){n[t.jid]=t.timestamp}),o.each(i,function(n,i){t.get(i)||(e[i]=o.extend({jid:i,to_sync:this.sync_all,sync_way:"from_server"},n))}.bind(this)),t.each(function(t){var s,a=t.get("jid"),r=i[a];o.has(n,a)?(s=n[a]>=t.get("timestamp")?"delete":"to_server",e[a]=o.extend({sync_way:s,sync_choose:["delete","to_server"]},o.omit(t.attributes,["order"])),t.save("synced",!1)):r?(s=r.timestamp>t.get("timestamp")?"from_server":r.timestamp<t.get("timestamp")?"to_server":"no",e[a]=o.extend({jid:a,to_sync:t.get("to_sync"),sync_way:s,sync_choose:"no"!==s&&["from_server","to_server"]},r.settings),t.save("synced","no"===s)):(e[a]=o.extend({sync_way:"to_server"},o.omit(t.attributes,["order"])),t.save("synced",!1))}.bind(this));var a=o.max(s)||0;o.each(s,function(t,n){e[n].order=t}),t.each(function(t){var n=t.get("jid");e[n].order||(e[n].order=++a)}),this.accounts_map=e,this.accounts=o.map(e,function(t,e){return t}),this.accounts.sort(function(t,e){return t.order-e.order}),o.each(this.accounts,this.addAccountHtml.bind(this)),this.updateSyncOptions()},addAccountHtml:function(t){var e=t.jid,n=a(i.sync_settings_account_item({jid:e,view:this}));this.$(".accounts-wrap").append(n)},updateAccountHtml:function(t){var e=a(t),i=e.data("jid"),s=this.accounts_map[i];this.sync_all&&(s.to_sync=!0),e.switchClass("sync",s.to_sync),e.find(".sync-one").prop("checked",s.to_sync);var o;o=s.to_sync?s.sync_way:this.model.list.get(i)?"off_local":"off_remote";var r=n.SYNC_WAY_DATA[o].icon,c=e.find(".sync-icon");c.removeClass(c.attr("data-mdiclass")).attr("data-mdiclass",r).addClass(r),e.find(".sync-tip").text(n.SYNC_WAY_DATA[o].tip)},updateSyncOptions:function(){var t=(this.model.list,this.sync_all);this.accounts_map;this.$(".sync-all").prop("checked",t?"checked":""),this.$(".sync-one").prop("disabled",t?"disabled":""),this.$(".account-wrap").each(function(t,e){this.updateAccountHtml(e)}.bind(this))},changeSyncAll:function(t){var e=a(t.target),n=e.prop("checked");this.sync_all=n,this.$(".sync-one").prop("disabled",n?"disabled":""),n&&(o.each(this.accounts,function(t){t.to_sync=!0}),this.$(".account-wrap").each(function(t,e){this.updateAccountHtml(e)}.bind(this)))},changeSyncOne:function(t){var e=a(t.target),n=e.prop("checked"),i=e.closest(".account-wrap"),s=i.data("jid");this.accounts_map[s].to_sync=n,this.updateAccountHtml(i)},changeSyncWay:function(t){var e=a(t.target).closest(".account-wrap"),n=e.data("jid"),i=this.accounts_map[n];if(i.to_sync&&i.sync_choose){var s=i.sync_choose,o=s.indexOf(i.sync_way)+1;o===s.length&&(o=0),i.sync_way=s[o],this.updateAccountHtml(e)}},syncSettings:function(){var t=this.model.list,e=this.sync_all;this.model.save("sync_all",this.sync_all),o.each(this.accounts,function(n){var i=n.jid,s=t.get(i);if(s){s.save("to_sync",n.to_sync),e&&s.save("order",n.order);var a=n.sync_way;"to_server"===a?s.update_timestamp():"from_server"!==a&&"delete"!==a||s.save("timestamp",0)}!s&&n.to_sync&&(s=t.create_from_server(o.omit(n,["sync_way","sync_choose"])))}),this.model.synchronize_main_settings(),this.do_sync=!0,this.close()},onHide:function(){this.$el.detach(),t.body.isScreen("blank")&&t.body.setScreen("chats")},close:function(){this.do_sync||this.model.trigger("settings_result",null),this.do_sync=null,this.settings=null,this.settings_map=null,this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),t.APIAccountView=t.BasicView.extend({className:"setting xabber-account",template:i.xabber_account,avatar_size:n.AVATAR_SIZES.XABBER_ACCOUNT,events:{"click .account-info-wrap":"openAccount","click .btn-login":"login","click .btn-logout":"logout","click .btn-sync":"synchronize"},_initialize:function(){this.$el.appendTo(this.parent.$(".settings-block-wrap.xabber-account")),this.$tab=this.parent.$(".xabber-account-tab"),this.updateForConnectedStatus(),this.model.on("change:name",this.updateName,this),this.model.on("change:name",this.updateAvatar,this),this.model.on("change:connected",this.updateForConnectedStatus,this),this.model.on("change:last_sync",this.updateLastSyncInfo,this),this.model.on("relogin",this.login,this),this.data.on("change:sync",this.updateSyncButton,this)},render:function(){this.data.set("sync",!1),this.updateLastSyncInfo()},updateName:function(){this.$(".name").text(this.model.get("name"))},updateAvatar:function(){var t=this.model.get("name"),e=this.model.get("image")||s.images.getDefaultAvatar(t);this.$(".circle-avatar").setAvatar(s.images.getCachedImage(e),this.avatar_size)},updateForConnectedStatus:function(){var t=this.model.get("connected");this.$tab.switchClass("online",t).switchClass("offline",!t),this.$(".account-info-wrap").showIf(t),this.$(".sync-wrap").showIf(t),t&&(this.updateName(),this.updateAvatar(),this.updateSyncButton(),this.updateLastSyncInfo()),this.$(".btn-login").hideIf(t),this.$(".btn-logout").showIf(t)},updateSyncButton:function(){var t=this.data.get("sync");this.$(".btn-sync .button").hideIf(t),this.$(".btn-sync .preloader-wrapper").showIf(t)},updateLastSyncInfo:function(){var t=this.model.get("last_sync");if(t){var e=s.now()-t;this.$(".last-sync-info").text("Synced "+s.pretty_timedelta(e))}else this.$(".last-sync-info").text("Not synced")},synchronize:function(){this.data.get("sync")||(this.data.set("sync",!0),this.model.once("settings_result",function(){this.data.set("sync",!1)},this),this.model.save("sync_request","window"),this.model.get_settings())},login:function(){t.add_api_account_view.show()},logout:function(){this.model.logout()},openAccount:function(){s.openWindow(n.XABBER_ACCOUNT_URL+"/?token="+this.model.get("token"))}}),t.once("start",function(){this.account_settings_list=new this.AccountSettingsList(null,{storage_name:this.getStorageName()+"-account-settings"}),this.account_settings_list.fetch(),this.account_settings_list.order_timestamp=new this.AccountsOrderTimestamp({id:"accounts-order-timestamp"},{storage_name:this.getStorageName(),fetch:"after"}),this.api_account=new this.APIAccount({id:"api-account"},{storage_name:this.getStorageName(),fetch:"before",settings_list:this.account_settings_list}),this.xabber_login_panel=t.login_page.addChild("xabber_login",this.XabberLoginPanel,{model:this.api_account}),this.sync_settings_view=new this.SyncSettingsView({model:this.api_account}),this.settings_view.addChild("api-account",this.APIAccountView,{model:this.api_account}),this.add_api_account_view=new this.AddAPIAccountView({model:this.api_account})},t),t}}),define("xabber-strophe",[],function(){return function(t){var e=t.env,n=e.Strophe,i=e.constants;n.log=function(t,e){(i.LOG_LEVEL===i.LOG_LEVEL_DEBUG||i.LOG_LEVEL>=i.LOG_LEVEL_WARN&&t>=n.LogLevel.WARN||i.LOG_LEVEL>=i.LOG_LEVEL_ERROR&&t>=n.LogLevel.ERROR)&&(console.info("Strophe log: "),console.info(e))};var s=function(t){var e,n,i="",s=t.length;for(e=0;e<s;e++)n=t.charCodeAt(e),n>=0&&n<=127?i+=t.charAt(e):n>2047?(i+=String.fromCharCode(224|n>>12&15),i+=String.fromCharCode(128|n>>6&63),i+=String.fromCharCode(128|n>>0&63)):(i+=String.fromCharCode(192|n>>6&31),i+=String.fromCharCode(128|n>>0&63));return i};return n.SASLXOAuth2=function(){},n.SASLXOAuth2.prototype=new n.SASLMechanism("X-OAUTH2",!0,70),n.SASLXOAuth2.prototype.test=function(t){return!0},n.SASLXOAuth2.prototype.onChallenge=function(t){var e=String.fromCharCode(0)+t.authcid+String.fromCharCode(0)+t.pass;return s(e)},n.ConnectionManager=function(){this.connection=new n.Connection(i.CONNECTION_URL)},n.ConnectionManager.prototype={connect:function(t,e,i,s){this.connection.mechanisms={},this.auth_type=t||"password","password"===this.auth_type?this.connection.registerSASLMechanisms():(this.connection.registerSASLMechanism(n.SASLXOAuth2),delete this.connection._sasl_data.server_signature),this.connection.connect(e,i,s)},reconnect:function(t){this.connection.connect(this.connection.jid,this.connection.pass,t)}},n.addNamespace("CARBONS","urn:xmpp:carbons:2"),n.addNamespace("FORWARD","urn:xmpp:forward:0"),n.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates"),n.addNamespace("MAM","urn:xmpp:mam:1"),n.addNamespace("RSM","http://jabber.org/protocol/rsm"),n.addNamespace("XFORM","jabber:x:data"),n.addNamespace("CHAT_MARKERS","urn:xmpp:chat-markers:0"),n.addNamespace("VCARD_UPDATE","vcard-temp:x:update"),n.addNamespace("HTTP_UPLOAD","urn:xmpp:http:upload"),n.addNamespace("BLOCKING","urn:xmpp:blocking"),n.addNamespace("SEARCH","jabber:iq:search"),n.addNamespace("OOB","jabber:x:oob"),n.addNamespace("MEDIA","urn:xmpp:media-element"),t}}),define("xabber-vcard",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.vcard,s=e.$,a=e._,o=e.moment,r=e.Strophe,c=e.$iq,l=e.$build,d=e.utils,u=function(t){var e={nickname:t.find("NICKNAME").text().trim(),fullname:t.find("FN").text().trim(),first_name:t.find("N GIVEN").text().trim(),middle_name:t.find("N MIDDLE").text().trim(),last_name:t.find("N FAMILY").text().trim(),birthday:t.find("BDAY").text().trim(),job_title:t.find("TITLE").text().trim(),role:t.find("ROLE").text().trim(),url:t.find("URL").text().trim(),description:t.find("DESC").text().trim(),jabber_id:t.find("JABBERID").text().trim(),org:{},photo:{},phone:{},address:{},email:{}},n=t.find("ORG");n.length&&(e.org.name=n.find("ORGNAME").text().trim(),e.org.unit=n.find("ORGUNIT").text().trim());var i=t.find("PHOTO");return i.length&&(e.photo.image=i.find("BINVAL").text().trim(),e.photo.type=i.find("TYPE").text().trim()),t.find("TEL").each(function(){var t=s(this),n=t.find("NUMBER").text().trim();n&&(t.find("WORK").length?e.phone.work=n:t.find("HOME").length?e.phone.home=n:t.find("MOBILE").length?e.phone.mobile=n:e.phone.default=n)}),t.find("EMAIL").each(function(){var t=s(this),n=t.find("USERID").text().trim();n&&(t.find("WORK").length?e.email.work=n:t.find("HOME").length?e.email.home=n:e.email.default=n)}),t.find("ADR").each(function(){var t=s(this),n={extadd:t.find("EXTADD").text().trim(),street:t.find("STREET").text().trim(),locality:t.find("LOCALITY").text().trim(),region:t.find("REGION").text().trim(),pcode:t.find("PCODE").text().trim(),country:t.find("CTRY").text().trim()};t.find("WORK").length?e.address.work=n:t.find("HOME").length?e.address.home=n:e.address.default=n}),e},h=function(t){var e=l("vCard",{xmlns:r.NS.VCARD});return t.nickname&&e.c("NICKNAME").t(t.nickname).up(),t.fullname&&e.c("FN").t(t.fullname).up(),(t.first_name||t.last_name||t.middle_name)&&(e.c("N"),t.first_name&&e.c("GIVEN").t(t.first_name).up(),t.last_name&&e.c("FAMILY").t(t.last_name).up(),t.middle_name&&e.c("MIDDLE").t(t.middle_name).up(),e.up()),t.birthday&&e.c("BDAY").t(t.birthday).up(),t.job_title&&e.c("TITLE").t(t.job_title).up(),t.role&&e.c("ROLE").t(t.role).up(),(t.org.name||t.org.unit)&&(e.c("ORG"),t.org.name&&e.c("ORGNAME").t(t.org.name).up(),t.org.unit&&e.c("ORGUNIT").t(t.org.unit).up(),e.up()),t.url&&e.c("URL").t(t.url).up(),t.photo.image&&(e.c("PHOTO").c("BINVAL").t(t.photo.image).up(),e.c("TYPE").t(t.photo.type||"image/jpeg").up(),e.up()),t.description&&e.c("DESC").t(t.description).up(),t.jabber_id&&e.c("JABBERID").t(t.jabber_id).up(),a.each(t.phone,function(t,n){e.c("TEL").c("NUMBER").t(t).up(),"default"!==n&&e.c(n.toUpperCase()).up(),e.up()}),a.each(t.email,function(t,n){e.c("EMAIL").c("USERID").t(t).up(),"default"!==n&&e.c(n.toUpperCase()).up(),e.up()}),a.each(t.address,function(t,n){e.c("ADR"),"default"!==n&&e.c(n.toUpperCase()).up(),t.extadd&&e.c("EXTADD").t(t.extadd).up(),t.street&&e.c("STREET").t(t.street).up(),t.locality&&e.c("LOCALITY").t(t.locality).up(),t.region&&e.c("REGION").t(t.region).up(),t.pcode&&e.c("PCODE").t(t.pcode).up(),t.country&&e.c("CTRY").t(t.country).up(),e.up()}),e.tree()};return r.addConnectionPlugin("vcard",{_connection:null,init:function(t){return this._connection=t,r.addNamespace("VCARD","vcard-temp")},get:function(t,e,n){var i=c({type:"get",to:t}).c("vCard",{xmlns:r.NS.VCARD});this._connection.sendIQ(i,function(n){if(e){var i=u(s(n).find("vCard[xmlns="+r.NS.VCARD+"]"));return i.jabber_id||(i.jabber_id=t),e(i)}},n)},set:function(t,e,n,i){e.jabber_id||(e.jabber_id=t);var s=c({type:"set",to:t}).cnode(h(e));this._connection.sendIQ(s,n,i)}}),d.vcard={getBlank:function(t){var e=u(s("<div/>"));return e.jabber_id=t,e}},t.VCardView=t.BasicView.extend({template:i.vcard,_initialize:function(){this.$el.html(this.template()),this.model.on("change:vcard_updated",this.update,this),this.data.on("change:refresh",this.updateRefreshButton,this)},render:function(){this.data.set("refresh",!1),this.update()},update:function(){var t,e=this.model.get("vcard");t=this.$(".jid-info-wrap"),t.find(".jabber-id").showIf(e.jabber_id).find(".value").text(e.jabber_id),t.showIf(e.jabber_id),t=this.$(".personal-info-wrap"),t.find(".nickname").showIf(e.nickname).find(".value").text(e.nickname),t.find(".fullname").showIf(e.fullname).find(".value").text(e.fullname),t.find(".first-name").showIf(e.first_name).find(".value").text(e.first_name),t.find(".middle-name").showIf(e.middle_name).find(".value").text(e.middle_name),t.find(".last-name").showIf(e.last_name).find(".value").text(e.last_name),t.showIf(e.nickname||e.fullname||e.first_name||e.middle_name||e.last_name),t=this.$(".birthday-info-wrap"),t.find(".birthday").showIf(e.birthday).find(".value").text(e.birthday),t.showIf(e.birthday),t=this.$(".job-info-wrap"),t.find(".job-title").showIf(e.job_title).find(".value").text(e.job_title),t.find(".org-name").showIf(e.org.name).find(".value").text(e.org.name),t.find(".org-unit").showIf(e.org.unit).find(".value").text(e.org.unit),t.showIf(e.job_title||e.org.name||e.org.unit),t=this.$(".site-info-wrap"),t.find(".url").showIf(e.url).find(".value").text(e.url).hyperlinkify(),t.showIf(e.url),t=this.$(".description-info-wrap"),t.find(".description").showIf(e.description).find(".value").text(e.description),t.showIf(e.description);var n=this.$(".address-info-wrap"),i=a.clone(e.address),s=!1;n.find(".info").addClass("hidden"),a.each(i,function(e,i){t=n.find(".address-"+i),t.find(".extadd").showIf(e.extadd).text(e.extadd),t.find(".street").showIf(e.street).text(e.street),t.find(".locality").showIf(e.locality).text(e.locality),t.find(".region").showIf(e.region).text(e.region),t.find(".pcode").showIf(e.pcode).text(e.pcode),t.find(".country").showIf(e.country).text(e.country);var a=e.extadd||e.street||e.locality||e.region||e.pcode||e.country;a&&(s=!0),t.showIf(a)}),n.showIf(s),t=this.$(".phone-info-wrap");var o=e.phone;o&&(t.find(".phone-work").showIf(o.work).find(".value").text(o.work),t.find(".phone-home").showIf(o.home).find(".value").text(o.home),t.find(".phone-mobile").showIf(o.mobile).find(".value").text(o.mobile),t.find(".phone-default").showIf(o.default).find(".value").text(o.default)),t.showIf(o&&(o.work||o.home||o.mobile||o.default)),t=this.$(".email-info-wrap");var r=e.email;r&&(t.find(".email-work").showIf(r.work).find(".value").text(r.work),t.find(".email-home").showIf(r.home).find(".value").text(r.home),t.find(".email-default").showIf(r.default).find(".value").text(r.default)),t.showIf(r&&(r.work||r.home||r.default)),this.parent.updateScrollBar()},updateRefreshButton:function(){this.$(".btn-vcard-refresh .button").hideIf(this.data.get("refresh")),this.$(".btn-vcard-refresh .preloader-wrapper").showIf(this.data.get("refresh"))},refresh:function(){this.data.get("refresh")||(this.data.set("refresh",!0),this.model.getVCard(function(){this.data.set("refresh",!1)}.bind(this)))}}),t.VCardEditView=t.BasicView.extend({className:"account-vcard-edit-wrap",template:i.vcard_edit,ps_selector:".panel-content",avatar_size:n.AVATAR_SIZES.ACCOUNT_VCARD_EDIT,events:{"change .circle-avatar input":"changeAvatar","click .btn-vcard-save":"save","click .btn-vcard-back":"back"},_initialize:function(){this.$(".datepicker").pickadate({selectMonths:!0,selectYears:100,min:new Date(o.now()-31536e8),max:new Date(o.now()-864e5),format:"dd.mm.yyyy",today:"",klass:{weekday_display:"picker__weekday-display ground-color-700",date_display:"picker__date-display ground-color-500",navPrev:"picker__nav--prev hover-ground-color-100",navNext:"picker__nav--next hover-ground-color-100",selected:"picker__day--selected ground-color-500",now:"picker__day--today text-color-700",buttonClear:"btn-flat btn-main btn-dark",buttonClose:"btn-flat btn-main text-color-700"}}),this.data.on("change:saving",this.updateSaveButton,this)},render:function(){this.data.set("saving",!1),this.setData(),Materialize.updateTextFields(),this.updateScrollBar()},setData:function(){var t=this.model.get("vcard");this.$(".nickname input").val(t.nickname),this.$(".fullname input").val(t.fullname),this.$(".first-name input").val(t.first_name),this.$(".last-name input").val(t.last_name),this.$(".middle-name input").val(t.middle_name),this.avatar=t.photo.image,this.$(".circle-avatar").setAvatar(this.model.cached_image,this.avatar_size),this.$(".birthday input").val(t.birthday),this.$(".job-title input").val(t.job_title),this.$(".org-name input").val(t.org.name),this.$(".org-unit input").val(t.org.unit),this.$(".url input").val(t.url),this.$(".description input").val(t.description),this.$(".phone-work input").val(t.phone.work),this.$(".phone-home input").val(t.phone.home),this.$(".phone-mobile input").val(t.phone.mobile),this.$(".email-work input").val(t.email.work),this.$(".email-home input").val(t.email.home);var e=t.address.work||{},n=this.$(".address-work-wrap");n.find(".extadd input").val(e.extadd),n.find(".street input").val(e.street),n.find(".locality input").val(e.locality),n.find(".region input").val(e.region),n.find(".pcode input").val(e.pcode),n.find(".country input").val(e.country),e=t.address.home||{},n=this.$(".address-home-wrap"),n.find(".extadd input").val(e.extadd),n.find(".street input").val(e.street),n.find(".locality input").val(e.locality),n.find(".region input").val(e.region),n.find(".pcode input").val(e.pcode),n.find(".country input").val(e.country)},getData:function(){var t=d.vcard.getBlank(this.model.get("jid"));t.nickname=this.$(".nickname input").val(),t.fullname=this.$(".fullname input").val(),t.first_name=this.$(".first-name input").val(),t.last_name=this.$(".last-name input").val(),t.middle_name=this.$(".middle-name input").val(),this.avatar&&(t.photo.image=this.avatar),t.birthday=this.$(".birthday input").val(),t.job_title=this.$(".job-title input").val(),t.org.name=this.$(".org-name input").val(),t.org.unit=this.$(".org-unit input").val(),t.url=this.$(".url input").val(),t.description=this.$(".description input").val(),t.phone.work=this.$(".phone-work input").val(),t.phone.home=this.$(".phone-home input").val(),t.phone.mobile=this.$(".phone-mobile input").val(),t.email.work=this.$(".email-work input").val(),t.email.home=this.$(".email-home input").val(),t.address.work={};var e=t.address.work,n=this.$(".address-work-wrap");return e.extadd=n.find(".extadd input").val(),e.street=n.find(".street input").val(),e.locality=n.find(".locality input").val(),e.region=n.find(".region input").val(),e.pcode=n.find(".pcode input").val(),e.country=n.find(".country input").val(),t.address.home={},e=t.address.home,n=this.$(".address-home-wrap"),e.extadd=n.find(".extadd input").val(),e.street=n.find(".street input").val(),e.locality=n.find(".locality input").val(),e.region=n.find(".region input").val(),e.pcode=n.find(".pcode input").val(),e.country=n.find(".country input").val(),t},changeAvatar:function(t){var e=t.target;if(e.files.length){var i=e.files[0];e.value="",i.size>n.MAX_AVATAR_FILE_SIZE?d.dialogs.error("File is too large"):i.type.startsWith("image")||d.dialogs.error("Wrong image"),d.images.getAvatarFromFile(i).done(function(t){t?(this.avatar=t,this.$(".circle-avatar").setAvatar(t,this.avatar_size)):d.dialogs.error("Wrong image")}.bind(this))}},updateSaveButton:function(){this.$(".btn-vcard-save").text(this.data.get("saving")?"Saving...":"Save")},save:function(){this.data.get("saving")||(this.data.set("saving",!0),this.model.setVCard(this.getData(),function(){this.model.getVCard(),this.data.set("saving",!1)}.bind(this),function(){d.dialogs.error("Could not save vCard."),this.data.set("saving",!1)}))},back:function(){this.model.showSettings(null,"vcard")}}),t}}),define("xabber-accounts",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.accounts,s=e.utils,a=e.$,o=e.$iq,r=(e.$msg,e.$pres),c=e.Strophe,l=e._,d=e.moment,u=s.images;return t.Account=Backbone.Model.extend({idAttribute:"jid",defaults:{enabled:!0,auth_type:"password",status:"online",status_message:"",priority:0},initialize:function(e,n){if(n||(n={}),e.is_new&&!n.auth_view)return this.is_invalid=!0,void this.on("destroy",this.onDestroy,this);this.settings=t.account_settings_list.get(e.jid),this.settings||(this.settings=t.account_settings_list.create({jid:e.jid,timestamp:s.now(),to_sync:t.api_account.get("sync_all")}));var i=l.clone(this.settings.attributes);i.color||(i.color=this.collection.getDefaultColor()),i.order||(i.order=this.collection.getLastOrder()+1),this.settings.save(i),this.settings.on("delete_account",this.deleteAccount,this);var o=l.clone(e);o.name||(o.name=o.jid),o.image||(o.image=u.getDefaultAvatar(o.name)),this.cached_image=u.getCachedImage(o.image),o.vcard=s.vcard.getBlank(o.jid),o.photo_hash="",this.save(o),this.auth_view=n.auth_view||null,this.session=new Backbone.Model({connected:!1,reconnected:!1,conn_retries:0,conn_feedback:"Disconnected"}),this.session.on("change:connected",this.onChangedConnected,this),this.conn_manager=new c.ConnectionManager,this.connection=this.conn_manager.connection,this.on("destroy",this.onDestroy,this),this._added_pres_handlers=[],this._pending_stanzas=[],this.dfd_presence=new a.Deferred,this.resources=new t.AccountResources(null,{account:this}),this.password_view=new t.ChangePasswordView({model:this}),this.settings_left=new t.AccountSettingsLeftView({model:this}),this.settings_right=new t.AccountSettingsRightView({model:this}),this.vcard_edit=new t.VCardEditView({model:this}),this.updateColorScheme(),this.settings.on("change:color",this.updateColorScheme,this),this.on("change:photo_hash",this.getVCard,this),l.each(this._init_plugins,function(t){t.call(this)}.bind(this)),this.connection.xmlInput=function(e){t.info("input"),t.info(e)},this.connection.xmlOutput=function(e){t.info("output"),t.info(e)},this.once("start",this.start,this),t.api_account.on("settings_result",function(t){t&&this.settings.get("token")&&this.save({auth_type:"token",password:""}),this.trigger("start")},this)},start:function(){this.get("enabled")&&this.isOnline()&&this.connect()},_init_plugins:[],getPassword:function(){try{return s.atou(this.get("password"))}catch(t){return""}},isConnected:function(){return this.session&&this.session.get("connected")},isOnline:function(){return"offline"!==this.get("status")},sendMsg:function(t,e){var n=this.connection.authenticated&&"offline"!==this.get("status");return n?(this.connection.send(t),e&&e()):this._pending_stanzas.push({stanza:t,callback:e}),n},sendIQ:function(){var t=this.connection.authenticated&&"offline"!==this.get("status");return t?this.connection.sendIQ.apply(this.connection,arguments):this._pending_stanzas.push({stanza:arguments}),t},sendPres:function(t){return this.connection.authenticated?this.connection.send(t):this._pending_stanzas.push({stanza:t}),this.connection.authenticated},connect:function(){var e,n=this.get("jid"),i=this.get("auth_type");if(n+="/xabber-web-"+t.get("client_id"),!(e="token"===i?this.settings.get("token"):this.getPassword()))return void this.password_view.show({login:!0});this.session.set({connected:!1,reconnected:!1,reconnecting:!1,conn_retries:0,conn_feedback:"Connecting...",auth_failed:!1}),this.restoreStatus(),this.conn_manager.connect(i,n,e,this.connectionCallback.bind(this))},reconnect:function(){var t=this.session.get("conn_retries"),e=t<3?n.RECONNECTION_TIMEOUTS[t]:2e4;this.connection.reset(),this.session.set({connected:!1,reconnected:!1,reconnecting:!0,conn_retries:++t,conn_feedback:"Reconnect after "+e/1e3+" seconds...",auth_failed:!1}),setTimeout(function(){this.connFeedback("Connecting..."),this.restoreStatus(),this.conn_manager.reconnect(this.reconnectionCallback.bind(this))}.bind(this),e)},connectionCallback:function(e,i){if(this.session.get("reconnecting"))return void t.info("ignore connection callback for status: "+n.CONN_STATUSES[e]);this.auth_view&&this.loginCallback(e,i),this.session.set({conn_status:e,conn_condition:i}),e===c.Status.CONNECTED?this.session.set({connected:!0,reconnected:!1}):e===c.Status.AUTHFAIL?this.onAuthFailed():e===c.Status.DISCONNECTED&&(this.connection.flush(),this.session.set({connected:!1}))},reconnectionCallback:function(e,i){if(!this.session.get("reconnecting"))return void t.info("ignore reconnection callback for status: "+n.CONN_STATUSES[e]);if(this.session.set({conn_status:e,conn_condition:i}),e===c.Status.CONNECTED)this.connection.connect_callback=this.connectionCallback.bind(this),
this.session.set({connected:!0,reconnected:!0,reconnecting:!1,conn_retries:0});else if(e===c.Status.AUTHFAIL)this.onAuthFailed();else if(e===c.Status.DISCONNECTED){this.connection.flush();var s=t.settings.max_connection_retries;-1===s||this.session.get("conn_retries")<s?this.reconnect():this.connFeedback("Connection lost!")}},loginCallback:function(t,e){t===c.Status.CONNECTED?(this.save("is_new",void 0),this.auth_view.successFeedback(this)):l.contains(n.BAD_CONN_STATUSES,t)&&(t===c.Status.ERROR?t="Connection error":t===c.Status.CONNFAIL?t="Connection failed":t===c.Status.AUTHFAIL?t="Authentication failed":t===c.Status.DISCONNECTED?t="Disconnected":t===c.Status.CONNTIMEOUT&&(t="Connection timeout expired"),e=e?": "+e:"",this.auth_view.errorFeedback({password:t+e}),this.get("is_new")&&this.destroy())},onAuthFailed:function(){this.auth_view||s.dialogs.error("Authentication failed for account "+this.get("jid")),this.session.set({auth_failed:!0,no_reconnect:!0}),this.trigger("deactivate",this),this.connFeedback("Authentication failed")},onChangedConnected:function(){this.isConnected()?this.session.get("reconnected")?this.onReconnected():this.onConnected():this.onDisconnected()},onConnected:function(){this.connFeedback("Connected"),this.jid=this.connection.jid,this.resource=c.getResourceFromJid(this.jid),this.domain=c.getDomainFromJid(this.jid),this.trigger("activate",this),this.afterConnected(),l.each(this._after_connected_plugins,function(t){t.call(this)}.bind(this))},onReconnected:function(){this.connFeedback("Connected"),this.afterConnected(),l.each(this._after_reconnected_plugins,function(t){t.call(this)}.bind(this))},afterConnected:function(){this.registerPresenceHandler(),this.enableCarbons(),this.getVCard(),this.sendPendingStanzas()},sendPendingStanzas:function(){l.each(this._pending_stanzas,function(t){t.stanza instanceof c.Builder?(this.connection.send(t.stanza),t.callback&&t.callback()):this.connection.sendIQ.apply(this.connection,t.stanza)}.bind(this)),this._pending_stanzas=[]},_after_connected_plugins:[],_after_reconnected_plugins:[],onDisconnected:function(){if(this.session.get("delete"))return void this.destroy();var t=this.session.get("deactivate");t?(this.connFeedback("Disconnected"),this.session.set("deactivate",null),"set_off"===t&&this.trigger("deactivate",this)):this.session.get("no_reconnect")?this.session.set("no_reconnect",!1):this.reconnect()},connFeedback:function(t){this.session.set("conn_feedback",t)},enableCarbons:function(){var t=o({type:"set"}).c("enable",{xmlns:c.NS.CARBONS});this.sendIQ(t)},getVCard:function(t){var e=this.get("jid"),n=l.isFunction(t);this.connection.vcard.get(e,function(i){var s={vcard:i,vcard_updated:d.now()};s.name=i.fullname||(i.first_name+" "+i.last_name).trim()||e,s.image=i.photo.image||u.getDefaultAvatar(s.name),this.cached_image=u.getCachedImage(s.image),this.save(s),n&&t(i)}.bind(this),function(){n&&t(null)})},setVCard:function(t,e,n){var i=l.extend(l.clone(this.get("vcard")),t);this.connection.vcard.set(this.get("jid"),i,e,n)},getStatusMessage:function(){return this.get("status_message")||n.STATUSES[this.get("status")]},setStatus:function(t,e){var n={status_updated:d.now()};null!==t&&(n.status=t),null!==e&&(n.status_message=e||""),"offline"===t&&"offline"!==this.get("status")&&(n.status_prev=this.get("status")),this.save(n),this.get("enabled")&&("offline"===t?this.deactivate("set_offline"):this.isConnected()?this.sendPresence():this.activate())},restoreStatus:function(){"offline"===this.get("status")&&this.save({status_updated:d.now(),status:this.get("status_prev")||"online",status_prev:void 0})},sendPresence:function(t,e){var t=t||this.get("status"),n=e||this.get("status_message"),i=r();return"offline"===t?i.attrs({type:"unavailable"}):("online"!==t&&i.c("show").t(t).up(),i.c("status").t(n).up(),i.c("priority").t(this.get("priority")).up()),i.cnode(this.connection.caps.createCapsNode({node:"https://www.xabber.com/"}).tree()),this.sendPres(i)},showSettings:function(e,n){t.body.setScreen("account_settings",{account:this,right:e,block_name:n}),this.trigger("open_settings")},updateColorScheme:function(){var t=this.settings.get("color");this.settings_left.$el.attr("data-color",t),this.settings_right.$el.attr("data-color",t),this.settings_right.$(".account-color .current-color-name").text(t),this.vcard_edit.$el.attr("data-color",t)},deleteAccount:function(t){this.show_settings_after_delete=t,this.session.set("delete",!0),this.deactivate()},activate:function(){this.isConnected()||this.connect()},deactivate:function(t){t||(t="set_off"),this.session.set("deactivate",t),this.isConnected()?(this.connFeedback("Disconnecting..."),this.sendPresence("offline"),this.connection.disconnect()):this.onDisconnected()},onDestroy:function(){this.connection.connect_callback=null,this.settings.destroy()},registerPresenceHandler:function(){this.connection.deleteHandler(this._pres_handler),this._pres_handler=this.connection.addHandler(function(t){return this.onPresence(t),!0}.bind(this),null,"presence",null)},onPresence:function(t){var e=a(t),n=t.getAttribute("type");if("error"!==n&&0!==(e.find("x").attr("xmlns")||"").indexOf(c.NS.MUC)){var i=t.getAttribute("from"),s=c.getBareJidFromJid(i);if(s!==this.get("jid"))return void l.each(this._added_pres_handlers,function(e){e(t,s)});var o=c.getResourceFromJid(i),r=Number(e.find("priority").text()),d=e.find("show").text()||"online",u=e.find("status").text();l.isNaN(r)&&(r=0);var h=e.find('x[xmlns="'+c.NS.VCARD_UPDATE+'"]');if(h.length&&this.save("photo_hash",h.find("photo").text()),o&&o!==this.resource){var p=this.resources.get(o);if("unavailable"===n)p&&p.destroy();else{var f={resource:o,priority:r,status:d,status_message:u};p?p.set(f):p=this.resources.create(f)}}}}},{addInitPlugin:function(t){this.prototype._init_plugins.push(t)},addConnPlugin:function(t,e,n){e&&this.prototype._after_connected_plugins.push(t),n&&this.prototype._after_reconnected_plugins.push(t)}}),t.Accounts=Backbone.CollectionWithStorage.extend({model:t.Account,comparator:function(t,e){return t.settings.get("order")<e.settings.get("order")?-1:1},_initialize:function(e,n){this.settings_list=t.account_settings_list,this.getEnabledList(),this.getConnectedList(),this.on("add",this.onAdd,this),this.on("destroy",this.onDestroy,this),this.on("change:enabled",this.getEnabledList,this),this.on("update_order",this.onUpdatedOrder,this),this.on("add destroy activate deactivate",this.onListChanged,this),t.on("quit",this.onQuit,this),this.settings_list.on("add_settings",this.onSettingsAdded,this),t.api_account.on("settings_result",function(t){t&&this.trigger("update_order")},this)},onQuit:function(){t.api_account.revoke_token(),l.each(l.clone(this.models),function(t){t.deleteAccount()})},getEnabledList:function(){this.enabled=this.filter(function(t){return t.get("enabled")})},getConnectedList:function(){this.connected=this.filter(function(t){return t.isConnected()})},onListChanged:function(t){this.getEnabledList(),this.getConnectedList(),this.trigger("list_changed",this)},onAdd:function(t){t.is_invalid&&t.destroy()},onDestroy:function(e){if(!e.get("is_new")){!(this.length||t.api_account.get("connected"))?t.body.setScreen("login"):e.show_settings_after_delete?t.body.setScreen("settings"):t.body.setScreen("chats")}},onSettingsAdded:function(t){var e=t.get("jid");this.get(e)||this.create({jid:e})},onUpdatedOrder:function(){this.sort(),this.getEnabledList(),this.getConnectedList()},getLastOrder:function(){return this.length?this.last().settings.get("order"):0},getDefaultColor:function(){var t={},e=n.ACCOUNT_COLORS;this.each(function(e){t[e.settings.get("color")]=!0});for(var i=0;i<e.length;i++)if(!t[e[i]])return e[i];return"red"},moveBefore:function(t,e){var n=this.indexOf(e),i=n>0?this.at(n-1).settings.get("order"):0;t.settings.save("order",(e.settings.get("order")+i)/2),this._updateOrder()},moveToBottom:function(t){t.settings.save("order",this.getLastOrder()+1),this._updateOrder()},_updateOrder:function(){this.sort(),this.each(function(t,e){t.settings.save({order:e+1})}),this.trigger("update_order"),t.api_account.get("connected")&&(this.settings_list.order_timestamp.save("timestamp",s.now()),t.api_account.synchronize_order_settings())}}),t.AccountToolbarItemView=t.BasicView.extend({className:"toolbar-item account-item",template:i.toolbar_item,avatar_size:n.AVATAR_SIZES.TOOLBAR_ACCOUNT_ITEM,events:{click:"showSettings"},_initialize:function(){this.updateConnected(),this.updateAuthState(),this.updateStatus(),this.updateAvatar(),this.updateColorScheme(),this.model.session.on("change:auth_failed",this.updateAuthState,this),this.model.session.on("change:connected",this.updateConnected,this),this.model.on("change:status",this.updateStatus,this),this.model.on("change:image",this.updateAvatar,this),this.model.settings.on("change:color",this.updateColorScheme,this),this.model.on("open_settings",this.setActive,this)},updateConnected:function(){this.$el.switchClass("disconnected",!this.model.isConnected())},updateAuthState:function(){var t=this.model.session.get("auth_failed");this.$(".status").hideIf(t),this.$(".auth-failed").showIf(t)},updateStatus:function(){this.$(".status").attr("data-status",this.model.get("status"))},updateAvatar:function(){var t=this.model.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.model.settings.get("color"))},showSettings:function(){this.model.showSettings()},setActive:function(){this.$el.addClass("active")}}),t.ToolbarAccountsBlockView=t.BasicView.extend({_initialize:function(){this.updateList(),this.model.on("add change:enabled",this.updateOneInList,this),this.model.on("update_order",this.updateList,this),this.model.on("destroy",this.onAccountRemoved,this)},updateList:function(e){l.each(this.children,function(t){t.detach()}),l.each(this.model.enabled,function(e){var n=e.get("jid"),i=this.child(n);i||(i=this.addChild(n,t.AccountToolbarItemView,{model:e})),this.$el.append(i.$el)}.bind(this)),this.parent.updateScrollBar()},updateOneInList:function(e){var n=e.get("jid");if(e.get("enabled")){var i=this.child(n);i?i.$el.detach():i=this.addChild(n,t.AccountToolbarItemView,{model:e});var s=this.model.enabled.indexOf(e);0===s?this.$el.prepend(i.$el):this.$(".account-item").eq(s-1).after(i.$el)}else this.removeChild(n);this.parent.updateScrollBar()},onAccountRemoved:function(t){this.removeChild(t.get("jid")),this.parent.updateScrollBar()}}),t.Resource=Backbone.Model.extend({idAttribute:"resource",defaults:{priority:0}}),t.ResourceView=t.BasicView.extend({className:"resource-wrap",template:i.resource,_initialize:function(t){this.update(),this.model.on("change",this.update,this)},update:function(){var t=this.model.attributes;return this.$(".status").attr("data-status",t.status),this.$(".status-message").text(t.status_message||n.STATUSES[t.status]),this.$(".client").text(t.client||"Wait please..."),this.$(".resource").text(t.resource),this.$(".priority").text(t.priority),this}}),t.Resources=Backbone.Collection.extend({model:t.Resource,comparator:function(t,e){var n=t.get("priority"),i=e.get("priority");return n>i?-1:n<i?1:0},requestInfo:function(t){var e=this.jid+"/"+t.get("resource");this.connection.disco.info(e,null,function(e){var n=a(e).find("identity[category=client]");n.length&&t.set("client",n.attr("name"))})}}),t.ResourcesView=t.BasicView.extend({_initialize:function(){this.model.on("add",this.onResourceAdded,this),this.model.on("remove",this.onResourceRemoved,this),this.model.on("reset",this.onReset,this),this.model.on("change:priority",this.onPriorityChanged,this)},onResourceAdded:function(e){this.model.requestInfo(e),this.addChild(e.get("resource"),t.ResourceView,{model:e}),this.updatePosition(e),this.$el.removeClass("hidden"),this.parent.updateScrollBar()},onPriorityChanged:function(t){this.model.sort(),this.updatePosition(t)}}),t.AccountResources=t.Resources.extend({initialize:function(t,e){this.jid=e.account.get("jid"),this.connection=e.account.connection}}),t.AccountResourcesView=t.ResourcesView.extend({onResourceRemoved:function(t){this.removeChild(t.get("resource")),this.parent.updateScrollBar()},onReset:function(){this.removeChildren(),this.parent.updateScrollBar()},updatePosition:function(t){var e=this.child(t.get("resource"));if(e){e.$el.detach();var n=this.model.indexOf(t);0===n?this.$(".main-resource").after(e.$el):this.$(".resource-wrap").eq(n).after(e.$el),this.updateScrollBar()}}}),t.AccountVCardView=t.VCardView.extend({events:{"click .btn-vcard-refresh":"refresh","click .btn-vcard-edit":"showEditView"},__initialize:function(){this.updateButtons(),this.model.on("activate deactivate",this.updateButtons,this)},updateButtons:function(){var t=this.model.isConnected();this.$(".btn-vcard-edit").showIf(t),this.$(".btn-vcard-refresh").showIf(t)},showEditView:function(){this.model.showSettings("vcard_edit")}}),t.AccountSettingsLeftView=t.BasicView.extend({className:"account-settings-left-wrap",template:i.settings_left,avatar_size:n.AVATAR_SIZES.ACCOUNT_SETTINGS_LEFT,events:{"click .main-info-wrap .status":"openChangeStatus","click .settings-tabs-wrap .settings-tab":"jumpToBlock","click .settings-tab.delete-account":"deleteAccount"},_initialize:function(){this.status_field=new t.StatusMessageWidget({el:this.$(".status-wrap")[0],model:this.model}),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateBlocks(),this.model.on("change:name",this.updateName,this),this.model.on("change:status_updated",this.updateStatus,this),this.model.on("change:image",this.updateAvatar,this),this.model.on("activate deactivate",this.updateBlocks,this),this.model.on("destroy",this.remove,this)},render:function(t){return this.$(".settings-tab").removeClass("active"),this.$('.settings-tab[data-block-name="'+t.block_name+'"]').addClass("active"),this.updateCSS(),this},updateName:function(){this.$(".name").text(this.model.get("name")),this.updateNameCSS()},updateStatus:function(){this.$(".main-info-wrap .status").attr("data-status",this.model.get("status"))},updateAvatar:function(){var t=this.model.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateBlocks:function(){var t=this.model.isConnected();this.$(".main-info-wrap").switchClass("disconnected",!t),this.$('.settings-tab[data-block-name="xmpp-resources"]').showIf(t),this.$('.settings-tab[data-block-name="server-info"]').showIf(t),this.$('.settings-tab[data-block-name="blocklist"]').showIf(t),this.$('.settings-tab[data-block-name="groups-info"]').showIf(t),this.updateScrollBar()},updateNameCSS:function(){if(this.isVisible()){var t=this.$(".name");t.removeAttr("style");for(var e=this.$(".name-wrap").width(),n=t.width(),i=22;n>e&&i>12;)t.css({"font-size":i}),n=t.width(),i-=2;t.css({"margin-left":(e-n)/2})}},updateCSS:function(){this.updateNameCSS()},openChangeStatus:function(e){t.change_status_view.open(this.model)},jumpToBlock:function(t){var e=a(t.target).closest(".settings-tab"),n=e.data("block-name");this.model.showSettings(null,n)},deleteAccount:function(e){var n=[];t.api_account.get("connected")&&(n=[{name:"delete_settings",checked:this.model.settings.get("to_sync"),text:"Delete synced settings"}]),s.dialogs.ask("Delete account","Do you want to delete this account from Xabber Web? Account will not be deleted from the server.",n).done(function(e){e&&(e.delete_settings&&t.api_account.delete_settings(this.model.get("jid")),this.model.deleteAccount())}.bind(this))}}),t.AccountSettingsRightView=t.BasicView.extend({className:"account-settings-right-wrap",template:i.settings_right,ps_selector:".panel-content",events:{"change .enabled-state input":"setEnabled","click .btn-change-password":"showPasswordView","click .btn-reconnect":"reconnect","change .sync-account":"changeSyncSetting","click .btn-delete-settings":"deleteSettings","click .color-values .color-value":"changeColor"},_initialize:function(){this.resources_view=this.addChild("resources",t.AccountResourcesView,{model:this.model.resources,el:this.$(".xmpp-resources")[0]}),this.vcard_view=this.addChild("vcard",t.AccountVCardView,{model:this.model,el:this.$(".vcard")[0]}),this.$(".account-name .value").text(this.model.get("jid")),this.updateStatus(),this.updateView(),this.showConnectionStatus(),this.updateSynchronizationBlock(),this.model.session.on("change:reconnecting",this.updateReconnectButton,this),this.model.session.on("change:conn_feedback",this.showConnectionStatus,this),this.model.settings.on("change:to_sync",this.updateSyncOption,this),this.model.settings.on("change:deleted",this.updateDelSettingsButton,this),this.model.settings.on("change:to_sync change:synced",this.updateSyncState,this),t.api_account.on("change:connected",this.updateSynchronizationBlock,this),this.model.on("change:enabled",this.updateEnabled,this),this.model.on("change:status_updated",this.updateStatus,this),this.model.on("activate deactivate",this.updateView,this),this.model.on("destroy",this.remove,this)},render:function(e){return this.updateEnabled(),this.$(".main-resource .client").text(t.get("client_name")),this.$(".main-resource .resource").text(this.model.resource),this.$(".main-resource .priority").text(this.model.get("priority")),this.$(".account-color .dropdown-button").dropdown({inDuration:100,outDuration:100,belowOrigin:!0,hover:!1}),this.$(".account-color .dropdown-content").hide(),this.scrollToChild(this.$(".settings-block-wrap."+e.block_name)),this},updateStatus:function(){var t=this.model,e=t.get("status"),n=t.getStatusMessage();this.$(".main-resource .status").attr("data-status",e),this.$(".main-resource .status-message").text(n)},updateView:function(){var t=this.model.isConnected();this.$(".xmpp-resources").showIf(t),this.$(".server-info").showIf(t),this.$(".blocklist").showIf(t),this.$(".groups-info").showIf(t),this.updateScrollBar()},updateSynchronizationBlock:function(){this.$(".xabber-account-features-wrap").showIf(t.api_account.get("connected")),this.updateSyncState(),this.updateSyncOption(),this.updateDelSettingsButton()},updateSyncState:function(){var t;t=this.model.settings.get("to_sync")?this.model.settings.get("synced")?"yes":"no":"off",this.$(".sync-status").text(n.SYNCED_STATUS_DATA[t].tip);var e=n.SYNCED_STATUS_DATA[t].icon,i=this.$(".sync-status-icon");i.removeClass(i.attr("data-mdiclass")).attr("data-mdiclass",e).addClass(e)},updateSyncOption:function(){this.$(".sync-account").prop("checked",this.model.settings.get("to_sync"))},updateDelSettingsButton:function(){this.$(".btn-delete-settings").hideIf(this.model.settings.get("deleted"))},updateEnabled:function(){var t=this.model.get("enabled");this.$(".enabled-state input[type=checkbox]").prop("checked",t)},updateReconnectButton:function(){this.$(".btn-reconnect").switchClass("disabled",this.model.session.get("reconnecting"))},setEnabled:function(t){var e=this.$(".enabled-state input").prop("checked");this.model.save("enabled",e),e?this.model.activate():this.model.deactivate()},showConnectionStatus:function(){this.$(".conn-status").text(this.model.session.get("conn_feedback"))},showPasswordView:function(){this.model.password_view.show()},reconnect:function(){this.model.session.get("reconnecting")||(this.model.save("enabled",!0),this.model.connection.connected?this.model.connection.disconnect():this.model.connect())},changeSyncSetting:function(e){var n=a(e.target).prop("checked"),i=this.model.settings;i.save("to_sync",n),n&&(i.update_timestamp(),t.api_account.synchronize_main_settings())},deleteSettings:function(){s.dialogs.ask("Delete settings","Settings for this XMPP account will be deleted from Xabber account",[{name:"delete_account",checked:this.model.settings.get("to_sync"),text:"Delete synced XMPP account"}]).done(function(e){e&&(e.delete_account?this.model.settings.get("to_sync")||this.model.deleteAccount(!0):this.model.settings.save("to_sync",!1),t.api_account.delete_settings(this.model.get("jid")))}.bind(this))},changeColor:function(e){var n=a(e.target).closest(".color-value");this.model.settings.update_settings({color:n.data("value")}),t.api_account.synchronize_main_settings()}}),t.StatusMessageWidget=t.InputWidget.extend({field_name:"status-message",placeholder:"Set custom status",bindModelEvents:function(){this.model.on("change:status_updated",this.updateValue,this)},getValue:function(){return this.model.getStatusMessage()},setValue:function(t){this.model.setStatus(null,t)}}),t.AccountSettingsItemView=t.BasicView.extend({className:"xmpp-account draggable droppable",template:i.global_settings_item,avatar_size:n.AVATAR_SIZES.SETTINGS_ACCOUNT_ITEM,events:{"click .account-info-wrap":"showSettings","change .enabled-state input":"setEnabled"},_initialize:function(){this.$(".jid").text(this.model.get("jid")),this.updateEnabled(),this.updateAvatar(),this.updateColorScheme(),this.updateSyncState(),this.showConnectionStatus(),this.model.on("change:enabled",this.updateEnabled,this),this.model.on("change:image",this.updateAvatar,this),this.model.settings.on("change:color",this.updateColorScheme,this),this.model.session.on("change:conn_feedback",this.showConnectionStatus,this),this.$el.on("drag_to",this.onDragTo.bind(this)),this.$(".move-account-to-this").on("move_xmpp_account",this.onMoveAccount.bind(this)),this.model.settings.on("change:to_sync",this.updateSyncState,this)},updateAvatar:function(){var t=this.model.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.model.settings.get("color"))},showConnectionStatus:function(){this.$(".conn-status").text(this.model.session.get("conn_feedback"))},updateEnabled:function(){var t=this.model.get("enabled");this.$el.switchClass("disabled",!t),this.$(".enabled-state input[type=checkbox]").prop("checked",t)},setEnabled:function(t){var e=this.$(".enabled-state input").prop("checked");this.model.save("enabled",e),e?this.model.activate():this.model.deactivate()},onDragTo:function(t,e){e&&a(e).trigger("move_xmpp_account",this.model)},onMoveAccount:function(t,e){this.model.collection.moveBefore(e,this.model)},updateSyncState:function(){this.$el.find(".sync-marker").showIf(this.model.settings.get("to_sync"))},showSettings:function(){this.model.showSettings()}}),t.SettingsAccountsBlockView=t.BasicView.extend({_initialize:function(){this.updateList(),this.updateSyncState(),this.model.on("add",this.updateOneInList,this),this.model.on("update_order",this.updateList,this),this.model.on("destroy",this.onAccountRemoved,this),t.api_account.on("change:connected",this.updateSyncState,this),this.$(".move-account-to-bottom").on("move_xmpp_account",this.onMoveAccountToBottom.bind(this))},updateList:function(){l.each(this.children,function(t){t.detach()}),this.model.each(function(e){var n=e.get("jid"),i=this.child(n);i||(i=this.addChild(n,t.AccountSettingsItemView,{model:e})),this.$(".no-accounts-tip").before(i.$el)}.bind(this)),this.updateHtml(),this.parent.updateScrollBar()},updateOneInList:function(e){var n=e.get("jid"),i=this.child(n);i?i.$el.detach():i=this.addChild(n,t.AccountSettingsItemView,{model:e});var s=this.model.indexOf(e);0===s?this.$(".accounts-head-wrap").after(i.$el):this.$(".xmpp-account").eq(s-1).after(i.$el),this.updateHtml(),this.parent.updateScrollBar()},onAccountRemoved:function(t){this.removeChild(t.get("jid")),this.updateHtml(),this.parent.updateScrollBar()},render:function(){this.updateHtml(),l.each(this.children,function(t){t.updateEnabled()})},updateHtml:function(){this.$(".no-accounts-tip").hideIf(this.model.length),this.$(".accounts-head-wrap").showIf(this.model.length),this.updateCSS()},updateCSS:function(){var e=0;this.$(".jid").addClass("inline").each(function(){this.offsetWidth>e&&(e=this.offsetWidth)}).removeClass("inline"),e+=150,t.api_account.get("connected")&&(e+=45),this.$(".xmpp-account-list").css("width",e+48),l.each(this.children,function(t){t.$el.css("width",e)})},updateSyncState:function(){var e=t.api_account.get("connected");this.$(".sync-head").showIf(e),this.$(".sync-marker-wrap").showIf(e),this.updateCSS()},onMoveAccountToBottom:function(t,e){this.model.moveToBottom(e)}}),t.ChangeStatusView=t.BasicView.extend({className:"modal main-modal change-status-modal",template:i.change_status,events:{"click .status-values li":"changeStatus","click .status-message-wrap .clear-input":"clearStatusMessageInput","keyup .status-message":"keyUp","change .apply-to-all":"changeApplyToAll"},open:function(t){this.account=t,this.highlightStatus(t.get("status")),this.restoreStatusMessageInput(),this.show()},highlightStatus:function(t){this.$('.status-values li[data-value="'+t+'"]').addClass("active").siblings().removeClass("active")},changeStatus:function(t){var e=a(t.target).closest("li").data("value");this.highlightStatus(e),this.do_change(),this.closeModal()},restoreStatusMessageInput:function(t){var e=this.account.get("status_message");this.$(".status-message").val(e).switchClass("filled",e),e||this.$(".status-message").attr("placeholder",this.account.getStatusMessage())},clearStatusMessageInput:function(t){var e=n.STATUSES[this.account.get("status")];this.$(".status-message").val("").attr("placeholder",e).removeClass("filled")},keyUp:function(t){if(t.keyCode===n.KEY_ENTER)this.do_change(),this.closeModal();else{var e=this.$(".status-message").val();this.$(".status-message").switchClass("filled",e)}},do_change:function(){var e=this.$(".status-values li.active").data("value"),n=this.$(".status-message").val();this.apply_to_all?t.accounts.each(function(t){t.setStatus(e,n)}):this.account.setStatus(e,n)},changeApplyToAll:function(t){this.apply_to_all=a(t.target).prop("checked")},render:function(t){this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){Materialize.updateTextFields()},onHide:function(){this.$el.detach()},close:function(){this.$(".status-message").val()||this.do_change(),this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),t.ChangePasswordView=t.BasicView.extend({className:"modal main-modal change-password-modal",template:i.change_password,events:{"click .btn-change":"submit","click .btn-cancel":"close","keyup input[name=password]":"keyUp"},_initialize:function(){return this.$("input[name=jid]").val(this.model.get("jid")),this.$password_input=this.$("input[name=password]"),this.data.on("change:authentication",this.updateButtons,this),this},render:function(t){t||(t={}),this.is_login=t.login,this.$(".modal-header span").text(this.is_login?"Log In":"Set password"),this.$(".btn-cancel").text(this.is_login?"Skip":"Cancel"),this.$(".btn-change").text(this.is_login?"Log In":"Set"),this.$el.openModal({use_queue:!0,ready:this.onRender.bind(this),complete:this.close.bind(this)})},onRender:function(){Materialize.updateTextFields(),this.authFeedback({}),this.$password_input.val("").focus()},getActionName:function(){return this.is_login?"Login":"Set"},keyUp:function(t){t.keyCode===n.KEY_ENTER&&this.submit()},submit:function(){if(this.data.get("authentication"))return void this.cancel();this.data.set("authentication",!0),this.authFeedback({});var t=(this.model.get("jid"),this.$password_input.val());if(!t)return this.errorFeedback({password:"Please input password!"});this.authFeedback({password:"Authentication with new password..."}),this.model.connection.connected?(this.model.once("deactivate",function(){this.setPassword(t)}.bind(this)),this.model.deactivate()):this.setPassword(t)},setPassword:function(t){this.model.save({auth_type:"password",password:s.utoa(t),enabled:!0}),this.model.auth_view=this,this.model.connect()},cancel:function(){this.data.set("authentication",!1)},updateButtons:function(){var t=this.data.get("authentication");this.$(".btn-change").text(t?"Stop":this.getActionName())},authFeedback:function(t){this.$password_input.switchClass("invalid",t.password).siblings("span.errors").text(t.password||"")},errorFeedback:function(t){this.authFeedback(t),this.data.set("authentication",!1)},successFeedback:function(){this.data.set("authentication",!1),this.closeModal()},onHide:function(){this.$el.detach()},close:function(){this.is_login&&this.model.save("enabled",!1),this.cancel(),this.closeModal()},closeModal:function(){this.model.auth_view=null,this.$el.closeModal({complete:this.hide.bind(this)})}}),t.AuthView=t.BasicView.extend({_initialize:function(){return this.$jid_input=this.$("input[name=jid]"),this.$password_input=this.$("input[name=password]"),this.data.on("change:authentication",this.updateButtons,this),this},render:function(){this.onRender()},onRender:function(){this.account=null,this.authFeedback({}),Materialize.updateTextFields(),this.$jid_input.val("").focus(),this.$password_input.val(""),this.updateButtons(),this.updateOptions&&this.updateOptions()},keyUp:function(t){t.keyCode===n.KEY_ENTER&&this.submit()},submit:function(){if(this.data.get("authentication"))return void this.cancel();this.data.set("authentication",!0),this.authFeedback({});var e=this.$jid_input.val(),n=this.$password_input.val();if(!e)return this.errorFeedback({jid:"Please input username!"});if(!n)return this.errorFeedback({password:"Please input password!"});var i=e.indexOf("@");if(i<=0||i===e.length-1)return this.errorFeedback({jid:"Wrong username format!"});e=c.getBareJidFromJid(e).toLowerCase(),t.accounts.get(e)?this.errorFeedback({jid:"This account already added to Xabber web"}):(this.authFeedback({password:"Authentication..."}),this.account=t.accounts.create({jid:e,password:s.utoa(n),is_new:!0},{auth_view:this}),this.account.trigger("start"))},cancel:function(){this.data.set("authentication",!1),this.onRender(),this.account&&(this.account.destroy(),this.account=null)},authFeedback:function(t){this.$jid_input.switchClass("invalid",t.jid).siblings("span.errors").text(t.jid||""),this.$password_input.switchClass("invalid",t.password).siblings("span.errors").text(t.password||"")},errorFeedback:function(t){this.authFeedback(t),this.data.set("authentication",!1)}}),t.XmppLoginPanel=t.AuthView.extend({className:"login-panel",template:i.xmpp_login,events:{"click .login-type":"changeLoginType","click .btn-log-in":"submit","click .btn-cancel":"cancel","keyup input[name=password]":"keyUp"},changeLoginType:function(){t.body.setScreen("login",{login_screen:"xabber"})},updateButtons:function(){var t=this.data.get("authentication");this.$(".btn-log-in").switchClass("disabled",t),this.$(".btn-cancel").showIf(t)},successFeedback:function(e){e.auth_view=null,this.data.set("authentication",!1),t.body.setScreen("chats")}}),t.AddAccountView=t.AuthView.extend({className:"modal main-modal add-account-modal",template:i.add_account,events:{"click .btn-add":"submit","click .btn-cancel":"close","keyup input[name=password]":"keyUp"},render:function(t){this.$el.openModal({ready:this.onRender.bind(this),complete:this.close.bind(this)})},updateOptions:function(){this.$(".sync-option").showIf(t.api_account.get("connected")).find("input").prop("checked",t.api_account.get("sync_all"))},updateButtons:function(){var t=this.data.get("authentication");this.$(".btn-add").text(t?"Stop":"Add")},successFeedback:function(e){this.data.set("authentication",!1),this.$(".sync-option input").prop("checked")?(e.settings.update_timestamp(),t.api_account.synchronize_main_settings()):e.settings.save("to_sync",!1),this.closeModal()},onHide:function(){this.$el.detach()},close:function(){this.cancel(),this.closeModal()},closeModal:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),t.once("start",function(){this.xmpp_login_panel=t.login_page.addChild("xmpp_login",this.XmppLoginPanel),this.account_settings=t.wide_panel.addChild("account_settings",this.NodeView,{classlist:"settings-panel account-settings-panel"}),this.acc_settings_left=t.account_settings.addChild("left",this.Container,{classlist:"account-settings-left-container"}),this.acc_settings_right=t.account_settings.addChild("right",this.Container,{classlist:"account-settings-right-container"}),this.accounts=new this.Accounts(null,{
storage_name:this.getStorageName()+"-accounts"}),this.accounts.fetch(),this.toolbar_view.addChild("accounts",this.ToolbarAccountsBlockView,{model:this.accounts,el:this.toolbar_view.$(".accounts")[0]}),this.settings_view.addChild("accounts",this.SettingsAccountsBlockView,{model:this.accounts,el:this.settings_view.$(".xmpp-accounts")[0]}),this.add_account_view=new this.AddAccountView,this.change_status_view=new this.ChangeStatusView,this.on("add_account",function(){this.add_account_view.show()},this),window.onbeforeunload=function(){l.each(this.accounts.connected,function(t){t.sendPresence("offline")})}.bind(this),this.login_page.patchTree=function(t,e){return"xmpp"===(e.login_screen||n.DEFAULT_LOGIN_SCREEN)?{xmpp_login:null}:{xabber_login:null}}},t),t}}),define("xabber-discovery",[],function(){return function(t){var e=t.env,n=(e.constants,e.$),i=e._,s=e.moment,a=e.Strophe,o=e.$iq;return t.ClientFeature=Backbone.Model.extend({idAttribute:"namespace"}),t.FeatureView=t.BasicView.extend({className:"client-feature",template:function(){this.$el.append('<div class="feature-name one-line"/>').append('<div class="supports"/>')},_initialize:function(){this.render(),this.$el.appendTo(this.model.collection.account.settings_right.$(".capabilities")),this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var t=this.model.get("verbose_name"),e=this.model.get("supports");this.$(".feature-name").text(t),this.$(".supports").text(e?"Available":"Unavailable")}}),t.ClientFeatures=Backbone.Collection.extend({model:t.ClientFeature,initialize:function(e,n){this.account=n.account,this.connection=this.account.connection,this.connection.disco.addIdentity("client","web",t.get("client_name"),"en"),this.addFeature(a.NS.VCARD,"XEP-0054: vCard-temp"),this.addFeature(a.NS.BLOCKING,"XEP-0191: Blocking Command"),this.addFeature(a.NS.PING,"XEP-0199: XMPP Ping"),this.addFeature(a.NS.CARBONS,"XEP-0280: Message carbons"),this.addFeature(a.NS.MAM,"XEP-0313: Message archive management"),this.addFeature(a.NS.HTTP_UPLOAD,"XEP-0363: HTTP File Upload")},addFeature:function(e,n){var i=this.create({namespace:e,verbose_name:n});this.connection.disco.addFeature(e);new t.FeatureView({model:i})}}),t.ServerFeature=Backbone.Model.extend({idAttribute:"var"}),t.ServerFeatures=Backbone.Collection.extend({model:t.ServerFeature,initialize:function(t,e){this.account=e.account,this.connection=this.account.connection,this.on("add",this.onFeatureAdded,this)},request:function(){this.connection.disco.info(this.account.domain,null,this.onInfo.bind(this)),this.connection.disco.items(this.account.domain,null,this.onItems.bind(this))},onItems:function(t){n(t).find("query item").each(function(t,e){this.connection.disco.info(n(e).attr("jid"),null,this.onInfo.bind(this))}.bind(this))},onInfo:function(t){var e=n(t),i=e.attr("from"),s=this;e.find("feature").each(function(){var t=n(this).attr("var");s.create({var:t,from:i})})},onFeatureAdded:function(t){var e=t.get("var"),n=this.account.client_features.get(e);n&&n.set("supports",!0);var s=t.get("preferences")||{};e===a.NS.MAM&&"always"!==s.default&&this.account.sendIQ(o({type:"get"}).c("prefs",{xmlns:a.NS.MAM}),i.bind(this.receiveMAMPreferences,this,t))},receiveMAMPreferences:function(t,e){var i=n(e).find('prefs[xmlns="'+a.NS.MAM+'"]');if("always"!==i.attr("default")){var s=o({type:"set"}).c("prefs",{xmlns:a.NS.MAM,default:"always"});i.children().each(function(t,e){s.cnode(e).up()}),this.account.sendIQ(s,function(e){t.set("preferences",{default:"always"})})}else t.set("preferences",{default:"always"})}}),t.Account.addInitPlugin(function(){this.client_features=new t.ClientFeatures(null,{account:this}),this.server_features=new t.ServerFeatures(null,{account:this})}),t.Account.addConnPlugin(function(){this.last_stanza_timestamp=s.now(),this.connection.deleteHandler(this._last_stanza_handler),this._last_stanza_handler=this.connection.addHandler(function(){return this.last_stanza_timestamp=s.now(),!0}.bind(this)),this.connection.deleteHandler(this._pong_handler),this._pong_handler=this.connection.ping.addPingHandler(function(t){return this.last_stanza_timestamp=s.now(),this.connection.ping.pong(t),!0}.bind(this)),this.connection.deleteTimedHandler(this._ping_handler),this._ping_handler=this.connection.addTimedHandler(1e4,function(){return(s.now()-this.last_stanza_timestamp)/1e3>(t.settings.ping_interval||180)&&(this.last_stanza_timestamp=s.now(),this.connection.ping.ping(this.get("jid"))),!0}.bind(this)),this.server_features.request()},!0,!0),t.Account.addConnPlugin(function(){var t=this.connection.disco;this.connection.addHandler(t._onDiscoInfo.bind(t),a.NS.DISCO_INFO,"iq","get",null,null),this.connection.addHandler(t._onDiscoItems.bind(t),a.NS.DISCO_ITEMS,"iq","get",null,null)},!1,!0),t}}),define("xabber-contacts",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.contacts,s=e.utils,a=e.$,o=e.$iq,r=(e.$msg,e.$pres),c=e.Strophe,l=e._,d=e.moment,u=e.uuid,h=s.images;return t.Contact=Backbone.Model.extend({idAttribute:"jid",defaults:{status:"offline",status_message:"",subscription:null,groups:[]},initialize:function(n,i){this.account=i.account;var a=l.clone(n);a.name=a.roster_name||a.jid,a.image||(a.image=h.getDefaultAvatar(a.name)),this.cached_image=h.getCachedImage(a.image),a.vcard=s.vcard.getBlank(a.jid),this.set(a),this.hash_id=e.b64_sha1(this.account.get("jid")+"-"+a.jid),this.resources=new t.ContactResources(null,{contact:this}),this.details_view=new t.ContactDetailsView({model:this}),this.on("change:photo_hash",this.getVCard,this),this.account.dfd_presence.done(function(){this.getVCard()}.bind(this))},getStatusMessage:function(){return this.get("status_message")||n.STATUSES[this.get("status")]},getVCard:function(t){var e=this.get("jid"),n=l.isFunction(t);this.account.connection.vcard.get(e,function(i){var s={vcard:i,vcard_updated:d.now(),name:this.get("roster_name")};s.name||(s.name=i.fullname||(i.first_name+" "+i.last_name).trim()||e),s.image=i.photo.image||h.getDefaultAvatar(s.name),this.cached_image=h.getCachedImage(s.image),this.set(s),n&&t(i)}.bind(this),function(){n&&t(null)})},pres:function(t){var e=r({to:this.get("jid"),type:t});return this.account.sendPres(e),this.trigger("presence",this,t+"_from"),this},pushInRoster:function(t,e,n){t||(t={});var i=t.name||this.get("name"),s=t.groups||this.get("groups"),a=o({type:"set"}).c("query",{xmlns:c.NS.ROSTER}).c("item",{jid:this.get("jid"),name:i});return l.each(s,function(t){a.c("group").t(t).up()}),this.account.sendIQ(a,e,n),this.set("known",!0),this},removeFromRoster:function(t,e){var n=o({type:"set"}).c("query",{xmlns:c.NS.ROSTER}).c("item",{jid:this.get("jid"),subscription:"remove"});return this.account.sendIQ(n,t,e),this.set("known",!1),this},acceptRequest:function(t){this.pres("subscribed"),t&&t()},blockRequest:function(t){this.pres("unsubscribed"),this.removeFromRoster().block(t)},declineRequest:function(t){this.pres("unsubscribed"),this.removeFromRoster(t)},block:function(t,e){var n=o({type:"set"}).c("block",{xmlns:c.NS.BLOCKING}).c("item",{jid:this.get("jid")});this.account.sendIQ(n,t,e),this.set("known",!1)},unblock:function(t,e){var n=o({type:"set"}).c("unblock",{xmlns:c.NS.BLOCKING}).c("item",{jid:this.get("jid")});this.account.sendIQ(n,t,e)},handlePresence:function(t){var e=a(t),n=t.getAttribute("type"),i=e.find('x[xmlns="'+c.NS.VCARD_UPDATE+'"]');if(i.length&&this.set("photo_hash",i.find("photo").text()),"subscribe"===n)this.get("in_roster")?this.pres("subscribed"):this.trigger("presence",this,"subscribe");else if("subscribed"===n)"to"===this.get("subscription")&&this.pres("subscribed"),this.trigger("presence",this,"subscribed");else if("unsubscribe"===n);else if("unsubscribed"===n)this.trigger("presence",this,"unsubscribed");else{var s=t.getAttribute("from"),o=c.getResourceFromJid(s),r=Number(e.find("priority").text()),d=e.find("show").text()||"online",u=e.find("status"),h=u.text();l.isNaN(r)&&(r=0),clearTimeout(this._reset_status_timeout);var p=this.resources.get(o);if("unavailable"===n)p&&p.destroy();else{var f={resource:o,priority:r,status:d};u.length&&(f.status_message=h),p?p.set(f):p=this.resources.create(f)}}},resetStatus:function(t){clearTimeout(this._reset_status_timeout),this._reset_status_timeout=setTimeout(function(){this.set({status_updated:d.now(),status:"offline",status_message:""})}.bind(this),t||5e3)},showDetails:function(e){e||(e="contacts"),t.body.setScreen(e,{right:"contact_details",contact:this})}}),t.ContactItemView=t.BasicView.extend({className:"roster-contact list-item",_initialize:function(t){this.account=this.model.account,this.$el.attr({"data-id":u(),"data-jid":this.model.get("jid")}),this.$(".jid").text(this.model.get("jid")),this.updateName(),this.updateStatus(),this.updateAvatar(),this.model.on("change:name",this.updateName,this),this.model.on("change:image",this.updateAvatar,this),this.model.on("change:status_updated",this.updateStatus,this)},updateName:function(){this.$(".name").text(this.model.get("name"))},updateAvatar:function(){this.$(".circle-avatar").setAvatar(this.model.cached_image,this.avatar_size)},updateStatus:function(){this.$(".status").attr("data-status",this.model.get("status")),this.$(".status-message").text(this.model.getStatusMessage())}}),t.ContactItemRightView=t.ContactItemView.extend({template:i.contact_right_item,avatar_size:n.AVATAR_SIZES.CONTACT_RIGHT_ITEM,events:{click:"clickOnItem",mouseover:"showJid",mouseleave:"hideJid"},showJid:function(){this.$(".name").text()!==this.model.get("jid")&&(this.$(".status-message").addClass("hidden"),this.$(".jid").removeClass("hidden"))},hideJid:function(){this.$(".jid").addClass("hidden"),this.$(".status-message").removeClass("hidden")},clickOnItem:function(){this.model.trigger("open_chat",this.model)}}),t.ContactItemLeftView=t.ContactItemView.extend({template:i.contact_left_item,avatar_size:n.AVATAR_SIZES.CONTACT_LEFT_ITEM,events:{click:"clickOnItem"},__initialize:function(){this.updateDisplayStatus(),this.updateBlockedState(),this.updateMutedState(),this.model.on("change:display",this.updateDisplayStatus,this),this.model.on("change:blocked",this.updateBlockedState,this),this.model.on("change:muted",this.updateMutedState,this)},updateDisplayStatus:function(){this.$el.switchClass("active",this.model.get("display"))},updateBlockedState:function(){this.$el.switchClass("blocked",this.model.get("blocked"))},updateMutedState:function(){this.$(".muted-icon").showIf(this.model.get("muted")),this.updateCSS()},updateCSS:function(){if(this.$el.is(":visible")){var t=this.$(".name-wrap").width();this.model.get("muted")&&(t-=24),this.$(".name").css("max-width",t)}},clickOnItem:function(){this.model.showDetails()}}),t.ContactResources=t.Resources.extend({initialize:function(t,e){this.contact=e.contact,this.jid=e.contact.get("jid"),this.connection=e.contact.account.connection,this.on("add change",this.onResourceUpdated,this),this.on("remove",this.onResourceRemoved,this)},onResourceUpdated:function(t){t===this.first()&&this.contact.set({status_updated:d.now(),status:t.get("status"),status_message:t.get("status_message")})},onResourceRemoved:function(t){var e={status_updated:d.now()};this.length?(e.status=this.first().get("status"),e.status_message=this.first().get("status_message")):(e.status="offline",e.status_message=""),this.contact.set(e)}}),t.ContactResourcesView=t.ResourcesView.extend({onResourceRemoved:function(t){this.removeChild(t.get("resource")),this.$el.showIf(this.model.length),this.parent.updateScrollBar()},onReset:function(){this.removeChildren(),this.$el.addClass("hidden"),this.parent.updateScrollBar()},updatePosition:function(t){var e=this.child(t.get("resource"));if(e){e.$el.detach();var n=this.model.indexOf(t);0===n?this.$(".resources-wrap").prepend(e.$el):this.$(".resource-wrap").eq(n-1).after(e.$el),this.updateScrollBar()}}}),t.ContactVCardView=t.VCardView.extend({events:{"click .btn-vcard-refresh":"refresh"}}),t.ContactDetailsView=t.BasicView.extend({className:"details-panel contact-details-panel",template:i.contact_details,ps_selector:".panel-content",avatar_size:n.AVATAR_SIZES.CONTACT_DETAILS,events:{"click .btn-escape":"openChat","click .btn-chat":"openChat","click .btn-add":"addContact","click .btn-delete":"deleteContact","click .btn-block":"blockContact","click .btn-unblock":"unblockContact","click .btn-auth-request":"requestAuthorization"},_initialize:function(){this.account=this.model.account,this.name_field=new t.ContactNameWidget({el:this.$(".name-wrap")[0],model:this.model}),this.resources_view=this.addChild("resources",t.ContactResourcesView,{model:this.model.resources,el:this.$(".resources-block-wrap")[0]}),this.vcard_view=this.addChild("vcard",t.ContactVCardView,{model:this.model,el:this.$(".vcard")[0]}),this.edit_groups_view=this.addChild("groups",t.ContactEditGroupsView,{el:this.$(".groups-block-wrap")[0]}),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateButtons(),this.model.on("change",this.update,this)},render:function(t){this.$(".btn-escape").showIf("chats"===t.name)},onChangedVisibility:function(){this.model.set("display",this.isVisible())},update:function(){var t=this.model.changed;l.has(t,"name")&&this.updateName(),l.has(t,"image")&&this.updateAvatar(),l.has(t,"status_updated")&&this.updateStatus(),(l.has(t,"in_roster")||l.has(t,"blocked")||l.has(t,"subscription"))&&this.updateButtons()},updateName:function(){this.$(".main-info .name").text(this.model.get("name"))},updateStatus:function(){var t=this.model.get("status"),e=this.model.getStatusMessage();this.$(".main-info .status").attr("data-status",t),this.$(".main-info .status-message").text(e)},updateAvatar:function(){var t=this.model.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateButtons:function(){var t=this.model.get("in_roster"),e=this.model.get("blocked"),n=this.model.get("subscription");this.$(".btn-add").hideIf(t),this.$(".btn-delete").showIf(t),this.$(".btn-block").hideIf(e),this.$(".btn-unblock").showIf(e),this.$(".btn-auth-request").showIf(t&&!e&&"both"!==n&&"to"!==n),this.$(".buttons-wrap button").addClass("btn-dark").filter(":not(.hidden)").first().removeClass("btn-dark")},openChat:function(){this.model.trigger("open_chat",this.model)},addContact:function(){t.add_contact_view.show({account:this.account,jid:this.model.get("jid")})},deleteContact:function(e){var n=this.model;s.dialogs.ask("Remove contact","Do you want to remove "+n.get("name")+" from contacts?").done(function(e){e&&(n.removeFromRoster(),t.trigger("clear_search"))})},blockContact:function(e){var n=this.model;s.dialogs.ask("Block contact","Do you want to block "+n.get("name")+"?").done(function(e){e&&(n.block(),t.trigger("clear_search"))})},unblockContact:function(e){var n=this.model;s.dialogs.ask("Unblock contact","Do you want to unblock "+n.get("name")+"?").done(function(e){e&&(n.unblock(),t.trigger("clear_search"))})},requestAuthorization:function(){this.model.pres("subscribe"),this.openChat()}}),t.ContactNameWidget=t.InputWidget.extend({field_name:"contact-name",placeholder:"Set contact name",model_field:"name",setValue:function(t){this.model.pushInRoster({name:t})}}),t.ContactEditGroupsView=t.BasicView.extend({events:{"click .existing-group-field label":"editGroup","change .new-group-name input":"checkNewGroup","keyup .new-group-name input":"checkNewGroup","click .new-group-checkbox":"addNewGroup"},_initialize:function(t){this.account=this.parent.account,this.model=this.parent.model,this.model.on("change:in_roster update_groups",this.render,this)},render:function(){if(this.model.get("in_roster")){var t=l.clone(this.model.get("groups")),e=l.map(this.account.groups.notSpecial(),function(e){var n=e.get("name");return{name:n,checked:l.contains(t,n),id:u()}});this.$(".groups").html(i.groups_checkbox_list({groups:e})).appendTo(this.$(".groups-wrap"))}this.$el.showIf(this.model.get("in_roster")),this.parent.updateScrollBar()},editGroup:function(t){var e=a(t.target),n=e.siblings("input"),i=!n.prop("checked"),s=n.attr("data-groupname");groups=l.clone(this.model.get("groups")),idx=groups.indexOf(s),n.prop("checked",i),i?groups.push(s):idx>=0&&groups.splice(idx,1),this.model.pushInRoster({groups:groups})},checkNewGroup:function(t){var e=a(t.target).val();this.$(".new-group-checkbox").showIf(e&&!this.account.groups.get(e))},addNewGroup:function(t){var e=this.$(".new-group-name input"),n=e.val(),i=l.clone(this.model.get("groups"));i.indexOf(n)<0&&i.push(n),this.model.pushInRoster({groups:i})}}),t.ContactsBase=Backbone.Collection.extend({model:t.Contact}),t.GroupContacts=t.ContactsBase.extend({initialize:function(t,e){this.group=e.group,this.on("change",this.onContactChanged,this)},comparator:function(e,i){if("online-first"===t.settings.roster.sorting){var s=e.get("status"),a=i.get("status"),o=n.STATUS_WEIGHTS[s],r=n.STATUS_WEIGHTS[a],c=o>=n.STATUS_WEIGHTS.offline;if(c^r>=n.STATUS_WEIGHTS.offline)return c?1:-1}var l,d;return l=e.get("name").toLowerCase(),d=i.get("name").toLowerCase(),l<d?-1:l>d?1:0},onContactChanged:function(t){var e=t.changed;(l.has(e,"name")||l.has(e,"status_updated"))&&(this.sort(),this.trigger("update_contact_item",t))}}),t.Group=Backbone.Model.extend({defaults:{counter:{all:0,online:0}},initialize:function(e,n){this.account=n.account,e.name||(e.name=e.id),this.set(e),this._settings=this.account.groups_settings.get(e.name),this._settings||(this._settings=this.account.groups_settings.create({name:e.name})),this.settings=this._settings.attributes,this.contacts=new t.GroupContacts(null,{group:this}),this.settings_view=new t.GroupSettingsView({model:this}),this.contacts.on("add update_contact_item",this.updateCounter,this),this.contacts.on("destroy",this.onContactRemoved,this),t._roster_settings.on("change",this.onChangedRosterSettings,this)},isSpecial:function(){return l.isNumber(this.get("id"))},updateCounter:function(){var t=this.contacts.length,e=t-this.contacts.where({status:"offline"}).length;this.set("counter",{all:t,online:e})},renameGroup:function(t){var e=this.get("name"),n=l.clone(this.settings);n.name=t,this._settings.destroy(),this._settings=this.account.groups_settings.create(n),this.settings=this._settings.attributes,this.set({id:t,name:t}),this.trigger("rename",this,e),l.each(l.clone(this.contacts.models),function(n){var i=l.clone(n.get("groups")),s=i.indexOf(e);s>=0&&i.splice(s,1),s=i.indexOf(t),s<0&&i.push(t),n.pushInRoster({groups:i})})},deleteGroup:function(){var t=this.get("name");this._settings.destroy(),l.each(l.clone(this.contacts.models),function(e){var n=l.clone(e.get("groups")),i=n.indexOf(t);i>=0&&n.splice(i,1),e.pushInRoster({groups:n})})},removeContact:function(t){this.contacts.get(t)&&(this.contacts.remove(t),this.onContactRemoved(t))},onContactRemoved:function(t){this.updateCounter(),this.trigger("remove_contact",t),this.contacts.length||this.destroy()},onChangedRosterSettings:function(){var e=t._roster_settings.changed;l.has(e,"show_offline")&&this._settings.trigger("change:show_offline"),l.has(e,"sorting")&&(this.contacts.sort(),this._settings.trigger("change:sorting"))},showSettings:function(){this.settings_view.show()}}),t.GroupView=t.BasicView.extend({className:"roster-group",events:{"click .group-head":"toggle","click .group-head .group-icon":"showGroupSettings","mouseover .group-head":"showSettingsIcon","mouseleave .group-head":"updateGroupIcon"},_initialize:function(){this.account=this.model.account,this.updateName(),this.updateGroupIcon(),this.updateMembersCounter(),this.model.contacts.on("add",this.onContactAdded,this),this.model.on("remove_contact",this.onContactRemoved,this),this.model.contacts.on("update_contact_item",this.updateContactItem,this),this.model.on("change:name",this.updateName,this),this.model.on("change:counter",this.updateMembersCounter,this),this.model._settings.on("change:show_offline",this.onChangedOfflineSetting,this),this.model._settings.on("change:sorting",this.onChangedSortingSetting,this),this.data.on("change:expanded",this.updateExpanded,this)},updateExpanded:function(){var t=this.data.get("expanded");this.$el.switchClass("shrank",!t),this.$(".arrow").switchClass("mdi-chevron-down",t),this.$(".arrow").switchClass("mdi-chevron-right",!t),this.$(".roster-contact").showIf(t),this.parent.parent.onListChanged()},updateGroupIcon:function(){var t,e=this.model.settings.show_offline;"default"===e?t="settings":"yes"===e?t="group-filled":"no"===e&&(t="group-outline"),this.$(".group-icon").attr("data-mdi",t).hideIf("settings"===t)},updateName:function(){this.$(".group-name").text(this.model.get("name"))},updateMembersCounter:function(){var t=this.model.get("counter");this.$(".member-counter").text("("+t.online+"/"+t.all+")")},onContactAdded:function(t){this.addChild(t.get("jid"),this.item_view,{model:t});this.updateContactItem(t)},onContactRemoved:function(t){this.removeChild(t.get("jid")),this.parent.parent.onListChanged()},updateContactItem:function(e){var i=this.child(e.get("jid"));if(i){var s=t.settings.roster,a=this.model.settings,o="default"===a.show_offline,r="yes"===a.show_offline||o&&"yes"===s.show_offline,c=n.STATUS_WEIGHTS[e.get("status")]>=6;i.$el.switchClass("invisible",c&&!r).detach();var l=this.model.contacts.indexOf(e);return 0===l?this.$(".group-head").after(i.$el):this.$(".roster-contact").eq(l-1).after(i.$el),i.$el.showIf(this.data.get("expanded")),this.parent.parent.onListChanged(),i}},showSettingsIcon:function(t){this.$(".group-icon").attr("data-mdi","settings").removeClass("hidden")},showGroupSettings:function(t){t.stopPropagation(),this.model.showSettings()},onChangedOfflineSetting:function(){this.updateGroupIcon();var e=t.settings.roster,i=this.model.settings,s="default"===i.show_offline,a="yes"===i.show_offline||s&&"yes"===e.show_offline;l.each(this.children,function(t){var e=n.STATUS_WEIGHTS[t.model.get("status")]>=6;t.$el.switchClass("invisible",e&&!a)}),this.parent.parent.onListChanged()},onChangedSortingSetting:function(){l.each(this.children,function(t){t.$el.detach()}),this.model.contacts.each(function(t){this.updateContactItem(t)}.bind(this)),this.parent.parent.onListChanged()}}),t.GroupRightView=t.GroupView.extend({template:i.group_right,item_view:t.ContactItemRightView,__initialize:function(){this.data.set("expanded",this.model.settings.expanded)},toggle:function(){var t=!this.data.get("expanded");this.data.set("expanded",t),this.model._settings.save("expanded",t)}}),t.GroupLeftView=t.GroupView.extend({template:i.group_left,item_view:t.ContactItemLeftView,__initialize:function(){this.data.set("expanded",!0)},toggle:function(t){t.stopPropagation(),this.data.set("expanded",!this.data.get("expanded"))}}),t.GroupSettingsView=t.BasicView.extend({className:"modal main-modal group-settings",template:i.group_settings,ps_selector:".modal-content",avatar_size:n.AVATAR_SIZES.GROUP_SETTINGS,events:{"change .offline input[type=radio][name=offline]":"setOffline","click .btn-apply":"applySettings","click .btn-delete":"deleteGroup","click .btn-cancel":"close"},_initialize:function(){this._settings=this.model._settings;this.model.get("name");this.model.isSpecial()&&(this.$(".group-name input").attr("readonly",!0),this.$(".btn-delete").addClass("hidden")),this.model.on("destroy",this.onDestroy,this)},render:function(){this.$(".group-name input").val(this.model.get("name")),this.$(".group-name .errors").addClass("hidden"),this.$(".offline input[type=radio][name=offline][value="+this.model.settings.show_offline+"]").prop("checked",!0),this.$el.openModal({ready:function(){Materialize.updateTextFields()},complete:this.hide.bind(this)})},setOffline:function(t){this.model._settings.save("show_offline",t.target.value)},validateName:function(t){return t?this.model.collection.get(t)?"Wrong name":void 0:"Please input name!"},applySettings:function(){var t=this.$(".group-name input").val();if(t!==this.model.get("name")){var e=this.validateName(t);if(e)return void this.$(".group-name .errors").text(e).removeClass("hidden");this.model.renameGroup(t)}this.close()},deleteGroup:function(){var t=this.model.get("name");s.dialogs.ask("Remove group","Do you want to remove group "+t+"?").done(function(t){t&&this.model.deleteGroup()}.bind(this))},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})},onDestroy:function(){this.$el.closeModal({complete:this.remove.bind(this)})}}),t.Groups=Backbone.Collection.extend({model:t.Group,initialize:function(t,e){this.account=e.account,this.on("add",this.onGroupAdded,this),this.on("change:id",this.sort,this)},comparator:function(t,e){return t.isSpecial()===e.isSpecial()?t.get("id")<e.get("id")?-1:1:t.isSpecial()?1:-1},notSpecial:function(){return this.filter(function(t){return!t.isSpecial()})},onGroupAdded:function(e){e.acc_view=new t.AccountGroupView({model:e})}}),t.Contacts=t.ContactsBase.extend({initialize:function(t,e){this.account=e.account,this.account.on("deactivate destroy",this.removeAllContacts,this),this.collections=[],this.on("add",l.bind(this.updateInCollections,this,"add")),this.on("change",l.bind(this.updateInCollections,this,"change"))},addCollection:function(t){this.collections.push(t)},updateInCollections:function(t,e){l.each(this.collections,function(n){n.update(e,t)})},mergeContact:function(t){"object"!=typeof t&&(t={jid:t});var e=this.get(t.jid);return e?e.set(t):e=this.create(t,{account:this.account}),e},removeAllContacts:function(){l.each(l.clone(this.models),function(t){t.destroy()})},handlePresence:function(t,e){this.mergeContact(e).handlePresence(t)}}),t.BlockList=t.ContactsBase.extend({initialize:function(t,e){this.account=e.account,this.contacts=this.account.contacts,this.contacts.on("remove_from_blocklist",this.onContactRemoved,this)},update:function(t,e){t.get("blocked")?this.get(t)||(this.add(t),t.trigger("add_to_blocklist",t)):this.get(t)&&(this.remove(t),t.trigger("remove_from_blocklist",t))},onContactRemoved:function(t){t.getVCard()},registerHandler:function(){this.account.connection.deleteHandler(this._stanza_handler),this._stanza_handler=this.account.connection.addHandler(this.onBlockingIQ.bind(this),c.NS.BLOCKING,"iq","set",null,this.account.get("jid"))},getFromServer:function(){var t=o({type:"get"}).c("blocklist",{xmlns:c.NS.BLOCKING});this.account.sendIQ(t,this.onBlockingIQ.bind(this))},onBlockingIQ:function(t){var e=a(t).find('[xmlns="'+c.NS.BLOCKING+'"]'),n=e[0].tagName.toLowerCase(),i=n.startsWith("block");return e.find("item").each(function(t,e){var n=e.getAttribute("jid");this.account.contacts.mergeContact({jid:n,blocked:i})}.bind(this)),!0}}),t.Roster=t.ContactsBase.extend({initialize:function(t,e){this.account=e.account,this.groups=this.account.groups,this.contacts=this.account.contacts,this.contacts.on("add_to_roster",this.onContactAdded,this),this.contacts.on("change_in_roster",this.onContactChanged,this),this.contacts.on("remove_from_roster",this.onContactRemoved,this)},update:function(t,e){t.get("in_roster")||t.get("known")?this.get(t)?"change"===e&&t.trigger("change_in_roster",t):(this.add(t),t.trigger("add_to_roster",t)):this.get(t)&&(this.remove(t),t.trigger("remove_from_roster",t))},onContactAdded:function(t){if(!t.get("in_roster"))return void this.addContactToGroup(t,n.NON_ROSTER_GROUP_ID);var e=t.get("groups");e.length?l.each(e,l.bind(this.addContactToGroup,this,t)):this.addContactToGroup(t,n.GENERAL_GROUP_ID)},onContactChanged:function(t){var e=t.changed,i=l.has(e,"known"),s=l.has(e,"in_roster"),a=l.has(e,"groups");if(s||i||a){var o;t.get("in_roster")?(o=l.clone(t.get("groups")),o.length||o.push(n.GENERAL_GROUP_ID)):o=t.get("known")?[n.NON_ROSTER_GROUP_ID]:[];var r=this.groups.filter(function(t){return!l.contains(o,t.get("id"))});l.each(r,function(e){e.removeContact(t)}),l.each(o,l.bind(this.addContactToGroup,this,t)),t.trigger("update_groups")}},onContactRemoved:function(t){l.each(this.groups.filter(),function(e){e.removeContact(t)})},getGroup:function(e){var i=this.groups.get(e);if(i)return i;var s={id:e};return e===n.GENERAL_GROUP_ID?s.name=t.settings.roster.general_group_name:e===n.NON_ROSTER_GROUP_ID&&(s.name=t.settings.roster.non_roster_group_name),this.groups.create(s,{account:this.account})},addContactToGroup:function(t,e){this.getGroup(e).contacts.add(t)},registerHandler:function(){this.account.connection.deleteHandler(this._stanza_handler),this._stanza_handler=this.account.connection.addHandler(this.onRosterIQ.bind(this),c.NS.ROSTER,"iq","set",null,this.account.get("jid"))},getFromServer:function(){var t=o({type:"get"}).c("query",{xmlns:c.NS.ROSTER});this.account.sendIQ(t,function(t){this.onRosterIQ(t),this.account.sendPresence(),this.account.dfd_presence.resolve()}.bind(this))},onRosterIQ:function(t){return"set"===t.getAttribute("type")&&this.account.sendIQ(o({type:"result",id:t.getAttribute("id"),from:this.account.jid})),a(t).children("query").find("item").each(function(t,e){this.onRosterItem(e)}.bind(this)),!0},onRosterItem:function(t){var e=t.getAttribute("jid");if(e!==this.account.get("jid")){var n=this.contacts.mergeContact(e),i=t.getAttribute("subscription");if("remove"===i)return void n.set({in_roster:!1,known:!1,subscription:null});var s=[];a(t).find("group").each(function(){var t=a(this).text();s.indexOf(t)<0&&s.push(t)});var o={subscription:i,in_roster:!0,roster_name:t.getAttribute("name"),groups:s};o.roster_name&&(o.name=o.roster_name),n.set(o)}}}),t.AccountRosterView=t.BasicView.extend({className:"account-roster-wrap",events:{"click .roster-account-info-wrap .status-button":"openChangeStatus","click .roster-account-info":"toggle"},_initialize:function(t){this.account=t.account,this.groups=this.account.groups,this.roster=this.account.roster,this.contacts=this.account.contacts,this.$el.attr("data-jid",this.account.get("jid")),this.$el.appendTo(this.parent.$(".contact-list")),this.$info=this.$(".roster-account-info-wrap"),this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateColorScheme(),this.account.on("change:name",this.updateName,this),this.account.on("change:image",this.updateAvatar,this),this.account.on("change:status_updated",this.updateStatus,this),this.account.settings.on("change:color",this.updateColorScheme,this),this.groups.on("add",this.onGroupAdded,this),this.groups.on("rename",this.onGroupRenamed,this),this.groups.on("destroy",this.onGroupRemoved,this),this.data.on("change:expanded",this.updateExpanded,this),this.data.set("expanded",!0)},updateName:function(){this.$info.find(".name").text(this.account.get("name"))},updateStatus:function(){this.$info.find(".status").attr("data-status",this.account.get("status")),this.$info.find(".status-message").text(this.account.getStatusMessage())},updateAvatar:function(){var t=this.account.cached_image;this.$info.find(".circle-avatar").setAvatar(t,this.avatar_size)},updateColorScheme:function(){this.$el.attr("data-color",this.account.settings.get("color"))},updateExpanded:function(){var t=this.data.get("expanded");this.$el.switchClass("shrank",!t),this.parent.updateScrollBar()},updateGroupPosition:function(t){t.$el.detach();var e=this.groups.indexOf(t.model);0===e?this.$info.after(t.$el):this.$(".roster-group").eq(e-1).after(t.$el),this.parent.updateScrollBar()},onGroupAdded:function(t){var e=this.addChild(t.get("id"),this.group_view,{model:t});this.updateGroupPosition(e)},onGroupRenamed:function(t,e){var n=this.child(e);delete this.children[e],this.children[t.get("name")]=n,n&&this.updateGroupPosition(n)},onGroupRemoved:function(t){this.removeChild(t.get("id"))},toggle:function(t){this.data.set("expanded",!this.data.get("expanded"))},openChangeStatus:function(e){t.change_status_view.open(this.account)}}),t.AccountRosterRightView=t.AccountRosterView.extend({template:i.account_roster_right,group_view:t.GroupRightView,avatar_size:n.AVATAR_SIZES.ROSTER_RIGHT_ACCOUNT_ITEM,__initialize:function(){this.contacts.on("add_to_roster change_in_roster remove_from_roster",this.updateCounter,this),this.contacts.on("add_to_roster remove_from_roster",this.updateGlobalCounter,this)},
updateCounter:function(t){var e=this.roster.length,n=e-this.roster.where({status:"offline"}).length;this.$info.find(".counter").text(n+"/"+e)},updateGlobalCounter:function(t){this.parent.updateCounter()}}),t.AccountRosterLeftView=t.AccountRosterView.extend({template:i.account_roster_left,group_view:t.GroupLeftView,avatar_size:n.AVATAR_SIZES.ROSTER_LEFT_ACCOUNT_ITEM,__initialize:function(){this.$info.find(".jid").text(this.account.get("jid"))},search:function(t){this.$el.removeClass("shrank"),this.$(".group-head").addClass("hidden");var e=0,n={};this.$(".roster-contact").each(function(i,s){var o=a(s),r=o.data("jid"),c=this.roster.get(r);if(c){if(n[c.hash_id])return void o.addClass("hidden");n[c.hash_id]=!0;var l=c.get("name").toLowerCase(),d=l.indexOf(t)<0&&r.indexOf(t)<0;o.hideIf(d),d||e++}}.bind(this)),this.$(".roster-account-info-wrap").showIf(e)},searchAll:function(){this.$el.switchClass("shrank",!this.data.get("expanded")),this.$(".roster-account-info-wrap").removeClass("hidden"),this.$(".group-head").removeClass("hidden"),this.$(".list-item").removeClass("hidden")}}),t.BlockedItemView=t.BasicView.extend({className:"blocked-contact",template:i.contact_blocked_item,avatar_size:n.AVATAR_SIZES.CONTACT_BLOCKED_ITEM,events:{"click .btn-unblock":"unblockContact",click:"showDetails"},_initialize:function(t){this.$el.appendTo(this.parent.$(".blocked-contacts")),this.$el.attr({"data-jid":this.model.get("jid")}),this.$(".jid").text(this.model.get("jid")),this.$(".circle-avatar").setAvatar(this.model.cached_image,this.avatar_size)},unblockContact:function(t){t.stopPropagation(),this.model.unblock()},showDetails:function(t){this.model.showDetails()}}),t.BlockListView=t.BasicView.extend({_initialize:function(t){this.account=t.account,this.account.contacts.on("add_to_blocklist",this.onContactAdded,this),this.account.contacts.on("remove_from_blocklist",this.onContactRemoved,this)},onContactAdded:function(e){this.addChild(e.get("jid"),t.BlockedItemView,{model:e}),this.$(".placeholder").addClass("hidden"),this.parent.updateScrollBar()},onContactRemoved:function(t){this.removeChild(t.get("jid")),this.$(".placeholder").hideIf(this.account.blocklist.length),this.parent.updateScrollBar()}}),t.RosterView=t.SearchView.extend({ps_selector:".contact-list-wrap",_initialize:function(){this._settings=t._roster_settings,this.model.on("activate",this.updateOneRosterView,this),this.model.on("update_order",this.updateRosterViews,this),this.model.on("deactivate destroy",this.removeRosterView,this),this.on("before_hide",this.saveScrollBarOffset,this)},updateOneRosterView:function(t){var e=t.get("jid"),n=this.child(e);if(n)n.$el.detach();else{if(!t.isConnected())return;n=this.addChild(e,this.account_roster_view,{account:t})}var i=this.model.connected.indexOf(t);0===i?this.$(".contact-list").prepend(n.$el):this.$(".contact-list").children().eq(i-1).after(n.$el),this.updateScrollBar()},updateRosterViews:function(){l.each(this.children,function(t){t.detach()}),this.model.each(function(t){var e=t.get("jid"),n=this.child(e);n&&this.$(".contact-list").append(n.$el)}.bind(this)),this.updateScrollBar()},removeRosterView:function(t){this.removeChild(t.get("jid")),this.updateScrollBar()}}),t.RosterRightView=t.RosterView.extend({className:"roster-right-container container",template:i.roster_right,ps_settings:{theme:"roster-right"},account_roster_view:t.AccountRosterRightView,events:{"mouseover .collapsed-wrap":"expand","mouseleave .expanded-wrap":"collaps","click .btn-pin":"pinUnpin"},__initialize:function(){this.updateCounter(),this.model.on("activate deactivate destroy",this.updateCounter,this),this.data.on("change",this.updateLayout,this);var t=this._settings.get("pinned");this.data.set({expanded:t,pinned:t})},expand:function(){this.data.set("expanded",!0)},collaps:function(){this.data.get("pinned")||this.data.set("expanded",!1)},pinUnpin:function(){var t=!this.data.get("pinned");this._settings.save("pinned",t),this.data.set("pinned",t)},updateLayout:function(){var e=this.data.changed;(l.has(e,"expanded")||l.has(e,"pinned"))&&t.trigger("update_layout",{roster_state_changed:!0})},updateCounter:function(){this.$(".all-contacts-counter").text(l.reduce(this.children,function(t,e){return t+e.roster.length},0))},onListChanged:function(){this.updateScrollBar()}}),t.RosterLeftView=t.RosterView.extend({className:"roster-left-container container",template:i.roster_left,ps_settings:{theme:"item-list"},account_roster_view:t.AccountRosterLeftView,__initialize:function(){this.model.on("list_changed",this.updateLeftIndicator,this)},updateLeftIndicator:function(){this.$el.attr("data-indicator",this.model.connected.length>1)},getContactForItem:function(t){var e=a(t),n=e.parent().parent().data("jid"),i=e.data("jid"),s=this.child(n);return s&&s.roster.get(i)},render:function(t){"contact_details"!==t.right&&this.clearSearch()},search:function(t){l.each(this.children,function(e){e.search(t)})},searchAll:function(){l.each(this.children,function(t){t.searchAll()})},onEnterPressed:function(t){var e=this.getContactForItem(t);e&&e.showDetails()},onListChanged:function(){this.updateSearch()}}),t.RosterSettingsView=t.BasicView.extend({className:"roster-settings-wrap",template:i.roster_settings,events:{"change .offline-contacts input":"setOfflineSetting","change .sorting-contacts input":"setSortingSetting"},_initialize:function(){this.$el.appendTo(this.parent.$(".settings-block-wrap.contact-list"))},render:function(){this.$(".offline-contacts input[type=radio][name=offline-contacts][value="+this.model.get("show_offline")+"]").prop("checked",!0),this.$(".sorting-contacts input[type=radio][name=sorting-contacts][value="+this.model.get("sorting")+"]").prop("checked",!0)},setOfflineSetting:function(){this.model.save("show_offline",this.$(".offline-contacts input[type=radio][name=offline-contacts]:checked").val())},setSortingSetting:function(){this.model.save("sorting",this.$(".sorting-contacts input[type=radio][name=sorting-contacts]:checked").val())}}),t.AccountGroupView=t.BasicView.extend({className:"group",template:function(){this.$el.append('<span class="group-name"/>')},events:{"click .group-name":"showGroupSettings"},_initialize:function(t){this.$(".group-name").text(this.model.get("name"));var e=this.model.collection.indexOf(this.model),n=this.model.account.settings_right.$(".groups");0===e?n.prepend(this.$el):n.children().eq(e-1).after(this.$el),this.model.on("destroy",this.remove,this)},showGroupSettings:function(){this.model.showSettings()}}),t.ContactPlaceholderView=t.BasicView.extend({className:"placeholder-wrap contact-placeholder-wrap noselect",template:i.contact_placeholder}),t.AddContactView=t.BasicView.extend({className:"modal main-modal add-contact-modal",template:i.add_contact,ps_selector:".modal-content",avatar_size:n.AVATAR_SIZES.ACCOUNT_ITEM,events:{"click .account-field .dropdown-content":"selectAccount","click .existing-group-field label":"editGroup","change .new-group-name input":"checkNewGroup","keyup .new-group-name input":"checkNewGroup","click .new-group-checkbox":"addNewGroup","click .btn-add":"addContact","click .btn-cancel":"close"},_initialize:function(){this.group_data=new Backbone.Model,this.group_data.on("change",this.updateGroups,this)},render:function(e){if(!t.accounts.connected.length)return void s.dialogs.error("No connected accounts found.");e||(e={});var n=e.account?[e.account]:t.accounts.connected,i=e.jid||"";return this.$('input[name="username"]').val(i).attr("readonly",!!i).removeClass("invalid"),this.$(".single-acc").showIf(1===n.length),this.$(".multiple-acc").hideIf(1===n.length),this.$(".account-field .dropdown-content").empty(),l.each(n,function(t){this.$(".account-field .dropdown-content").append(this.renderAccountItem(t))}.bind(this)),this.bindAccount(n[0]),this.$("span.errors").text(""),this.$el.openModal({ready:function(){Materialize.updateTextFields(),this.$(".account-field .dropdown-button").dropdown({inDuration:100,outDuration:100,constrainWidth:!1,hover:!1,alignment:"left"})}.bind(this),complete:this.hide.bind(this)}),this},bindAccount:function(t){this.account=t,this.$(".account-field .dropdown-button .account-item-wrap").replaceWith(this.renderAccountItem(t)),this.renderGroupsForAccount(t)},renderAccountItem:function(t){var e=a(i.add_contact_account_item({jid:t.get("jid")}));return e.find(".circle-avatar").setAvatar(t.cached_image,this.avatar_size),e},renderGroupsForAccount:function(t){this.group_data.set({selected:[],groups:l.map(t.groups.notSpecial(),function(t){return t.get("name")})},{silent:!0}),this.updateGroups()},updateGroups:function(){var t=this.group_data.get("selected");this.$(".groups").html(i.groups_checkbox_list({groups:l.map(this.group_data.get("groups"),function(e){return{name:e,id:u(),checked:l.contains(t,e)}})})),this.updateScrollBar()},selectAccount:function(e){var n=a(e.target).closest(".account-item-wrap"),i=t.accounts.get(n.data("jid"));this.bindAccount(i)},editGroup:function(t){t.preventDefault();var e=a(t.target),n=e.siblings("input"),i=!n.prop("checked"),s=n.attr("data-groupname"),o=l.clone(this.group_data.get("selected")),r=o.indexOf(s);n.prop("checked",i),i?r<0&&o.push(s):r>=0&&o.splice(r,1),this.group_data.set("selected",o)},checkNewGroup:function(t){var e=a(t.target).val();this.$(".new-group-checkbox").showIf(e&&!l.contains(this.group_data.get("groups"),e))},addNewGroup:function(t){t.preventDefault();var e=this.$(".new-group-name input"),n=e.val(),i=l.clone(this.group_data.get("groups"));if(i.indexOf(n)<0){var s=l.clone(this.group_data.get("selected"));s.push(n),i.push(n),this.group_data.set({groups:i,selected:s})}this.scrollToBottom()},addContact:function(t){this.$("span.errors").text("").addClass("hidden");var e,n,i=this.$("input[name=username]").removeClass("invalid").val(),s=this.$("input[name=contact_name]").removeClass("invalid").val(),a=this.group_data.get("selected");i=c.getBareJidFromJid(i),i?i===this.account.get("jid")?n="Can not add yourself to contacts!":(e=this.account.contacts.mergeContact(i),e.get("in_roster")&&(n="Contact is already in your roster!")):n="Input username!",n?this.$("input[name=username]").addClass("invalid").siblings(".errors").text(n):(e.pres("subscribed"),e.pushInRoster({name:s,groups:a},function(){e.pres("subscribe"),e.trigger("open_chat",e)}.bind(this)),this.close())},onHide:function(){this.$el.detach()},close:function(){this.$el.closeModal({complete:this.hide.bind(this)})}}),t.GroupSettings=Backbone.Model.extend({idAttribute:"name",defaults:{expanded:!0,show_offline:"default",sorting:"default",custom_notifications:!1,notifications:!1,message_preview:!1}}),t.GroupsSettings=Backbone.CollectionWithStorage.extend({model:t.GroupSettings,_initialize:function(t,e){this.account=e.account,this.account.on("destroy",this.clearStorage,this),this.fetch()}}),t.RosterSettings=Backbone.ModelWithStorage.extend({defaults:{pinned:!0,show_offline:"yes",sorting:"online-first",general_group_name:"General",non_roster_group_name:"Not in roster"}}),t.Account.addInitPlugin(function(){this.groups_settings=new t.GroupsSettings(null,{account:this,storage_name:t.getStorageName()+"-groups-settings-"+this.get("jid")}),this.groups=new t.Groups(null,{account:this}),this.contacts=new t.Contacts(null,{account:this}),this.contacts.addCollection(this.roster=new t.Roster(null,{account:this})),this.contacts.addCollection(this.blocklist=new t.BlockList(null,{account:this})),this.settings_right.addChild("blocklist",t.BlockListView,{account:this,el:this.settings_right.$(".blocklist-info")[0]}),this._added_pres_handlers.push(this.contacts.handlePresence.bind(this.contacts)),this.on("ready_to_get_roster",function(){this.resources.reset(),this.contacts.each(function(t){t.resources.reset(),t.resetStatus()}),this.blocklist.getFromServer(),this.roster.getFromServer()},this)}),t.Account.addConnPlugin(function(){this.roster.registerHandler(),this.blocklist.registerHandler()},!0,!0),t.once("start",function(){this._roster_settings=new this.RosterSettings({id:"roster-settings"},{storage_name:this.getStorageName(),fetch:"after"}),this.settings.roster=this._roster_settings.attributes,this.roster_settings_view=t.settings_view.addChild("roster_settings",this.RosterSettingsView,{model:this._roster_settings}),this.contacts_view=this.left_panel.addChild("contacts",this.RosterLeftView,{model:this.accounts}),this.roster_view=this.body.addChild("roster",this.RosterRightView,{model:this.accounts}),this.details_container=this.right_panel.addChild("details",this.Container),this.contact_placeholder=this.right_panel.addChild("contact_placeholder",this.ContactPlaceholderView),this.add_contact_view=new this.AddContactView,this.on("add_contact",function(){this.add_contact_view.show()},this)},t),t}}),define("xabber-chats",[],function(){return function(t){var e=t.env,n=e.constants,i=e.templates.chats,s=e.utils,a=e.$,o=e.$iq,r=e.$msg,c=(e.$pres,e.Strophe),l=e._,d=e.moment,u=e.uuid,h=(s.images,s.emoji);return t.Message=Backbone.Model.extend({idAttribute:"msgid",defaults:function(){return{msgid:u(),type:"main",state:n.MSG_PENDING}},initialize:function(){var t=this.get("time"),e={};t?e.timestamp=Number(d(t)):(e.timestamp=d.now(),e.time=d(e.timestamp).format()),this.set(e)},getText:function(){var t=this.get("forwarded_message");return t?t.get("message"):this.get("message")},getState:function(){return n.MSG_STATE[this.get("state")]},getVerboseState:function(){var t=n.MSG_VERBOSE_STATE[this.get("state")];return this.collection.account.isOnline()||(t="Message will be sent when you get online."),t},isSenderMe:function(){return this.collection.account.get("jid")===this.get("from_jid")}}),t.Messages=Backbone.Collection.extend({model:t.Message,comparator:"timestamp",initialize:function(t,e){this.account=e.account},createFromStanza:function(t,e){e||(e={});var i=e.delay||t.find("delay"),s=l.escape(t.children("body").text()),a=t.find("markable").length>0,o=t.attr("id"),r=c.getBareJidFromJid(t.attr("from")),d=o&&this.get(o),u=this.parseURLFromStanza(t);if(d)return d;var h={xml:t[0],carbon_copied:e.carbon_copied&&!e.is_archived,markable:a,msgid:o,is_forwarded:e.is_forwarded,forwarded_message:e.forwarded_message||null,from_jid:r,archive_id:e.archive_id,is_archived:e.is_archived};if(!l.isUndefined(u)){var p=t.children("x").children("field"),f=p.children("media"),m=f.children("uri"),g=p.attr("label"),v=m.attr("type"),b=m.attr("size"),y=l.isUndefined(v)?v:this.getFileType(v);if("image"==y){var _=f.attr("height"),w=f.attr("width");image={url:u,height:_,width:w},h.image=image}var x={name:g,file_url:u,type:y,size:b};h.file_=x}return i.length&&(h.time=i.attr("stamp")),s&&(h.message=s),h.carbon_copied&&(h.state=n.MSG_SENT),e.is_archived&&(h.state=n.MSG_DISPLAYED),d=this.create(h)},parseURLFromStanza:function(t){if("media"==t.children("x").children("field").attr("var")){var e=t.children("x").children("field").children("media").children("uri").text().trim();return encodeURI(e)}},getFileType:function(t){return t.slice(0,t.indexOf("/"))},createSystemMessage:function(t){return this.create(l.extend({type:"system",silent:!0,state:n.MSG_DISPLAYED},t))}}),t.Chat=Backbone.Model.extend({defaults:{opened:!0,active:!1,display:!1,unread:0,timestamp:0},initialize:function(e,n){this.contact=n.contact,this.account=this.contact.account;var i=this.contact.get("jid");this.set({id:this.contact.hash_id,jid:i}),this.contact.set("muted",l.contains(this.account.chat_settings.get("muted"),i)),this.messages=new t.Messages(null,{account:this.account}),this.messages_unread=new t.Messages(null,{account:this.account}),this.item_view=new t.ChatItemView({model:this}),this.contact.on("destroy",this.destroy,this)},increaseUnread:function(){this.set("unread",this.get("unread")+1),t.toolbar_view.increaseMessageCounter()},decreaseUnread:function(){var e=this.get("unread");e>0&&(this.set("unread",e-1),t.decreaseMessageCounter(),t.toolbar_view.decreaseMessageCounter())},resetUnread:function(){var e=this.get("unread");e>0&&(this.set("unread",0),t.decreaseMessageCounter(e),t.toolbar_view.decreaseMessageCounter(e))},receiveMessage:function(e,n){var i=n.carbon_copied,s=e.children('[xmlns="'+c.NS.CHAT_MARKERS+'"]');if(s.length){var a=s[0].tagName.toLowerCase();if("markable"!==a)return void this.receiveMarker(e,a,i)}if(!e.find("body").length){var o=t.chats_view.child(this.contact.hash_id);return void(o&&o.content&&o.content.receiveNoTextMessage(e,i))}if(!n.is_archived){var r=e.find("archived");r.length&&(n.archive_id=r.attr("id"))}return this.messages.createFromStanza(e,n)},receiveMarker:function(t,e,i){var s=t.find("displayed");if("error"!==t.attr("type")&&s.length){var a=s.attr("id"),o=this.account.messages.get(a);o&&(o.isSenderMe()?o.set("state",n.MSG_DISPLAYED):o.set("is_unread",!1))}},onPresence:function(t){var e=this.get("jid");"subscribe_from"===t?this.messages.createSystemMessage({from_jid:this.account.get("jid"),silent:!1,message:"You sent an authorization request."}):"subscribe"===t?this.messages.createSystemMessage({from_jid:e,auth_request:!0,silent:!1,message:"User "+e+" wants to be in your contact list."}):"subscribed"===t?this.messages.createSystemMessage({from_jid:e,message:"User "+e+" authorized you."}):"unsubscribed"===t&&this.messages.createSystemMessage({from_jid:e,message:"User "+e+" cancelled your authorization."})},showAcceptedRequestMessage:function(){this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:"Authorization accepted."})},showDeclinedRequestMessage:function(){this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:"Authorization rejected."})},showBlockedRequestMessage:function(){this.messages.createSystemMessage({from_jid:this.account.get("jid"),message:"You have blocked user "+this.get("jid")})}}),t.ChatItemView=t.BasicView.extend({className:"chat-item list-item",template:i.chat_item,avatar_size:n.AVATAR_SIZES.CHAT_ITEM,events:{click:"openByClick"},_initialize:function(){this.account=this.model.account,this.contact=this.model.contact,this.$el.attr("data-id",this.model.id),this.content=new t.ChatContentView({chat_item:this}),this.updateName(),this.updateStatus(),this.updateCounter(),this.updateAvatar(),this.updateBlockedState(),this.updateMutedState(),this.updateColorScheme(),this.model.on("change:active",this.updateActiveStatus,this),this.model.on("change:unread",this.updateCounter,this),this.model.on("open",this.open,this),this.model.on("remove_opened_chat",this.onClosed,this),this.model.messages.on("destroy",this.onMessageRemoved,this),this.contact.on("change:name",this.updateName,this),this.contact.on("change:status",this.updateStatus,this),this.contact.on("change:image",this.updateAvatar,this),this.contact.on("change:blocked",this.updateBlockedState,this),this.contact.on("change:muted",this.updateMutedState,this),this.account.settings.on("change:color",this.updateColorScheme,this)},updateName:function(){this.$(".chat-title").text(this.contact.get("name"))},updateStatus:function(){var t=this.contact.get("status");this.$(".status").attr("data-status",t)},updateActiveStatus:function(){this.$el.switchClass("active",this.model.get("active"))},updateCounter:function(){var t=this.model.get("unread");this.$(".msg-counter").showIf(t).text(t||"")},updateAvatar:function(){var t=this.contact.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateBlockedState:function(){this.$el.switchClass("blocked",this.contact.get("blocked"))},updateMutedState:function(){this.$(".muted-icon").showIf(this.contact.get("muted")),this.updateCSS()},updateColorScheme:function(){var t=this.account.settings.get("color");this.$el.attr("data-color",t),this.content.$el.attr("data-color",t),this.content.head.$el.attr("data-color",t),this.content.bottom.$el.attr("data-color",t),this.$("#last-msg-file-color").css("color",t)},onMessageRemoved:function(t){if(this.model.last_message===t){for(var e,n=this.model.messages.length-1;n>=0&&(e=this.model.messages.at(n),e.get("silent"));n--);this.model.last_message=e,this.updateLastMessage()}},updateLastMessage:function(t){if(t||(t=this.model.last_message),t){var e,n=t.get("time"),i=t.get("timestamp"),a=t.get("forwarded_message"),o=a?t.get("forwarded_message").get("file_"):t.get("file_"),r=o?o.type?o.type[0].toUpperCase()+o.type.substr(1,o.type.length-1)+": ":"File: ":"",c=o?o.name:t.getText(),l=this.account.settings.get("color");this.model.set({timestamp:i}),o?(e=document.createElement("span"),e.id="last-msg-file-color",e.append(r),this.$(".last-msg").text("").append(e).append(c),this.$("#last-msg-file-color").css("color",l)):this.$(".last-msg").text("").append(c),this.$el.emojify(".last-msg",{emoji_size:14}),this.$(".last-msg-date").text(s.pretty_short_datetime(n)).attr("title",s.pretty_datetime(n)),this.$(".msg-delivering-state").showIf(t.isSenderMe()).attr("data-state",t.getState()),this.updateCSS()}},updateCSS:function(){var t=this.$(".last-msg-date").width();this.$(".chat-title-wrap").css("padding-right",t+5);var e=this.$(".chat-title-wrap").width();this.contact.get("muted")&&(e-=24),this.$(".chat-title").css("max-width",e)},openByClick:function(){this.open()},open:function(e){e||(e={}),t.chats_view.openChat(this,e)},onClosed:function(){this.parent.onChatRemoved(this.model,{soft:!0})}}),t.ChatContentView=t.BasicView.extend({className:"chat-content-wrap",template:i.chat_content,ps_selector:".chat-content",ps_settings:{wheelPropagation:!0},avatar_size:n.AVATAR_SIZES.CHAT_MESSAGE,events:{"mousedown .chat-message":"onTouchMessage","mouseup .chat-message":"onClickMessage","mouseup .mdi-link-variant":"onClickLink"},_initialize:function(e){this.chat_item=e.chat_item,this.account=this.chat_item.account,this.model=this.chat_item.model,this.contact=this.model.contact,this.head=new t.ChatHeadView({content:this}),this.bottom=new t.ChatBottomView({content:this}),this.$history_feedback=this.$(".load-history-feedback"),this.$el.attr("data-id",this.model.id),this._scrolltop=this.getScrollTop();var n=l.isUndefined(window.onwheel)?"wheel":"mousewheel";return this.$el.on(n,this.onMouseWheel.bind(this)),this.ps_container.on("ps-scroll-up ps-scroll-down",this.onScroll.bind(this)),this.model.on("change:active",this.onChangedActiveStatus,this),this.model.on("load_last_history",this.loadLastHistory,this),this.model.messages.on("add",this.onMessage,this),this.model.messages.on("change:state",this.onChangedMessageState,this),this.model.messages.on("change:is_unread",this.onChangedReadState,this),this.contact.on("change:blocked",this.updateBlockedState,this),this.contact.on("remove_from_blocklist",this.loadLastHistory,this),this.account.contacts.on("change:name",this.updateName,this),this.account.contacts.on("change:image",this.updateAvatar,this),this.account.on("change:name",this.updateMyName,this),this.account.on("change:status",this.updateMyStatus,this),this.account.on("change:image",this.updateMyAvatar,this),this.account.dfd_presence.done(function(){this.loadPreviousHistory()}.bind(this)),this},render:function(){this.scrollToBottom()},onChangedVisibility:function(){this.isVisible()?(this.model.set({display:!0,active:!0}),this.readMessages()):this.model.set({display:!1})},onChangedActiveStatus:function(){this.sendChatState(this.model.get("active")?"active":"inactive")},updateName:function(t){var e=t.get("name"),n=t.get("jid");t===this.contact?this.$('.chat-message.with-author[data-from="'+n+'"]').each(function(){a(this).find(".chat-msg-author").text(e)}):this.$('.fwd-message.with-author[data-from="'+n+'"]').each(function(){a(this).find(".fwd-msg-author").text(e)})},updateAvatar:function(t){var e=t.cached_image,n=t.get("jid");t===this.contact?this.$('.chat-message.with-author[data-from="'+n+'"]').each(function(){a(this).find(".left-side .circle-avatar").setAvatar(e,this.avatar_size)}):this.$('.fwd-message.with-author[data-from="'+n+'"]').each(function(){a(this).find(".fwd-left-side .circle-avatar").setAvatar(e,this.avatar_size)})},updateMyStatus:function(){var t;this.account.isOnline()||(t="You are offline"),this.bottom.showChatNotification(t||"",!0)},updateMyName:function(){var t=this.account.get("name"),e=this.account.get("jid");this.$('.chat-message.with-author[data-from="'+e+'"]').each(function(){a(this).find(".chat-msg-author").text(t)}),this.$('.fwd-message.with-author[data-from="'+e+'"]').each(function(){a(this).find(".fwd-msg-author").text(t)})},updateMyAvatar:function(){var t=this.account.cached_image,e=this.account.get("jid");this.$('.chat-message.with-author[data-from="'+e+'"]').each(function(){a(this).find(".left-side .circle-avatar").setAvatar(t,this.avatar_size)}),this.$('.fwd-message.with-author[data-from="'+e+'"]').each(function(){a(this).find(".fwd-left-side .circle-avatar").setAvatar(t,this.avatar_size)})},updateBlockedState:function(){var t;this.contact.get("blocked")&&(t="You have blocked this contact"),this.bottom.showChatNotification(t||"")},readMessages:function(t){l.each(l.clone(this.model.messages_unread.models),function(e){(!t||e.get("timestamp")<=t)&&e.set("is_unread",!1)}.bind(this))},onMouseWheel:function(t){t.originalEvent.deltaY<0&&this.loadPreviousHistory()},onScroll:function(){this._prev_scrolltop=this._scrolltop||0,this._scrolltop=this.getScrollTop(),this._scrolltop<this._prev_scrolltop&&(this._scrolltop<2e3||this.getPercentScrolled()<.3)&&this.loadPreviousHistory()},MAMRequest:function(e,n,i){var s=this.account,r=[],l=u(),d=o({type:"set"}).c("query",{xmlns:c.NS.MAM,queryid:l}).c("x",{xmlns:c.NS.XFORM,type:"submit"}).c("field",{var:"FORM_TYPE",type:"hidden"}).c("value").t(c.NS.MAM).up().up().c("field",{var:"with"}).c("value").t(this.model.get("jid")).up().up().up().cnode(new c.RSM(e).toXML()),h=new a.Deferred;s.chats.onStartedMAMRequest(h),h.done(function(){var e=s.connection.addHandler(function(t){return a(t).find("result").attr("queryid")===l&&r.push(t),!0},c.NS.MAM);s.sendIQ(d,function(t){s.connection.deleteHandler(e),s.chats.onCompletedMAMRequest(h);var i=a(t).find('fin[xmlns="'+c.NS.MAM+'"]');if(i.length&&i.attr("queryid")===l){var o=new c.RSM({xml:i.find("set")[0]});n&&n(r,o)}},function(n){s.connection.deleteHandler(e),t.error("MAM error"),t.error(n),s.chats.onCompletedMAMRequest(h),i&&i(n)})})},getMessageArchive:function(t,e){if(e.previous_history){if(this._loading_history||this.model.get("history_loaded"))return;this._loading_history=!0,this.showHistoryFeedback()}var n=this.model.account;this.MAMRequest(t,function(i,s){e.previous_history&&(this._loading_history=!1,this.hideHistoryFeedback(),i.length<t.max&&this.model.set("history_loaded",!0)),!e.previous_history&&this.model.get("first_archive_id")||s.first&&this.model.set("first_archive_id",s.first),!e.last_history&&this.model.get("last_archive_id")||s.last&&this.model.set("last_archive_id",s.last),l.each(i,function(t){n.chats.receiveChatMessage(t,l.extend({is_archived:!0},e))})}.bind(this),function(t){e.previous_history&&(this._loading_history=!1,this.showHistoryFeedback(!0))}.bind(this))},loadLastHistory:function(){if(t.settings.load_history){var e=this.model.get("last_archive_id"),n={};e?n.after=e:(n.before="",n.max=t.settings.mam_messages_limit),this.getMessageArchive(n,{last_history:!0})}},loadPreviousHistory:function(){t.settings.load_history&&this.getMessageArchive({max:t.settings.mam_messages_limit,before:this.model.get("first_archive_id")||""},{previous_history:!0})},showHistoryFeedback:function(t){this._load_history_feedback_timeout&&(clearTimeout(this._load_history_feedback_timeout),this._load_history_feedback_timeout=null);var e=t?"Error while loading archived messages":"Loading messages...";this.$history_feedback.text(e).removeClass("hidden"),t&&(this._load_history_feedback_timeout=setTimeout(this.hideHistoryFeedback.bind(this),5e3))},hideHistoryFeedback:function(){this.$history_feedback.addClass("hidden")},receiveNoTextMessage:function(t,e){var n=c.getBareJidFromJid(t.attr("from")),i=(c.getBareJidFromJid(t.attr("to")),n===this.account.get("jid")),s=t.find('[xmlns="'+c.NS.CHATSTATES+'"]');s.length&&(i||this.showChatState(s[0].tagName.toLowerCase()))},showChatState:function(t){clearTimeout(this._chatstate_show_timeout);var e,i=this.contact.get("name");if("composing"===t)e=i+" is typing...",this._chatstate_show_timeout=setTimeout(function(){this.showChatState("paused")}.bind(this),n.CHATSTATE_TIMEOUT_PAUSED);else{if("paused"!==t)return this.bottom.showChatNotification(""),void this.chat_item.updateLastMessage();e=i+" has stopped typing",this._chatstate_show_timeout=setTimeout(function(){this.showChatState()}.bind(this),n.CHATSTATE_TIMEOUT_STOPPED)}this.bottom.showChatNotification(e),this.chat_item.$(".last-msg").text(e),this.chat_item.$(".last-msg-date").text(s.pretty_short_datetime()).attr("title",s.pretty_datetime()),this.chat_item.$(".msg-delivering-state").addClass("hidden")},onMessage:function(e){this.account.messages.add(e),this.model.set("opened",!0),!e.get("is_archived")&&e.get("archive_id")&&this.model.set("last_archive_id",e.get("archive_id"));var n=this.isScrolledToBottom(),i=this.addMessage(e);if("file_upload"===e.get("type")&&this.startUploadFile(e,i),n||e.get("submitted_here")?this.scrollToBottom():this.updateScrollBar(),e.get("is_archived")||e.isSenderMe()||e.get("silent")||(e.set("is_unread",!(this.model.get("display")&&t.get("focused"))),t.get("focused")||(this.contact.get("muted")?e.set("muted",!0):this.notifyMessage(e))),e.isSenderMe()&&this.readMessages(e.get("timestamp")),!e.get("silent")){var s=this.model.last_message;(!s||e.get("timestamp")>s.get("timestamp"))&&(this.model.last_message=e,this.chat_item.updateLastMessage())}},addMessage:function(t){var e=this.buildMessageHtml(t),n=this.model.messages.indexOf(t);0===n?e.prependTo(this.$(".chat-content")):e.insertAfter(this.$(".chat-message").eq(n-1));var i=e.nextAll(".chat-message").first();return this.updateMessageInChat(e[0]),i.length&&this.updateMessageInChat(i[0]),e},removeMessage:function(e){var n,i;if(e instanceof t.Message)n=e,i=this.$('.chat-message[data-msgid="'+e.get("msgid")+'"]');else{if(i=e,!i.length)return;n=this.model.messages.get(i.data("msgid"))}n&&n.destroy(),i.prev(".chat-day-indicator").remove(),i.remove(),this._clearing_history||this.updateScrollBar()},clearHistory:function(){this._clearing_history=!0,l.each(l.clone(this.model.messages.models),this.removeMessage.bind(this)),this._clearing_history=!1,this.updateScrollBar()},getCountsOfDigits:function(t){return t=t.toString(),t.length},fileSizeNewFormat:function(t){var e=this.getCountsOfDigits(t);return e>9?(t=(t/1e9).toFixed(1),t=t.toString()+" GB"):e>6?(t=(t/1e6).toFixed(1),t=t.toString()+" MB"):e>3?(t=(t/1e3).toFixed(1),t=t.toString()+" KB"):e>0?t=t.toString()+" B":t},createFileContent:function(t){var e=document.createElement("a"),n=document.createElement("div"),i=t.name.bold();return e.href=t.file_url,e.classList.add("file-link-download"),e.append("\nDownload"),n.innerHTML=t.size?i+",  "+this.fileSizeNewFormat(t.size).fontcolor("#696969"):i,n.append(e),n},buildMessageHtml:function(t){var e=l.clone(t.attributes),n=t.isSenderMe(),o=n?this.account.get("name"):this.contact.get("name"),r=e.image,c=!l.isUndefined(r),d=!(!e.file_&&!e.file);if(l.extend(e,{username:o,state:t.getState(),verbose_state:t.getVerboseState(),time:s.pretty_datetime(e.time),short_time:s.pretty_time(e.time),is_image:c,is_file:d}),"file_upload"===e.type)return a(i.messages.file_upload(e));if("system"===e.type){var u=e.auth_request?"auth_request":"system";return a(i.messages[u](e))}var h=[e.forwarded_message&&"forwarding"],p=a(i.messages.main(l.extend(e,{is_sender:n,message:c||d?"":e.message,classlist:h.join(" ")})));if(d&&!c){var f=this.createFileContent(e.file_);p.find(".chat-msg-content").removeClass("chat-text-content").addClass("link-file").append(f)}if(c){var m=this.createImage(r),g=this.createImageContainer(r);p.find(".chat-msg-content").removeClass("chat-text-content").html(g),p.find(".img-content").html(m),this.updateScrollBar(),m.onload=function(){p.find(".img-content").css("border-color","white"),p.find(".img-content").css("background-image","none"),
$img=p.find(".mdi-link-variant"),$img.attr({"data-image":c})}}if(e.forwarded_message){n=e.forwarded_message.isSenderMe(),e=l.clone(e.forwarded_message.attributes);var v,b=!l.isUndefined(e.image),y=b?l.clone(e.image):void 0,_=!!e.file_;if(n)o=this.account.get("name");else{o=this.account.contacts.mergeContact(e.from_jid).get("name")}var w=a(i.messages.forwarded(l.extend(e,{time:s.pretty_datetime(e.time),short_time:s.pretty_short_datetime(e.time),username:o,message:b||_?"":e.message,is_file:_})));if(p.find(".msg-wrap .chat-msg-content").remove(),_&&!b){var x=this.createFileContent(e.file_);w.find(".chat-msg-content").removeClass("chat-text-content").addClass("link-file").append(x)}if(b){v=this.createImage(y);var S=this.createImageContainer(y);w.find(".chat-msg-content").removeClass("chat-text-content").html(S),w.find(".img-content").html(v)}p.find(".msg-wrap").append(w),this.updateScrollBar(),b&&(v.onload=function(){w.find(".img-content").css("border-color","white"),w.find(".img-content").css("background-image","none"),$el=p.find(".mdi-link-variant"),$el.attr({"data-image":"true"})})}return p.hyperlinkify({selector:".chat-text-content"}).emojify(".chat-text-content")},getDateIndicator:function(t){var e=d(t).startOf("day");return a('<div class="chat-day-indicator one-line noselect" data-time="'+e.format("x")+'">'+s.pretty_date(e)+"</div>")},hideMessageAuthor:function(t){t.removeClass("with-author")},showMessageAuthor:function(t){if(!t.hasClass("system")){t.addClass("with-author");var e,n=t.find(".left-side .circle-avatar");e=t.data("from")===this.account.get("jid")?this.account.cached_image:this.contact.cached_image,n.setAvatar(e,this.avatar_size)}},hideFwdMessageAuthor:function(t){t.find(".fwd-message").removeClass("with-author")},showFwdMessageAuthor:function(t){var e=t.find(".fwd-message");if(e.length){e.addClass("with-author");var n,i=e.find(".circle-avatar"),s=e.data("from"),a=s===this.account.get("jid"),o=this.account.contacts.get(s);a?n=this.account.cached_image:o&&(n=o.cached_image),i.setAvatar(n,this.avatar_size),i.removeClass("hidden")}},updateMessageInChat:function(t){var e=a(t);e.prev(".chat-day-indicator").remove();var n=e.prevAll(".chat-message").first();if(!n.length)return this.getDateIndicator(e.data("time")).insertBefore(e),this.showMessageAuthor(e),void this.showFwdMessageAuthor(e);var i=n.hasClass("system");if(is_same_sender=e.data("from")===n.data("from"),is_same_date=d(e.data("time")).startOf("day").isSame(d(n.data("time")).startOf("day")),is_same_date?i||!is_same_sender?this.showMessageAuthor(e):this.hideMessageAuthor(e):(this.getDateIndicator(e.data("time")).insertBefore(e),this.showMessageAuthor(e)),e.hasClass("forwarding")){var s=e.find(".fwd-message"),o=n.find(".fwd-message");if(e.switchClass("hide-date",is_same_date&&o.length),e.removeClass("hide-time"),o.length){var r=s.data("from")===o.data("from");e.switchClass("hide-time",r),is_same_sender&&r?this.hideFwdMessageAuthor(e):this.showFwdMessageAuthor(e)}else this.showMessageAuthor(e),this.showFwdMessageAuthor(e)}},notifyMessage:function(e){this.model.get("jid");if(t.settings.notifications){t.popupNotification({title:this.contact.get("name"),text:t.settings.message_preview?e.getText():"sent you a message",icon:this.contact.cached_image.url}).onclick=function(){window.focus(),this.model.trigger("open")}.bind(this)}if(t.settings.sound){var n;n=e.get("auth_request")?t.settings.sound_on_auth_request:t.settings.sound_on_message,t.playAudio(n)}t.increaseMessageCounter()},sendMessage:function(t){var e=l.unescape(t.get("message")),i=t.get("forwarded_message"),s=r({from:this.account.jid,to:this.model.get("jid"),type:"chat",id:t.get("msgid")}).c("body").t(e).up().c("markable").attrs({xmlns:c.NS.CHAT_MARKERS}).up();if(t.set({xml:s.tree()}),"file_upload"==t.get("type")){var a=t.get("file"),o=a.name,d=a.size,u=a.type,h=t.get("image"),p=t.get("file_").file_url;if(s.c("x",{xmlns:c.NS.XFORM,type:"form"}).c("field",{var:"media",label:o}),this.isImageType(u)){var f=h.height,m=h.width;s.c("media",{xmlns:c.NS.MEDIA,height:f,width:m})}else s.c("media",{xmlns:c.NS.MEDIA});s.c("uri",{type:u,size:d}).t(p).up().up().up().up(),t.set({type:"main"})}i&&s.c("forwarded",{xmlns:"urn:xmpp:forward:0"}).c("delay",{xmlns:"urn:xmpp:delay",stamp:i.get("time")}).up().cnode(i.get("xml")).up(),this.account.sendMsg(s,function(){t.set("state",n.MSG_SENT)})},isImageType:function(t){return-1!=t.indexOf("image")},sendMarker:function(t,e){e||(e="displayed");var n=r({from:this.account.jid,to:this.model.get("jid"),type:"chat",id:u()}).c(e).attrs({xmlns:c.NS.CHAT_MARKERS,id:t.get("msgid")}).up();this.account.sendMsg(n)},onSubmit:function(t,e){if(l.each(e,function(t){this.account.forwarded_messages.indexOf(t)<0&&(t=this.account.forwarded_messages.create(l.extend({is_forwarded:!0,forwarded_message:null},t.attributes)));var e=this.model.messages.create({from_jid:this.account.get("jid"),message:"> "+t.get("from_jid")+"\n> "+t.get("message"),submitted_here:!0,forwarded_message:t});this.sendMessage(e)}.bind(this)),t){var n=this.model.messages.create({from_jid:this.account.get("jid"),message:t,submitted_here:!0,forwarded_message:null});this.sendMessage(n)}},addFileMessage:function(t){var e=this.account.server_features.get(c.NS.HTTP_UPLOAD);e&&this.model.messages.create({from_jid:this.account.get("jid"),type:"file_upload",file:t,upload_service:e.get("from"),message:"Uploading file",submitted_here:!0})},startUploadFile:function(t,e){e.find(".cancel-upload").show(),e.find(".repeat-upload").hide(),e.find(".file-in-circle").hide(),e.find(".status").hide(),e.find(".progress").show();var n=t.get("file"),i=o({type:"get",to:t.get("upload_service")}).c("request",{xmlns:c.NS.HTTP_UPLOAD}).c("filename").t(n.name).up().c("size").t(n.size).up().c("content-type").t(n.type).up(),r=new a.Deferred,l=this;this.account.sendIQ(i,function(t){var e=a(t).find('slot[xmlns="'+c.NS.HTTP_UPLOAD+'"]');r.resolve({get_url:e.find("get").text(),put_url:e.find("put").text()})},function(n){var i=a(n).find("error text").text();l.onFileNotUploaded(t,e,i)}),r.done(function(i){var a=new XMLHttpRequest,o=e.find(".progress");e.find(".cancel-upload").click(function(t){a.abort()}.bind(this)),a.onabort=function(t){this.removeMessage(e)}.bind(this),a.upload.onprogress=function(t){var n=t.loaded/t.total;o.find(".determinate").attr("style","width: "+100*n+"%"),e.find(".filesize").text(s.pretty_size(t.loaded)+" of "+s.pretty_size(t.total))},a.onload=a.onerror=function(){201===this.status&&this.responseURL===i.get_url?l.onFileUploaded(t,e,i):l.onFileNotUploaded(t,e,this.responseText)},e.data("cancel")?a.onabort():(a.open("PUT",i.put_url,!0),a.send(n))}.bind(this))},onFileUploaded:function(t,e,n){t.set({message:n.get_url});var i=t.get("file"),s=i.type,a=this,o=i.size,r=this.isImageType(s),c={name:i.name,file_url:n.get_url,type:this.model.messages.getFileType(s),size:o};if(t.set({file_:c}),r){var l=new FileReader;l.readAsDataURL(i),l.onload=function(i){var s=new Image;s.src=i.target.result,s.onload=function(){var i=this.height,s=this.width,o={height:i,width:s,url:n.get_url},r=a.createImage(o),c=a.createImageContainer(o);t.set({image:o}),a.sendMessage(t),e.removeClass("file-upload noselect"),e.find(".chat-msg-content").removeClass("chat-file-content").html(c),e.find(".img-content").html(r),a.scrollToBottom(),r.onload=function(){e.find(".img-content").css("border-color","white"),e.find(".img-content").css("background-image","none"),$elem=e.find(".mdi-link-variant"),$elem.attr({"data-image":"true"})}}}}else{var d=this.createFileContent(c);$iconFile=e.find(".file-in-circle"),$iconFile.show(),e.removeClass("file-upload noselect"),e.find(".chat-msg-content").removeClass("chat-file-content").addClass("link-file").html($iconFile).append(d),e.hyperlinkify({selector:".chat-text-content"}),this.sendMessage(t)}},createImage:function(t){var e=new Image;return e.height=t.height,e.width=t.width,e.src=t.url,a(e).addClass("uploaded-img"),e.height&&e.width&&(e.width>300&&(e.height=e.height*(300/e.width),e.width=300),e.height>256&&(e.width=e.width*(256/e.height),e.height=256)),e},createImageContainer:function(t){var e=document.createElement("div");return a(e).addClass("img-content"),e},onFileNotUploaded:function(t,e,n){var i=n?"Error: "+n:"File uploading error";e.find(".cancel-upload").hide(),e.find(".repeat-upload").show(),e.find(".status").text(i).show(),e.find(".progress").hide(),e.find(".repeat-upload").click(function(){this.startUploadFile(t,e)}.bind(this))},sendChatState:function(t){clearTimeout(this._chatstate_send_timeout),this.account.sendMsg(r({to:this.model.get("jid"),type:"chat"}).c(t,{xmlns:c.NS.CHATSTATES})),"composing"===t&&(this._chatstate_send_timeout=setTimeout(function(){this.sendChatState("paused")}.bind(this),n.CHATSTATE_TIMEOUT_PAUSED))},onChangedMessageState:function(t){this.$('.chat-message[data-msgid="'+t.get("msgid")+'"]').find(".msg-delivering-state").attr({"data-state":t.getState(),title:t.getVerboseState()}),t===this.model.last_message&&this.chat_item.updateLastMessage()},onChangedReadState:function(e){e.get("is_unread")?(this.model.messages_unread.add(e),this.model.increaseUnread()):(this.model.messages_unread.remove(e),this.model.decreaseUnread(),e.get("markable")&&this.sendMarker(e,"displayed"),e.get("muted")||t.decreaseMessageCounter())},onTouchMessage:function(t){if(3!==t.which){var e,n=a(t.target),i=n.parents(".fwd-message").first();i.length;e=n.hasClass("chat-message")?n:n.parents(".chat-message"),0!=window.getSelection()&&(s.clearSelection(),e.attr("data-no-select-on-mouseup","1"))}},onClickLink:function(t){var e=a(t.target),n=e.closest(".chat-message"),i=this.model.messages.get(n.data("msgid")),s=i.get("file_")||i.get("forwarded_message").get("file_"),o=decodeURI(s.file_url);this.copyTextToClipboard(o)},fallbackCopyTextToClipboard:function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy");this.successMessage("Link copied to clipboard")}catch(t){console.error("Fallback: Unable to copy",t)}document.body.removeChild(e)},copyTextToClipboard:function(t){if(!navigator.clipboard)return void this.fallbackCopyTextToClipboard(t);var e,n=this;navigator.clipboard.writeText(t).then(function(){e="Link copied to clipboard",n.successMessage(e)},function(t){e="ERROR: Link not copied to clipboard",n.successMessage(e),console.error(e,t)})},successMessage:function(t){var e=document.createElement("div"),n=document.createTextNode(t);e.appendChild(n),e.classList.add("link_copied_message"),document.body.appendChild(e),setTimeout(function(){document.body.removeChild(e)},1500)},onClickMessage:function(e){var n=a(e.target);if(!n.hasClass("mdi-link-variant")&&!n.hasClass("file-link-download")){var i,s=n.closest(".chat-message"),o=n.parents(".fwd-message").first(),r=o.length>0,c=s.attr("data-no-select-on-mouseup");if(s.attr("data-no-select-on-mouseup",""),0!=window.getSelection())return;if(n.hasClass("chat-msg-author")||n.hasClass("fwd-msg-author")||n.parent().hasClass("circle-avatar")){var l=r?o.data("from"):s.data("from");if(l===this.account.get("jid"))this.account.showSettings();else if(l===this.model.get("jid"))this.contact.showDetails("chats");else{var d=this.account.contacts.mergeContact(l);d.showDetails()}return}if(n.hasClass("msg-hyperlink"))return;if(n.hasClass("uploaded-img"))return void t.openWindow(n.attr("src"));if(!(i=this.model.messages.get(s.data("msgid"))))return;var u=i.get("type");if("file_upload"===u)return;var h=function(){c||(s.switchClass("selected",!s.hasClass("selected")),this.bottom.manageSelectedMessages())}.bind(this);if("system"===u){if(!i.get("auth_request"))return;n.hasClass("accept-request")?this.contact.acceptRequest(function(){this.removeMessage(s),this.contact.showDetails("chats")}.bind(this)):n.hasClass("block-request")?this.contact.blockRequest(function(){this.model.showBlockedRequestMessage()}.bind(this)):n.hasClass("decline-request")&&this.contact.declineRequest(function(){this.removeMessage(s),this.model.showDeclinedRequestMessage()}.bind(this))}else if(r){var p=this.account.forwarded_messages.get(o.data("msgid"));if(!p)return;h()}else h()}}}),t.ChatsBase=Backbone.Collection.extend({model:t.Chat}),t.Chats=t.ChatsBase.extend({initialize:function(t,e){this.collections=[],this.on("add",l.bind(this.updateInCollections,this,"add")),this.on("change",l.bind(this.updateInCollections,this,"change"))},addCollection:function(t){this.collections.push(t)},updateInCollections:function(t,e){l.each(this.collections,function(n){n.update(e,t)})}}),t.OpenedChats=t.ChatsBase.extend({comparator:function(t,e){var n=t.get("timestamp"),i=e.get("timestamp");return n>i?-1:n<i?1:0},initialize:function(t,e){this.on("change:timestamp",this.sort,this)},update:function(t,e){t.get("opened")?this.get(t)||(this.add(t),t.trigger("add_opened_chat",t)):this.get(t)&&(this.remove(t),t.trigger("remove_opened_chat",t))}}),t.ClosedChats=t.ChatsBase.extend({update:function(t,e){t.get("opened")?this.get(t)&&(this.remove(t),t.trigger("remove_closed_chat",t)):this.get(t)||(this.add(t),t.trigger("add_closed_chat",t))}}),t.AccountChats=t.ChatsBase.extend({initialize:function(t,e){this.account=e.account,this.mam_requests=0,this.deferred_mam_requests=[],this.account.contacts.on("add_to_roster",this.getChat,this),this.account.contacts.on("open_chat",this.openChat,this),this.account.contacts.on("presence",this.onPresence,this)},getChat:function(e){var n=this.get(e.hash_id);return n||(n=t.chats.create(null,{contact:e}),this.add(n),e.set("known",!0)),n},openChat:function(t){this.getChat(t).trigger("open",{clear_search:!0})},registerMessageHandler:function(){this.account.connection.deleteHandler(this._msg_handler),this._msg_handler=this.account.connection.addHandler(function(t){return this.receiveMessage(t),!0}.bind(this),null,"message")},onStartedMAMRequest:function(t){this.deferred_mam_requests.push(t),this.runMAMRequests()},onCompletedMAMRequest:function(t){this.mam_requests--,this.runMAMRequests()},runMAMRequests:function(){for(;this.mam_requests<t.settings.mam_requests_limit;){var e=this.deferred_mam_requests.shift();if(!e)break;this.mam_requests++,e.resolve()}},receiveMessage:function(t){var e=t.getAttribute("type");return"chat"===e?this.receiveChatMessage(t):"error"===e?this.receiveErrorMessage(t):void 0},receiveChatMessage:function(e,n){n=n||{};var i=a(e),s=i.find("forwarded"),o=n.delay,r=i.attr("to"),d=c.getBareJidFromJid(r),u=c.getResourceFromJid(r),h=i.attr("from");if(!h)return t.warn('Message without "from" attribute'),void t.warn(e);var p=c.getBareJidFromJid(h),f=(c.getResourceFromJid(h),p===this.account.get("jid"));if(n.forwarded)return this.account.forwarded_messages.createFromStanza(i,{is_forwarded:!0,delay:o});if(s.length){var m=i.find('result[xmlns="'+c.NS.MAM+'"]');if(m.length)return s=m.children("forwarded"),s.length&&(i=s.children("message"),o=s.children("delay")),this.receiveChatMessage(i[0],l.extend(n,{is_mam:!0,delay:o,archive_id:m.attr("id")}));var g=i.find('[xmlns="'+c.NS.CARBONS+'"]');if(g.length){if(!f)return;return s=g.children("forwarded"),s.length&&(i=s.children("message")),this.receiveChatMessage(i[0],l.extend(n,{carbon_copied:!0}))}var v=s.children("message"),b=s.children("delay");s.remove();var y=this.receiveChatMessage(v[0],{forwarded:!0,delay:b});return this.receiveChatMessage(i[0],l.extend({forwarded_message:y},n))}!n.is_mam&&u&&u!==this.account.resource&&(t.warn("Message to another resource"),t.warn(e));var _=f?d:p;if(_===this.account.get("jid"))return t.warn("Message from me to me"),void t.warn(e);var w=this.account.contacts.mergeContact(_);return this.account.chats.getChat(w).receiveMessage(i,l.extend(n,{is_sender:f}))},receiveErrorMessage:function(t){var e=t.getAttribute("id");if(e){var i=a(t).find("error").attr("code"),s=this.account.messages.get(e);s&&"406"===i&&s.set("state",n.MSG_ERROR)}},onPresence:function(t,e){this.getChat(t).onPresence(e)}}),t.ChatsView=t.SearchView.extend({className:"recent-chats-container container",ps_selector:".chat-list-wrap",ps_settings:{theme:"item-list"},template:i.chats_panel,_initialize:function(){this.active_chat=null,this.model.on("add",this.onChatAdded,this),this.model.on("destroy",this.onChatRemoved,this),this.model.on("change:active",this.onChangedActiveStatus,this),this.model.on("change:timestamp",this.updateChatPosition,this),t.accounts.on("list_changed",this.updateLeftIndicator,this)},render:function(t){"chat"!==t.right&&this.clearSearch()},updateLeftIndicator:function(t){this.$el.attr("data-indicator",t.connected.length>1)},onChatAdded:function(t){this.addChild(t.id,t.item_view),this.updateChatPosition(t)},onChatRemoved:function(e,n){this.active_chat===this.child(e.id)&&(this.active_chat=null,t.body.setScreen(null,{chat_item:null},{silent:!t.body.isScreen("chats")})),this.removeChild(e.id,n),this.updateScrollBar()},onChangedActiveStatus:function(t){if(t.get("active")){var e=this.active_chat;this.active_chat=this.child(t.id),e&&e.model.set("active",!1)}},updateChatPosition:function(t){var e=this.child(t.id);if(e&&t.get("timestamp")){e.$el.detach();var n=this.model.indexOf(t);0===n?this.$(".chat-list").prepend(e.$el):this.$(".chat-item").eq(n-1).after(e.$el),this.updateScrollBar()}},search:function(t){var e=this.model;this.$(".chat-item").each(function(){var n=a(this),i=e.get(n.data("id"));if(i){var s=i.get("jid"),o=i.contact.get("name").toLowerCase();n.hideIf(o.indexOf(t)<0&&s.indexOf(t)<0)}})},onEnterPressed:function(t){var e=this.child(t.data("id"));e&&e.open()},openChat:function(e,n){n.clear_search&&this.clearSearch(),t.body.setScreen("chats",{right:"chat",chat_item:e})}}),t.ForwardPanelView=t.SearchView.extend({className:"modal forward-panel-modal",template:i.forward_panel,events:{"keyup .search-input":"keyUpOnSearch","focusout .search-input":"clearSearchSelection","click .close-search-icon":"clearSearch","click .chat-item":"clickOnItem","click .close-button":"close"},open:function(e){this.messages=e,this.$(".chat-list").html(t.chats_view.$(".chat-list").html()),this.$(".chat-item").removeClass("active"),this.clearSearch(),this.data.set("visible",!0),this.$el.openModal({ready:function(){this.updateScrollBar(),this.$(".search-input").focus()}.bind(this),complete:function(){this.$el.detach(),this.data.set("visible",!1)}.bind(this)})},close:function(){var t=new a.Deferred;return this.$el.closeModal({complete:function(){this.$el.detach(),this.data.set("visible",!1),t.resolve()}.bind(this)}),t.promise()},clickOnItem:function(e){var n=a(e.target).closest(".chat-item"),i=t.chats_view.child(n.data("id"));i&&this.forwardTo(i)},search:function(){t.chats_view.search.apply(this,arguments)},onEnterPressed:function(e){var n=t.chats_view.child(e.data("id"));n&&this.forwardTo(n)},forwardTo:function(t){t.content.bottom.setForwardedMessages(this.messages),this.messages=[],this.close().done(function(){t.open({clear_search:!0})})}}),t.ChatHeadView=t.BasicView.extend({className:"chat-head-wrap",template:i.chat_head,avatar_size:n.AVATAR_SIZES.CHAT_HEAD,events:{"click .contact-name":"showContactDetails","click .circle-avatar":"showContactDetails","click .btn-notifications":"changeNotifications","click .btn-contact-details":"showContactDetails","click .btn-clear-history":"clearHistory","click .btn-block-contact":"blockContact","click .btn-unblock-contact":"unblockContact","click .btn-close-chat":"closeChat"},_initialize:function(t){this.content=t.content,this.contact=this.content.contact,this.model=this.content.model,this.account=this.model.account,this.updateName(),this.updateStatus(),this.updateAvatar(),this.updateMenu(),this.updateNotifications(),this.contact.on("change:name",this.updateName,this),this.contact.on("change:status_updated",this.updateStatus,this),this.contact.on("change:image",this.updateAvatar,this),this.contact.on("change:blocked",this.updateMenu,this),this.contact.on("change:muted",this.updateNotifications,this)},render:function(t){return this.$(".tooltipped").tooltip("remove"),this.$(".tooltipped").tooltip({delay:50}),this.$(".btn-more").dropdown({inDuration:100,outDuration:100,hover:!1}),this.$(".chat-head-menu").hide(),this},updateName:function(){this.$(".contact-name").text(this.contact.get("name"))},updateStatus:function(){var t=this.contact.get("status"),e=this.contact.getStatusMessage();this.$(".contact-status").attr("data-status",t),this.$(".contact-status-message").text(e)},updateAvatar:function(){var t=this.contact.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},updateMenu:function(){var t=this.contact.get("blocked");this.$(".btn-block-contact").hideIf(t),this.$(".btn-unblock-contact").showIf(t)},showContactDetails:function(){this.contact.showDetails("chats")},updateNotifications:function(){var t=this.contact.get("muted");this.$(".btn-notifications .muted").showIf(t),this.$(".btn-notifications .no-muted").hideIf(t)},changeNotifications:function(){var t=!this.contact.get("muted");this.contact.set("muted",t),this.account.chat_settings.updateMutedList(this.contact.get("jid"),t)},clearHistory:function(){this.content.clearHistory(),t.chats_view.clearSearch()},blockContact:function(){this.contact.block(),t.chats_view.clearSearch()},unblockContact:function(){this.contact.unblock(),t.chats_view.clearSearch()},closeChat:function(){this.model.set("opened",!1),t.chats_view.clearSearch()}}),t.ChatBottomView=t.BasicView.extend({className:"chat-bottom-wrap",template:i.chat_bottom,avatar_size:n.AVATAR_SIZES.CHAT_BOTTOM,events:{"click .my-avatar":"showAccountSettings","keyup .input-message .rich-textarea":"keyUp","keydown .input-message .rich-textarea":"keyDown","change .attach-file input":"onFileInputChanged","click .close-forward":"unsetForwardedMessages","click .send-message":"submit","click .reply-message":"replyMessage","click .forward-message":"forwardMessages","click .close-message-panel":"resetSelectedMessages"},_initialize:function(e){this.view=e.content,this.model=this.view.model,this.contact=this.view.contact,this.account=this.view.account,this.fwd_messages=[],this.$(".account-jid").text(this.account.get("jid")),this.updateAvatar(),this.account.on("change:image",this.updateAvatar,this);var n=this.$(".input-message .rich-textarea"),i=n[0],s=n.parent(".rich-textarea-wrap"),o=n.siblings(".placeholder");i.onpaste=this.onPaste.bind(this),i.ondragenter=function(t){t.preventDefault(),o.text("Drop files here to send"),s.addClass("file-drop")},i.ondragover=function(t){t.preventDefault()},i.ondragleave=function(t){t.preventDefault(),o.text("Write a message..."),s.removeClass("file-drop")},i.ondrop=function(t){t.preventDefault(),t.stopPropagation(),o.text("Write a message..."),s.removeClass("file-drop");for(var e=t.dataTransfer.files||[],n=0;n<e.length;n++)this.view.addFileMessage(e[n])}.bind(this);var r,c=this.$(".insert-emoticon"),d=this.$(".emoticons-panel-wrap"),u=this.$(".emoticons-panel");l.each(h.all,function(t){a('<div class="emoji-wrap"/>').html(t.emojify({tag_name:"div",emoji_size:25})).appendTo(u)}),u.perfectScrollbar(l.extend({theme:"item-list"},t.ps_settings)),c.hover(function(t){t&&t.preventDefault&&t.preventDefault(),d.addClass("opened"),r&&clearTimeout(r),u.perfectScrollbar("update")}.bind(this),function(t){t&&t.preventDefault&&t.preventDefault(),r&&clearTimeout(r),r=setTimeout(function(){d.is(":hover")||d.removeClass("opened")},800)}.bind(this)),d.hover(null,function(t){t&&t.preventDefault&&t.preventDefault(),r&&clearTimeout(r),r=setTimeout(function(){d.removeClass("opened")},200)}.bind(this)),d.mousedown(function(t){if(t&&t.preventDefault&&t.preventDefault(),!t.button){var e=a(t.target).closest(".emoji-wrap").find(".emoji");e.length&&this.typeEmoticon(e.data("emoji"))}}.bind(this)),this.renderLastEmoticons()},render:function(e){var n=this.account.server_features.get(c.NS.HTTP_UPLOAD);return this.$(".attach-file").showIf(n),this.focusOnInput(),t.chat_body.updateHeight(),this},updateAvatar:function(){var t=this.account.cached_image;this.$(".circle-avatar").setAvatar(t,this.avatar_size)},showAccountSettings:function(){this.account.showSettings()},focusOnInput:function(){return this.$(".input-message .rich-textarea").placeCaretAtEnd(),this},keyDown:function(e){if(e.stopPropagation(),e.keyCode!==n.KEY_ESCAPE&&e.keyCode!==n.KEY_BACKSPACE&&e.keyCode!==n.KEY_DELETE){if(e.keyCode===n.KEY_ENTER||10===e.keyCode){var i="enter"===t.settings.hotkeys;if(i&&e.keyCode===n.KEY_ENTER&&!e.shiftKey||!i&&e.ctrlKey)return e.preventDefault(),void this.submit()}this.view.sendChatState("composing")}},keyUp:function(e){var i=a(e.target);if(e.keyCode===n.KEY_ESCAPE)e.preventDefault(),i.flushRichTextarea(),this.unsetForwardedMessages(),this.view.sendChatState("active");else if(e.keyCode===n.KEY_BACKSPACE||e.keyCode===n.KEY_DELETE){var s=i.getTextFromRichTextarea();s||(i.flushRichTextarea(),this.view.sendChatState("active"))}i.updateRichTextarea().focus(),t.chat_body.updateHeight()},onPaste:function(e){e.preventDefault();var n=a(e.target),i=e.clipboardData;if(i){var s=l.escape(i.getData("text"));window.document.execCommand("insertHTML",!1,s)}this.view.sendChatState("composing"),n.updateRichTextarea().focus(),t.chat_body.updateHeight()},onFileInputChanged:function(t){var e=t.target,n=e.files;if(n){var i=n[0];this.view.addFileMessage(i),a(e).val("")}},typeEmoticon:function(e){var n=e.emojify({tag_name:"img"}),i=this.$(".input-message .rich-textarea");i.focus(),window.document.execCommand("insertHTML",!1,n),this.view.sendChatState("composing"),i.updateRichTextarea().focus(),t.chat_body.updateHeight()},renderLastEmoticons:function(){for(var t,e=this.$(".last-emoticons").empty(),n=0;n<7;n++)t=h.getByIndex(n),a('<div class="emoji-wrap"/>').html(t.emojify({tag_name:"div",emoji_size:20})).appendTo(e);e.find(".emoji-wrap").mousedown(function(t){if(t&&t.preventDefault&&t.preventDefault(),!t.button){var e=a(t.target).closest(".emoji-wrap").find(".emoji");this.typeEmoticon(e.data("emoji"))}}.bind(this))},submit:function(){var e=this.$(".input-message .rich-textarea"),n=l.escape(e.getTextFromRichTextarea().trim());e.flushRichTextarea().focus(),(n||this.fwd_messages.length)&&this.view.onSubmit(n,this.fwd_messages),this.unsetForwardedMessages(),this.view.sendChatState("active"),t.chats_view.clearSearch()},setForwardedMessages:function(e){if(this.fwd_messages=e||[],this.$(".fwd-messages-preview").showIf(e.length),e.length){var n,i,s,a,o=e[0];if(e.length>1)i=e.length+" forwarded messages";else{i=o.get("message").emojify();var r=o.get("image"),c=!!o.get("file_");l.isUndefined(s)?c&&(i=o.get("file_").name):(s=l.clone(r),a=this.createPreviewImage(s))}var d=o.get("from_jid");n=o.isSenderMe()?this.account.get("name"):this.account.contacts.get(d).get("name"),this.$(".fwd-messages-preview .msg-author").text(n),l.isUndefined(s)?this.$(".fwd-messages-preview .msg-text").html(i):this.$(".fwd-messages-preview .msg-text").html(a)}t.chat_body.updateHeight()},createPreviewImage:function(t){var e=new Image;return e.src=t.url,a(e).addClass("fwd-img-preview"),e},unsetForwardedMessages:function(e){e&&e.preventDefault&&e.preventDefault(),this.fwd_messages=[],this.$(".fwd-messages-preview").addClass("hidden"),t.chat_body.updateHeight(),this.focusOnInput()},resetSelectedMessages:function(){this.view.$(".chat-message.selected").removeClass("selected"),this.manageSelectedMessages()},manageSelectedMessages:function(){var t=this.view.$(".chat-message.selected"),e=this.$(".message-input-panel"),n=this.$(".message-actions-panel");length=t.length,e.hideIf(length),n.showIf(length),length?(n.find(".reply-message").showIf(1===length),n.find(".forward-message .counter").text(length)):this.focusOnInput()},replyMessage:function(t){var e=this.view.$(".chat-message.selected").first(),n=this.model.messages.get(e.data("msgid"));this.resetSelectedMessages(),this.setForwardedMessages([n.get("forwarded_message")||n])},forwardMessages:function(e){var n=this.view.$(".chat-message.selected"),i=[];n.each(function(t,e){var n=this.model.messages.get(e.dataset.msgid);n&&i.push(n.get("forwarded_message")||n)}.bind(this)),this.resetSelectedMessages(),t.forward_panel.open(i)},showChatNotification:function(t,e){this.$(".chat-notification").text(t).switchClass("text-color-300",e)}}),t.ChatHeadContainer=t.Container.extend({className:"chat-head-container panel-head noselect"}),t.ChatBodyContainer=t.Container.extend({className:"chat-body-container",updateHeight:function(){var e=t.chat_bottom.$el.height();e&&(this.$el.css({bottom:e}),this.view&&this.view.updateScrollBar())}}),t.ChatBottomContainer=t.Container.extend({className:"chat-bottom-container"}),t.ChatPlaceholderView=t.BasicView.extend({className:"placeholder-wrap chat-placeholder-wrap noselect",template:i.chat_placeholder}),t.GroupChatPlaceholderView=t.BasicView.extend({className:"placeholder-wrap group-chat-placeholder-wrap noselect",template:i.group_chat_placeholder}),t.ChatSettings=Backbone.ModelWithStorage.extend({defaults:{muted:[]},updateMutedList:function(t,e){var n=l.clone(this.get("muted")),i=n.indexOf(t);e&&i<0&&n.push(t),!e&&i>=0&&n.splice(i,1),this.save("muted",n)}}),t.Account.addInitPlugin(function(){this.chat_settings=new t.ChatSettings({id:"chat-settings"},{account:this,storage_name:t.getStorageName()+"-chat-settings-"+this.get("jid"),fetch:"after"}),this.messages=new t.Messages(null,{account:this}),this.forwarded_messages=new t.Messages(null,{account:this}),this.chats=new t.AccountChats(null,{account:this})}),t.Account.addConnPlugin(function(){this.chats.registerMessageHandler(),this.chats.each(function(t){t.trigger("load_last_history")}),this.trigger("ready_to_get_roster")},!0,!0),t.once("start",function(){this.chats=new this.Chats,this.chats.addCollection(this.opened_chats=new this.OpenedChats),this.chats.addCollection(this.closed_chats=new this.ClosedChats),this.chats_view=this.left_panel.addChild("chats",this.ChatsView,{model:this.opened_chats}),this.chat_head=this.right_panel.addChild("chat_head",this.ChatHeadContainer),this.chat_body=this.right_panel.addChild("chat_body",this.ChatBodyContainer),this.chat_bottom=this.right_panel.addChild("chat_bottom",this.ChatBottomContainer),this.chat_placeholder=this.right_panel.addChild("chat_placeholder",this.ChatPlaceholderView),this.group_chat_placeholder=this.wide_panel.addChild("group_chat_placeholder",this.GroupChatPlaceholderView),this.forward_panel=new this.ForwardPanelView({model:this.opened_chats}),this.on("change:focused",function(){if(this.get("focused")){var t=this.chats_view.active_chat;t&&t.model.get("display")&&(t.content.readMessages(),t.content.bottom.focusOnInput())}},this),this.on("clear_search",function(){this.contacts_view.clearSearch(),this.chats_view.clearSearch()},this)},t),t}}),define("xabber-ui",[],function(){return function(t){var e=t.env,n=e.constants,i=(e.templates,e.utils,e.$);e._;return t.once("start",function(){i(window).on("keydown",function(e){if(e.keyCode===n.KEY_ESCAPE){var i=t.body.screen.attributes;"chats"===i.name&&"contact_details"===i.right&&i.contact.trigger("open_chat",i.contact)}}.bind(this)),this.updateLayout=function(e){e||(e={}),this.roster_view.isVisible()&&this.updateRosterLayout(e),t.trigger("update_css",e),this.body.$(".ps-container").perfectScrollbar("update")},this.updateRosterLayout=function(t){var e=this.body.$el.width(),i=e>=n.WIDTH_MEDIUM,s=e<n.WIDTH_NARROW,a=(n.WIDTH_TINY,this.roster_view.data.get("expanded")),o=this.roster_view.data.get("pinned");if(this.roster_view.$(".collapsed-wrap").hideIf(a),this.roster_view.$(".expanded-wrap").showIf(a),this.roster_view.$(".btn-pin").hideIf(s).text(o?"unpin":"pin"),s&&o)return void this.roster_view.data.set({expanded:!1,pinned:!1});if(!s&&!o&&this.settings.roster.pinned)return void this.roster_view.data.set({expanded:!0,pinned:!0});var r,c,l="";i||!s&&!o?(c=1050,r=300):s?(c=e-50-20-44,c>1038?(c=1038,r=288):(r=250,l=60)):(c=7*(e-50-20)/9,r=2*(e-50-20)/9,l=60),a||(r=i?48:44);var d=(e-c)/2,u=d-50,h=d-r;this.roster_view.$(".expanded-wrap").switchClass("solid",!o&&(!i||h<0)),o&&!l&&3*h<u&&(l=50+.75*(u+h)),
this.main_panel.setCustomCss({width:c,"margin-left":l}),this.roster_view.setCustomCss({width:r})},this.on("update_layout",this.updateLayout,this),this.body.addScreen("blank",{}),this.body.addScreen("login",{login:{xmpp_login:null}}),this.body.addScreen("settings",{toolbar:null,main:{wide:{settings:null}},roster:null}),this.body.addScreen("add_account",{toolbar:null,login:null}),this.body.addScreen("about",{toolbar:null,main:{wide:{about:null}},roster:null});var e=new this.ViewPath("account.settings_left"),s=new this.ViewPath("account.settings_right"),a=new this.ViewPath("account.vcard_edit");this.body.addScreen("account_settings",{toolbar:null,main:{wide:{account_settings:{left:e,right:s}}},roster:null}),this.account_settings.patchTree=function(t,n){if("vcard_edit"===n.right)return{left:e,right:a}};var o=new this.ViewPath("chat_item.content.head"),r=new this.ViewPath("chat_item.content"),c=new this.ViewPath("chat_item.content.bottom"),l=new this.ViewPath("contact.details_view");this.body.addScreen("contacts",{toolbar:null,main:{left:{contacts:null},right:{contact_placeholder:null}},roster:null}),this.body.addScreen("chats",{toolbar:null,main:{left:{chats:null},right:{chat_placeholder:null}},roster:null}),this.body.addScreen("group-chats",{toolbar:null,main:{wide:{group_chat_placeholder:null}},roster:null}),this.right_panel.patchTree=function(t,e){return"contact_details"===e.right?{details:l}:"chats"===e.name&&e.chat_item?{chat_head:o,chat_body:r,chat_bottom:c}:void 0},this.body.setScreen("blank"),this.api_account.once("settings_result",function(t){null!==t||this.accounts.length?this.body.isScreen("blank")&&this.body.setScreen("chats"):this.body.setScreen("login")},this),this.api_account.ready.then(this.api_account.start.bind(this.api_account))},t),t}}),define("xabber",["xabber-core","xabber-views","xabber-api-service","xabber-strophe","xabber-vcard","xabber-accounts","xabber-discovery","xabber-contacts","xabber-chats","xabber-ui"],function(t,e,n,i,s,a,o,r,c,l){return t.extendWith(e,n,i,s,a,o,r,c,l)});